{"remainingRequest":"/usr/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vitor/Documentos/EducomML/EducomML_Front/master/src/components/instructional_model/AvaliacaoDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/src/components/instructional_model/AvaliacaoDialog.vue","mtime":1593613519276},{"path":"/usr/lib/node_modules/@vue/cli-service-global/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/lib/node_modules/@vue/cli-service-global/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCAqIGFzIGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBdmFsaWFjYW9EaWFsb2ciLAogIHByb3BzOiBbCiAgICAiaW5zdHJ1Y09wdGlvbkNhbGwiLAogICAgImluc3RydWNUeXBlIiwKICAgICJpbnN0cnVjVmFsdWVUeXBlIiwKICAgICJkb21haW4iLAogICAgImRpYWxvZyIsCiAgICAiY29uY2VwdCIsCiAgICAibW9kdWxlIiwKICAgICJpbnN0cnVjdGlvbmFsZWxlbWVudCIKICBdLAogIGRhdGE6ICgpID0+ICh7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRpYWxvZ19hbGVydDogZmFsc2UsCiAgICBkaWFsb2dfYWxlcnQyOiBmYWxzZSwKICAgIGRpYWxvZ19hbGVydDM6IGZhbHNlLAogICAgbGFiZWxNZXNzYWdlOiBbCiAgICAgICJEZXNjcmV2YSBvIGV4ZXJjw61jaW8gYSBzZXIgY3JpYWRvLiIsCiAgICAgICJEZXNjcmV2YSBhIGF2YWxpYcOnw6NvIGEgc2VyIGNyaWFkYS4iCiAgICBdLAogICAgbGFiZWxNZXNzYWdlMjogWyJvIGV4ZXJjw61jaW8iLCAiYSBhdmFsaWHDp8OjbyJdLAogICAgbGFiZWxUeXBlOiBbIkV4ZXJjw61jaW8iLCAiQXZhbGlhw6fDo28iXSwKICAgIHF1ZXN0aW9uQWp1c3Q6ICIiLAogICAgaXRlbXNNb2JpbGVNZWRpYTogWwogICAgICB7CiAgICAgICAgaWNvbjogIm1kaS1maWxlLWltYWdlIiwKICAgICAgICBuYW1lOiAiSW1hZ2VtIgogICAgICB9LAogICAgICB7CiAgICAgICAgaWNvbjogIm1kaS1maWxlLXZpZGVvIiwKICAgICAgICBuYW1lOiAiVmlkZW8iCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpY29uOiAibWRpLWZpbGUtbXVzaWMiLAogICAgICAgIG5hbWU6ICJBdWRpbyIKICAgICAgfSwKICAgICAgewogICAgICAgIGljb246ICJtZGktbGluay12YXJpYW50IiwKICAgICAgICBuYW1lOiAiTGluayIKICAgICAgfQogICAgXSwKICAgIGxpbmtVcmxSdWxlczogW3YgPT4gISF2IHx8ICLDiSBuZWNlc3PDoXJpbyBpbnNlcmlyIGEgdXJsIGRvIHNldSBsaW5rIl0sCiAgICBpZE9iakFuc3dlckl0ZW1zOiBbCiAgICAgICJBIiwKICAgICAgIkIiLAogICAgICAiQyIsCiAgICAgICJEIiwKICAgICAgIkUiLAogICAgICAiRiIsCiAgICAgICJHIiwKICAgICAgIkgiLAogICAgICAiSSIsCiAgICAgICJKIiwKICAgICAgIksiLAogICAgICAiTCIsCiAgICAgICJNIiwKICAgICAgIk4iLAogICAgICAiTyIsCiAgICAgICJQIiwKICAgICAgIlEiLAogICAgICAiUiIsCiAgICAgICJTIiwKICAgICAgIlQiLAogICAgICAiVSIsCiAgICAgICJWIiwKICAgICAgIlciLAogICAgICAiWCIsCiAgICAgICJZIiwKICAgICAgIloiCiAgICBdLAogICAgYXZhbGlhY2FvTmFtZTogIiIsCiAgICBhdmFsaWFjYW9OYW1lUnVsZXM6IFsKICAgICAgdiA9PiAhIXYgfHwgIsOJIG5lY2Vzc8OhcmlvIGRlc2NyZXZlciB1bSBpZGVudGlmaWNhZG9yIHBhcmEgYSBhdmFsaWHDp8OjbyIsCiAgICAgIHYgPT4KICAgICAgICAodiAmJiB2Lmxlbmd0aCA8PSAyNSkgfHwKICAgICAgICAiTm9tZSBkbyBpZGVudGlmaWNhZG9yIGRhIGF2YWxpYcOnw6NvIGRldmUgdGVyIG5vIG3DoXhpbW8gMjUgY2FyYWN0ZXJlcyIKICAgIF0sCiAgICBxdWVzdGlvblR5cGVzOiBbIlF1ZXN0w6NvIE9iamV0aXZhIiwgIlF1ZXN0w6NvIERpc2N1c3NpdmEiXSwKICAgIGFsdGVybmF0aXZlRGVzY3JpcHRpb25SdWxlczogWwogICAgICB2ID0+ICEhdiB8fCAiw4kgbmVjZXNzw6FyaW8gZGVzY3JldmVyIGEgYWx0ZXJuYXRpdmEuIgogICAgXSwKICAgIG1vYmlsZU1lZGlhc0NvbnRyb2w6IFtdLAogICAgcXVlc3Rpb25zQ29udHJvbDogW10KICB9KSwKICB3YXRjaDogewogICAgZGlhbG9nOiBhc3luYyBmdW5jdGlvbigpIHsKICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpIHsKICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgdGhpcy5hdmFsaWFjYW9OYW1lID0gdGhpcy5pbnN0cnVjdGlvbmFsZWxlbWVudC5sYWJlbDsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wgPSBbXTsKICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wgPSBbXTsKICAgICAgICBpZiAodGhpcy5pbnN0cnVjdGlvbmFsZWxlbWVudCAhPT0gIiIpIHsKICAgICAgICAgIGlmICh0aGlzLmluc3RydWN0aW9uYWxlbGVtZW50Lm1vYmlsZW1lZGlhcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubW9iaWxlbWVkaWFzLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZSwKICAgICAgICAgICAgICBpbmRleE1vYmlsZQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBpZiAoZWxlbWVudE1vYmlsZS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdID09PSAiMSIpIHsKICAgICAgICAgICAgICAgIHZtLmdldFNyY0ltYWdlKAogICAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLm5hbWVmaWxlCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgYXdhaXQgdm0ubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VJbnQoZWxlbWVudE1vYmlsZS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdKSwKICAgICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBlbGVtZW50TW9iaWxlLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgIHVybDogZWxlbWVudE1vYmlsZS51cmwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdID09PSAiMiIpIHsKICAgICAgICAgICAgICAgIHZtLmdldFNyY1ZpZGVvKAogICAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLm5hbWVmaWxlCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgYXdhaXQgdm0ubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VJbnQoZWxlbWVudE1vYmlsZS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdKSwKICAgICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBlbGVtZW50TW9iaWxlLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgIHRpbWU6IGVsZW1lbnRNb2JpbGUudGltZSwKICAgICAgICAgICAgICAgICAgcGF0aDogZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgdXJsOiBlbGVtZW50TW9iaWxlLnVybAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0gPT09ICIzIikgewogICAgICAgICAgICAgICAgdm0uZ2V0U3JjQXVkaW8oCiAgICAgICAgICAgICAgICAgIGluZGV4TW9iaWxlLAogICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUubmFtZWZpbGUKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBhd2FpdCB2bS5tb2JpbGVNZWRpYXNDb250cm9sLnB1c2goewogICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0pLAogICAgICAgICAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgIHVybDogZWxlbWVudE1vYmlsZS51cmwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdID09PSAiNSIpIHsKICAgICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlSW50KGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSksCiAgICAgICAgICAgICAgICAgIG9iamVjdDogZWxlbWVudE1vYmlsZS51cmxsaW5rLAogICAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGF3YWl0IHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQucXVlc3Rpb25zLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgIGVsZW1lbnRRdWVzdGlvbiwKICAgICAgICAgICAgaW5kZXhRdWVzdGlvbgogICAgICAgICAgKSB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICBlbGVtZW50UXVlc3Rpb24udHlwZXF1ZXN0aW9uID09PQogICAgICAgICAgICAgIGBodHRwOi8vMTI3LjAuMC4xOjgwMDAvcXVlc3Rpb250eXBlLzEvYAogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sLnB1c2goewogICAgICAgICAgICAgICAgdHlwZVF1ZXN0aW9uOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgZWxlbWVudFF1ZXN0aW9uLnR5cGVxdWVzdGlvbi5zcGxpdCgiLyIpWzRdCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb25RdWVzdGlvbjogZWxlbWVudFF1ZXN0aW9uLmRlc2NyaXB0aW9ucXVlc3Rpb24sCiAgICAgICAgICAgICAgICBhbnN3ZXJzQWx0ZXJuYXRpdmVzOiBbXSwKICAgICAgICAgICAgICAgIG1vYmlsZU1lZGlhczogW10sCiAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRRdWVzdGlvbi51cmwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBhd2FpdCBlbGVtZW50UXVlc3Rpb24uYW5zd2Vyc2FsdGVybmF0aXZlcy5mb3JFYWNoKGFzeW5jIGZ1bmN0aW9uKAogICAgICAgICAgICAgICAgZWxlbWVudEFsdGVybmF0aXZlCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sWwogICAgICAgICAgICAgICAgICBpbmRleFF1ZXN0aW9uCiAgICAgICAgICAgICAgICBdLmFuc3dlcnNBbHRlcm5hdGl2ZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgIGlzVHJ1ZTogZWxlbWVudEFsdGVybmF0aXZlLmlzdHJ1ZSwKICAgICAgICAgICAgICAgICAgYW5zd2VyczogZWxlbWVudEFsdGVybmF0aXZlLmFuc3dlcnMsCiAgICAgICAgICAgICAgICAgIHVybDogZWxlbWVudEFsdGVybmF0aXZlLnVybAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgZWxlbWVudFF1ZXN0aW9uLnR5cGVxdWVzdGlvbiA9PT0KICAgICAgICAgICAgICBgaHR0cDovLzEyNy4wLjAuMTo4MDAwL3F1ZXN0aW9udHlwZS8yL2AKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgYXdhaXQgdm0ucXVlc3Rpb25zQ29udHJvbC5wdXNoKHsKICAgICAgICAgICAgICAgIHR5cGVRdWVzdGlvbjogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgIGVsZW1lbnRRdWVzdGlvbi50eXBlcXVlc3Rpb24uc3BsaXQoIi8iKVs0XQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uUXVlc3Rpb246IGVsZW1lbnRRdWVzdGlvbi5kZXNjcmlwdGlvbnF1ZXN0aW9uLAogICAgICAgICAgICAgICAgY29ycmVjdEFuc3dlcjoKICAgICAgICAgICAgICAgICAgZWxlbWVudFF1ZXN0aW9uLnJlc29sdXRpb25xdWVzdGlvblswXS5jb3JyZWN0YW5zd2VyLAogICAgICAgICAgICAgICAgbW9iaWxlTWVkaWFzOiBbXSwKICAgICAgICAgICAgICAgIHVybDogZWxlbWVudFF1ZXN0aW9uLnVybCwKICAgICAgICAgICAgICAgIHVybENvcnJlY3RBbnN3ZXI6IGVsZW1lbnRRdWVzdGlvbi5yZXNvbHV0aW9ucXVlc3Rpb25bMF0udXJsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGVsZW1lbnRRdWVzdGlvbi5tb2JpbGVtZWRpYXMpIHsKICAgICAgICAgICAgICBhd2FpdCBlbGVtZW50UXVlc3Rpb24ubW9iaWxlbWVkaWFzLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLAogICAgICAgICAgICAgICAgaW5kZXhNb2JpbGUKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGlmIChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0gPT09ICIxIikgewogICAgICAgICAgICAgICAgICB2bS5nZXRTcmNJbWFnZVF1ZXN0aW9ucygKICAgICAgICAgICAgICAgICAgICBpbmRleFF1ZXN0aW9uLAogICAgICAgICAgICAgICAgICAgIGluZGV4TW9iaWxlLAogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLm5hbWVmaWxlCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIGF3YWl0IHZtLnF1ZXN0aW9uc0NvbnRyb2xbaW5kZXhRdWVzdGlvbl0ubW9iaWxlTWVkaWFzLnB1c2goewogICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlSW50KGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSksCiAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IGVsZW1lbnRNb2JpbGUucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgICAgdXJsOiBlbGVtZW50TW9iaWxlLnVybAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdID09PSAiMiIpIHsKICAgICAgICAgICAgICAgICAgdm0uZ2V0U3JjVmlkZW9RdWVzdGlvbnMoCiAgICAgICAgICAgICAgICAgICAgaW5kZXhRdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS5uYW1lZmlsZQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sW2luZGV4UXVlc3Rpb25dLm1vYmlsZU1lZGlhcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0pLAogICAgICAgICAgICAgICAgICAgIG9iamVjdDogbnVsbCwKICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBlbGVtZW50TW9iaWxlLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgdGltZTogZWxlbWVudE1vYmlsZS50aW1lLAogICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0gPT09ICIzIikgewogICAgICAgICAgICAgICAgICB2bS5nZXRTcmNBdWRpb1F1ZXN0aW9ucygKICAgICAgICAgICAgICAgICAgICBpbmRleFF1ZXN0aW9uLAogICAgICAgICAgICAgICAgICAgIGluZGV4TW9iaWxlLAogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLm5hbWVmaWxlCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIGF3YWl0IHZtLnF1ZXN0aW9uc0NvbnRyb2xbaW5kZXhRdWVzdGlvbl0ubW9iaWxlTWVkaWFzLnB1c2goewogICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlSW50KGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSksCiAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0gPT09ICI1IikgewogICAgICAgICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sW2luZGV4UXVlc3Rpb25dLm1vYmlsZU1lZGlhcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0pLAogICAgICAgICAgICAgICAgICAgIG9iamVjdDogZWxlbWVudE1vYmlsZS51cmxsaW5rLAogICAgICAgICAgICAgICAgICAgIHVybDogZWxlbWVudE1vYmlsZS51cmwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wgPSBbXTsKICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wgPSBbXTsKICAgICAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpOwogICAgICAgIHRoaXMucmVzZXRWYXJpYWJsZXMoKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgcG9zdFF1ZXN0aW9ucygpIHsKICAgICAgdmFyIGluc3RydWN0aW9uYWxlbGVtZW50ID0gewogICAgICAgIGxhYmVsOiB0aGlzLmF2YWxpYWNhb05hbWUsCiAgICAgICAgZmtfaW5zdHJ1Y3Rpb25hbGVsZW1lbnR0eXBlOgogICAgICAgICAgYGh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9pbnN0cnVjZWxlbWVudHR5cGUvYCArCiAgICAgICAgICB0aGlzLmluc3RydWNWYWx1ZVR5cGUgKwogICAgICAgICAgYC9gCiAgICAgIH07CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciBhdXhQYXRoID0gIiI7CiAgICAgIGlmICh0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wpIHsKICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wuZm9yRWFjaChhc3luYyBtb2JpbGVtZWRpYSA9PiB7CiAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudXJsKSB7CiAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlICE9PSA1KSB7CiAgICAgICAgICAgICAgZmlyZWJhc2UKICAgICAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgICAgIC5yZWYoKQogICAgICAgICAgICAgICAgLmNoaWxkKG1vYmlsZW1lZGlhLnBhdGgpCiAgICAgICAgICAgICAgICAucHV0KG1vYmlsZW1lZGlhLm9iamVjdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgYXV4UGF0aCA9CiAgICAgICAgICAgICAgICB2bS5kb21haW4uaWRrbm93bGVkZ2Vkb21haW4udG9TdHJpbmcoKSArCiAgICAgICAgICAgICAgICAiLyIgKwogICAgICAgICAgICAgICAgRGF0ZS5ub3coKS50b1N0cmluZygpOwogICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlICE9PSA1KSB7CiAgICAgICAgICAgICAgICBmaXJlYmFzZQogICAgICAgICAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAgICAgICAgIC5yZWYoKQogICAgICAgICAgICAgICAgICAuY2hpbGQoYXV4UGF0aCkKICAgICAgICAgICAgICAgICAgLnB1dChtb2JpbGVtZWRpYS5vYmplY3QpOwoKICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnBhdGggPSBhdXhQYXRoOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgMzApOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHZhciBhdXhQYXRoUXVlc3Rpb25zID0gIiI7CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbC5mb3JFYWNoKGFzeW5jIGZ1bmN0aW9uKHF1ZXN0aW9uKSB7CiAgICAgICAgaWYgKHF1ZXN0aW9uLm1vYmlsZU1lZGlhcykgewogICAgICAgICAgYXdhaXQgcXVlc3Rpb24ubW9iaWxlTWVkaWFzLmZvckVhY2gobW9iaWxlbWVkaWEgPT4gewogICAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudXJsKSB7CiAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgIT09IDUpIHsKICAgICAgICAgICAgICAgIGZpcmViYXNlCiAgICAgICAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgICAgICAgLnJlZigpCiAgICAgICAgICAgICAgICAgIC5jaGlsZChtb2JpbGVtZWRpYS5wYXRoKQogICAgICAgICAgICAgICAgICAucHV0KG1vYmlsZW1lZGlhLm9iamVjdCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBhdXhQYXRoUXVlc3Rpb25zID0KICAgICAgICAgICAgICAgICAgdm0uZG9tYWluLmlka25vd2xlZGdlZG9tYWluLnRvU3RyaW5nKCkgKwogICAgICAgICAgICAgICAgICAiLyIgKwogICAgICAgICAgICAgICAgICBEYXRlLm5vdygpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudHlwZSAhPT0gNSkgewogICAgICAgICAgICAgICAgICBmaXJlYmFzZQogICAgICAgICAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgICAgICAgICAucmVmKCkKICAgICAgICAgICAgICAgICAgICAuY2hpbGQoYXV4UGF0aFF1ZXN0aW9ucykKICAgICAgICAgICAgICAgICAgICAucHV0KG1vYmlsZW1lZGlhLm9iamVjdCk7CgogICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5wYXRoID0gYXV4UGF0aFF1ZXN0aW9uczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCA0MSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAodGhpcy5pbnN0cnVjVHlwZSA9PT0gImRvbWluaW8iKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbihpbnN0cnVjdGlvbmFsZWxlbWVudCwgewogICAgICAgICAgZmtfaWRrbm93bGVkZ2Vkb21haW46IHRoaXMuaW5zdHJ1Y09wdGlvbkNhbGwudXJsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5pbnN0cnVjVHlwZSA9PT0gIm1vZHVsbyIpIHsKICAgICAgICBPYmplY3QuYXNzaWduKGluc3RydWN0aW9uYWxlbGVtZW50LCB7CiAgICAgICAgICBma19pZG1vZHVsZTogdGhpcy5pbnN0cnVjT3B0aW9uQ2FsbC51cmwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmluc3RydWNUeXBlID09PSAiY29uY2VpdG8iKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbihpbnN0cnVjdGlvbmFsZWxlbWVudCwgewogICAgICAgICAgZmtfaWRjb25jZXB0OiB0aGlzLmluc3RydWNPcHRpb25DYWxsLnVybAogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICh0aGlzLmluc3RydWN0aW9uYWxlbGVtZW50KSB7CiAgICAgICAgLyogQ8OTRElHTyBQQVJBIEVEScOHw4NPIERBIEFWQUxJQcOHw4NPL0VYRVJDw41DSU8gKi8KICAgICAgICBhd2FpdCBheGlvcwogICAgICAgICAgLnB1dCh2bS5pbnN0cnVjdGlvbmFsZWxlbWVudC51cmwsIGluc3RydWN0aW9uYWxlbGVtZW50LCB7CiAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIgogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24ocmVzcG9zdGEpIHsKICAgICAgICAgICAgaWYgKHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wpIHsKICAgICAgICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgICAgICAgYXdhaXQgdm0ubW9iaWxlTWVkaWFzQ29udHJvbC5mb3JFYWNoKGFzeW5jIGZ1bmN0aW9uKAogICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEsCiAgICAgICAgICAgICAgICBpbmRleG1vYmlsZQogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgLyogREFORE8gUFVUIE5PUyBNT0JJTEVNRURJQVMgUVVFIFBPU1NVRU0gVVJMKi8KICAgICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS51cmwpIHsKICAgICAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wdXQoCiAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS51cmwsCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiSW1hZ2VtICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICAgICJJbWFnZW0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGluZGV4bW9iaWxlICsgMSkgKwogICAgICAgICAgICAgICAgICAgICAgICAgICIgIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9zdGEuZGF0YS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wdXQoCiAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS51cmwsCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiVmlkZW8gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDo4MDAwL21lZGlhdHlwZS8iICsKICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG1vYmlsZW1lZGlhLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG1vYmlsZW1lZGlhLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBtb2JpbGVtZWRpYS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG1vYmlsZW1lZGlhLnRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRpbnN0cnVjdGlvbmFsZWxlbWVudDogcmVzcG9zdGEuZGF0YS51cmwKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudXJsLAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkF1ZGlvICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gNSkgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dCgKICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnVybCwKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJMaW5rICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG1vYmlsZW1lZGlhLm9iamVjdCwKICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvKiBEQU5ETyBQT1NUIE5PUyBNT0JJTEVNRURJQVMgUVVFIE7Dg08gUE9TU1VFTSBVUkwqLwogICAgICAgICAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDo4MDAwL21vYmlsZW1lZGlhL2AsCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiSW1hZ2VtICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICAgICAiSW1hZ2VtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleG1vYmlsZSArIDEpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3Bvc3RhLmRhdGEubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRpbnN0cnVjdGlvbmFsZWxlbWVudDogcmVzcG9zdGEuZGF0YS51cmwKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImkiLCBpKTsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tb2JpbGVtZWRpYS9gLAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIlZpZGVvICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbW9iaWxlbWVkaWEudGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDMpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tb2JpbGVtZWRpYS9gLAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkF1ZGlvICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDUpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tb2JpbGVtZWRpYS9gLAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkxpbmsgIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDo4MDAwL21lZGlhdHlwZS8iICsKICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbW9iaWxlbWVkaWEub2JqZWN0LAogICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXdhaXQgdm0ucXVlc3Rpb25zQ29udHJvbC5mb3JFYWNoKGFzeW5jIGZ1bmN0aW9uKAogICAgICAgICAgICAgIGVsZW1lbnRRdWVzdGlvbiwKICAgICAgICAgICAgICBpbmRleFF1ZXN0aW9uCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGlmIChlbGVtZW50UXVlc3Rpb24udXJsKSB7CiAgICAgICAgICAgICAgICBhd2FpdCBheGlvcwogICAgICAgICAgICAgICAgICAucHV0KAogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRRdWVzdGlvbi51cmwsCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgb3JkZXJxdWVzdGlvbjogaW5kZXhRdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9ucXVlc3Rpb246IGVsZW1lbnRRdWVzdGlvbi5kZXNjcmlwdGlvblF1ZXN0aW9uLAogICAgICAgICAgICAgICAgICAgICAgdHlwZXF1ZXN0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICBgaHR0cDovLzEyNy4wLjAuMTo4MDAwL3F1ZXN0aW9udHlwZS9gICsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFF1ZXN0aW9uLnR5cGVRdWVzdGlvbiArCiAgICAgICAgICAgICAgICAgICAgICAgIGAvYCwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHZtLmluc3RydWN0aW9uYWxlbGVtZW50LnVybAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24ocmVzcG9zdGEyKSB7CiAgICAgICAgICAgICAgICAgICAgLypEQU5ETyBQVVQgTk9TIE1PQklMRU1FRElBUyBEQVMgUVVFU1TDlUVTIENPTSBVUkwqLwoKICAgICAgICAgICAgICAgICAgICBhd2FpdCBlbGVtZW50UXVlc3Rpb24ubW9iaWxlTWVkaWFzLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLAogICAgICAgICAgICAgICAgICAgICAgaW5kZXhNb2JpbGUKICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50TW9iaWxlLnVybCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiSW1hZ2VtICIgKyAoaW5kZXhNb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkltYWdlbSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5kZXhNb2JpbGUgKyAxKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBRdWVzdMOjbyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3Bvc3RhMi5kYXRhLm9yZGVycXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiVmlkZW8gIiArIChpbmRleE1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDo4MDAwL21lZGlhdHlwZS8iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLnR5cGUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBlbGVtZW50TW9iaWxlLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBlbGVtZW50TW9iaWxlLm5hbWVmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogZWxlbWVudE1vYmlsZS50aW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUudHlwZSA9PT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkF1ZGlvICIgKyAoaW5kZXhNb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUudHlwZSA9PT0gNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkxpbmsgIiArIChpbmRleE1vYmlsZSArIDEpICsgdm0uaSsrICogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogZWxlbWVudE1vYmlsZS5vYmplY3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50TW9iaWxlLnR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tb2JpbGVtZWRpYS9gLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkltYWdlbSAiICsgKGluZGV4TW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IGVsZW1lbnRNb2JpbGUucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSW1hZ2VtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleE1vYmlsZSArIDEpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIFF1ZXN0w6NvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9zdGEyLmRhdGEub3JkZXJxdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50TW9iaWxlLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tb2JpbGVtZWRpYS9gLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIlZpZGVvICIgKyAoaW5kZXhNb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5wYXRoLnNwbGl0KCIvIilbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBlbGVtZW50TW9iaWxlLnRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvbW9iaWxlbWVkaWEvYCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJBdWRpbyAiICsgKGluZGV4TW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBlbGVtZW50TW9iaWxlLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSA1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvbW9iaWxlbWVkaWEvYCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJMaW5rICIgKyAoaW5kZXhNb2JpbGUgKyAxKSArIHZtLmkrKyAqIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IGVsZW1lbnRNb2JpbGUub2JqZWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50UXVlc3Rpb24udHlwZVF1ZXN0aW9uID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBlbGVtZW50UXVlc3Rpb24uYW5zd2Vyc0FsdGVybmF0aXZlcy5mb3JFYWNoKAogICAgICAgICAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbihlbGVtZW50QWx0ZXJuYXRpdmUsIGluZGV4QWx0ZXJuYXRpdmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudEFsdGVybmF0aXZlLnVybCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50QWx0ZXJuYXRpdmUudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRvYmphbnN3ZXI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5pZE9iakFuc3dlckl0ZW1zW2luZGV4QWx0ZXJuYXRpdmVdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcnM6IGVsZW1lbnRBbHRlcm5hdGl2ZS5hbnN3ZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzdHJ1ZTogZWxlbWVudEFsdGVybmF0aXZlLmlzVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJhbnN3ZXJhbHRlcm5hdGl2ZXM6IGluZGV4QWx0ZXJuYXRpdmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vMTI3LjAuMC4xOjgwMDAvYW5zd2Vyc2FsdGVybmF0aXZlcy9gLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRvYmphbnN3ZXI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5pZE9iakFuc3dlckl0ZW1zW2luZGV4QWx0ZXJuYXRpdmVdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcnM6IGVsZW1lbnRBbHRlcm5hdGl2ZS5hbnN3ZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzdHJ1ZTogZWxlbWVudEFsdGVybmF0aXZlLmlzVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJhbnN3ZXJhbHRlcm5hdGl2ZXM6IGluZGV4QWx0ZXJuYXRpdmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFF1ZXN0aW9uLnR5cGVRdWVzdGlvbiA9PT0gMikgewogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50UXVlc3Rpb24udXJsQ29ycmVjdEFuc3dlciwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3RhbnN3ZXI6IGVsZW1lbnRRdWVzdGlvbi5jb3JyZWN0QW5zd2VyCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zCiAgICAgICAgICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAgICAgICAgIGBodHRwOi8vMTI3LjAuMC4xOjgwMDAvcXVlc3Rpb24vYCwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBvcmRlcnF1ZXN0aW9uOiBpbmRleFF1ZXN0aW9uICsgMSwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9ucXVlc3Rpb246IGVsZW1lbnRRdWVzdGlvbi5kZXNjcmlwdGlvblF1ZXN0aW9uLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRpbnN0cnVjdGlvbmFsZWxlbWVudDogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICB0eXBlcXVlc3Rpb246CiAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vMTI3LjAuMC4xOjgwMDAvcXVlc3Rpb250eXBlL2AgKwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50UXVlc3Rpb24udHlwZVF1ZXN0aW9uICsKICAgICAgICAgICAgICAgICAgICAgICAgYC9gCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIgogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YTIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFF1ZXN0aW9uLnR5cGVRdWVzdGlvbiA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudFF1ZXN0aW9uLmFuc3dlcnNBbHRlcm5hdGl2ZXMuZm9yRWFjaCgKICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24oZWxlbWVudEFsdGVybmF0aXZlLCBpbmRleEFsdGVybmF0aXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vMTI3LjAuMC4xOjgwMDAvYW5zd2Vyc2FsdGVybmF0aXZlcy9gLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZG9iamFuc3dlcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5pZE9iakFuc3dlckl0ZW1zW2luZGV4QWx0ZXJuYXRpdmVdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnN3ZXJzOiBlbGVtZW50QWx0ZXJuYXRpdmUuYW5zd2VycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXN0cnVlOiBlbGVtZW50QWx0ZXJuYXRpdmUuaXNUcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyYW5zd2VyYWx0ZXJuYXRpdmVzOiBpbmRleEFsdGVybmF0aXZlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50UXVlc3Rpb24udHlwZVF1ZXN0aW9uID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgICBgaHR0cDovLzEyNy4wLjAuMTo4MDAwL3Jlc29sdXRpb25xdWVzdGlvbi9gLAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGFuc3dlcjogZWxlbWVudFF1ZXN0aW9uLmNvcnJlY3RBbnN3ZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8qIEPDk0RJR08gUEFSQSBDUklBw4fDg08gREEgQVZBTElBw4fDg08vRVhFUkPDjUNJTyAqLwogICAgICAgIGF3YWl0IGF4aW9zCiAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgYGh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9pbnN0cnVjdGlvbmFsZWxlbWVudC9gLAogICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudCwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uKHJlc3Bvc3RhKSB7CiAgICAgICAgICAgIGlmICh2bS5tb2JpbGVNZWRpYXNDb250cm9sKSB7CiAgICAgICAgICAgICAgLyogSU5TRVLDh8ODTyBET1MgTU9CSUxFTUVESUFTIERBIEFWQUxJQcOHw4NPL0VYRVJDw41DSU8gKi8KICAgICAgICAgICAgICBhd2FpdCB2bS5tb2JpbGVNZWRpYXNDb250cm9sLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYSwKICAgICAgICAgICAgICAgIGluZGV4bW9iaWxlCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gMSkgewogICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvbW9iaWxlbWVkaWEvYCwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkltYWdlbSAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnR5cGUgKwogICAgICAgICAgICAgICAgICAgICAgICAiLyIsCiAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbW9iaWxlbWVkaWEucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBtb2JpbGVtZWRpYS5wYXRoLnNwbGl0KCIvIilbMV0sCiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICAgIkltYWdlbSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgKGluZGV4bW9iaWxlICsgMSkgKwogICAgICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgICAgICByZXNwb3N0YS5kYXRhLmxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDo4MDAwL21vYmlsZW1lZGlhL2AsCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJWaWRlbyAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnR5cGUgKwogICAgICAgICAgICAgICAgICAgICAgICAiLyIsCiAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbW9iaWxlbWVkaWEucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBtb2JpbGVtZWRpYS5wYXRoLnNwbGl0KCIvIilbMV0sCiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG1vYmlsZW1lZGlhLnRpbWUsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRpbnN0cnVjdGlvbmFsZWxlbWVudDogcmVzcG9zdGEuZGF0YS51cmwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAzKSB7CiAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tb2JpbGVtZWRpYS9gLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQXVkaW8gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgcGF0aDogbW9iaWxlbWVkaWEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIgogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gNSkgewogICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvbW9iaWxlbWVkaWEvYCwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkxpbmsgIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgcGF0aDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbW9iaWxlbWVkaWEub2JqZWN0LAogICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIgogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXdhaXQgdm0ucXVlc3Rpb25zQ29udHJvbC5mb3JFYWNoKGFzeW5jIGZ1bmN0aW9uKAogICAgICAgICAgICAgIGVsZW1lbnRRdWVzdGlvbiwKICAgICAgICAgICAgICBpbmRleFF1ZXN0aW9uCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGF3YWl0IGF4aW9zCiAgICAgICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICAgICAgYGh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9xdWVzdGlvbi9gLAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25xdWVzdGlvbjogZWxlbWVudFF1ZXN0aW9uLmRlc2NyaXB0aW9uUXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgICAgb3JkZXJxdWVzdGlvbjogaW5kZXhRdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB0eXBlcXVlc3Rpb246CiAgICAgICAgICAgICAgICAgICAgICBgaHR0cDovLzEyNy4wLjAuMTo4MDAwL3F1ZXN0aW9udHlwZS9gICsKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRRdWVzdGlvbi50eXBlUXVlc3Rpb24gKwogICAgICAgICAgICAgICAgICAgICAgYC9gCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YTIpIHsKICAgICAgICAgICAgICAgICAgLyogSU5TRVLDh8ODTyBET1MgTU9CSUxFTUVESUFTIERBUyBRVUVTVMOVRVMgREEgQVZBTElBw4fDg08vRVhFUkNJQ0lPICovCiAgICAgICAgICAgICAgICAgIGF3YWl0IGVsZW1lbnRRdWVzdGlvbi5tb2JpbGVNZWRpYXMuZm9yRWFjaChhc3luYyBmdW5jdGlvbigKICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLAogICAgICAgICAgICAgICAgICAgIGluZGV4TW9iaWxlCiAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50TW9iaWxlLnR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvbW9iaWxlbWVkaWEvYCwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiSW1hZ2VtICIgKyAoaW5kZXhNb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBlbGVtZW50TW9iaWxlLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJbWFnZW0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5kZXhNb2JpbGUgKyAxKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIFF1ZXN0w6NvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb3N0YTIuZGF0YS5vcmRlcnF1ZXN0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDo4MDAwL21vYmlsZW1lZGlhL2AsCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIlZpZGVvICIgKyAoaW5kZXhNb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBlbGVtZW50TW9iaWxlLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBlbGVtZW50TW9iaWxlLnRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDo4MDAwL21vYmlsZW1lZGlhL2AsCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkF1ZGlvICIgKyAoaW5kZXhNb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5wYXRoLnNwbGl0KCIvIilbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50TW9iaWxlLnR5cGUgPT09IDUpIHsKICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvbW9iaWxlbWVkaWEvYCwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiTGluayAiICsgKGluZGV4TW9iaWxlICsgMSkgKyB2bS5pKysgKiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLnR5cGUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBlbGVtZW50TW9iaWxlLm9iamVjdCwKICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50UXVlc3Rpb24udHlwZVF1ZXN0aW9uID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudFF1ZXN0aW9uLmFuc3dlcnNBbHRlcm5hdGl2ZXMuZm9yRWFjaCgKICAgICAgICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uKGVsZW1lbnRBbHRlcm5hdGl2ZSwgaW5kZXhBbHRlcm5hdGl2ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vMTI3LjAuMC4xOjgwMDAvYW5zd2Vyc2FsdGVybmF0aXZlcy9gLAogICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkb2JqYW5zd2VyOiB2bS5pZE9iakFuc3dlckl0ZW1zW2luZGV4QWx0ZXJuYXRpdmVdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5zd2VyczogZWxlbWVudEFsdGVybmF0aXZlLmFuc3dlcnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc3RydWU6IGVsZW1lbnRBbHRlcm5hdGl2ZS5pc1RydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcmFuc3dlcmFsdGVybmF0aXZlczogaW5kZXhBbHRlcm5hdGl2ZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50UXVlc3Rpb24udHlwZVF1ZXN0aW9uID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vMTI3LjAuMC4xOjgwMDAvcmVzb2x1dGlvbnF1ZXN0aW9uL2AsCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3RhbnN3ZXI6IGVsZW1lbnRRdWVzdGlvbi5jb3JyZWN0QW5zd2VyLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRNb2JpbGVNZWRpYShtb2JpbGVNZWRpYVR5cGUpIHsKICAgICAgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMSkgewogICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgIHR5cGU6IG1vYmlsZU1lZGlhVHlwZSwKICAgICAgICAgIG9iamVjdDogbnVsbCwKICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICBwYXRoOiBudWxsLAogICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICB1cmw6IG51bGwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChtb2JpbGVNZWRpYVR5cGUgPT09IDIpIHsKICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICB0eXBlOiBtb2JpbGVNZWRpYVR5cGUsCiAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgIHVybDogbnVsbAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMykgewogICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgIHR5cGU6IG1vYmlsZU1lZGlhVHlwZSwKICAgICAgICAgIG9iamVjdDogbnVsbCwKICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgIHVybDogbnVsbAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gNCkgewogICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgIHR5cGU6IG1vYmlsZU1lZGlhVHlwZSArIDEsCiAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICB1cmw6IG51bGwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGRlbGV0ZU1vYmlsZU1lZGlhKGlkTW9iaWxlTWVkaWEpIHsKICAgICAgaWYgKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbFtpZE1vYmlsZU1lZGlhXS51cmwpIHsKICAgICAgICBpZiAodGhpcy5tb2JpbGVNZWRpYXNDb250cm9sW2lkTW9iaWxlTWVkaWFdLnR5cGUgIT09IDUpIHsKICAgICAgICAgIGF3YWl0IGZpcmViYXNlCiAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgLnJlZigpCiAgICAgICAgICAgIC5jaGlsZCh0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2xbaWRNb2JpbGVNZWRpYV0ucGF0aCkKICAgICAgICAgICAgLmRlbGV0ZSgpOwogICAgICAgIH0KICAgICAgICBhd2FpdCBheGlvcy5kZWxldGUodGhpcy5tb2JpbGVNZWRpYXNDb250cm9sW2lkTW9iaWxlTWVkaWFdLnVybCwgewogICAgICAgICAgYXV0aDogewogICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoaWRNb2JpbGVNZWRpYSA9PSAwKSB7CiAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sLnNoaWZ0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sLnNwbGljZShpZE1vYmlsZU1lZGlhLCAxKTsKICAgICAgfQogICAgfSwKICAgIGF0dWFsaXphTWV0YSgpIHsKICAgICAgaWYgKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sLmZvckVhY2gobW9iaWxlbWVkaWEgPT4gewogICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLm9iamVjdCAmJiAhbW9iaWxlbWVkaWEudXJsKSB7CiAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG1vYmlsZW1lZGlhLm9iamVjdCk7CiAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEucmVzb2x1dGlvbiA9IGltZy53aWR0aCArICJYIiArIGltZy5oZWlnaHQ7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgdmFyIHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidmlkZW8iKTsKICAgICAgICAgICAgICB2YXIgc291cmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic291cmNlIik7CiAgICAgICAgICAgICAgc291cmNlLnNldEF0dHJpYnV0ZSgKICAgICAgICAgICAgICAgICJzcmMiLAogICAgICAgICAgICAgICAgVVJMLmNyZWF0ZU9iamVjdFVSTChtb2JpbGVtZWRpYS5vYmplY3QpCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB2aWRlby5hcHBlbmRDaGlsZChzb3VyY2UpOwogICAgICAgICAgICAgIHZpZGVvLm9uY2FucGxheSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEucmVzb2x1dGlvbiA9CiAgICAgICAgICAgICAgICAgIHZpZGVvLnZpZGVvV2lkdGggKyAiWCIgKyB2aWRlby52aWRlb0hlaWdodDsKICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnRpbWUgPSB2aWRlby5kdXJhdGlvbjsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXRTcmNJbWFnZShpbmRleE1vYmlsZSwgcGF0aCwgbmFtZWZpbGUpIHsKICAgICAgLyp2YXIgb2JqID0ge307Ki8KICAgICAgaWYgKHBhdGgpIHsKICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgIGF3YWl0IGZpcmViYXNlCiAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAucmVmKHBhdGgpCiAgICAgICAgICAuZ2V0RG93bmxvYWRVUkwoKQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24odXJsKSB7CiAgICAgICAgICAgIC8qdm0udmlld0ltYWdlU3JjID0gdXJsOyovCiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICJibG9iIjsKICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBibG9iID0geGhyLnJlc3BvbnNlOwogICAgICAgICAgICAgIHZhciBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBuYW1lZmlsZSwgewogICAgICAgICAgICAgICAgdHlwZTogYmxvYi50eXBlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gdm0uYXV4R2V0U3JjLnB1c2goZmlsZSk7CiAgICAgICAgICAgICAgdm0uYXR1YWxpemFPYmooZmlsZSwgaW5kZXhNb2JpbGUpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB4aHIub3BlbigiR0VUIiwgdXJsKTsKICAgICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ2V0U3JjVmlkZW8oaW5kZXhNb2JpbGUsIHBhdGgsIG5hbWVmaWxlKSB7CiAgICAgIC8qdmFyIG9iaiA9IHt9OyovCiAgICAgIGlmIChwYXRoKSB7CiAgICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgICBhd2FpdCBmaXJlYmFzZQogICAgICAgICAgLnN0b3JhZ2UoKQogICAgICAgICAgLnJlZihwYXRoKQogICAgICAgICAgLmdldERvd25sb2FkVVJMKCkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHVybCkgewogICAgICAgICAgICAvKnZtLnZpZXdWaWRlb1NyYyA9IHVybDsqLwogICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAiYmxvYiI7CiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB2YXIgYmxvYiA9IHhoci5yZXNwb25zZTsKICAgICAgICAgICAgICB2YXIgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgbmFtZWZpbGUsIHsKICAgICAgICAgICAgICAgIHR5cGU6IGJsb2IudHlwZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIC8vIHZtLmF1eEdldFNyYy5wdXNoKGZpbGUpOwogICAgICAgICAgICAgIHZtLmF0dWFsaXphT2JqKGZpbGUsIGluZGV4TW9iaWxlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgeGhyLm9wZW4oIkdFVCIsIHVybCk7CiAgICAgICAgICAgIHhoci5zZW5kKCk7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGdldFNyY0F1ZGlvKGluZGV4TW9iaWxlLCBwYXRoLCBuYW1lZmlsZSkgewogICAgICAvKnZhciBvYmogPSB7fTsqLwogICAgICBpZiAocGF0aCkgewogICAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgICAgYXdhaXQgZmlyZWJhc2UKICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgIC5yZWYocGF0aCkKICAgICAgICAgIC5nZXREb3dubG9hZFVSTCgpCiAgICAgICAgICAudGhlbihmdW5jdGlvbih1cmwpIHsKICAgICAgICAgICAgLyp2bS52aWV3QXVkaW9TcmMgPSB1cmw7Ki8KICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gImJsb2IiOwogICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgdmFyIGJsb2IgPSB4aHIucmVzcG9uc2U7CiAgICAgICAgICAgICAgdmFyIGZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIG5hbWVmaWxlLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBibG9iLnR5cGUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAvLyB2bS5hdXhHZXRTcmMucHVzaChmaWxlKTsKICAgICAgICAgICAgICB2bS5hdHVhbGl6YU9iaihmaWxlLCBpbmRleE1vYmlsZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHhoci5vcGVuKCJHRVQiLCB1cmwpOwogICAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhdHVhbGl6YU9iaihmaWxlLCBpbmRleE1vYmlsZSkgewogICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2xbaW5kZXhNb2JpbGVdLm9iamVjdCA9IGZpbGU7CiAgICB9LAogICAgYWRkUXVlc3Rpb24ocXVlc3Rpb25UeXBlKSB7CiAgICAgIGlmIChxdWVzdGlvblR5cGUgPT09IDEpIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICB0eXBlUXVlc3Rpb246IHF1ZXN0aW9uVHlwZSwKICAgICAgICAgIGRlc2NyaXB0aW9uUXVlc3Rpb246IG51bGwsCiAgICAgICAgICBhbnN3ZXJzQWx0ZXJuYXRpdmVzOiBbXSwKICAgICAgICAgIG1vYmlsZU1lZGlhczogW10sCiAgICAgICAgICB1cmw6IG51bGwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChxdWVzdGlvblR5cGUgPT09IDIpIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICB0eXBlUXVlc3Rpb246IHF1ZXN0aW9uVHlwZSwKICAgICAgICAgIGRlc2NyaXB0aW9uUXVlc3Rpb246IG51bGwsCiAgICAgICAgICBjb3JyZWN0QW5zd2VyOiBudWxsLAogICAgICAgICAgbW9iaWxlTWVkaWFzOiBbXSwKICAgICAgICAgIHVybDogbnVsbCwKICAgICAgICAgIHVybENvcnJlY3RBbnN3ZXI6IG51bGwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGRlbGV0ZVF1ZXN0aW9uKGlkUXVlc3Rpb24pIHsKICAgICAgaWYgKHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS51cmwpIHsKICAgICAgICBhd2FpdCBheGlvcy5kZWxldGUodGhpcy5xdWVzdGlvbnNDb250cm9sW2lkUXVlc3Rpb25dLnVybCwgewogICAgICAgICAgYXV0aDogewogICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoaWRRdWVzdGlvbiA9PSAwKSB7CiAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sLnNoaWZ0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sLnNwbGljZShpZFF1ZXN0aW9uLCAxKTsKICAgICAgfQogICAgfSwKICAgIGFkZEFsdGVybmF0aXZlKGlkUXVlc3Rpb24pIHsKICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sW2lkUXVlc3Rpb25dLmFuc3dlcnNBbHRlcm5hdGl2ZXMucHVzaCh7CiAgICAgICAgaXNUcnVlOiBmYWxzZSwKICAgICAgICBhbnN3ZXJzOiBudWxsLAogICAgICAgIHVybDogbnVsbAogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBkZWxldGVBbHRlcm5hdGl2ZShpZFF1ZXN0aW9uLCBpZEFsdGVybmF0aXZlKSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0uYW5zd2Vyc0FsdGVybmF0aXZlc1tpZEFsdGVybmF0aXZlXS51cmwKICAgICAgKSB7CiAgICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKAogICAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sW2lkUXVlc3Rpb25dLmFuc3dlcnNBbHRlcm5hdGl2ZXNbaWRBbHRlcm5hdGl2ZV0KICAgICAgICAgICAgLnVybCwKICAgICAgICAgIHsKICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApOwogICAgICB9CiAgICAgIGlmIChpZEFsdGVybmF0aXZlID09IDApIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0uYW5zd2Vyc0FsdGVybmF0aXZlcy5zaGlmdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzLnNwbGljZSgKICAgICAgICAgIGlkQWx0ZXJuYXRpdmUsCiAgICAgICAgICAxCiAgICAgICAgKTsKICAgICAgfQogICAgfSwKICAgIGFkZE1vYmlsZU1lZGlhUXVlc3Rpb24oaWRRdWVzdGlvbiwgbW9iaWxlTWVkaWFUeXBlKSB7CiAgICAgIGlmIChtb2JpbGVNZWRpYVR5cGUgPT09IDEpIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzLnB1c2goewogICAgICAgICAgdHlwZTogbW9iaWxlTWVkaWFUeXBlLAogICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgcmVzb2x1dGlvbjogbnVsbCwKICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgIHVybDogbnVsbAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMikgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMucHVzaCh7CiAgICAgICAgICB0eXBlOiBtb2JpbGVNZWRpYVR5cGUsCiAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgIHVybDogbnVsbAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMykgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMucHVzaCh7CiAgICAgICAgICB0eXBlOiBtb2JpbGVNZWRpYVR5cGUsCiAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICBwYXRoOiBudWxsLAogICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICB1cmw6IG51bGwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChtb2JpbGVNZWRpYVR5cGUgPT09IDQpIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzLnB1c2goewogICAgICAgICAgdHlwZTogbW9iaWxlTWVkaWFUeXBlICsgMSwKICAgICAgICAgIG9iamVjdDogbnVsbCwKICAgICAgICAgIHVybDogbnVsbAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZGVsZXRlTW9iaWxlTWVkaWFRdWVzdGlvbihpZFF1ZXN0aW9uLCBpZE1vYmlsZU1lZGlhKSB7CiAgICAgIGlmICh0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzW2lkTW9iaWxlTWVkaWFdLnVybCkgewogICAgICAgIGlmICgKICAgICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXNbaWRNb2JpbGVNZWRpYV0udHlwZSAhPT0KICAgICAgICAgIDUKICAgICAgICApIHsKICAgICAgICAgIGF3YWl0IGZpcmViYXNlCiAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgLnJlZigpCiAgICAgICAgICAgIC5jaGlsZCgKICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzW2lkTW9iaWxlTWVkaWFdLnBhdGgKICAgICAgICAgICAgKQogICAgICAgICAgICAuZGVsZXRlKCk7CiAgICAgICAgfQogICAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZSgKICAgICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXNbaWRNb2JpbGVNZWRpYV0udXJsLAogICAgICAgICAgewogICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIH0KICAgICAgaWYgKGlkTW9iaWxlTWVkaWEgPT0gMCkgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMuc2hpZnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzLnNwbGljZShpZE1vYmlsZU1lZGlhLCAxKTsKICAgICAgfQogICAgfSwKICAgIGF0dWFsaXphTWV0YVF1ZXN0aW9ucygpIHsKICAgICAgaWYgKHRoaXMucXVlc3Rpb25zQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sLmZvckVhY2gocXVlc3Rpb24gPT4gewogICAgICAgICAgaWYgKHF1ZXN0aW9uLm1vYmlsZU1lZGlhcykgewogICAgICAgICAgICBxdWVzdGlvbi5tb2JpbGVNZWRpYXMuZm9yRWFjaChtb2JpbGVtZWRpYSA9PiB7CiAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLm9iamVjdCAmJiAhbW9iaWxlbWVkaWEudXJsKSB7CiAgICAgICAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gMSkgewogICAgICAgICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG1vYmlsZW1lZGlhLm9iamVjdCk7CiAgICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uID0gaW1nLndpZHRoICsgIlgiICsgaW1nLmhlaWdodDsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgICB2YXIgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ2aWRlbyIpOwogICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic291cmNlIik7CiAgICAgICAgICAgICAgICAgIHNvdXJjZS5zZXRBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgICAgICAgInNyYyIsCiAgICAgICAgICAgICAgICAgICAgVVJMLmNyZWF0ZU9iamVjdFVSTChtb2JpbGVtZWRpYS5vYmplY3QpCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIHZpZGVvLmFwcGVuZENoaWxkKHNvdXJjZSk7CiAgICAgICAgICAgICAgICAgIHZpZGVvLm9uY2FucGxheSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnJlc29sdXRpb24gPQogICAgICAgICAgICAgICAgICAgICAgdmlkZW8udmlkZW9XaWR0aCArICJYIiArIHZpZGVvLnZpZGVvSGVpZ2h0OwogICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnRpbWUgPSB2aWRlby5kdXJhdGlvbjsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXR1YWxpemFPYmpRdWVzdGlvbnMoZmlsZSwgaW5kZXhRdWVzdGlvbiwgaW5kZXhNb2JpbGUpIHsKICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sW2luZGV4UXVlc3Rpb25dLm1vYmlsZU1lZGlhc1sKICAgICAgICBpbmRleE1vYmlsZQogICAgICBdLm9iamVjdCA9IGZpbGU7CiAgICB9LAogICAgYXN5bmMgZ2V0U3JjSW1hZ2VRdWVzdGlvbnMoaW5kZXhRdWVzdGlvbiwgaW5kZXhNb2JpbGUsIHBhdGgsIG5hbWVmaWxlKSB7CiAgICAgIC8qdmFyIG9iaiA9IHt9OyovCiAgICAgIGlmIChwYXRoKSB7CiAgICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgICBhd2FpdCBmaXJlYmFzZQogICAgICAgICAgLnN0b3JhZ2UoKQogICAgICAgICAgLnJlZihwYXRoKQogICAgICAgICAgLmdldERvd25sb2FkVVJMKCkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHVybCkgewogICAgICAgICAgICAvKnZtLnZpZXdJbWFnZVNyYyA9IHVybDsqLwogICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAiYmxvYiI7CiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB2YXIgYmxvYiA9IHhoci5yZXNwb25zZTsKICAgICAgICAgICAgICB2YXIgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgbmFtZWZpbGUsIHsKICAgICAgICAgICAgICAgIHR5cGU6IGJsb2IudHlwZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIC8qdm0uYXV4R2V0U3JjUXVlc3Rpb25zLnB1c2goZmlsZSk7Ki8KICAgICAgICAgICAgICB2bS5hdHVhbGl6YU9ialF1ZXN0aW9ucyhmaWxlLCBpbmRleFF1ZXN0aW9uLCBpbmRleE1vYmlsZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHhoci5vcGVuKCJHRVQiLCB1cmwpOwogICAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXRTcmNWaWRlb1F1ZXN0aW9ucyhpbmRleFF1ZXN0aW9uLCBpbmRleE1vYmlsZSwgcGF0aCwgbmFtZWZpbGUpIHsKICAgICAgLyp2YXIgb2JqID0ge307Ki8KICAgICAgaWYgKHBhdGgpIHsKICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgIGF3YWl0IGZpcmViYXNlCiAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAucmVmKHBhdGgpCiAgICAgICAgICAuZ2V0RG93bmxvYWRVUkwoKQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24odXJsKSB7CiAgICAgICAgICAgIC8qdm0udmlld1ZpZGVvU3JjID0gdXJsOyovCiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICJibG9iIjsKICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBibG9iID0geGhyLnJlc3BvbnNlOwogICAgICAgICAgICAgIHZhciBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBuYW1lZmlsZSwgewogICAgICAgICAgICAgICAgdHlwZTogYmxvYi50eXBlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gdm0uYXV4R2V0U3JjUXVlc3Rpb25zLnB1c2goZmlsZSk7CiAgICAgICAgICAgICAgdm0uYXR1YWxpemFPYmpRdWVzdGlvbnMoZmlsZSwgaW5kZXhRdWVzdGlvbiwgaW5kZXhNb2JpbGUpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB4aHIub3BlbigiR0VUIiwgdXJsKTsKICAgICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ2V0U3JjQXVkaW9RdWVzdGlvbnMoaW5kZXhRdWVzdGlvbiwgaW5kZXhNb2JpbGUsIHBhdGgsIG5hbWVmaWxlKSB7CiAgICAgIC8qdmFyIG9iaiA9IHt9OyovCiAgICAgIGlmIChwYXRoKSB7CiAgICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgICBhd2FpdCBmaXJlYmFzZQogICAgICAgICAgLnN0b3JhZ2UoKQogICAgICAgICAgLnJlZihwYXRoKQogICAgICAgICAgLmdldERvd25sb2FkVVJMKCkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHVybCkgewogICAgICAgICAgICAvKnZtLnZpZXdBdWRpb1NyYyA9IHVybDsqLwogICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAiYmxvYiI7CiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB2YXIgYmxvYiA9IHhoci5yZXNwb25zZTsKICAgICAgICAgICAgICB2YXIgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgbmFtZWZpbGUsIHsKICAgICAgICAgICAgICAgIHR5cGU6IGJsb2IudHlwZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIC8vIHZtLmF1eEdldFNyY1F1ZXN0aW9ucy5wdXNoKGZpbGUpOwogICAgICAgICAgICAgIHZtLmF0dWFsaXphT2JqUXVlc3Rpb25zKGZpbGUsIGluZGV4UXVlc3Rpb24sIGluZGV4TW9iaWxlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgeGhyLm9wZW4oIkdFVCIsIHVybCk7CiAgICAgICAgICAgIHhoci5zZW5kKCk7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHZhbGlkYXRlKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICBpZiAodGhpcy5xdWVzdGlvbnNDb250cm9sLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgICAgICB2YXIgYXV4ID0gMTsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5xdWVzdGlvbnNDb250cm9sLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChhdXggPT09IDEpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5xdWVzdGlvbnNDb250cm9sW2ldLnR5cGVRdWVzdGlvbiA9PT0gMSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMucXVlc3Rpb25zQ29udHJvbFtpXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICB2bS5xdWVzdGlvbkFqdXN0ID0gaSArIDE7CiAgICAgICAgICAgICAgICAgIHZtLmRpYWxvZ19hbGVydDMgPSB0cnVlOwogICAgICAgICAgICAgICAgICBhdXggPSAwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICAgIHZhciBqID0gMDsKICAgICAgICAgICAgICAgICAgaiA8IHRoaXMucXVlc3Rpb25zQ29udHJvbFtpXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgaisrCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucXVlc3Rpb25zQ29udHJvbFtpXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzW2pdLmlzVHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICBqID09PQogICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzLmxlbmd0aCAtIDEKICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgdm0ucXVlc3Rpb25BanVzdCA9IGkgKyAxOwogICAgICAgICAgICAgICAgICAgIHZtLmRpYWxvZ19hbGVydDIgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGF1eCA9IDA7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChhdXggPT09IDEpIHsKICAgICAgICAgICAgdmFyIGF1eE51bWJlclF1ZXN0aW9ucyA9IHRoaXMucXVlc3Rpb25zQ29udHJvbC5sZW5ndGg7CiAgICAgICAgICAgIGF3YWl0IHRoaXMucG9zdFF1ZXN0aW9ucygpOwogICAgICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wgPSBbXTsKICAgICAgICAgICAgYXdhaXQgdGhpcy4kZW1pdCgiaW5zdHJ1Y2Nsb3NlIiwgYXV4TnVtYmVyUXVlc3Rpb25zKTsKICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXNldFZhcmlhYmxlcygpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmRpYWxvZ19hbGVydCA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVzZXRWYXJpYWJsZXMoKSB7CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbCA9IFtdOwogICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wgPSBbXTsKICAgICAgdGhpcy5hdmFsaWFjYW9OYW1lID0gIiI7CiAgICB9LAogICAgYXN5bmMgcmVzZXQoKSB7CiAgICAgIGF3YWl0IHRoaXMuJGVtaXQoImluc3RydWNjbG9zZSIpOwogICAgICBhd2FpdCB0aGlzLnJlc2V0VmFyaWFibGVzKCk7CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbCA9IFtdOwogICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wgPSBbXTsKICAgIH0sCiAgICByZXNldFZhbGlkYXRpb24oKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["AvaliacaoDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AvaliacaoDialog.vue","sourceRoot":"components/instructional_model","sourcesContent":["<template>\n  <v-container class=\"pa-0\">\n    <v-card>\n      <v-card-title style=\"background-color:#63B0B0; color:white;\">\n        <v-col>\n          <span class=\"headline\">\n            <p>{{labelMessage[instrucValueType - 1]}}</p>\n          </span>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-menu\n            top=\"top\"\n            width=\"300px\"\n            origin=\"center center\"\n            :offset-y=\"true\"\n            transition=\"scale-transition\"\n          >\n            <template v-slot:activator=\"{ on }\">\n              <v-btn v-on=\"on\" large color=\"primary\" style=\"color:white;\" class=\"mb-3\">\n                <strong>Adicionar MobileMedia</strong>\n                <v-icon class=\"ml-2\" large color=\"white\">mdi-plus-box</v-icon>\n              </v-btn>\n            </template>\n\n            <v-list>\n              <v-list-item\n                v-for=\"(item, i) in itemsMobileMedia\"\n                :key=\"i\"\n                @click=\"addMobileMedia(i+1)\"\n              >\n                <v-icon x-large color=\"blue\">{{item.icon}}</v-icon>\n                <v-list-item-title style=\"font-size: 1.2em; color:#2196F3;\" class=\"ml-1\">\n                  <strong>{{item.name}}</strong>\n                </v-list-item-title>\n              </v-list-item>\n            </v-list>\n          </v-menu>\n        </v-col>\n      </v-card-title>\n      <v-card-text>\n        <v-form ref=\"form\" v-model=\"valid\" lazy-validation class=\"mt-3\">\n          <label class=\"pt-2\" style=\"font-size:1.3em;\" for=\"avaliacaoNameArea\">\n            <strong>Identificador d{{labelMessage2[instrucValueType - 1]}}:</strong>\n          </label>\n          <v-text-field\n            id=\"avaliacaoNameArea\"\n            v-model=\"avaliacaoName\"\n            :counter=\"25\"\n            :rules=\"avaliacaoNameRules\"\n            required\n            class=\"mt-2 mb-4\"\n          ></v-text-field>\n          <div v-if=\"mobileMediasControl.length > 0\">\n            <label class=\"mb-6 pt-2\" style=\"font-size:1.3em;\">\n              <strong>MobileMedias d{{labelMessage2[instrucValueType - 1]}}:</strong>\n            </label>\n            <div class=\"mt-8\"></div>\n            <div v-for=\"(mobilemedia,i) in mobileMediasControl\" :key=\"i\">\n              <v-row v-if=\"mobilemedia.type === 1\">\n                <v-spacer></v-spacer>\n                <v-file-input\n                  style=\"width: 165px;\"\n                  label=\"UPLOAD IMAGE\"\n                  filled\n                  @change=\"atualizaMeta\"\n                  v-model=\"mobilemedia.object\"\n                  accept=\"image/*\"\n                  prepend-icon=\"mdi-camera\"\n                ></v-file-input>\n                <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                  <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\">mdi-minus-box</v-icon>\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-row>\n              <v-row v-if=\"mobilemedia.type === 2\">\n                <v-spacer></v-spacer>\n                <v-file-input\n                  style=\"width: 165px;\"\n                  label=\"UPLOAD VIDEO\"\n                  filled\n                  @change=\"atualizaMeta\"\n                  v-model=\"mobilemedia.object\"\n                  accept=\"video/*\"\n                  prepend-icon=\"mdi-video\"\n                ></v-file-input>\n                <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                  <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\">mdi-minus-box</v-icon>\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-row>\n              <v-row v-if=\"mobilemedia.type === 3\">\n                <v-spacer></v-spacer>\n                <v-file-input\n                  style=\"width: 165px;\"\n                  label=\"UPLOAD AUDIO\"\n                  filled\n                  v-model=\"mobilemedia.object\"\n                  accept=\"audio/*\"\n                  prepend-icon=\"mdi-file-music\"\n                ></v-file-input>\n                <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                  <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\">mdi-minus-box</v-icon>\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-row>\n              <v-row v-if=\"mobilemedia.type === 5\" class=\"mb-2\">\n                <v-spacer></v-spacer>\n                <v-text-field\n                  v-model=\"mobilemedia.object\"\n                  :rules=\"linkUrlRules\"\n                  label=\"Url\"\n                  required\n                ></v-text-field>\n                <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                  <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\">mdi-minus-box</v-icon>\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-row>\n            </div>\n          </div>\n          <v-app-bar color=\"#D2A64D\" dense dark height=\"45px\" style=\"margin-bottom: -15px;\">\n            <v-col cols=\"8\">\n              <v-toolbar-title style=\"font-size:1.2em;\">\n                <strong>Lista de questes d{{labelMessage2[instrucValueType - 1]}}</strong>\n              </v-toolbar-title>\n            </v-col>\n            <v-col cols=\"2\" class=\"ml-8\">\n              <v-menu\n                top=\"top\"\n                width=\"300px\"\n                origin=\"center center\"\n                :offset-y=\"true\"\n                transition=\"scale-transition\"\n              >\n                <template v-slot:activator=\"{ on }\">\n                  <v-btn v-on=\"on\" color=\"white\" style=\"color:black; font-size: 1.2em;\">\n                    <strong>Adicionar Questo</strong>\n                    <v-icon class=\"ml-2\" large color=\"black\">mdi-plus-box</v-icon>\n                  </v-btn>\n                </template>\n\n                <v-list>\n                  <v-list-item @click=\"addQuestion(1)\">\n                    <v-list-item-title>Questo Objetiva</v-list-item-title>\n                  </v-list-item>\n                  <v-list-item @click=\"addQuestion(2)\">\n                    <v-list-item-title>Questo Discussiva</v-list-item-title>\n                  </v-list-item>\n                </v-list>\n              </v-menu>\n            </v-col>\n          </v-app-bar>\n          <v-container>\n            <v-row v-for=\"(item,i) in questionsControl\" :key=\"i\">\n              <v-col cols=\"10\" style=\"background-color:grey;color:white;\" class=\"mt-5\">\n                <h3>Questo {{i+1}}</h3>\n              </v-col>\n              <v-col cols=\"2\">\n                <v-menu\n                  top=\"top\"\n                  width=\"300px\"\n                  origin=\"center center\"\n                  :offset-y=\"true\"\n                  transition=\"scale-transition\"\n                >\n                  <template v-slot:activator=\"{ on }\">\n                    <v-btn icon v-on=\"on\" class=\"ml-5\">\n                      <v-icon class=\"mt-6\" x-large color=\"primary\">mdi-plus-box</v-icon>\n                    </v-btn>\n                  </template>\n\n                  <v-list>\n                    <v-list-item\n                      v-for=\"(itemType, idItemType) in itemsMobileMedia\"\n                      :key=\"idItemType\"\n                      @click=\"addMobileMediaQuestion(i, idItemType+1)\"\n                    >\n                      <v-icon x-large color=\"blue\">{{itemType.icon}}</v-icon>\n                      <v-list-item-title style=\"font-size: 1.2em; color:#2196F3;\" class=\"ml-1\">\n                        <strong>{{itemType.name}}</strong>\n                      </v-list-item-title>\n                    </v-list-item>\n                  </v-list>\n                </v-menu>\n                <v-btn icon @click=\"deleteQuestion(i)\">\n                  <v-icon class=\"ml-8 mt-6\" x-large color=\"red\">mdi-close-box</v-icon>\n                </v-btn>\n              </v-col>\n              <v-row>\n                <v-col>\n                  <v-text-field\n                    v-model=\"questionsControl[i].descriptionQuestion\"\n                    label=\"Descrio da questo\"\n                    required\n                  ></v-text-field>\n                </v-col>\n                <v-col cols=\"3\" class=\"mt-3\" v-if=\"item.typeQuestion === 1\">\n                  <v-btn\n                    color=\"primary\"\n                    style=\"color:white;\"\n                    @click=\"addAlternative(i)\"\n                  >Adicionar Alternativa</v-btn>\n                </v-col>\n              </v-row>\n              <div\n                v-if=\"questionsControl[i].mobileMedias.length > 0\"\n                style=\"display: block; width: 100%; margin-top:-20px;\"\n              >\n                <v-col cols=\"12\">\n                  <div\n                    v-for=\"(mobilemedia, idmobile) in questionsControl[i].mobileMedias\"\n                    :key=\"idmobile\"\n                  >\n                    <v-row v-if=\"mobilemedia.type === 1\">\n                      <v-spacer></v-spacer>\n                      <v-file-input\n                        style=\"width: 165px;\"\n                        label=\"UPLOAD IMAGE\"\n                        filled\n                        @change=\"atualizaMetaQuestions\"\n                        v-model=\"mobilemedia.object\"\n                        accept=\"image/*\"\n                        prepend-icon=\"mdi-camera\"\n                      ></v-file-input>\n                      <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                        <v-icon\n                          x-large\n                          color=\"red\"\n                          @click=\"deleteMobileMediaQuestion(i, idmobile)\"\n                        >mdi-minus-box</v-icon>\n                      </v-btn>\n                      <v-spacer></v-spacer>\n                    </v-row>\n                    <v-row v-if=\"mobilemedia.type === 2\">\n                      <v-spacer></v-spacer>\n                      <v-file-input\n                        style=\"width: 165px;\"\n                        label=\"UPLOAD VIDEO\"\n                        filled\n                        @change=\"atualizaMetaQuestions\"\n                        v-model=\"mobilemedia.object\"\n                        accept=\"video/*\"\n                        prepend-icon=\"mdi-video\"\n                      ></v-file-input>\n                      <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                        <v-icon\n                          x-large\n                          color=\"red\"\n                          @click=\"deleteMobileMediaQuestion(i, idmobile)\"\n                        >mdi-minus-box</v-icon>\n                      </v-btn>\n                      <v-spacer></v-spacer>\n                    </v-row>\n                    <v-row v-if=\"mobilemedia.type === 3\">\n                      <v-spacer></v-spacer>\n                      <v-file-input\n                        style=\"width: 165px;\"\n                        label=\"UPLOAD AUDIO\"\n                        filled\n                        v-model=\"mobilemedia.object\"\n                        accept=\"audio/*\"\n                        prepend-icon=\"mdi-file-music\"\n                      ></v-file-input>\n                      <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                        <v-icon\n                          x-large\n                          color=\"red\"\n                          @click=\"deleteMobileMediaQuestion(i, idmobile)\"\n                        >mdi-minus-box</v-icon>\n                      </v-btn>\n                      <v-spacer></v-spacer>\n                    </v-row>\n                    <v-row v-if=\"mobilemedia.type === 5\" class=\"mb-2\">\n                      <v-spacer></v-spacer>\n                      <v-text-field\n                        v-model=\"mobilemedia.object\"\n                        :rules=\"linkUrlRules\"\n                        label=\"Url\"\n                        required\n                      ></v-text-field>\n                      <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                        <v-icon\n                          x-large\n                          color=\"red\"\n                          @click=\"deleteMobileMediaQuestion(i, idmobile)\"\n                        >mdi-minus-box</v-icon>\n                      </v-btn>\n                      <v-spacer></v-spacer>\n                    </v-row>\n                  </div>\n                </v-col>\n              </div>\n              <div\n                v-if=\"item.typeQuestion === 1\"\n                style=\"display: block; width: 100%; margin-top:-20px;\"\n              >\n                <p style=\"color:#f43e00; margin-bottom: -10px;\">\n                  <strong>*AVISO:</strong> Marque o checkbox da alternativa caso ela esteja correta.\n                </p>\n                <div\n                  style=\"display: flex; margin-bottom:-30px;\"\n                  v-for=\"(itemAlternative,indexAlternative) in questionsControl[i].answersAlternatives\"\n                  :key=\"indexAlternative\"\n                >\n                  <v-col cols=\"1\" class=\"mt-5\" style=\" margin-right: -40px;font-size:1.3em;\">\n                    <strong>{{idObjAnswerItems[indexAlternative]}})</strong>\n                  </v-col>\n                  <v-col cols=\"7\">\n                    <v-text-field\n                      v-model=\"questionsControl[i].answersAlternatives[indexAlternative].answers\"\n                      label=\"Descrio da alternativa\"\n                      :rules=\"alternativeDescriptionRules\"\n                      required\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"1\" style=\"margin-right:-40px;\">\n                    <v-checkbox\n                      v-model=\"questionsControl[i].answersAlternatives[indexAlternative].isTrue\"\n                    ></v-checkbox>\n                  </v-col>\n                  <v-col cols=\"1\">\n                    <v-btn icon=\"icon\" @click=\"deleteAlternative(i, indexAlternative)\">\n                      <v-icon large class=\"mt-7\" color=\"red\">mdi-minus-box</v-icon>\n                    </v-btn>\n                  </v-col>\n                </div>\n              </div>\n              <div\n                v-else-if=\"item.typeQuestion === 2\"\n                style=\"display: block; width: 100%; margin-top:-20px;\"\n              >\n                <v-col cols=\"12\">\n                  <v-textarea\n                    v-model=\"questionsControl[i].correctAnswer\"\n                    background-color=\"#F2F3F3\"\n                    clearable\n                    clear-icon=\"mdi-close-circle\"\n                    class=\"mt-2\"\n                    name=\"input-3-1\"\n                    label=\"Resposta da questo\"\n                    filled\n                    auto-grow\n                    required\n                  ></v-textarea>\n                </v-col>\n              </div>\n            </v-row>\n          </v-container>\n        </v-form>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn color=\"red\" height=\"49\" dark large @click=\"reset()\">\n          Close\n          <v-icon dark right>mdi-close</v-icon>\n        </v-btn>\n        <v-btn color=\"success\" height=\"49\" dark large @click=\"validate()\">\n          Save\n          <v-icon dark right>mdi-content-save</v-icon>\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n    <div class=\"text-center\">\n      <v-dialog v-model=\"dialog_alert\" width=\"500\">\n        <v-card>\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\">ALERTA!</v-card-title>\n          <v-card-text\n            class=\"mt-3\"\n            style=\"font-size: 1.3em;\"\n          >Para criar uma avaliao,  necessrio criar pelo uma questo.</v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" text @click=\"dialog_alert = false\">Ok</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n    <div class=\"text-center\">\n      <v-dialog v-model=\"dialog_alert2\" width=\"500\">\n        <v-card>\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\">ALERTA!</v-card-title>\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\">\n            Questes objetivas necessitam de pelo menos uma alternativa correta.\n            <br />\n            Ajuste a questo {{questionAjust}}.\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" text @click=\"dialog_alert2 = false\">Ok</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n    <div class=\"text-center\">\n      <v-dialog v-model=\"dialog_alert3\" width=\"500\">\n        <v-card>\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\">ALERTA!</v-card-title>\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\">\n            Questes objetivas necessitam de pelo menos uma alternativa.\n            <br />\n            Ajuste a questo {{questionAjust}}.\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" text @click=\"dialog_alert3 = false\">Ok</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n  </v-container>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport * as firebase from \"firebase\";\nexport default {\n  name: \"AvaliacaoDialog\",\n  props: [\n    \"instrucOptionCall\",\n    \"instrucType\",\n    \"instrucValueType\",\n    \"domain\",\n    \"dialog\",\n    \"concept\",\n    \"module\",\n    \"instructionalelement\"\n  ],\n  data: () => ({\n    valid: true,\n    dialog_alert: false,\n    dialog_alert2: false,\n    dialog_alert3: false,\n    labelMessage: [\n      \"Descreva o exerccio a ser criado.\",\n      \"Descreva a avaliao a ser criada.\"\n    ],\n    labelMessage2: [\"o exerccio\", \"a avaliao\"],\n    labelType: [\"Exerccio\", \"Avaliao\"],\n    questionAjust: \"\",\n    itemsMobileMedia: [\n      {\n        icon: \"mdi-file-image\",\n        name: \"Imagem\"\n      },\n      {\n        icon: \"mdi-file-video\",\n        name: \"Video\"\n      },\n      {\n        icon: \"mdi-file-music\",\n        name: \"Audio\"\n      },\n      {\n        icon: \"mdi-link-variant\",\n        name: \"Link\"\n      }\n    ],\n    linkUrlRules: [v => !!v || \" necessrio inserir a url do seu link\"],\n    idObjAnswerItems: [\n      \"A\",\n      \"B\",\n      \"C\",\n      \"D\",\n      \"E\",\n      \"F\",\n      \"G\",\n      \"H\",\n      \"I\",\n      \"J\",\n      \"K\",\n      \"L\",\n      \"M\",\n      \"N\",\n      \"O\",\n      \"P\",\n      \"Q\",\n      \"R\",\n      \"S\",\n      \"T\",\n      \"U\",\n      \"V\",\n      \"W\",\n      \"X\",\n      \"Y\",\n      \"Z\"\n    ],\n    avaliacaoName: \"\",\n    avaliacaoNameRules: [\n      v => !!v || \" necessrio descrever um identificador para a avaliao\",\n      v =>\n        (v && v.length <= 25) ||\n        \"Nome do identificador da avaliao deve ter no mximo 25 caracteres\"\n    ],\n    questionTypes: [\"Questo Objetiva\", \"Questo Discussiva\"],\n    alternativeDescriptionRules: [\n      v => !!v || \" necessrio descrever a alternativa.\"\n    ],\n    mobileMediasControl: [],\n    questionsControl: []\n  }),\n  watch: {\n    dialog: async function() {\n      if (this.instructionalelement) {\n        var vm = this;\n        this.$nextTick(function() {\n          this.avaliacaoName = this.instructionalelement.label;\n        });\n        this.questionsControl = [];\n        this.mobileMediasControl = [];\n        if (this.instructionalelement !== \"\") {\n          if (this.instructionalelement.mobilemedias.length > 0) {\n            await this.instructionalelement.mobilemedias.forEach(async function(\n              elementMobile,\n              indexMobile\n            ) {\n              if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"1\") {\n                vm.getSrcImage(\n                  indexMobile,\n                  elementMobile.path,\n                  elementMobile.namefile\n                );\n                await vm.mobileMediasControl.push({\n                  type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                  object: null,\n                  resolution: elementMobile.resolution,\n                  path: elementMobile.path,\n                  namefile: elementMobile.namefile,\n                  url: elementMobile.url\n                });\n              } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"2\") {\n                vm.getSrcVideo(\n                  indexMobile,\n                  elementMobile.path,\n                  elementMobile.namefile\n                );\n                await vm.mobileMediasControl.push({\n                  type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                  object: null,\n                  resolution: elementMobile.resolution,\n                  time: elementMobile.time,\n                  path: elementMobile.path,\n                  namefile: elementMobile.namefile,\n                  url: elementMobile.url\n                });\n              } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"3\") {\n                vm.getSrcAudio(\n                  indexMobile,\n                  elementMobile.path,\n                  elementMobile.namefile\n                );\n                await vm.mobileMediasControl.push({\n                  type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                  object: null,\n                  path: elementMobile.path,\n                  namefile: elementMobile.namefile,\n                  url: elementMobile.url\n                });\n              } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"5\") {\n                await vm.mobileMediasControl.push({\n                  type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                  object: elementMobile.urllink,\n                  url: elementMobile.url\n                });\n              }\n            });\n          }\n\n          await this.instructionalelement.questions.forEach(async function(\n            elementQuestion,\n            indexQuestion\n          ) {\n            if (\n              elementQuestion.typequestion ===\n              `http://127.0.0.1:8000/questiontype/1/`\n            ) {\n              await vm.questionsControl.push({\n                typeQuestion: parseInt(\n                  elementQuestion.typequestion.split(\"/\")[4]\n                ),\n                descriptionQuestion: elementQuestion.descriptionquestion,\n                answersAlternatives: [],\n                mobileMedias: [],\n                url: elementQuestion.url\n              });\n              await elementQuestion.answersalternatives.forEach(async function(\n                elementAlternative\n              ) {\n                await vm.questionsControl[\n                  indexQuestion\n                ].answersAlternatives.push({\n                  isTrue: elementAlternative.istrue,\n                  answers: elementAlternative.answers,\n                  url: elementAlternative.url\n                });\n              });\n            } else if (\n              elementQuestion.typequestion ===\n              `http://127.0.0.1:8000/questiontype/2/`\n            ) {\n              await vm.questionsControl.push({\n                typeQuestion: parseInt(\n                  elementQuestion.typequestion.split(\"/\")[4]\n                ),\n                descriptionQuestion: elementQuestion.descriptionquestion,\n                correctAnswer:\n                  elementQuestion.resolutionquestion[0].correctanswer,\n                mobileMedias: [],\n                url: elementQuestion.url,\n                urlCorrectAnswer: elementQuestion.resolutionquestion[0].url\n              });\n            }\n            if (elementQuestion.mobilemedias) {\n              await elementQuestion.mobilemedias.forEach(async function(\n                elementMobile,\n                indexMobile\n              ) {\n                if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"1\") {\n                  vm.getSrcImageQuestions(\n                    indexQuestion,\n                    indexMobile,\n                    elementMobile.path,\n                    elementMobile.namefile\n                  );\n                  await vm.questionsControl[indexQuestion].mobileMedias.push({\n                    type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                    object: null,\n                    resolution: elementMobile.resolution,\n                    path: elementMobile.path,\n                    namefile: elementMobile.namefile,\n                    url: elementMobile.url\n                  });\n                } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"2\") {\n                  vm.getSrcVideoQuestions(\n                    indexQuestion,\n                    indexMobile,\n                    elementMobile.path,\n                    elementMobile.namefile\n                  );\n                  await vm.questionsControl[indexQuestion].mobileMedias.push({\n                    type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                    object: null,\n                    resolution: elementMobile.resolution,\n                    time: elementMobile.time,\n                    path: elementMobile.path,\n                    namefile: elementMobile.namefile,\n                    url: elementMobile.url\n                  });\n                } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"3\") {\n                  vm.getSrcAudioQuestions(\n                    indexQuestion,\n                    indexMobile,\n                    elementMobile.path,\n                    elementMobile.namefile\n                  );\n                  await vm.questionsControl[indexQuestion].mobileMedias.push({\n                    type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                    object: null,\n                    path: elementMobile.path,\n                    namefile: elementMobile.namefile,\n                    url: elementMobile.url\n                  });\n                } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"5\") {\n                  await vm.questionsControl[indexQuestion].mobileMedias.push({\n                    type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                    object: elementMobile.urllink,\n                    url: elementMobile.url\n                  });\n                }\n              });\n            }\n          });\n        }\n      } else {\n        this.questionsControl = [];\n        this.mobileMediasControl = [];\n        this.resetValidation();\n        this.resetVariables();\n      }\n    }\n  },\n  methods: {\n    async postQuestions() {\n      var instructionalelement = {\n        label: this.avaliacaoName,\n        fk_instructionalelementtype:\n          `http://127.0.0.1:8000/instrucelementtype/` +\n          this.instrucValueType +\n          `/`\n      };\n      var vm = this;\n      var auxPath = \"\";\n      if (this.mobileMediasControl) {\n        this.mobileMediasControl.forEach(async mobilemedia => {\n          if (mobilemedia.url) {\n            if (mobilemedia.type !== 5) {\n              firebase\n                .storage()\n                .ref()\n                .child(mobilemedia.path)\n                .put(mobilemedia.object);\n            }\n          } else {\n            setTimeout(function() {\n              auxPath =\n                vm.domain.idknowledgedomain.toString() +\n                \"/\" +\n                Date.now().toString();\n              if (mobilemedia.type !== 5) {\n                firebase\n                  .storage()\n                  .ref()\n                  .child(auxPath)\n                  .put(mobilemedia.object);\n\n                mobilemedia.path = auxPath;\n              }\n            }, 30);\n          }\n        });\n      }\n      var auxPathQuestions = \"\";\n      this.questionsControl.forEach(async function(question) {\n        if (question.mobileMedias) {\n          await question.mobileMedias.forEach(mobilemedia => {\n            if (mobilemedia.url) {\n              if (mobilemedia.type !== 5) {\n                firebase\n                  .storage()\n                  .ref()\n                  .child(mobilemedia.path)\n                  .put(mobilemedia.object);\n              }\n            } else {\n              setTimeout(function() {\n                auxPathQuestions =\n                  vm.domain.idknowledgedomain.toString() +\n                  \"/\" +\n                  Date.now().toString();\n                if (mobilemedia.type !== 5) {\n                  firebase\n                    .storage()\n                    .ref()\n                    .child(auxPathQuestions)\n                    .put(mobilemedia.object);\n\n                  mobilemedia.path = auxPathQuestions;\n                }\n              }, 41);\n            }\n          });\n        }\n      });\n\n      if (this.instrucType === \"dominio\") {\n        Object.assign(instructionalelement, {\n          fk_idknowledgedomain: this.instrucOptionCall.url\n        });\n      } else if (this.instrucType === \"modulo\") {\n        Object.assign(instructionalelement, {\n          fk_idmodule: this.instrucOptionCall.url\n        });\n      } else if (this.instrucType === \"conceito\") {\n        Object.assign(instructionalelement, {\n          fk_idconcept: this.instrucOptionCall.url\n        });\n      }\n      if (this.instructionalelement) {\n        /* CDIGO PARA EDIO DA AVALIAO/EXERCCIO */\n        await axios\n          .put(vm.instructionalelement.url, instructionalelement, {\n            auth: {\n              username: \"admin\",\n              password: \"admin\"\n            }\n          })\n          .then(async function(resposta) {\n            if (vm.mobileMediasControl) {\n              var i = 0;\n              await vm.mobileMediasControl.forEach(async function(\n                mobilemedia,\n                indexmobile\n              ) {\n                /* DANDO PUT NOS MOBILEMEDIAS QUE POSSUEM URL*/\n                if (mobilemedia.url) {\n                  if (mobilemedia.type === 1) {\n                    await axios.put(\n                      mobilemedia.url,\n                      {\n                        label: \"Imagem \" + (indexmobile + 1),\n                        fk_idmediatype:\n                          \"http://localhost:8000/mediatype/\" +\n                          mobilemedia.type +\n                          \"/\",\n                        path: mobilemedia.path,\n                        resolution: mobilemedia.resolution,\n                        namefile: mobilemedia.namefile,\n                        description:\n                          \"Imagem \" +\n                          (indexmobile + 1) +\n                          \" \" +\n                          resposta.data.label,\n                        time: null,\n                        textfull: null,\n                        textshort: null,\n                        urllink: null,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url\n                      },\n                      {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\"\n                        }\n                      }\n                    );\n                  } else if (mobilemedia.type === 2) {\n                    await axios.put(\n                      mobilemedia.url,\n                      {\n                        label: \"Video \" + (indexmobile + 1),\n                        fk_idmediatype:\n                          \"http://localhost:8000/mediatype/\" +\n                          mobilemedia.type +\n                          \"/\",\n                        path: mobilemedia.path,\n                        resolution: mobilemedia.resolution,\n                        namefile: mobilemedia.namefile,\n                        description: null,\n                        time: mobilemedia.time,\n                        textfull: null,\n                        textshort: null,\n                        urllink: null,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url\n                      },\n                      {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\"\n                        }\n                      }\n                    );\n                  } else if (mobilemedia.type === 3) {\n                    await axios.put(\n                      mobilemedia.url,\n                      {\n                        label: \"Audio \" + (indexmobile + 1),\n                        fk_idmediatype:\n                          \"http://localhost:8000/mediatype/\" +\n                          mobilemedia.type +\n                          \"/\",\n                        path: mobilemedia.path,\n                        resolution: null,\n                        namefile: mobilemedia.namefile,\n                        description: null,\n                        time: null,\n                        textfull: null,\n                        textshort: null,\n                        urllink: null,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url\n                      },\n                      {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\"\n                        }\n                      }\n                    );\n                  } else if (mobilemedia.type === 5) {\n                    await axios.put(\n                      mobilemedia.url,\n                      {\n                        label: \"Link \" + (indexmobile + 1),\n                        fk_idmediatype:\n                          \"http://localhost:8000/mediatype/\" +\n                          mobilemedia.type +\n                          \"/\",\n                        path: null,\n                        resolution: null,\n                        namefile: null,\n                        description: null,\n                        time: null,\n                        textfull: null,\n                        textshort: null,\n                        urllink: mobilemedia.object,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url\n                      },\n                      {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\"\n                        }\n                      }\n                    );\n                  }\n                } else {\n                  /* DANDO POST NOS MOBILEMEDIAS QUE NO POSSUEM URL*/\n                  if (mobilemedia.type === 1) {\n                    await axios.post(\n                      `http://localhost:8000/mobilemedia/`,\n                      {\n                        label: \"Imagem \" + (indexmobile + 1),\n                        fk_idmediatype:\n                          \"http://localhost:8000/mediatype/\" +\n                          mobilemedia.type +\n                          \"/\",\n                        path: mobilemedia.path,\n                        resolution: mobilemedia.resolution,\n                        namefile: mobilemedia.path.split(\"/\")[1],\n                        description:\n                          \"Imagem \" +\n                          (indexmobile + 1) +\n                          \" \" +\n                          resposta.data.label,\n                        time: null,\n                        textfull: null,\n                        textshort: null,\n                        urllink: null,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url\n                      },\n                      {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\"\n                        }\n                      }\n                    );\n                  } else if (mobilemedia.type === 2) {\n                    console.log(\"i\", i);\n                    await axios.post(\n                      `http://localhost:8000/mobilemedia/`,\n                      {\n                        label: \"Video \" + (indexmobile + 1),\n                        fk_idmediatype:\n                          \"http://localhost:8000/mediatype/\" +\n                          mobilemedia.type +\n                          \"/\",\n                        path: mobilemedia.path,\n                        resolution: mobilemedia.resolution,\n                        namefile: mobilemedia.path.split(\"/\")[1],\n                        description: null,\n                        time: mobilemedia.time,\n                        textfull: null,\n                        textshort: null,\n                        urllink: null,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url\n                      },\n                      {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\"\n                        }\n                      }\n                    );\n                  } else if (mobilemedia.type === 3) {\n                    await axios.post(\n                      `http://localhost:8000/mobilemedia/`,\n                      {\n                        label: \"Audio \" + (indexmobile + 1),\n                        fk_idmediatype:\n                          \"http://localhost:8000/mediatype/\" +\n                          mobilemedia.type +\n                          \"/\",\n                        path: mobilemedia.path,\n                        resolution: null,\n                        namefile: mobilemedia.path.split(\"/\")[1],\n                        description: null,\n                        time: null,\n                        textfull: null,\n                        textshort: null,\n                        urllink: null,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url\n                      },\n                      {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\"\n                        }\n                      }\n                    );\n                  } else if (mobilemedia.type === 5) {\n                    await axios.post(\n                      `http://localhost:8000/mobilemedia/`,\n                      {\n                        label: \"Link \" + (indexmobile + 1),\n                        fk_idmediatype:\n                          \"http://localhost:8000/mediatype/\" +\n                          mobilemedia.type +\n                          \"/\",\n                        path: null,\n                        resolution: null,\n                        namefile: null,\n                        description: null,\n                        time: null,\n                        textfull: null,\n                        textshort: null,\n                        urllink: mobilemedia.object,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url\n                      },\n                      {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\"\n                        }\n                      }\n                    );\n                  }\n                }\n              });\n            }\n\n            await vm.questionsControl.forEach(async function(\n              elementQuestion,\n              indexQuestion\n            ) {\n              if (elementQuestion.url) {\n                await axios\n                  .put(\n                    elementQuestion.url,\n                    {\n                      orderquestion: indexQuestion,\n                      descriptionquestion: elementQuestion.descriptionQuestion,\n                      typequestion:\n                        `http://127.0.0.1:8000/questiontype/` +\n                        elementQuestion.typeQuestion +\n                        `/`,\n                      fk_idinstructionalelement: vm.instructionalelement.url\n                    },\n                    {\n                      auth: {\n                        username: \"admin\",\n                        password: \"admin\"\n                      }\n                    }\n                  )\n                  .then(async function(resposta2) {\n                    /*DANDO PUT NOS MOBILEMEDIAS DAS QUESTES COM URL*/\n\n                    await elementQuestion.mobileMedias.forEach(async function(\n                      elementMobile,\n                      indexMobile\n                    ) {\n                      if (elementMobile.url) {\n                        if (elementMobile.type === 1) {\n                          await axios.put(\n                            elementMobile.url,\n                            {\n                              label: \"Imagem \" + (indexMobile + 1),\n                              fk_idmediatype:\n                                \"http://localhost:8000/mediatype/\" +\n                                elementMobile.type +\n                                \"/\",\n                              path: elementMobile.path,\n                              resolution: elementMobile.resolution,\n                              namefile: elementMobile.namefile,\n                              description:\n                                \"Imagem \" +\n                                (indexMobile + 1) +\n                                \" Questo\" +\n                                resposta2.data.orderquestion,\n                              time: null,\n                              textfull: null,\n                              textshort: null,\n                              urllink: null,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url\n                            },\n                            {\n                              auth: {\n                                username: \"admin\",\n                                password: \"admin\"\n                              }\n                            }\n                          );\n                        } else if (elementMobile.type === 2) {\n                          await axios.put(\n                            elementMobile.url,\n                            {\n                              label: \"Video \" + (indexMobile + 1),\n                              fk_idmediatype:\n                                \"http://localhost:8000/mediatype/\" +\n                                elementMobile.type +\n                                \"/\",\n                              path: elementMobile.path,\n                              resolution: elementMobile.resolution,\n                              namefile: elementMobile.namefile,\n                              description: null,\n                              time: elementMobile.time,\n                              textfull: null,\n                              textshort: null,\n                              urllink: null,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url\n                            },\n                            {\n                              auth: {\n                                username: \"admin\",\n                                password: \"admin\"\n                              }\n                            }\n                          );\n                        } else if (elementMobile.type === 3) {\n                          await axios.put(\n                            elementMobile.url,\n                            {\n                              label: \"Audio \" + (indexMobile + 1),\n                              fk_idmediatype:\n                                \"http://localhost:8000/mediatype/\" +\n                                elementMobile.type +\n                                \"/\",\n                              path: elementMobile.path,\n                              resolution: null,\n                              namefile: elementMobile.namefile,\n                              description: null,\n                              time: null,\n                              textfull: null,\n                              textshort: null,\n                              urllink: null,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url\n                            },\n                            {\n                              auth: {\n                                username: \"admin\",\n                                password: \"admin\"\n                              }\n                            }\n                          );\n                        } else if (elementMobile.type === 5) {\n                          await axios.put(\n                            elementMobile.url,\n                            {\n                              label: \"Link \" + (indexMobile + 1) + vm.i++ * 0,\n                              fk_idmediatype:\n                                \"http://localhost:8000/mediatype/\" +\n                                elementMobile.type +\n                                \"/\",\n                              path: null,\n                              resolution: null,\n                              namefile: null,\n                              description: null,\n                              time: null,\n                              textfull: null,\n                              textshort: null,\n                              urllink: elementMobile.object,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url\n                            },\n                            {\n                              auth: {\n                                username: \"admin\",\n                                password: \"admin\"\n                              }\n                            }\n                          );\n                        }\n                      } else {\n                        if (elementMobile.type === 1) {\n                          await axios.post(\n                            `http://localhost:8000/mobilemedia/`,\n                            {\n                              label: \"Imagem \" + (indexMobile + 1),\n                              fk_idmediatype:\n                                \"http://localhost:8000/mediatype/\" +\n                                elementMobile.type +\n                                \"/\",\n                              path: elementMobile.path,\n                              resolution: elementMobile.resolution,\n                              namefile: elementMobile.path.split(\"/\")[1],\n                              description:\n                                \"Imagem \" +\n                                (indexMobile + 1) +\n                                \" Questo\" +\n                                resposta2.data.orderquestion,\n                              time: null,\n                              textfull: null,\n                              textshort: null,\n                              urllink: null,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url\n                            },\n                            {\n                              auth: {\n                                username: \"admin\",\n                                password: \"admin\"\n                              }\n                            }\n                          );\n                        } else if (elementMobile.type === 2) {\n                          await axios.post(\n                            `http://localhost:8000/mobilemedia/`,\n                            {\n                              label: \"Video \" + (indexMobile + 1),\n                              fk_idmediatype:\n                                \"http://localhost:8000/mediatype/\" +\n                                elementMobile.type +\n                                \"/\",\n                              path: elementMobile.path,\n                              resolution: elementMobile.resolution,\n                              namefile: elementMobile.path.split(\"/\")[1],\n                              description: null,\n                              time: elementMobile.time,\n                              textfull: null,\n                              textshort: null,\n                              urllink: null,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url\n                            },\n                            {\n                              auth: {\n                                username: \"admin\",\n                                password: \"admin\"\n                              }\n                            }\n                          );\n                        } else if (elementMobile.type === 3) {\n                          await axios.post(\n                            `http://localhost:8000/mobilemedia/`,\n                            {\n                              label: \"Audio \" + (indexMobile + 1),\n                              fk_idmediatype:\n                                \"http://localhost:8000/mediatype/\" +\n                                elementMobile.type +\n                                \"/\",\n                              path: elementMobile.path,\n                              resolution: null,\n                              namefile: elementMobile.path.split(\"/\")[1],\n                              description: null,\n                              time: null,\n                              textfull: null,\n                              textshort: null,\n                              urllink: null,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url\n                            },\n                            {\n                              auth: {\n                                username: \"admin\",\n                                password: \"admin\"\n                              }\n                            }\n                          );\n                        } else if (elementMobile.type === 5) {\n                          await axios.post(\n                            `http://localhost:8000/mobilemedia/`,\n                            {\n                              label: \"Link \" + (indexMobile + 1) + vm.i++ * 0,\n                              fk_idmediatype:\n                                \"http://localhost:8000/mediatype/\" +\n                                elementMobile.type +\n                                \"/\",\n                              path: null,\n                              resolution: null,\n                              namefile: null,\n                              description: null,\n                              time: null,\n                              textfull: null,\n                              textshort: null,\n                              urllink: elementMobile.object,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url\n                            },\n                            {\n                              auth: {\n                                username: \"admin\",\n                                password: \"admin\"\n                              }\n                            }\n                          );\n                        }\n                      }\n                    });\n\n                    if (elementQuestion.typeQuestion === 1) {\n                      await elementQuestion.answersAlternatives.forEach(\n                        async function(elementAlternative, indexAlternative) {\n                          if (elementAlternative.url) {\n                            await axios.put(\n                              elementAlternative.url,\n                              {\n                                idobjanswer:\n                                  vm.idObjAnswerItems[indexAlternative],\n                                answers: elementAlternative.answers,\n                                istrue: elementAlternative.isTrue,\n                                fk_idquestion: resposta2.data.url,\n                                orderansweralternatives: indexAlternative\n                              },\n                              {\n                                auth: {\n                                  username: \"admin\",\n                                  password: \"admin\"\n                                }\n                              }\n                            );\n                          } else {\n                            await axios.post(\n                              `http://127.0.0.1:8000/answersalternatives/`,\n                              {\n                                idobjanswer:\n                                  vm.idObjAnswerItems[indexAlternative],\n                                answers: elementAlternative.answers,\n                                istrue: elementAlternative.isTrue,\n                                fk_idquestion: resposta2.data.url,\n                                orderansweralternatives: indexAlternative\n                              },\n                              {\n                                auth: {\n                                  username: \"admin\",\n                                  password: \"admin\"\n                                }\n                              }\n                            );\n                          }\n                        }\n                      );\n                    } else if (elementQuestion.typeQuestion === 2) {\n                      await axios.put(\n                        elementQuestion.urlCorrectAnswer,\n                        {\n                          correctanswer: elementQuestion.correctAnswer\n                        },\n                        {\n                          auth: {\n                            username: \"admin\",\n                            password: \"admin\"\n                          }\n                        }\n                      );\n                    }\n                  });\n              } else {\n                await axios\n                  .post(\n                    `http://127.0.0.1:8000/question/`,\n                    {\n                      orderquestion: indexQuestion + 1,\n                      descriptionquestion: elementQuestion.descriptionQuestion,\n                      fk_idinstructionalelement: resposta.data.url,\n                      typequestion:\n                        `http://127.0.0.1:8000/questiontype/` +\n                        elementQuestion.typeQuestion +\n                        `/`\n                    },\n                    {\n                      auth: {\n                        username: \"admin\",\n                        password: \"admin\"\n                      }\n                    }\n                  )\n                  .then(async function(resposta2) {\n                    if (elementQuestion.typeQuestion === 1) {\n                      await elementQuestion.answersAlternatives.forEach(\n                        async function(elementAlternative, indexAlternative) {\n                          await axios.post(\n                            `http://127.0.0.1:8000/answersalternatives/`,\n                            {\n                              idobjanswer:\n                                vm.idObjAnswerItems[indexAlternative],\n                              answers: elementAlternative.answers,\n                              istrue: elementAlternative.isTrue,\n                              fk_idquestion: resposta2.data.url,\n                              orderansweralternatives: indexAlternative\n                            },\n                            {\n                              auth: {\n                                username: \"admin\",\n                                password: \"admin\"\n                              }\n                            }\n                          );\n                        }\n                      );\n                    } else if (elementQuestion.typeQuestion === 2) {\n                      await axios.post(\n                        `http://127.0.0.1:8000/resolutionquestion/`,\n                        {\n                          correctanswer: elementQuestion.correctAnswer,\n                          fk_idquestion: resposta2.data.url\n                        },\n                        {\n                          auth: {\n                            username: \"admin\",\n                            password: \"admin\"\n                          }\n                        }\n                      );\n                    }\n                  });\n              }\n            });\n          });\n      } else {\n        /* CDIGO PARA CRIAO DA AVALIAO/EXERCCIO */\n        await axios\n          .post(\n            `http://127.0.0.1:8000/instructionalelement/`,\n            instructionalelement,\n            {\n              auth: {\n                username: \"admin\",\n                password: \"admin\"\n              }\n            }\n          )\n          .then(async function(resposta) {\n            if (vm.mobileMediasControl) {\n              /* INSERO DOS MOBILEMEDIAS DA AVALIAO/EXERCCIO */\n              await vm.mobileMediasControl.forEach(async function(\n                mobilemedia,\n                indexmobile\n              ) {\n                if (mobilemedia.type === 1) {\n                  await axios.post(\n                    `http://localhost:8000/mobilemedia/`,\n                    {\n                      label: \"Imagem \" + (indexmobile + 1),\n                      fk_idmediatype:\n                        \"http://localhost:8000/mediatype/\" +\n                        mobilemedia.type +\n                        \"/\",\n                      path: mobilemedia.path,\n                      resolution: mobilemedia.resolution,\n                      namefile: mobilemedia.path.split(\"/\")[1],\n                      description:\n                        \"Imagem \" +\n                        (indexmobile + 1) +\n                        \" \" +\n                        resposta.data.label,\n                      time: null,\n                      textfull: null,\n                      textshort: null,\n                      urllink: null,\n                      difficultyLevel: null,\n                      learningStyle: null,\n                      fk_idinstructionalelement: resposta.data.url\n                    },\n                    {\n                      auth: {\n                        username: \"admin\",\n                        password: \"admin\"\n                      }\n                    }\n                  );\n                } else if (mobilemedia.type === 2) {\n                  await axios.post(\n                    `http://localhost:8000/mobilemedia/`,\n                    {\n                      label: \"Video \" + (indexmobile + 1),\n                      fk_idmediatype:\n                        \"http://localhost:8000/mediatype/\" +\n                        mobilemedia.type +\n                        \"/\",\n                      path: mobilemedia.path,\n                      resolution: mobilemedia.resolution,\n                      namefile: mobilemedia.path.split(\"/\")[1],\n                      description: null,\n                      time: mobilemedia.time,\n                      textfull: null,\n                      textshort: null,\n                      urllink: null,\n                      difficultyLevel: null,\n                      learningStyle: null,\n                      fk_idinstructionalelement: resposta.data.url\n                    },\n                    {\n                      auth: {\n                        username: \"admin\",\n                        password: \"admin\"\n                      }\n                    }\n                  );\n                } else if (mobilemedia.type === 3) {\n                  await axios.post(\n                    `http://localhost:8000/mobilemedia/`,\n                    {\n                      label: \"Audio \" + (indexmobile + 1),\n                      fk_idmediatype:\n                        \"http://localhost:8000/mediatype/\" +\n                        mobilemedia.type +\n                        \"/\",\n                      path: mobilemedia.path,\n                      resolution: null,\n                      namefile: mobilemedia.path.split(\"/\")[1],\n                      description: null,\n                      time: null,\n                      textfull: null,\n                      textshort: null,\n                      urllink: null,\n                      difficultyLevel: null,\n                      learningStyle: null,\n                      fk_idinstructionalelement: resposta.data.url\n                    },\n                    {\n                      auth: {\n                        username: \"admin\",\n                        password: \"admin\"\n                      }\n                    }\n                  );\n                } else if (mobilemedia.type === 5) {\n                  await axios.post(\n                    `http://localhost:8000/mobilemedia/`,\n                    {\n                      label: \"Link \" + (indexmobile + 1),\n                      fk_idmediatype:\n                        \"http://localhost:8000/mediatype/\" +\n                        mobilemedia.type +\n                        \"/\",\n                      path: null,\n                      resolution: null,\n                      namefile: null,\n                      description: null,\n                      time: null,\n                      textfull: null,\n                      textshort: null,\n                      urllink: mobilemedia.object,\n                      difficultyLevel: null,\n                      learningStyle: null,\n                      fk_idinstructionalelement: resposta.data.url\n                    },\n                    {\n                      auth: {\n                        username: \"admin\",\n                        password: \"admin\"\n                      }\n                    }\n                  );\n                }\n              });\n            }\n\n            await vm.questionsControl.forEach(async function(\n              elementQuestion,\n              indexQuestion\n            ) {\n              await axios\n                .post(\n                  `http://127.0.0.1:8000/question/`,\n                  {\n                    descriptionquestion: elementQuestion.descriptionQuestion,\n                    orderquestion: indexQuestion,\n                    fk_idinstructionalelement: resposta.data.url,\n                    typequestion:\n                      `http://127.0.0.1:8000/questiontype/` +\n                      elementQuestion.typeQuestion +\n                      `/`\n                  },\n                  {\n                    auth: {\n                      username: \"admin\",\n                      password: \"admin\"\n                    }\n                  }\n                )\n                .then(async function(resposta2) {\n                  /* INSERO DOS MOBILEMEDIAS DAS QUESTES DA AVALIAO/EXERCICIO */\n                  await elementQuestion.mobileMedias.forEach(async function(\n                    elementMobile,\n                    indexMobile\n                  ) {\n                    if (elementMobile.type === 1) {\n                      await axios.post(\n                        `http://localhost:8000/mobilemedia/`,\n                        {\n                          label: \"Imagem \" + (indexMobile + 1),\n                          fk_idmediatype:\n                            \"http://localhost:8000/mediatype/\" +\n                            elementMobile.type +\n                            \"/\",\n                          path: elementMobile.path,\n                          resolution: elementMobile.resolution,\n                          namefile: elementMobile.path.split(\"/\")[1],\n                          description:\n                            \"Imagem \" +\n                            (indexMobile + 1) +\n                            \" Questo\" +\n                            resposta2.data.orderquestion,\n                          time: null,\n                          textfull: null,\n                          textshort: null,\n                          urllink: null,\n                          difficultyLevel: null,\n                          learningStyle: null,\n                          fk_idquestion: resposta2.data.url\n                        },\n                        {\n                          auth: {\n                            username: \"admin\",\n                            password: \"admin\"\n                          }\n                        }\n                      );\n                    } else if (elementMobile.type === 2) {\n                      await axios.post(\n                        `http://localhost:8000/mobilemedia/`,\n                        {\n                          label: \"Video \" + (indexMobile + 1),\n                          fk_idmediatype:\n                            \"http://localhost:8000/mediatype/\" +\n                            elementMobile.type +\n                            \"/\",\n                          path: elementMobile.path,\n                          resolution: elementMobile.resolution,\n                          namefile: elementMobile.path.split(\"/\")[1],\n                          description: null,\n                          time: elementMobile.time,\n                          textfull: null,\n                          textshort: null,\n                          urllink: null,\n                          difficultyLevel: null,\n                          learningStyle: null,\n                          fk_idquestion: resposta2.data.url\n                        },\n                        {\n                          auth: {\n                            username: \"admin\",\n                            password: \"admin\"\n                          }\n                        }\n                      );\n                    } else if (elementMobile.type === 3) {\n                      await axios.post(\n                        `http://localhost:8000/mobilemedia/`,\n                        {\n                          label: \"Audio \" + (indexMobile + 1),\n                          fk_idmediatype:\n                            \"http://localhost:8000/mediatype/\" +\n                            elementMobile.type +\n                            \"/\",\n                          path: elementMobile.path,\n                          resolution: null,\n                          namefile: elementMobile.path.split(\"/\")[1],\n                          description: null,\n                          time: null,\n                          textfull: null,\n                          textshort: null,\n                          urllink: null,\n                          difficultyLevel: null,\n                          learningStyle: null,\n                          fk_idquestion: resposta2.data.url\n                        },\n                        {\n                          auth: {\n                            username: \"admin\",\n                            password: \"admin\"\n                          }\n                        }\n                      );\n                    } else if (elementMobile.type === 5) {\n                      await axios.post(\n                        `http://localhost:8000/mobilemedia/`,\n                        {\n                          label: \"Link \" + (indexMobile + 1) + vm.i++ * 0,\n                          fk_idmediatype:\n                            \"http://localhost:8000/mediatype/\" +\n                            elementMobile.type +\n                            \"/\",\n                          path: null,\n                          resolution: null,\n                          namefile: null,\n                          description: null,\n                          time: null,\n                          textfull: null,\n                          textshort: null,\n                          urllink: elementMobile.object,\n                          difficultyLevel: null,\n                          learningStyle: null,\n                          fk_idquestion: resposta2.data.url\n                        },\n                        {\n                          auth: {\n                            username: \"admin\",\n                            password: \"admin\"\n                          }\n                        }\n                      );\n                    }\n                  });\n\n                  if (elementQuestion.typeQuestion === 1) {\n                    await elementQuestion.answersAlternatives.forEach(\n                      async function(elementAlternative, indexAlternative) {\n                        await axios.post(\n                          `http://127.0.0.1:8000/answersalternatives/`,\n                          {\n                            idobjanswer: vm.idObjAnswerItems[indexAlternative],\n                            answers: elementAlternative.answers,\n                            istrue: elementAlternative.isTrue,\n                            fk_idquestion: resposta2.data.url,\n                            orderansweralternatives: indexAlternative\n                          },\n                          {\n                            auth: {\n                              username: \"admin\",\n                              password: \"admin\"\n                            }\n                          }\n                        );\n                      }\n                    );\n                  } else if (elementQuestion.typeQuestion === 2) {\n                    await axios.post(\n                      `http://127.0.0.1:8000/resolutionquestion/`,\n                      {\n                        correctanswer: elementQuestion.correctAnswer,\n                        fk_idquestion: resposta2.data.url\n                      },\n                      {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\"\n                        }\n                      }\n                    );\n                  }\n                });\n            });\n          });\n      }\n    },\n    addMobileMedia(mobileMediaType) {\n      if (mobileMediaType === 1) {\n        this.mobileMediasControl.push({\n          type: mobileMediaType,\n          object: null,\n          resolution: null,\n          path: null,\n          namefile: null,\n          url: null\n        });\n      } else if (mobileMediaType === 2) {\n        this.mobileMediasControl.push({\n          type: mobileMediaType,\n          object: null,\n          resolution: null,\n          time: null,\n          path: null,\n          namefile: null,\n          url: null\n        });\n      } else if (mobileMediaType === 3) {\n        this.mobileMediasControl.push({\n          type: mobileMediaType,\n          object: null,\n          path: null,\n          namefile: null,\n          url: null\n        });\n      } else if (mobileMediaType === 4) {\n        this.mobileMediasControl.push({\n          type: mobileMediaType + 1,\n          object: null,\n          url: null\n        });\n      }\n    },\n    async deleteMobileMedia(idMobileMedia) {\n      if (this.mobileMediasControl[idMobileMedia].url) {\n        if (this.mobileMediasControl[idMobileMedia].type !== 5) {\n          await firebase\n            .storage()\n            .ref()\n            .child(this.mobileMediasControl[idMobileMedia].path)\n            .delete();\n        }\n        await axios.delete(this.mobileMediasControl[idMobileMedia].url, {\n          auth: {\n            username: \"admin\",\n            password: \"admin\"\n          }\n        });\n      }\n      if (idMobileMedia == 0) {\n        this.mobileMediasControl.shift();\n      } else {\n        this.mobileMediasControl.splice(idMobileMedia, 1);\n      }\n    },\n    atualizaMeta() {\n      if (this.mobileMediasControl.length > 0) {\n        this.mobileMediasControl.forEach(mobilemedia => {\n          if (mobilemedia.object && !mobilemedia.url) {\n            if (mobilemedia.type === 1) {\n              var img = new Image();\n              img.src = URL.createObjectURL(mobilemedia.object);\n              img.onload = function() {\n                mobilemedia.resolution = img.width + \"X\" + img.height;\n              };\n            } else if (mobilemedia.type === 2) {\n              var video = document.createElement(\"video\");\n              var source = document.createElement(\"source\");\n              source.setAttribute(\n                \"src\",\n                URL.createObjectURL(mobilemedia.object)\n              );\n              video.appendChild(source);\n              video.oncanplay = function() {\n                mobilemedia.resolution =\n                  video.videoWidth + \"X\" + video.videoHeight;\n                mobilemedia.time = video.duration;\n              };\n            }\n          }\n        });\n      }\n    },\n    async getSrcImage(indexMobile, path, namefile) {\n      /*var obj = {};*/\n      if (path) {\n        var vm = this;\n        await firebase\n          .storage()\n          .ref(path)\n          .getDownloadURL()\n          .then(function(url) {\n            /*vm.viewImageSrc = url;*/\n            var xhr = new XMLHttpRequest();\n            xhr.responseType = \"blob\";\n            xhr.onload = function() {\n              var blob = xhr.response;\n              var file = new File([blob], namefile, {\n                type: blob.type\n              });\n              // vm.auxGetSrc.push(file);\n              vm.atualizaObj(file, indexMobile);\n            };\n            xhr.open(\"GET\", url);\n            xhr.send();\n          });\n      }\n    },\n    async getSrcVideo(indexMobile, path, namefile) {\n      /*var obj = {};*/\n      if (path) {\n        var vm = this;\n        await firebase\n          .storage()\n          .ref(path)\n          .getDownloadURL()\n          .then(function(url) {\n            /*vm.viewVideoSrc = url;*/\n            var xhr = new XMLHttpRequest();\n            xhr.responseType = \"blob\";\n            xhr.onload = function() {\n              var blob = xhr.response;\n              var file = new File([blob], namefile, {\n                type: blob.type\n              });\n              // vm.auxGetSrc.push(file);\n              vm.atualizaObj(file, indexMobile);\n            };\n            xhr.open(\"GET\", url);\n            xhr.send();\n          });\n      }\n    },\n    async getSrcAudio(indexMobile, path, namefile) {\n      /*var obj = {};*/\n      if (path) {\n        var vm = this;\n        await firebase\n          .storage()\n          .ref(path)\n          .getDownloadURL()\n          .then(function(url) {\n            /*vm.viewAudioSrc = url;*/\n            var xhr = new XMLHttpRequest();\n            xhr.responseType = \"blob\";\n            xhr.onload = function() {\n              var blob = xhr.response;\n              var file = new File([blob], namefile, {\n                type: blob.type\n              });\n              // vm.auxGetSrc.push(file);\n              vm.atualizaObj(file, indexMobile);\n            };\n            xhr.open(\"GET\", url);\n            xhr.send();\n          });\n      }\n    },\n    atualizaObj(file, indexMobile) {\n      this.mobileMediasControl[indexMobile].object = file;\n    },\n    addQuestion(questionType) {\n      if (questionType === 1) {\n        this.questionsControl.push({\n          typeQuestion: questionType,\n          descriptionQuestion: null,\n          answersAlternatives: [],\n          mobileMedias: [],\n          url: null\n        });\n      } else if (questionType === 2) {\n        this.questionsControl.push({\n          typeQuestion: questionType,\n          descriptionQuestion: null,\n          correctAnswer: null,\n          mobileMedias: [],\n          url: null,\n          urlCorrectAnswer: null\n        });\n      }\n    },\n    async deleteQuestion(idQuestion) {\n      if (this.questionsControl[idQuestion].url) {\n        await axios.delete(this.questionsControl[idQuestion].url, {\n          auth: {\n            username: \"admin\",\n            password: \"admin\"\n          }\n        });\n      }\n      if (idQuestion == 0) {\n        this.questionsControl.shift();\n      } else {\n        this.questionsControl.splice(idQuestion, 1);\n      }\n    },\n    addAlternative(idQuestion) {\n      this.questionsControl[idQuestion].answersAlternatives.push({\n        isTrue: false,\n        answers: null,\n        url: null\n      });\n    },\n    async deleteAlternative(idQuestion, idAlternative) {\n      if (\n        this.questionsControl[idQuestion].answersAlternatives[idAlternative].url\n      ) {\n        await axios.delete(\n          this.questionsControl[idQuestion].answersAlternatives[idAlternative]\n            .url,\n          {\n            auth: {\n              username: \"admin\",\n              password: \"admin\"\n            }\n          }\n        );\n      }\n      if (idAlternative == 0) {\n        this.questionsControl[idQuestion].answersAlternatives.shift();\n      } else {\n        this.questionsControl[idQuestion].answersAlternatives.splice(\n          idAlternative,\n          1\n        );\n      }\n    },\n    addMobileMediaQuestion(idQuestion, mobileMediaType) {\n      if (mobileMediaType === 1) {\n        this.questionsControl[idQuestion].mobileMedias.push({\n          type: mobileMediaType,\n          object: null,\n          resolution: null,\n          path: null,\n          namefile: null,\n          url: null\n        });\n      } else if (mobileMediaType === 2) {\n        this.questionsControl[idQuestion].mobileMedias.push({\n          type: mobileMediaType,\n          object: null,\n          resolution: null,\n          time: null,\n          path: null,\n          namefile: null,\n          url: null\n        });\n      } else if (mobileMediaType === 3) {\n        this.questionsControl[idQuestion].mobileMedias.push({\n          type: mobileMediaType,\n          object: null,\n          path: null,\n          namefile: null,\n          url: null\n        });\n      } else if (mobileMediaType === 4) {\n        this.questionsControl[idQuestion].mobileMedias.push({\n          type: mobileMediaType + 1,\n          object: null,\n          url: null\n        });\n      }\n    },\n    async deleteMobileMediaQuestion(idQuestion, idMobileMedia) {\n      if (this.questionsControl[idQuestion].mobileMedias[idMobileMedia].url) {\n        if (\n          this.questionsControl[idQuestion].mobileMedias[idMobileMedia].type !==\n          5\n        ) {\n          await firebase\n            .storage()\n            .ref()\n            .child(\n              this.questionsControl[idQuestion].mobileMedias[idMobileMedia].path\n            )\n            .delete();\n        }\n        await axios.delete(\n          this.questionsControl[idQuestion].mobileMedias[idMobileMedia].url,\n          {\n            auth: {\n              username: \"admin\",\n              password: \"admin\"\n            }\n          }\n        );\n      }\n      if (idMobileMedia == 0) {\n        this.questionsControl[idQuestion].mobileMedias.shift();\n      } else {\n        this.questionsControl[idQuestion].mobileMedias.splice(idMobileMedia, 1);\n      }\n    },\n    atualizaMetaQuestions() {\n      if (this.questionsControl.length > 0) {\n        this.questionsControl.forEach(question => {\n          if (question.mobileMedias) {\n            question.mobileMedias.forEach(mobilemedia => {\n              if (mobilemedia.object && !mobilemedia.url) {\n                if (mobilemedia.type === 1) {\n                  var img = new Image();\n                  img.src = URL.createObjectURL(mobilemedia.object);\n                  img.onload = function() {\n                    mobilemedia.resolution = img.width + \"X\" + img.height;\n                  };\n                } else if (mobilemedia.type === 2) {\n                  var video = document.createElement(\"video\");\n                  var source = document.createElement(\"source\");\n                  source.setAttribute(\n                    \"src\",\n                    URL.createObjectURL(mobilemedia.object)\n                  );\n                  video.appendChild(source);\n                  video.oncanplay = function() {\n                    mobilemedia.resolution =\n                      video.videoWidth + \"X\" + video.videoHeight;\n                    mobilemedia.time = video.duration;\n                  };\n                }\n              }\n            });\n          }\n        });\n      }\n    },\n    atualizaObjQuestions(file, indexQuestion, indexMobile) {\n      this.questionsControl[indexQuestion].mobileMedias[\n        indexMobile\n      ].object = file;\n    },\n    async getSrcImageQuestions(indexQuestion, indexMobile, path, namefile) {\n      /*var obj = {};*/\n      if (path) {\n        var vm = this;\n        await firebase\n          .storage()\n          .ref(path)\n          .getDownloadURL()\n          .then(function(url) {\n            /*vm.viewImageSrc = url;*/\n            var xhr = new XMLHttpRequest();\n            xhr.responseType = \"blob\";\n            xhr.onload = function() {\n              var blob = xhr.response;\n              var file = new File([blob], namefile, {\n                type: blob.type\n              });\n              /*vm.auxGetSrcQuestions.push(file);*/\n              vm.atualizaObjQuestions(file, indexQuestion, indexMobile);\n            };\n            xhr.open(\"GET\", url);\n            xhr.send();\n          });\n      }\n    },\n    async getSrcVideoQuestions(indexQuestion, indexMobile, path, namefile) {\n      /*var obj = {};*/\n      if (path) {\n        var vm = this;\n        await firebase\n          .storage()\n          .ref(path)\n          .getDownloadURL()\n          .then(function(url) {\n            /*vm.viewVideoSrc = url;*/\n            var xhr = new XMLHttpRequest();\n            xhr.responseType = \"blob\";\n            xhr.onload = function() {\n              var blob = xhr.response;\n              var file = new File([blob], namefile, {\n                type: blob.type\n              });\n              // vm.auxGetSrcQuestions.push(file);\n              vm.atualizaObjQuestions(file, indexQuestion, indexMobile);\n            };\n            xhr.open(\"GET\", url);\n            xhr.send();\n          });\n      }\n    },\n    async getSrcAudioQuestions(indexQuestion, indexMobile, path, namefile) {\n      /*var obj = {};*/\n      if (path) {\n        var vm = this;\n        await firebase\n          .storage()\n          .ref(path)\n          .getDownloadURL()\n          .then(function(url) {\n            /*vm.viewAudioSrc = url;*/\n            var xhr = new XMLHttpRequest();\n            xhr.responseType = \"blob\";\n            xhr.onload = function() {\n              var blob = xhr.response;\n              var file = new File([blob], namefile, {\n                type: blob.type\n              });\n              // vm.auxGetSrcQuestions.push(file);\n              vm.atualizaObjQuestions(file, indexQuestion, indexMobile);\n            };\n            xhr.open(\"GET\", url);\n            xhr.send();\n          });\n      }\n    },\n    async validate() {\n      if (this.$refs.form.validate()) {\n        if (this.questionsControl.length > 0) {\n          var vm = this;\n          var aux = 1;\n          for (var i = 0; i < this.questionsControl.length; i++) {\n            if (aux === 1) {\n              if (this.questionsControl[i].typeQuestion === 1) {\n                if (this.questionsControl[i].answersAlternatives.length === 0) {\n                  vm.questionAjust = i + 1;\n                  vm.dialog_alert3 = true;\n                  aux = 0;\n                  break;\n                }\n                for (\n                  var j = 0;\n                  j < this.questionsControl[i].answersAlternatives.length;\n                  j++\n                ) {\n                  if (this.questionsControl[i].answersAlternatives[j].isTrue) {\n                    break;\n                  }\n                  if (\n                    j ===\n                    this.questionsControl[i].answersAlternatives.length - 1\n                  ) {\n                    vm.questionAjust = i + 1;\n                    vm.dialog_alert2 = true;\n                    aux = 0;\n                  }\n                }\n              }\n            } else {\n              break;\n            }\n          }\n          if (aux === 1) {\n            var auxNumberQuestions = this.questionsControl.length;\n            await this.postQuestions();\n            this.questionsControl = [];\n            await this.$emit(\"instrucclose\", auxNumberQuestions);\n            await this.resetVariables();\n          }\n        } else {\n          this.dialog_alert = true;\n        }\n      }\n    },\n    resetVariables() {\n      this.questionsControl = [];\n      this.mobileMediasControl = [];\n      this.avaliacaoName = \"\";\n    },\n    async reset() {\n      await this.$emit(\"instrucclose\");\n      await this.resetVariables();\n      this.questionsControl = [];\n      this.mobileMediasControl = [];\n    },\n    resetValidation() {\n      this.$refs.form.resetValidation();\n    }\n  }\n};\n</script>\n"]}]}