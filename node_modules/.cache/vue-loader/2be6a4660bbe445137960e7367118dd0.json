{"remainingRequest":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\www\\EducomML\\EducomML_Front\\src\\components\\instructional_model\\AtividadeColaborativaDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\www\\EducomML\\EducomML_Front\\src\\components\\instructional_model\\AtividadeColaborativaDialog.vue","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\babel-loader\\lib\\index.js","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js","mtime":1597353521000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBcGkgZnJvbSAiQC9zZXJ2aWNlcy9BcGkiOwppbXBvcnQgKiBhcyBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXRpdmlkYWRlQ29sYWJvcmF0aXZhRGlhbG9nIiwKICBwcm9wczogWwogICAgImluc3RydWNPcHRpb25DYWxsIiwKICAgICJpbnN0cnVjVHlwZSIsCiAgICAiZG9tYWluIiwKICAgICJkaWFsb2ciLAogICAgInByb2NlZHVyZSIsCiAgICAiY29uY2VwdCIsCiAgICAibW9kdWxlIiwKICAgICJpbnN0cnVjdGlvbmFsZWxlbWVudCIsCiAgXSwKICBkYXRhOiAoKSA9PiAoewogICAgaTogMCwKICAgIGF1eEdldFNyYzogW10sCiAgICB2YWxpZDogdHJ1ZSwKICAgIGRpYWxvZ19hbGVydDogZmFsc2UsCiAgICBkaWFsb2dfYWxlcnQyOiBmYWxzZSwKICAgIGRpYWxvZ19hbGVydDM6IGZhbHNlLAogICAgcXVlc3Rpb25BanVzdDogIiIsCiAgICBjb2xhYm9yYXRpdmVOYW1lOiAiIiwKICAgIGNvbGFib3JhdGl2ZU5hbWVSdWxlczogWwogICAgICAodikgPT4KICAgICAgICAhIXYgfHwKICAgICAgICAiw4kgbmVjZXNzw6FyaW8gZGVzY3JldmVyIHVtIGlkZW50aWZpY2Fkb3IgcGFyYSBhIGF0aXZpZGFkZSBjb2xhYm9yYXRpdmEiLAogICAgICAodikgPT4KICAgICAgICAodiAmJiB2Lmxlbmd0aCA8PSAxMDApIHx8CiAgICAgICAgIk5vbWUgZG8gaWRlbnRpZmljYWRvciBkYSBhdGl2aWRhZGUgY29sYWJvcmF0aXZhIGRldmUgdGVyIG5vIG3DoXhpbW8gMTAwIGNhcmFjdGVyZXMiLAogICAgXSwKICAgIG1lbWJlckFtb3VudDogIiIsCiAgICBtZW1iZXJBbW91bnRSdWxlczogWwogICAgICAodikgPT4KICAgICAgICAhIXYgfHwKICAgICAgICAiw4kgbmVjZXNzw6FyaW8gaW5zZXJpciBhIHF1YW50aWRhZGUgZGUgYWx1bm9zIGVudm9sdmlkb3MgbmEgYXRpdmlkYWRlIiwKICAgIF0sCiAgICBjb2xhYm9yYXRpdmVEZXNjcmlwdGlvbjogIiIsCiAgICBjb2xhYm9yYXRpdmVEZXNjcmlwdGlvblJ1bGVzOiBbCiAgICAgICh2KSA9PgogICAgICAgICEhdiB8fAogICAgICAgICLDiSBuZWNlc3PDoXJpbyBpbnNlcmlyIHVtYSBkZXNjcmnDp8OjbyBkYSBhdGl2aWRhZGUgY29sYWJvcmF0aXZhIGEgc2VyIGluc2VyaWRhIiwKICAgIF0sCiAgICBpdGVtc01vYmlsZU1lZGlhOiBbCiAgICAgIHsKICAgICAgICBpY29uOiAibWRpLWZpbGUtaW1hZ2UiLAogICAgICAgIG5hbWU6ICJJbWFnZW0iLAogICAgICB9LAogICAgICB7CiAgICAgICAgaWNvbjogIm1kaS1maWxlLXZpZGVvIiwKICAgICAgICBuYW1lOiAiVmlkZW8iLAogICAgICB9LAogICAgICB7CiAgICAgICAgaWNvbjogIm1kaS1maWxlLW11c2ljIiwKICAgICAgICBuYW1lOiAiQXVkaW8iLAogICAgICB9LAogICAgICB7CiAgICAgICAgaWNvbjogIm1kaS1saW5rLXZhcmlhbnQiLAogICAgICAgIG5hbWU6ICJMaW5rIiwKICAgICAgfSwKICAgIF0sCiAgICBsaW5rVXJsUnVsZXM6IFsodikgPT4gISF2IHx8ICLDiSBuZWNlc3PDoXJpbyBpbnNlcmlyIGEgdXJsIGRvIHNldSBsaW5rIl0sCiAgICBtb2JpbGVNZWRpYXNDb250cm9sOiBbXSwKICAgIHZpZXdRdWVzdGlvbnM6IGZhbHNlLAogICAgcXVlc3Rpb25UeXBlczogWyJRdWVzdMOjbyBPYmpldGl2YSIsICJRdWVzdMOjbyBEaXNjdXNzaXZhIl0sCiAgICBxdWVzdGlvbnNDb250cm9sOiBbXSwKICAgIGlkT2JqQW5zd2VySXRlbXM6IFsKICAgICAgIkEiLAogICAgICAiQiIsCiAgICAgICJDIiwKICAgICAgIkQiLAogICAgICAiRSIsCiAgICAgICJGIiwKICAgICAgIkciLAogICAgICAiSCIsCiAgICAgICJJIiwKICAgICAgIkoiLAogICAgICAiSyIsCiAgICAgICJMIiwKICAgICAgIk0iLAogICAgICAiTiIsCiAgICAgICJPIiwKICAgICAgIlAiLAogICAgICAiUSIsCiAgICAgICJSIiwKICAgICAgIlMiLAogICAgICAiVCIsCiAgICAgICJVIiwKICAgICAgIlYiLAogICAgICAiVyIsCiAgICAgICJYIiwKICAgICAgIlkiLAogICAgICAiWiIsCiAgICBdLAogICAgYWx0ZXJuYXRpdmVEZXNjcmlwdGlvblJ1bGVzOiBbCiAgICAgICh2KSA9PiAhIXYgfHwgIsOJIG5lY2Vzc8OhcmlvIGRlc2NyZXZlciBhIGFsdGVybmF0aXZhLiIsCiAgICBdLAogIH0pLAogIHdhdGNoOiB7CiAgICBkaWFsb2c6IGFzeW5jIGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmdldENvbGFib3JhdGl2ZSgpOwogICAgfSwKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5nZXRDb2xhYm9yYXRpdmUoKTsKICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldENvbGFib3JhdGl2ZSgpIHsKICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpIHsKICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgdGhpcy5jb2xhYm9yYXRpdmVOYW1lID0gdGhpcy5pbnN0cnVjdGlvbmFsZWxlbWVudC5sYWJlbDsKICAgICAgICAgIHRoaXMuY29sYWJvcmF0aXZlRGVzY3JpcHRpb24gPSB0aGlzLmluc3RydWN0aW9uYWxlbGVtZW50LmRlc2NyaXB0aW9uOwogICAgICAgICAgdGhpcy5tZW1iZXJBbW91bnQgPSBwYXJzZUludCgKICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbmFsZWxlbWVudC5tZW1iZXJhbW91bnQKICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sID0gW107CiAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sID0gW107CiAgICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubW9iaWxlbWVkaWFzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGF3YWl0IHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubW9iaWxlbWVkaWFzLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUsCiAgICAgICAgICAgIGluZGV4TW9iaWxlCiAgICAgICAgICApIHsKICAgICAgICAgICAgaWYgKGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjEiKSB7CiAgICAgICAgICAgICAgdm0uZ2V0U3JjSW1hZ2UoCiAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUubmFtZWZpbGUKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0pLAogICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgcGF0aDogZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjIiKSB7CiAgICAgICAgICAgICAgdm0uZ2V0U3JjVmlkZW8oCiAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUubmFtZWZpbGUKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0pLAogICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgdGltZTogZWxlbWVudE1vYmlsZS50aW1lLAogICAgICAgICAgICAgICAgcGF0aDogZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjMiKSB7CiAgICAgICAgICAgICAgdm0uZ2V0U3JjQXVkaW8oCiAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUubmFtZWZpbGUKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0pLAogICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgcGF0aDogZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjUiKSB7CiAgICAgICAgICAgICAgYXdhaXQgdm0ubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlSW50KGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSksCiAgICAgICAgICAgICAgICBvYmplY3Q6IGVsZW1lbnRNb2JpbGUudXJsbGluaywKICAgICAgICAgICAgICAgIHVybDogZWxlbWVudE1vYmlsZS51cmwsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5pbnN0cnVjdGlvbmFsZWxlbWVudC5xdWVzdGlvbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy52aWV3UXVlc3Rpb25zID0gdHJ1ZTsKICAgICAgICAgIGF3YWl0IHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQucXVlc3Rpb25zLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgIGVsZW1lbnRRdWVzdGlvbiwKICAgICAgICAgICAgaW5kZXhRdWVzdGlvbgogICAgICAgICAgKSB7CiAgICAgICAgICAgIGlmIChlbGVtZW50UXVlc3Rpb24udHlwZXF1ZXN0aW9uID09PSBgL3F1ZXN0aW9udHlwZS8xL2ApIHsKICAgICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sLnB1c2goewogICAgICAgICAgICAgICAgdHlwZVF1ZXN0aW9uOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgZWxlbWVudFF1ZXN0aW9uLnR5cGVxdWVzdGlvbi5zcGxpdCgiLyIpWzRdCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb25RdWVzdGlvbjogZWxlbWVudFF1ZXN0aW9uLmRlc2NyaXB0aW9ucXVlc3Rpb24sCiAgICAgICAgICAgICAgICBhbnN3ZXJzQWx0ZXJuYXRpdmVzOiBbXSwKICAgICAgICAgICAgICAgIG1vYmlsZU1lZGlhczogW10sCiAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRRdWVzdGlvbi51cmwsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudFF1ZXN0aW9uLmFuc3dlcnNhbHRlcm5hdGl2ZXMuZm9yRWFjaCgKICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uKGVsZW1lbnRBbHRlcm5hdGl2ZSkgewogICAgICAgICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sWwogICAgICAgICAgICAgICAgICAgIGluZGV4UXVlc3Rpb24KICAgICAgICAgICAgICAgICAgXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzLnB1c2goewogICAgICAgICAgICAgICAgICAgIGlzVHJ1ZTogZWxlbWVudEFsdGVybmF0aXZlLmlzdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBhbnN3ZXJzOiBlbGVtZW50QWx0ZXJuYXRpdmUuYW5zd2VycywKICAgICAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRBbHRlcm5hdGl2ZS51cmwsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFF1ZXN0aW9uLnR5cGVxdWVzdGlvbiA9PT0gYC9xdWVzdGlvbnR5cGUvMi9gKSB7CiAgICAgICAgICAgICAgYXdhaXQgdm0ucXVlc3Rpb25zQ29udHJvbC5wdXNoKHsKICAgICAgICAgICAgICAgIHR5cGVRdWVzdGlvbjogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgIGVsZW1lbnRRdWVzdGlvbi50eXBlcXVlc3Rpb24uc3BsaXQoIi8iKVs0XQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uUXVlc3Rpb246IGVsZW1lbnRRdWVzdGlvbi5kZXNjcmlwdGlvbnF1ZXN0aW9uLAogICAgICAgICAgICAgICAgY29ycmVjdEFuc3dlcjoKICAgICAgICAgICAgICAgICAgZWxlbWVudFF1ZXN0aW9uLnJlc29sdXRpb25xdWVzdGlvblswXS5jb3JyZWN0YW5zd2VyLAogICAgICAgICAgICAgICAgbW9iaWxlTWVkaWFzOiBbXSwKICAgICAgICAgICAgICAgIHVybDogZWxlbWVudFF1ZXN0aW9uLnVybCwKICAgICAgICAgICAgICAgIHVybENvcnJlY3RBbnN3ZXI6IGVsZW1lbnRRdWVzdGlvbi5yZXNvbHV0aW9ucXVlc3Rpb25bMF0udXJsLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlbGVtZW50UXVlc3Rpb24ubW9iaWxlbWVkaWFzKSB7CiAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudFF1ZXN0aW9uLm1vYmlsZW1lZGlhcy5mb3JFYWNoKGFzeW5jIGZ1bmN0aW9uKAogICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZSwKICAgICAgICAgICAgICAgIGluZGV4TW9iaWxlCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudE1vYmlsZS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdID09PSAiMSIpIHsKICAgICAgICAgICAgICAgICAgdm0uZ2V0U3JjSW1hZ2VRdWVzdGlvbnMoCiAgICAgICAgICAgICAgICAgICAgaW5kZXhRdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS5uYW1lZmlsZQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sW2luZGV4UXVlc3Rpb25dLm1vYmlsZU1lZGlhcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IGVsZW1lbnRNb2JpbGUucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgICAgdXJsOiBlbGVtZW50TW9iaWxlLnVybCwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0gPT09ICIyIgogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHZtLmdldFNyY1ZpZGVvUXVlc3Rpb25zKAogICAgICAgICAgICAgICAgICAgIGluZGV4UXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgICAgaW5kZXhNb2JpbGUsCiAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUubmFtZWZpbGUKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgYXdhaXQgdm0ucXVlc3Rpb25zQ29udHJvbFtpbmRleFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0KICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIG9iamVjdDogbnVsbCwKICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBlbGVtZW50TW9iaWxlLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgdGltZTogZWxlbWVudE1vYmlsZS50aW1lLAogICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjMiCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgdm0uZ2V0U3JjQXVkaW9RdWVzdGlvbnMoCiAgICAgICAgICAgICAgICAgICAgaW5kZXhRdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS5uYW1lZmlsZQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sW2luZGV4UXVlc3Rpb25dLm1vYmlsZU1lZGlhcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjUiCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgYXdhaXQgdm0ucXVlc3Rpb25zQ29udHJvbFtpbmRleFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0KICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIG9iamVjdDogZWxlbWVudE1vYmlsZS51cmxsaW5rLAogICAgICAgICAgICAgICAgICAgIHVybDogZWxlbWVudE1vYmlsZS51cmwsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHZtLnZpZXdRdWVzdGlvbnMgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wgPSBbXTsKICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wgPSBbXTsKICAgICAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpOwogICAgICAgIHRoaXMudmlld1F1ZXN0aW9ucyA9IGZhbHNlOwogICAgICAgIHRoaXMucmVzZXRWYXJpYWJsZXMoKTsKICAgICAgfQogICAgfSwKICAgIC8qIEZVTsOHw4NPIFBBUkEgU0FMVkFSIEFUSVZJREFERSBDT0xBQk9SQVRJVkEgUVVFIFRFTkhBIFFVRVNUw5VFUyAqLwogICAgYXN5bmMgcG9zdFF1ZXN0aW9ucygpIHsKICAgICAgdmFyIGluc3RydWN0aW9uYWxlbGVtZW50ID0gewogICAgICAgIGxhYmVsOiB0aGlzLmNvbGFib3JhdGl2ZU5hbWUsCiAgICAgICAgZmtfaW5zdHJ1Y3Rpb25hbGVsZW1lbnR0eXBlOiBgL2luc3RydWNlbGVtZW50dHlwZS8zL2AsCiAgICAgICAgbWVtYmVyYW1vdW50OiB0aGlzLm1lbWJlckFtb3VudCwKICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jb2xhYm9yYXRpdmVEZXNjcmlwdGlvbiwKICAgICAgfTsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIGF1eFBhdGggPSAiIjsKICAgICAgaWYgKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbCkgewogICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5mb3JFYWNoKGFzeW5jIChtb2JpbGVtZWRpYSkgPT4gewogICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnVybCkgewogICAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudHlwZSAhPT0gNSkgewogICAgICAgICAgICAgIGZpcmViYXNlCiAgICAgICAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAgICAgICAucmVmKCkKICAgICAgICAgICAgICAgIC5jaGlsZChtb2JpbGVtZWRpYS5wYXRoKQogICAgICAgICAgICAgICAgLnB1dChtb2JpbGVtZWRpYS5vYmplY3QpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhdXhQYXRoID0KICAgICAgICAgICAgICB2bS5kb21haW4uaWRrbm93bGVkZ2Vkb21haW4udG9TdHJpbmcoKSArCiAgICAgICAgICAgICAgIi8iICsKICAgICAgICAgICAgICAoYXdhaXQgc2V0VGltZW91dChhc3luYyBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGF3YWl0IERhdGUubm93KCkudG9TdHJpbmcoKTsKICAgICAgICAgICAgICB9LCAxKSk7CiAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlICE9PSA1KSB7CiAgICAgICAgICAgICAgZmlyZWJhc2UKICAgICAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgICAgIC5yZWYoKQogICAgICAgICAgICAgICAgLmNoaWxkKGF1eFBhdGgpCiAgICAgICAgICAgICAgICAucHV0KG1vYmlsZW1lZGlhLm9iamVjdCk7CgogICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnBhdGggPSBhdXhQYXRoOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdmFyIGF1eFBhdGhRdWVzdGlvbnMgPSAiIjsKICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sLmZvckVhY2goYXN5bmMgZnVuY3Rpb24ocXVlc3Rpb24pIHsKICAgICAgICBpZiAocXVlc3Rpb24ubW9iaWxlTWVkaWFzKSB7CiAgICAgICAgICBhd2FpdCBxdWVzdGlvbi5tb2JpbGVNZWRpYXMuZm9yRWFjaCgobW9iaWxlbWVkaWEpID0+IHsKICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnVybCkgewogICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlICE9PSA1KSB7CiAgICAgICAgICAgICAgICBmaXJlYmFzZQogICAgICAgICAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAgICAgICAgIC5yZWYoKQogICAgICAgICAgICAgICAgICAuY2hpbGQobW9iaWxlbWVkaWEucGF0aCkKICAgICAgICAgICAgICAgICAgLnB1dChtb2JpbGVtZWRpYS5vYmplY3QpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgYXV4UGF0aFF1ZXN0aW9ucyA9CiAgICAgICAgICAgICAgICAgIHZtLmRvbWFpbi5pZGtub3dsZWRnZWRvbWFpbi50b1N0cmluZygpICsKICAgICAgICAgICAgICAgICAgIi8iICsKICAgICAgICAgICAgICAgICAgRGF0ZS5ub3coKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgIT09IDUpIHsKICAgICAgICAgICAgICAgICAgZmlyZWJhc2UKICAgICAgICAgICAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAgICAgICAgICAgLnJlZigpCiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKGF1eFBhdGhRdWVzdGlvbnMpCiAgICAgICAgICAgICAgICAgICAgLnB1dChtb2JpbGVtZWRpYS5vYmplY3QpOwoKICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEucGF0aCA9IGF1eFBhdGhRdWVzdGlvbnM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgMzcpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuaW5zdHJ1Y1R5cGUgPT09ICJkb21pbmlvIikgewogICAgICAgIE9iamVjdC5hc3NpZ24oaW5zdHJ1Y3Rpb25hbGVsZW1lbnQsIHsKICAgICAgICAgIGZrX2lka25vd2xlZGdlZG9tYWluOiB0aGlzLmluc3RydWNPcHRpb25DYWxsLnVybCwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmluc3RydWNUeXBlID09PSAibW9kdWxvIikgewogICAgICAgIE9iamVjdC5hc3NpZ24oaW5zdHJ1Y3Rpb25hbGVsZW1lbnQsIHsKICAgICAgICAgIGZrX2lkbW9kdWxlOiB0aGlzLmluc3RydWNPcHRpb25DYWxsLnVybCwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmluc3RydWNUeXBlID09PSAiY29uY2VpdG8iKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbihpbnN0cnVjdGlvbmFsZWxlbWVudCwgewogICAgICAgICAgZmtfaWRjb25jZXB0OiB0aGlzLmluc3RydWNPcHRpb25DYWxsLnVybCwKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpIHsKICAgICAgICAvKiBDw5NESUdPIFBBUkEgRURJw4fDg08gREEgQVZBTElBw4fDg08vRVhFUkPDjUNJTyAqLwogICAgICAgIGF3YWl0IEFwaSgpCiAgICAgICAgICAucHV0KHZtLmluc3RydWN0aW9uYWxlbGVtZW50LnVybCwgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpCiAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgewogICAgICAgICAgICBpZiAodm0ubW9iaWxlTWVkaWFzQ29udHJvbCkgewogICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wuZm9yRWFjaChhc3luYyBmdW5jdGlvbigKICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLAogICAgICAgICAgICAgICAgaW5kZXhtb2JpbGUKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIC8qIERBTkRPIFBVVCBOT1MgTU9CSUxFTUVESUFTIFFVRSBQT1NTVUVNIFVSTCovCiAgICAgICAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudXJsKSB7CiAgICAgICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KG1vYmlsZW1lZGlhLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJJbWFnZW0gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICIvbWVkaWF0eXBlLyIgKyBtb2JpbGVtZWRpYS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgcGF0aDogbW9iaWxlbWVkaWEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG1vYmlsZW1lZGlhLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICAgIkltYWdlbSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgKGluZGV4bW9iaWxlICsgMSkgKwogICAgICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgICAgICByZXNwb3N0YS5kYXRhLmxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KG1vYmlsZW1lZGlhLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJWaWRlbyAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZTogIi9tZWRpYXR5cGUvIiArIG1vYmlsZW1lZGlhLnR5cGUgKyAiLyIsCiAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbW9iaWxlbWVkaWEucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBtb2JpbGVtZWRpYS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGltZTogbW9iaWxlbWVkaWEudGltZSwKICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KG1vYmlsZW1lZGlhLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJBdWRpbyAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZTogIi9tZWRpYXR5cGUvIiArIG1vYmlsZW1lZGlhLnR5cGUgKyAiLyIsCiAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBtb2JpbGVtZWRpYS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSA1KSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KG1vYmlsZW1lZGlhLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJMaW5rICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiL21lZGlhdHlwZS8iICsgbW9iaWxlbWVkaWEudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG1vYmlsZW1lZGlhLm9iamVjdCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLyogREFORE8gUE9TVCBOT1MgTU9CSUxFTUVESUFTIFFVRSBOw4NPIFBPU1NVRU0gVVJMKi8KICAgICAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJJbWFnZW0gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICIvbWVkaWF0eXBlLyIgKyBtb2JpbGVtZWRpYS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgcGF0aDogbW9iaWxlbWVkaWEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG1vYmlsZW1lZGlhLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246CiAgICAgICAgICAgICAgICAgICAgICAgICJJbWFnZW0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleG1vYmlsZSArIDEpICsKICAgICAgICAgICAgICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9zdGEuZGF0YS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRpbnN0cnVjdGlvbmFsZWxlbWVudDogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnBvc3QoYC9tb2JpbGVtZWRpYS9gLCB7CiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIlZpZGVvICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiL21lZGlhdHlwZS8iICsgbW9iaWxlbWVkaWEudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG1vYmlsZW1lZGlhLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGltZTogbW9iaWxlbWVkaWEudGltZSwKICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQXVkaW8gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICIvbWVkaWF0eXBlLyIgKyBtb2JpbGVtZWRpYS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgcGF0aDogbW9iaWxlbWVkaWEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDUpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJMaW5rICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiL21lZGlhdHlwZS8iICsgbW9iaWxlbWVkaWEudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG1vYmlsZW1lZGlhLm9iamVjdCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgICAgZWxlbWVudFF1ZXN0aW9uLAogICAgICAgICAgICAgIGluZGV4UXVlc3Rpb24KICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgLypEQU5ETyBQVVQgTkFTIFFVRVNUw5VFUyBDT00gVVJMKi8KICAgICAgICAgICAgICBpZiAoZWxlbWVudFF1ZXN0aW9uLnVybCkgewogICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkKICAgICAgICAgICAgICAgICAgLnB1dChlbGVtZW50UXVlc3Rpb24udXJsLCB7CiAgICAgICAgICAgICAgICAgICAgb3JkZXJxdWVzdGlvbjogaW5kZXhRdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbnF1ZXN0aW9uOiBlbGVtZW50UXVlc3Rpb24uZGVzY3JpcHRpb25RdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICB0eXBlcXVlc3Rpb246CiAgICAgICAgICAgICAgICAgICAgICBgL3F1ZXN0aW9udHlwZS9gICsgZWxlbWVudFF1ZXN0aW9uLnR5cGVRdWVzdGlvbiArIGAvYCwKICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiB2bS5pbnN0cnVjdGlvbmFsZWxlbWVudC51cmwsCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uKHJlc3Bvc3RhMikgewogICAgICAgICAgICAgICAgICAgIC8qREFORE8gUFVUIE5PUyBNT0JJTEVNRURJQVMgREFTIFFVRVNUw5VFUyBDT00gVVJMKi8KCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudFF1ZXN0aW9uLm1vYmlsZU1lZGlhcy5mb3JFYWNoKGFzeW5jIGZ1bmN0aW9uKAogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZSwKICAgICAgICAgICAgICAgICAgICAgIGluZGV4TW9iaWxlCiAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudE1vYmlsZS51cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRNb2JpbGUudHlwZSA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50TW9iaWxlLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJJbWFnZW0gIiArIChpbmRleE1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvbWVkaWF0eXBlLyIgKyBlbGVtZW50TW9iaWxlLnR5cGUgKyAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBlbGVtZW50TW9iaWxlLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSW1hZ2VtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5kZXhNb2JpbGUgKyAxKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgUXVlc3TDo28iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9zdGEyLmRhdGEub3JkZXJxdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUudHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50TW9iaWxlLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJWaWRlbyAiICsgKGluZGV4TW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi9tZWRpYXR5cGUvIiArIGVsZW1lbnRNb2JpbGUudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IGVsZW1lbnRNb2JpbGUucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBlbGVtZW50TW9iaWxlLm5hbWVmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBlbGVtZW50TW9iaWxlLnRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUudHlwZSA9PT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50TW9iaWxlLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJBdWRpbyAiICsgKGluZGV4TW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi9tZWRpYXR5cGUvIiArIGVsZW1lbnRNb2JpbGUudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSA1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KGVsZW1lbnRNb2JpbGUudXJsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkxpbmsgIiArIChpbmRleE1vYmlsZSArIDEpICsgdm0uaSsrICogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiL21lZGlhdHlwZS8iICsgZWxlbWVudE1vYmlsZS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogZWxlbWVudE1vYmlsZS5vYmplY3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiSW1hZ2VtICIgKyAoaW5kZXhNb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiL21lZGlhdHlwZS8iICsgZWxlbWVudE1vYmlsZS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJbWFnZW0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleE1vYmlsZSArIDEpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBRdWVzdMOjbyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb3N0YTIuZGF0YS5vcmRlcnF1ZXN0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiVmlkZW8gIiArIChpbmRleE1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvbWVkaWF0eXBlLyIgKyBlbGVtZW50TW9iaWxlLnR5cGUgKyAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBlbGVtZW50TW9iaWxlLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5wYXRoLnNwbGl0KCIvIilbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IGVsZW1lbnRNb2JpbGUudGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQXVkaW8gIiArIChpbmRleE1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvbWVkaWF0eXBlLyIgKyBlbGVtZW50TW9iaWxlLnR5cGUgKyAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50TW9iaWxlLnR5cGUgPT09IDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJMaW5rICIgKyAoaW5kZXhNb2JpbGUgKyAxKSArIHZtLmkrKyAqIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi9tZWRpYXR5cGUvIiArIGVsZW1lbnRNb2JpbGUudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IGVsZW1lbnRNb2JpbGUub2JqZWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFF1ZXN0aW9uLnR5cGVRdWVzdGlvbiA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudFF1ZXN0aW9uLmFuc3dlcnNBbHRlcm5hdGl2ZXMuZm9yRWFjaCgKICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24oZWxlbWVudEFsdGVybmF0aXZlLCBpbmRleEFsdGVybmF0aXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRBbHRlcm5hdGl2ZS51cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50QWx0ZXJuYXRpdmUudXJsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkb2JqYW5zd2VyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmlkT2JqQW5zd2VySXRlbXNbaW5kZXhBbHRlcm5hdGl2ZV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcnM6IGVsZW1lbnRBbHRlcm5hdGl2ZS5hbnN3ZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc3RydWU6IGVsZW1lbnRBbHRlcm5hdGl2ZS5pc1RydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJhbnN3ZXJhbHRlcm5hdGl2ZXM6IGluZGV4QWx0ZXJuYXRpdmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL2Fuc3dlcnNhbHRlcm5hdGl2ZXMvYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZG9iamFuc3dlcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5pZE9iakFuc3dlckl0ZW1zW2luZGV4QWx0ZXJuYXRpdmVdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnN3ZXJzOiBlbGVtZW50QWx0ZXJuYXRpdmUuYW5zd2VycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXN0cnVlOiBlbGVtZW50QWx0ZXJuYXRpdmUuaXNUcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyYW5zd2VyYWx0ZXJuYXRpdmVzOiBpbmRleEFsdGVybmF0aXZlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFF1ZXN0aW9uLnR5cGVRdWVzdGlvbiA9PT0gMikgewogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KGVsZW1lbnRRdWVzdGlvbi51cmxDb3JyZWN0QW5zd2VyLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3RhbnN3ZXI6IGVsZW1lbnRRdWVzdGlvbi5jb3JyZWN0QW5zd2VyLAogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkKICAgICAgICAgICAgICAgICAgLnBvc3QoYC9xdWVzdGlvbi9gLCB7CiAgICAgICAgICAgICAgICAgICAgb3JkZXJxdWVzdGlvbjogaW5kZXhRdWVzdGlvbiArIDEsCiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25xdWVzdGlvbjogZWxlbWVudFF1ZXN0aW9uLmRlc2NyaXB0aW9uUXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgICAgZmtfaWRpbnN0cnVjdGlvbmFsZWxlbWVudDogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgdHlwZXF1ZXN0aW9uOgogICAgICAgICAgICAgICAgICAgICAgYC9xdWVzdGlvbnR5cGUvYCArIGVsZW1lbnRRdWVzdGlvbi50eXBlUXVlc3Rpb24gKyBgL2AsCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uKHJlc3Bvc3RhMikgewogICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50UXVlc3Rpb24udHlwZVF1ZXN0aW9uID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBlbGVtZW50UXVlc3Rpb24uYW5zd2Vyc0FsdGVybmF0aXZlcy5mb3JFYWNoKAogICAgICAgICAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbihlbGVtZW50QWx0ZXJuYXRpdmUsIGluZGV4QWx0ZXJuYXRpdmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvYW5zd2Vyc2FsdGVybmF0aXZlcy9gLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZG9iamFuc3dlcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uaWRPYmpBbnN3ZXJJdGVtc1tpbmRleEFsdGVybmF0aXZlXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcnM6IGVsZW1lbnRBbHRlcm5hdGl2ZS5hbnN3ZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXN0cnVlOiBlbGVtZW50QWx0ZXJuYXRpdmUuaXNUcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJhbnN3ZXJhbHRlcm5hdGl2ZXM6IGluZGV4QWx0ZXJuYXRpdmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50UXVlc3Rpb24udHlwZVF1ZXN0aW9uID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvcmVzb2x1dGlvbnF1ZXN0aW9uL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGFuc3dlcjogZWxlbWVudFF1ZXN0aW9uLmNvcnJlY3RBbnN3ZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8qIEPDk0RJR08gUEFSQSBDUklBw4fDg08gREEgQVRJVklEQURFIENPTEFCT1JBVElWQSAqLwogICAgICAgIGF3YWl0IEFwaSgpCiAgICAgICAgICAucG9zdChgL2luc3RydWN0aW9uYWxlbGVtZW50L2AsIGluc3RydWN0aW9uYWxlbGVtZW50KQogICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24ocmVzcG9zdGEpIHsKICAgICAgICAgICAgaWYgKHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wpIHsKICAgICAgICAgICAgICAvKiBJTlNFUsOHw4NPIERPUyBNT0JJTEVNRURJQVMgREEgQVRJVklEQURFIENPTEFCT1JBVElWQSAqLwogICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wuZm9yRWFjaChhc3luYyBmdW5jdGlvbigKICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLAogICAgICAgICAgICAgICAgaW5kZXhtb2JpbGUKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnBvc3QoYC9tb2JpbGVtZWRpYS9gLCB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJJbWFnZW0gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiL21lZGlhdHlwZS8iICsgbW9iaWxlbWVkaWEudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG1vYmlsZW1lZGlhLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICJJbWFnZW0gIiArCiAgICAgICAgICAgICAgICAgICAgICAoaW5kZXhtb2JpbGUgKyAxKSArCiAgICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgICAgcmVzcG9zdGEuZGF0YS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiVmlkZW8gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiL21lZGlhdHlwZS8iICsgbW9iaWxlbWVkaWEudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG1vYmlsZW1lZGlhLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICB0aW1lOiBtb2JpbGVtZWRpYS50aW1lLAogICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gMykgewogICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQXVkaW8gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiL21lZGlhdHlwZS8iICsgbW9iaWxlbWVkaWEudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gNSkgewogICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiTGluayAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICIvbWVkaWF0eXBlLyIgKyBtb2JpbGVtZWRpYS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBtb2JpbGVtZWRpYS5vYmplY3QsCiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgZmtfaWRpbnN0cnVjdGlvbmFsZWxlbWVudDogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGF3YWl0IHZtLnF1ZXN0aW9uc0NvbnRyb2wuZm9yRWFjaChhc3luYyBmdW5jdGlvbigKICAgICAgICAgICAgICBlbGVtZW50UXVlc3Rpb24sCiAgICAgICAgICAgICAgaW5kZXhRdWVzdGlvbgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAvKiBJTlNFUsOHw4NPIERBUyBRVUVTVMOVRVMgREEgQVRJVklEQURFIENPTEFCT1JBVElWQSAqLwogICAgICAgICAgICAgIGF3YWl0IEFwaSgpCiAgICAgICAgICAgICAgICAucG9zdChgL3F1ZXN0aW9uL2AsIHsKICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25xdWVzdGlvbjogZWxlbWVudFF1ZXN0aW9uLmRlc2NyaXB0aW9uUXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgIG9yZGVycXVlc3Rpb246IGluZGV4UXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICB0eXBlcXVlc3Rpb246CiAgICAgICAgICAgICAgICAgICAgYC9xdWVzdGlvbnR5cGUvYCArIGVsZW1lbnRRdWVzdGlvbi50eXBlUXVlc3Rpb24gKyBgL2AsCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24ocmVzcG9zdGEyKSB7CiAgICAgICAgICAgICAgICAgIC8qIElOU0VSw4fDg08gRE9TIE1PQklMRU1FRElBUyBEQVMgUVVFU1TDlUVTIERBIEFUSVZJREFERSBDT0xBQk9SQVRJVkEgKi8KICAgICAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudFF1ZXN0aW9uLm1vYmlsZU1lZGlhcy5mb3JFYWNoKGFzeW5jIGZ1bmN0aW9uKAogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUsCiAgICAgICAgICAgICAgICAgICAgaW5kZXhNb2JpbGUKICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRNb2JpbGUudHlwZSA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJJbWFnZW0gIiArIChpbmRleE1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAiL21lZGlhdHlwZS8iICsgZWxlbWVudE1vYmlsZS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IGVsZW1lbnRNb2JpbGUucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICAgICAiSW1hZ2VtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleE1vYmlsZSArIDEpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAiIFF1ZXN0w6NvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9zdGEyLmRhdGEub3JkZXJxdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUudHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJWaWRlbyAiICsgKGluZGV4TW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICIvbWVkaWF0eXBlLyIgKyBlbGVtZW50TW9iaWxlLnR5cGUgKyAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5wYXRoLnNwbGl0KCIvIilbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBlbGVtZW50TW9iaWxlLnRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50TW9iaWxlLnR5cGUgPT09IDMpIHsKICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnBvc3QoYC9tb2JpbGVtZWRpYS9gLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQXVkaW8gIiArIChpbmRleE1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAiL21lZGlhdHlwZS8iICsgZWxlbWVudE1vYmlsZS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBlbGVtZW50TW9iaWxlLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50TW9iaWxlLnR5cGUgPT09IDUpIHsKICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnBvc3QoYC9tb2JpbGVtZWRpYS9gLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiTGluayAiICsgKGluZGV4TW9iaWxlICsgMSkgKyB2bS5pKysgKiAwLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAiL21lZGlhdHlwZS8iICsgZWxlbWVudE1vYmlsZS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IGVsZW1lbnRNb2JpbGUub2JqZWN0LAogICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50UXVlc3Rpb24udHlwZVF1ZXN0aW9uID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgLyogSU5TRVLDh8ODTyBEQVMgQUxURVJOQVRJVkFTIERBUyBRVUVTVMOVRVMgREEgQVRJVklEQURFIENPTEFCT1JBVElWQSAqLwogICAgICAgICAgICAgICAgICAgIGF3YWl0IGVsZW1lbnRRdWVzdGlvbi5hbnN3ZXJzQWx0ZXJuYXRpdmVzLmZvckVhY2goCiAgICAgICAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbihlbGVtZW50QWx0ZXJuYXRpdmUsIGluZGV4QWx0ZXJuYXRpdmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL2Fuc3dlcnNhbHRlcm5hdGl2ZXMvYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlkb2JqYW5zd2VyOiB2bS5pZE9iakFuc3dlckl0ZW1zW2luZGV4QWx0ZXJuYXRpdmVdLAogICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcnM6IGVsZW1lbnRBbHRlcm5hdGl2ZS5hbnN3ZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgIGlzdHJ1ZTogZWxlbWVudEFsdGVybmF0aXZlLmlzVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJhbnN3ZXJhbHRlcm5hdGl2ZXM6IGluZGV4QWx0ZXJuYXRpdmUsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFF1ZXN0aW9uLnR5cGVRdWVzdGlvbiA9PT0gMikgewogICAgICAgICAgICAgICAgICAgIC8qIElOU0VSw4fDg08gREEgUkVTUE9TVEEgREFTIFFVRVNUw5VFUyBEQSBBVElWSURBREUgQ09MQUJPUkFUSVZBICovCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL3Jlc29sdXRpb25xdWVzdGlvbi9gLCB7CiAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0YW5zd2VyOiBlbGVtZW50UXVlc3Rpb24uY29ycmVjdEFuc3dlciwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRNb2JpbGVNZWRpYShtb2JpbGVNZWRpYVR5cGUpIHsKICAgICAgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMSkgewogICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgIHR5cGU6IG1vYmlsZU1lZGlhVHlwZSwKICAgICAgICAgIG9iamVjdDogbnVsbCwKICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICBwYXRoOiBudWxsLAogICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICB1cmw6IG51bGwsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAobW9iaWxlTWVkaWFUeXBlID09PSAyKSB7CiAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sLnB1c2goewogICAgICAgICAgdHlwZTogbW9iaWxlTWVkaWFUeXBlLAogICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgcmVzb2x1dGlvbjogbnVsbCwKICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICBwYXRoOiBudWxsLAogICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICB1cmw6IG51bGwsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAobW9iaWxlTWVkaWFUeXBlID09PSAzKSB7CiAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sLnB1c2goewogICAgICAgICAgdHlwZTogbW9iaWxlTWVkaWFUeXBlLAogICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgcGF0aDogbnVsbCwKICAgICAgICAgIG5hbWVmaWxlOiBudWxsLAogICAgICAgICAgdXJsOiBudWxsLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gNCkgewogICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgIHR5cGU6IG1vYmlsZU1lZGlhVHlwZSArIDEsCiAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICB1cmw6IG51bGwsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBkZWxldGVNb2JpbGVNZWRpYShpZE1vYmlsZU1lZGlhKSB7CiAgICAgIGlmICh0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2xbaWRNb2JpbGVNZWRpYV0udXJsKSB7CiAgICAgICAgaWYgKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbFtpZE1vYmlsZU1lZGlhXS50eXBlICE9PSA1KSB7CiAgICAgICAgICBhd2FpdCBmaXJlYmFzZQogICAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAgIC5yZWYoKQogICAgICAgICAgICAuY2hpbGQodGhpcy5tb2JpbGVNZWRpYXNDb250cm9sW2lkTW9iaWxlTWVkaWFdLnBhdGgpCiAgICAgICAgICAgIC5kZWxldGUoKTsKICAgICAgICB9CiAgICAgICAgYXdhaXQgQXBpKCkuZGVsZXRlKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbFtpZE1vYmlsZU1lZGlhXS51cmwpOwogICAgICB9CiAgICAgIGlmIChpZE1vYmlsZU1lZGlhID09IDApIHsKICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wuc2hpZnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wuc3BsaWNlKGlkTW9iaWxlTWVkaWEsIDEpOwogICAgICB9CiAgICB9LAogICAgYWRkUXVlc3Rpb25hcmlvKCkgewogICAgICBpZiAodGhpcy52aWV3UXVlc3Rpb25zID09PSBmYWxzZSkgewogICAgICAgIHRoaXMudmlld1F1ZXN0aW9ucyA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBkZWxldGVRdWVzdGlvbmFyaW8oKSB7CiAgICAgIGF3YWl0IHRoaXMucXVlc3Rpb25zQ29udHJvbC5mb3JFYWNoKGFzeW5jIChxdWVzdGlvbikgPT4gewogICAgICAgIGlmIChxdWVzdGlvbi51cmwpIHsKICAgICAgICAgIGF3YWl0IEFwaSgpLmRlbGV0ZShxdWVzdGlvbi51cmwpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbCA9IFtdOwogICAgICB0aGlzLnZpZXdRdWVzdGlvbnMgPSBmYWxzZTsKICAgIH0sCiAgICBhZGRRdWVzdGlvbihxdWVzdGlvblR5cGUpIHsKICAgICAgaWYgKHF1ZXN0aW9uVHlwZSA9PT0gMSkgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbC5wdXNoKHsKICAgICAgICAgIHR5cGVRdWVzdGlvbjogcXVlc3Rpb25UeXBlLAogICAgICAgICAgZGVzY3JpcHRpb25RdWVzdGlvbjogbnVsbCwKICAgICAgICAgIGFuc3dlcnNBbHRlcm5hdGl2ZXM6IFtdLAogICAgICAgICAgbW9iaWxlTWVkaWFzOiBbXSwKICAgICAgICAgIHVybDogbnVsbCwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChxdWVzdGlvblR5cGUgPT09IDIpIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICB0eXBlUXVlc3Rpb246IHF1ZXN0aW9uVHlwZSwKICAgICAgICAgIGRlc2NyaXB0aW9uUXVlc3Rpb246IG51bGwsCiAgICAgICAgICBjb3JyZWN0QW5zd2VyOiBudWxsLAogICAgICAgICAgbW9iaWxlTWVkaWFzOiBbXSwKICAgICAgICAgIHVybDogbnVsbCwKICAgICAgICAgIHVybENvcnJlY3RBbnN3ZXI6IG51bGwsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBkZWxldGVRdWVzdGlvbihpZFF1ZXN0aW9uKSB7CiAgICAgIGlmICh0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0udXJsKSB7CiAgICAgICAgYXdhaXQgQXBpKCkuZGVsZXRlKHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS51cmwpOwogICAgICB9CiAgICAgIGlmIChpZFF1ZXN0aW9uID09IDApIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wuc2hpZnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wuc3BsaWNlKGlkUXVlc3Rpb24sIDEpOwogICAgICB9CiAgICB9LAogICAgYWRkTW9iaWxlTWVkaWFRdWVzdGlvbihpZFF1ZXN0aW9uLCBtb2JpbGVNZWRpYVR5cGUpIHsKICAgICAgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMSkgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMucHVzaCh7CiAgICAgICAgICB0eXBlOiBtb2JpbGVNZWRpYVR5cGUsCiAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgcGF0aDogbnVsbCwKICAgICAgICAgIG5hbWVmaWxlOiBudWxsLAogICAgICAgICAgdXJsOiBudWxsLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMikgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMucHVzaCh7CiAgICAgICAgICB0eXBlOiBtb2JpbGVNZWRpYVR5cGUsCiAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgIHVybDogbnVsbCwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChtb2JpbGVNZWRpYVR5cGUgPT09IDMpIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzLnB1c2goewogICAgICAgICAgdHlwZTogbW9iaWxlTWVkaWFUeXBlLAogICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgcGF0aDogbnVsbCwKICAgICAgICAgIG5hbWVmaWxlOiBudWxsLAogICAgICAgICAgdXJsOiBudWxsLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gNCkgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMucHVzaCh7CiAgICAgICAgICB0eXBlOiBtb2JpbGVNZWRpYVR5cGUgKyAxLAogICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgdXJsOiBudWxsLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZGVsZXRlTW9iaWxlTWVkaWFRdWVzdGlvbihpZFF1ZXN0aW9uLCBpZE1vYmlsZU1lZGlhKSB7CiAgICAgIGlmICh0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzW2lkTW9iaWxlTWVkaWFdLnVybCkgewogICAgICAgIGlmICgKICAgICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXNbaWRNb2JpbGVNZWRpYV0KICAgICAgICAgICAgLnR5cGUgIT09IDUKICAgICAgICApIHsKICAgICAgICAgIGF3YWl0IGZpcmViYXNlCiAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgLnJlZigpCiAgICAgICAgICAgIC5jaGlsZCgKICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzW2lkTW9iaWxlTWVkaWFdCiAgICAgICAgICAgICAgICAucGF0aAogICAgICAgICAgICApCiAgICAgICAgICAgIC5kZWxldGUoKTsKICAgICAgICB9CiAgICAgICAgYXdhaXQgQXBpKCkuZGVsZXRlKAogICAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sW2lkUXVlc3Rpb25dLm1vYmlsZU1lZGlhc1tpZE1vYmlsZU1lZGlhXS51cmwKICAgICAgICApOwogICAgICB9CiAgICAgIGlmIChpZE1vYmlsZU1lZGlhID09IDApIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzLnNoaWZ0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sW2lkUXVlc3Rpb25dLm1vYmlsZU1lZGlhcy5zcGxpY2UoCiAgICAgICAgICBpZE1vYmlsZU1lZGlhLAogICAgICAgICAgMQogICAgICAgICk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRBbHRlcm5hdGl2ZShpZFF1ZXN0aW9uKSB7CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzLnB1c2goewogICAgICAgIGlzVHJ1ZTogZmFsc2UsCiAgICAgICAgYW5zd2VyczogbnVsbCwKICAgICAgICB1cmw6IG51bGwsCiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGRlbGV0ZUFsdGVybmF0aXZlKGlkUXVlc3Rpb24sIGlkQWx0ZXJuYXRpdmUpIHsKICAgICAgaWYgKAogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzW2lkQWx0ZXJuYXRpdmVdCiAgICAgICAgICAudXJsCiAgICAgICkgewogICAgICAgIGF3YWl0IEFwaSgpLmRlbGV0ZSgKICAgICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzW2lkQWx0ZXJuYXRpdmVdCiAgICAgICAgICAgIC51cmwKICAgICAgICApOwogICAgICB9CiAgICAgIGlmIChpZEFsdGVybmF0aXZlID09IDApIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0uYW5zd2Vyc0FsdGVybmF0aXZlcy5zaGlmdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzLnNwbGljZSgKICAgICAgICAgIGlkQWx0ZXJuYXRpdmUsCiAgICAgICAgICAxCiAgICAgICAgKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHZhbGlkYXRlKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICBpZiAodGhpcy52aWV3UXVlc3Rpb25zKSB7CiAgICAgICAgICBpZiAodGhpcy5xdWVzdGlvbnNDb250cm9sLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgICAgICAgdmFyIGF1eCA9IDE7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5xdWVzdGlvbnNDb250cm9sLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgaWYgKGF1eCA9PT0gMSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMucXVlc3Rpb25zQ29udHJvbFtpXS50eXBlUXVlc3Rpb24gPT09IDEpIHsKICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzLmxlbmd0aCA9PT0gMAogICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICB2bS5xdWVzdGlvbkFqdXN0ID0gaSArIDE7CiAgICAgICAgICAgICAgICAgICAgdm0uZGlhbG9nX2FsZXJ0MyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYXV4ID0gMDsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICAgIHZhciBqID0gMDsKICAgICAgICAgICAgICAgICAgICBqIDwgdGhpcy5xdWVzdGlvbnNDb250cm9sW2ldLmFuc3dlcnNBbHRlcm5hdGl2ZXMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIGorKwogICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaV0uYW5zd2Vyc0FsdGVybmF0aXZlc1tqXS5pc1RydWUKICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICBqID09PQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sW2ldLmFuc3dlcnNBbHRlcm5hdGl2ZXMubGVuZ3RoIC0gMQogICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgdm0ucXVlc3Rpb25BanVzdCA9IGkgKyAxOwogICAgICAgICAgICAgICAgICAgICAgdm0uZGlhbG9nX2FsZXJ0MiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICBhdXggPSAwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGF1eCA9PT0gMSkgewogICAgICAgICAgICAgIHZhciBhdXhOdW1iZXJRdWVzdGlvbnMgPSB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wubGVuZ3RoOwogICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9zdFF1ZXN0aW9ucygpOwogICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVzZXRWYXJpYWJsZXMoKTsKICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wgPSBbXTsKICAgICAgICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wgPSBbXTsKICAgICAgICAgICAgICBhd2FpdCB0aGlzLiRlbWl0KCJpbnN0cnVjY2xvc2UiLCBhdXhOdW1iZXJRdWVzdGlvbnMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmRpYWxvZ19hbGVydCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF3YWl0IHRoaXMucG9zdFF1ZXN0aW9ucygpOwogICAgICAgICAgYXdhaXQgdGhpcy5yZXNldFZhcmlhYmxlcygpOwogICAgICAgICAgYXdhaXQgdGhpcy4kZW1pdCgiaW5zdHJ1Y2Nsb3NlIik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVzZXRWYXJpYWJsZXMoKSB7CiAgICAgIHRoaXMuaSA9IDA7CiAgICAgIHRoaXMuYXV4R2V0U3JjID0gW107CiAgICAgIHRoaXMuYXV4R2V0U3JjUXVlc3Rpb25zID0gW107CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbCA9IFtdOwogICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wgPSBbXTsKICAgICAgdGhpcy5jb2xhYm9yYXRpdmVOYW1lID0gIiI7CiAgICAgIHRoaXMubWVtYmVyQW1vdW50ID0gIiI7CiAgICAgIHRoaXMuY29sYWJvcmF0aXZlRGVzY3JpcHRpb24gPSAiIjsKICAgICAgdGhpcy52aWV3UXVlc3Rpb25zID0gZmFsc2U7CiAgICB9LAogICAgYXN5bmMgcmVzZXQoKSB7CiAgICAgIGF3YWl0IHRoaXMuJGVtaXQoImluc3RydWNjbG9zZSIpOwogICAgICBhd2FpdCB0aGlzLnJlc2V0VmFyaWFibGVzKCk7CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbCA9IFtdOwogICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wgPSBbXTsKICAgICAgYXdhaXQgdGhpcy4kcmVmcy5mb3JtLnJlc2V0KCk7CiAgICB9LAogICAgYXR1YWxpemFPYmooZmlsZSwgaW5kZXhNb2JpbGUpIHsKICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sW2luZGV4TW9iaWxlXS5vYmplY3QgPSBmaWxlOwogICAgfSwKICAgIGF0dWFsaXphTWV0YSgpIHsKICAgICAgaWYgKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sLmZvckVhY2goKG1vYmlsZW1lZGlhKSA9PiB7CiAgICAgICAgICBpZiAobW9iaWxlbWVkaWEub2JqZWN0ICYmICFtb2JpbGVtZWRpYS51cmwpIHsKICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgaW1nLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwobW9iaWxlbWVkaWEub2JqZWN0KTsKICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uID0gaW1nLndpZHRoICsgIlgiICsgaW1nLmhlaWdodDsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICB2YXIgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ2aWRlbyIpOwogICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzb3VyY2UiKTsKICAgICAgICAgICAgICBzb3VyY2Uuc2V0QXR0cmlidXRlKAogICAgICAgICAgICAgICAgInNyYyIsCiAgICAgICAgICAgICAgICBVUkwuY3JlYXRlT2JqZWN0VVJMKG1vYmlsZW1lZGlhLm9iamVjdCkKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHZpZGVvLmFwcGVuZENoaWxkKHNvdXJjZSk7CiAgICAgICAgICAgICAgdmlkZW8ub25jYW5wbGF5ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uID0KICAgICAgICAgICAgICAgICAgdmlkZW8udmlkZW9XaWR0aCArICJYIiArIHZpZGVvLnZpZGVvSGVpZ2h0OwogICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudGltZSA9IHZpZGVvLmR1cmF0aW9uOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGdldFNyY0ltYWdlKGluZGV4TW9iaWxlLCBwYXRoLCBuYW1lZmlsZSkgewogICAgICAvKnZhciBvYmogPSB7fTsqLwogICAgICBpZiAocGF0aCkgewogICAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgICAgYXdhaXQgZmlyZWJhc2UKICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgIC5yZWYocGF0aCkKICAgICAgICAgIC5nZXREb3dubG9hZFVSTCgpCiAgICAgICAgICAudGhlbihmdW5jdGlvbih1cmwpIHsKICAgICAgICAgICAgLyp2bS52aWV3SW1hZ2VTcmMgPSB1cmw7Ki8KICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gImJsb2IiOwogICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgdmFyIGJsb2IgPSB4aHIucmVzcG9uc2U7CiAgICAgICAgICAgICAgdmFyIGZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIG5hbWVmaWxlLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBibG9iLnR5cGUsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gdm0uYXV4R2V0U3JjLnB1c2goZmlsZSk7CiAgICAgICAgICAgICAgdm0uYXR1YWxpemFPYmooZmlsZSwgaW5kZXhNb2JpbGUpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB4aHIub3BlbigiR0VUIiwgdXJsKTsKICAgICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ2V0U3JjVmlkZW8oaW5kZXhNb2JpbGUsIHBhdGgsIG5hbWVmaWxlKSB7CiAgICAgIC8qdmFyIG9iaiA9IHt9OyovCiAgICAgIGlmIChwYXRoKSB7CiAgICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgICBhd2FpdCBmaXJlYmFzZQogICAgICAgICAgLnN0b3JhZ2UoKQogICAgICAgICAgLnJlZihwYXRoKQogICAgICAgICAgLmdldERvd25sb2FkVVJMKCkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHVybCkgewogICAgICAgICAgICAvKnZtLnZpZXdWaWRlb1NyYyA9IHVybDsqLwogICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAiYmxvYiI7CiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB2YXIgYmxvYiA9IHhoci5yZXNwb25zZTsKICAgICAgICAgICAgICB2YXIgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgbmFtZWZpbGUsIHsKICAgICAgICAgICAgICAgIHR5cGU6IGJsb2IudHlwZSwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAvLyB2bS5hdXhHZXRTcmMucHVzaChmaWxlKTsKICAgICAgICAgICAgICB2bS5hdHVhbGl6YU9iaihmaWxlLCBpbmRleE1vYmlsZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHhoci5vcGVuKCJHRVQiLCB1cmwpOwogICAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXRTcmNBdWRpbyhpbmRleE1vYmlsZSwgcGF0aCwgbmFtZWZpbGUpIHsKICAgICAgLyp2YXIgb2JqID0ge307Ki8KICAgICAgaWYgKHBhdGgpIHsKICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgIGF3YWl0IGZpcmViYXNlCiAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAucmVmKHBhdGgpCiAgICAgICAgICAuZ2V0RG93bmxvYWRVUkwoKQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24odXJsKSB7CiAgICAgICAgICAgIC8qdm0udmlld0F1ZGlvU3JjID0gdXJsOyovCiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICJibG9iIjsKICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBibG9iID0geGhyLnJlc3BvbnNlOwogICAgICAgICAgICAgIHZhciBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBuYW1lZmlsZSwgewogICAgICAgICAgICAgICAgdHlwZTogYmxvYi50eXBlLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIC8vIHZtLmF1eEdldFNyYy5wdXNoKGZpbGUpOwogICAgICAgICAgICAgIHZtLmF0dWFsaXphT2JqKGZpbGUsIGluZGV4TW9iaWxlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgeGhyLm9wZW4oIkdFVCIsIHVybCk7CiAgICAgICAgICAgIHhoci5zZW5kKCk7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGF0dWFsaXphTWV0YVF1ZXN0aW9ucygpIHsKICAgICAgaWYgKHRoaXMucXVlc3Rpb25zQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sLmZvckVhY2goKHF1ZXN0aW9uKSA9PiB7CiAgICAgICAgICBpZiAocXVlc3Rpb24ubW9iaWxlTWVkaWFzKSB7CiAgICAgICAgICAgIHF1ZXN0aW9uLm1vYmlsZU1lZGlhcy5mb3JFYWNoKChtb2JpbGVtZWRpYSkgPT4gewogICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS5vYmplY3QgJiYgIW1vYmlsZW1lZGlhLnVybCkgewogICAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICAgICAgICBpbWcuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChtb2JpbGVtZWRpYS5vYmplY3QpOwogICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEucmVzb2x1dGlvbiA9IGltZy53aWR0aCArICJYIiArIGltZy5oZWlnaHQ7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidmlkZW8iKTsKICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNvdXJjZSIpOwogICAgICAgICAgICAgICAgICBzb3VyY2Uuc2V0QXR0cmlidXRlKAogICAgICAgICAgICAgICAgICAgICJzcmMiLAogICAgICAgICAgICAgICAgICAgIFVSTC5jcmVhdGVPYmplY3RVUkwobW9iaWxlbWVkaWEub2JqZWN0KQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB2aWRlby5hcHBlbmRDaGlsZChzb3VyY2UpOwogICAgICAgICAgICAgICAgICB2aWRlby5vbmNhbnBsYXkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uID0KICAgICAgICAgICAgICAgICAgICAgIHZpZGVvLnZpZGVvV2lkdGggKyAiWCIgKyB2aWRlby52aWRlb0hlaWdodDsKICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS50aW1lID0gdmlkZW8uZHVyYXRpb247CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGF0dWFsaXphT2JqUXVlc3Rpb25zKGZpbGUsIGluZGV4UXVlc3Rpb24sIGluZGV4TW9iaWxlKSB7CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpbmRleFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXNbCiAgICAgICAgaW5kZXhNb2JpbGUKICAgICAgXS5vYmplY3QgPSBmaWxlOwogICAgfSwKICAgIGFzeW5jIGdldFNyY0ltYWdlUXVlc3Rpb25zKGluZGV4UXVlc3Rpb24sIGluZGV4TW9iaWxlLCBwYXRoLCBuYW1lZmlsZSkgewogICAgICAvKnZhciBvYmogPSB7fTsqLwogICAgICBpZiAocGF0aCkgewogICAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgICAgYXdhaXQgZmlyZWJhc2UKICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgIC5yZWYocGF0aCkKICAgICAgICAgIC5nZXREb3dubG9hZFVSTCgpCiAgICAgICAgICAudGhlbihmdW5jdGlvbih1cmwpIHsKICAgICAgICAgICAgLyp2bS52aWV3SW1hZ2VTcmMgPSB1cmw7Ki8KICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gImJsb2IiOwogICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgdmFyIGJsb2IgPSB4aHIucmVzcG9uc2U7CiAgICAgICAgICAgICAgdmFyIGZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIG5hbWVmaWxlLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBibG9iLnR5cGUsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLyp2bS5hdXhHZXRTcmNRdWVzdGlvbnMucHVzaChmaWxlKTsqLwogICAgICAgICAgICAgIHZtLmF0dWFsaXphT2JqUXVlc3Rpb25zKGZpbGUsIGluZGV4UXVlc3Rpb24sIGluZGV4TW9iaWxlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgeGhyLm9wZW4oIkdFVCIsIHVybCk7CiAgICAgICAgICAgIHhoci5zZW5kKCk7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGdldFNyY1ZpZGVvUXVlc3Rpb25zKGluZGV4UXVlc3Rpb24sIGluZGV4TW9iaWxlLCBwYXRoLCBuYW1lZmlsZSkgewogICAgICAvKnZhciBvYmogPSB7fTsqLwogICAgICBpZiAocGF0aCkgewogICAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgICAgYXdhaXQgZmlyZWJhc2UKICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgIC5yZWYocGF0aCkKICAgICAgICAgIC5nZXREb3dubG9hZFVSTCgpCiAgICAgICAgICAudGhlbihmdW5jdGlvbih1cmwpIHsKICAgICAgICAgICAgLyp2bS52aWV3VmlkZW9TcmMgPSB1cmw7Ki8KICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gImJsb2IiOwogICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgdmFyIGJsb2IgPSB4aHIucmVzcG9uc2U7CiAgICAgICAgICAgICAgdmFyIGZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIG5hbWVmaWxlLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBibG9iLnR5cGUsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gdm0uYXV4R2V0U3JjUXVlc3Rpb25zLnB1c2goZmlsZSk7CiAgICAgICAgICAgICAgdm0uYXR1YWxpemFPYmpRdWVzdGlvbnMoZmlsZSwgaW5kZXhRdWVzdGlvbiwgaW5kZXhNb2JpbGUpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB4aHIub3BlbigiR0VUIiwgdXJsKTsKICAgICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ2V0U3JjQXVkaW9RdWVzdGlvbnMoaW5kZXhRdWVzdGlvbiwgaW5kZXhNb2JpbGUsIHBhdGgsIG5hbWVmaWxlKSB7CiAgICAgIC8qdmFyIG9iaiA9IHt9OyovCiAgICAgIGlmIChwYXRoKSB7CiAgICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgICBhd2FpdCBmaXJlYmFzZQogICAgICAgICAgLnN0b3JhZ2UoKQogICAgICAgICAgLnJlZihwYXRoKQogICAgICAgICAgLmdldERvd25sb2FkVVJMKCkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHVybCkgewogICAgICAgICAgICAvKnZtLnZpZXdBdWRpb1NyYyA9IHVybDsqLwogICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAiYmxvYiI7CiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB2YXIgYmxvYiA9IHhoci5yZXNwb25zZTsKICAgICAgICAgICAgICB2YXIgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgbmFtZWZpbGUsIHsKICAgICAgICAgICAgICAgIHR5cGU6IGJsb2IudHlwZSwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAvLyB2bS5hdXhHZXRTcmNRdWVzdGlvbnMucHVzaChmaWxlKTsKICAgICAgICAgICAgICB2bS5hdHVhbGl6YU9ialF1ZXN0aW9ucyhmaWxlLCBpbmRleFF1ZXN0aW9uLCBpbmRleE1vYmlsZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHhoci5vcGVuKCJHRVQiLCB1cmwpOwogICAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZXNldFZhbGlkYXRpb24oKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["AtividadeColaborativaDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0lBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AtividadeColaborativaDialog.vue","sourceRoot":"src/components/instructional_model","sourcesContent":["<template>\n  <v-container class=\"pa-0\">\n    <v-card>\n      <v-card-title style=\"background-color:#63B0B0; color:white;\">\n        <v-col cols=\"8\">\n          <span class=\"headline\">\n            <p>Descreva a atividade colaborativa a ser criada.</p>\n          </span>\n        </v-col>\n        <v-spacer></v-spacer>\n        <v-col cols=\"4\" class=\"pl-11\" style=\"margin-right: -16px;\">\n          <v-btn color=\"red\" dark large @click=\"reset()\" class=\"ml-2 mb-3\">\n            Cancelar\n            <v-icon dark right>mdi-close</v-icon>\n          </v-btn>\n          <v-btn\n            color=\"success\"\n            dark\n            large\n            @click=\"validate()\"\n            class=\"ml-2 mb-3\"\n          >\n            Salvar\n            <v-icon dark right>mdi-content-save</v-icon>\n          </v-btn>\n        </v-col>\n      </v-card-title>\n      <v-card-text>\n        <v-form ref=\"form\" v-model=\"valid\" lazy-validation class=\"mt-3\">\n          <label\n            class=\"pt-2\"\n            style=\"font-size:1.3em;\"\n            for=\"colaborativeNameArea\"\n          >\n            <strong>Identificador da atividade:</strong>\n          </label>\n          <v-text-field\n            id=\"colaborativeNameArea\"\n            v-model=\"colaborativeName\"\n            :counter=\"100\"\n            :rules=\"colaborativeNameRules\"\n            required\n            class=\"mt-2 mb-4\"\n          ></v-text-field>\n          <label\n            class=\"pt-2\"\n            style=\"font-size:1.3em;\"\n            for=\"colaborativeDescriptionArea\"\n          >\n            <strong>Escreva a descrio da atividade:</strong>\n          </label>\n          <v-textarea\n            id=\"colaborativeDescriptionArea\"\n            v-model=\"colaborativeDescription\"\n            :rules=\"colaborativeDescriptionRules\"\n            background-color=\"#F2F3F3\"\n            clearable\n            clear-icon=\"mdi-close-circle\"\n            class=\"mt-2\"\n            name=\"input-4-1\"\n            rows=\"8\"\n            filled\n            auto-grow\n            required\n          ></v-textarea>\n          <p class=\"pt-2\" style=\"font-size:1.3em;\">\n            <strong>Nmero de alunos para realizao da atividade:</strong>\n            <v-text-field\n              style=\"width: 15%;\"\n              id=\"memberAmountArea\"\n              type=\"number\"\n              v-model=\"memberAmount\"\n              :rules=\"memberAmountRules\"\n              required\n              class=\"mt-2 mb-4\"\n            ></v-text-field>\n          </p>\n\n          <v-row style=\"margin-top: -20px;\" class=\"mb-2\">\n            <v-col cols=\"4\"></v-col>\n            <v-col>\n              <v-menu\n                top=\"top\"\n                width=\"300px\"\n                origin=\"center center\"\n                :offset-y=\"true\"\n                transition=\"scale-transition\"\n              >\n                <template v-slot:activator=\"{ on }\">\n                  <v-btn\n                    v-on=\"on\"\n                    large\n                    color=\"primary\"\n                    style=\"color:white; font-size: 1.2em;\"\n                  >\n                    <strong>Adicionar MobileMedia</strong>\n                    <v-icon class=\"ml-2\" large color=\"white\"\n                      >mdi-plus-box</v-icon\n                    >\n                  </v-btn>\n                </template>\n\n                <v-list>\n                  <v-list-item\n                    v-for=\"(item, i) in itemsMobileMedia\"\n                    :key=\"i\"\n                    @click=\"addMobileMedia(i + 1)\"\n                  >\n                    <v-icon x-large color=\"blue\">{{ item.icon }}</v-icon>\n                    <v-list-item-title\n                      style=\"font-size: 1.2em; color:#2196F3;\"\n                      class=\"ml-1\"\n                    >\n                      <strong>{{ item.name }}</strong>\n                    </v-list-item-title>\n                  </v-list-item>\n                </v-list>\n              </v-menu>\n\n              <v-btn\n                color=\"primary\"\n                class=\"ml-2\"\n                large\n                style=\"color:white; font-size: 1.2em;\"\n                @click=\"addQuestionario()\"\n              >\n                <strong>Adicionar Questes</strong>\n                <v-icon class=\"ml-2\" large color=\"white\">mdi-plus-box</v-icon>\n              </v-btn>\n            </v-col>\n          </v-row>\n\n          <div v-if=\"mobileMediasControl.length > 0\">\n            <label\n              class=\"mb-6 pt-2\"\n              style=\"font-size:1.3em;\"\n              for=\"colaborativeNameArea\"\n            >\n              <strong>MobileMedias da atividade:</strong>\n            </label>\n            <div class=\"mt-8\"></div>\n            <div v-for=\"(mobilemedia, i) in mobileMediasControl\" :key=\"i\">\n              <v-row v-if=\"mobilemedia.type === 1\">\n                <v-spacer></v-spacer>\n                <v-file-input\n                  style=\"width: 165px;\"\n                  label=\"UPLOAD IMAGE\"\n                  filled\n                  @change=\"atualizaMeta\"\n                  v-model=\"mobilemedia.object\"\n                  accept=\"image/*\"\n                  prepend-icon=\"mdi-camera\"\n                ></v-file-input>\n                <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                  <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\"\n                    >mdi-minus-box</v-icon\n                  >\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-row>\n              <v-row v-if=\"mobilemedia.type === 2\">\n                <v-spacer></v-spacer>\n                <v-file-input\n                  style=\"width: 165px;\"\n                  label=\"UPLOAD VIDEO\"\n                  filled\n                  @change=\"atualizaMeta\"\n                  v-model=\"mobilemedia.object\"\n                  accept=\"video/*\"\n                  prepend-icon=\"mdi-video\"\n                ></v-file-input>\n                <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                  <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\"\n                    >mdi-minus-box</v-icon\n                  >\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-row>\n              <v-row v-if=\"mobilemedia.type === 3\">\n                <v-spacer></v-spacer>\n                <v-file-input\n                  style=\"width: 165px;\"\n                  label=\"UPLOAD AUDIO\"\n                  filled\n                  v-model=\"mobilemedia.object\"\n                  accept=\"audio/*\"\n                  prepend-icon=\"mdi-file-music\"\n                ></v-file-input>\n                <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                  <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\"\n                    >mdi-minus-box</v-icon\n                  >\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-row>\n              <v-row v-if=\"mobilemedia.type === 5\" class=\"mb-2\">\n                <v-spacer></v-spacer>\n                <v-text-field\n                  v-model=\"mobilemedia.object\"\n                  :rules=\"linkUrlRules\"\n                  label=\"Url\"\n                  required\n                ></v-text-field>\n                <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                  <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\"\n                    >mdi-minus-box</v-icon\n                  >\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-row>\n            </div>\n          </div>\n          <div v-if=\"viewQuestions\">\n            <v-app-bar color=\"#D2A64D\" dense dark height=\"45px\" class=\"mt-4\">\n              <v-col cols=\"7\">\n                <v-toolbar-title style=\"font-size:1.2em;\">\n                  <strong>Lista de questes da atividade</strong>\n                </v-toolbar-title>\n              </v-col>\n              <v-col class=\"ml-8\">\n                <v-menu\n                  top=\"top\"\n                  width=\"300px\"\n                  origin=\"center center\"\n                  :offset-y=\"true\"\n                  transition=\"scale-transition\"\n                >\n                  <template v-slot:activator=\"{ on }\">\n                    <v-btn\n                      v-on=\"on\"\n                      color=\"white\"\n                      style=\"color:black; font-size: 1.2em;\"\n                    >\n                      <strong>Adicionar Questo</strong>\n                      <v-icon class=\"ml-2\" large color=\"black\"\n                        >mdi-plus-box</v-icon\n                      >\n                    </v-btn>\n                  </template>\n\n                  <v-list>\n                    <v-list-item @click=\"addQuestion(1)\">\n                      <v-list-item-title>Questo Objetiva</v-list-item-title>\n                    </v-list-item>\n                    <v-list-item @click=\"addQuestion(2)\">\n                      <v-list-item-title>Questo Discussiva</v-list-item-title>\n                    </v-list-item>\n                  </v-list>\n                </v-menu>\n              </v-col>\n              <v-col cols=\"2\">\n                <v-btn icon=\"icon\">\n                  <v-icon\n                    x-large\n                    color=\"red\"\n                    @click=\"deleteQuestionario()\"\n                    style=\"background-color:white;\"\n                    >mdi-close-box</v-icon\n                  >\n                </v-btn>\n              </v-col>\n            </v-app-bar>\n            <v-container>\n              <v-row v-for=\"(item, i) in questionsControl\" :key=\"i\">\n                <v-col\n                  cols=\"10\"\n                  style=\"background-color:grey;color:white;\"\n                  class=\"mt-5\"\n                >\n                  <h3>Questo {{ i + 1 }}</h3>\n                </v-col>\n                <v-col cols=\"2\" style=\"paddin-left:-20px; margin-left:-30px;\">\n                  <v-menu\n                    top=\"top\"\n                    width=\"300px\"\n                    origin=\"center center\"\n                    :offset-y=\"true\"\n                    transition=\"scale-transition\"\n                  >\n                    <template v-slot:activator=\"{ on }\">\n                      <v-btn icon v-on=\"on\" class=\"ml-11\">\n                        <v-icon class=\"mt-6\" x-large color=\"primary\"\n                          >mdi-plus-box</v-icon\n                        >\n                      </v-btn>\n                    </template>\n\n                    <v-list>\n                      <v-list-item\n                        v-for=\"(itemType, idItemType) in itemsMobileMedia\"\n                        :key=\"idItemType\"\n                        @click=\"addMobileMediaQuestion(i, idItemType + 1)\"\n                      >\n                        <v-icon x-large color=\"blue\">{{\n                          itemType.icon\n                        }}</v-icon>\n                        <v-list-item-title\n                          style=\"font-size: 1.2em; color:#2196F3;\"\n                          class=\"ml-1\"\n                        >\n                          <strong>{{ itemType.name }}</strong>\n                        </v-list-item-title>\n                      </v-list-item>\n                    </v-list>\n                  </v-menu>\n                  <v-btn icon @click=\"deleteQuestion(i)\" class=\"ml-4\">\n                    <v-icon class=\"mt-6\" x-large color=\"red\"\n                      >mdi-close-box</v-icon\n                    >\n                  </v-btn>\n                </v-col>\n                <v-row>\n                  <v-col cols>\n                    <v-text-field\n                      v-model=\"questionsControl[i].descriptionQuestion\"\n                      label=\"Descrio da questo\"\n                      required\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"3\" class=\"mt-3\" v-if=\"item.typeQuestion === 1\">\n                    <v-btn\n                      color=\"primary\"\n                      style=\"color:white;\"\n                      @click=\"addAlternative(i)\"\n                      >Adicionar Alternativa</v-btn\n                    >\n                  </v-col>\n                </v-row>\n\n                <div\n                  v-if=\"questionsControl[i].mobileMedias.length > 0\"\n                  style=\"display: block; width: 100%; margin-top:-20px;\"\n                >\n                  <v-col cols=\"12\">\n                    <div\n                      v-for=\"(mobilemedia, idmobile) in questionsControl[i]\n                        .mobileMedias\"\n                      :key=\"idmobile\"\n                    >\n                      <v-row v-if=\"mobilemedia.type === 1\">\n                        <v-spacer></v-spacer>\n                        <v-file-input\n                          style=\"width: 165px;\"\n                          label=\"UPLOAD IMAGE\"\n                          filled\n                          @change=\"atualizaMetaQuestions\"\n                          v-model=\"mobilemedia.object\"\n                          accept=\"image/*\"\n                          prepend-icon=\"mdi-camera\"\n                        ></v-file-input>\n                        <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                          <v-icon\n                            x-large\n                            color=\"red\"\n                            @click=\"deleteMobileMediaQuestion(i, idmobile)\"\n                            >mdi-minus-box</v-icon\n                          >\n                        </v-btn>\n                        <v-spacer></v-spacer>\n                      </v-row>\n                      <v-row v-if=\"mobilemedia.type === 2\">\n                        <v-spacer></v-spacer>\n                        <v-file-input\n                          style=\"width: 165px;\"\n                          label=\"UPLOAD VIDEO\"\n                          filled\n                          @change=\"atualizaMetaQuestions\"\n                          v-model=\"mobilemedia.object\"\n                          accept=\"video/*\"\n                          prepend-icon=\"mdi-video\"\n                        ></v-file-input>\n                        <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                          <v-icon\n                            x-large\n                            color=\"red\"\n                            @click=\"deleteMobileMediaQuestion(i, idmobile)\"\n                            >mdi-minus-box</v-icon\n                          >\n                        </v-btn>\n                        <v-spacer></v-spacer>\n                      </v-row>\n                      <v-row v-if=\"mobilemedia.type === 3\">\n                        <v-spacer></v-spacer>\n                        <v-file-input\n                          style=\"width: 165px;\"\n                          label=\"UPLOAD AUDIO\"\n                          filled\n                          v-model=\"mobilemedia.object\"\n                          accept=\"audio/*\"\n                          prepend-icon=\"mdi-file-music\"\n                        ></v-file-input>\n                        <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                          <v-icon\n                            x-large\n                            color=\"red\"\n                            @click=\"deleteMobileMediaQuestion(i, idmobile)\"\n                            >mdi-minus-box</v-icon\n                          >\n                        </v-btn>\n                        <v-spacer></v-spacer>\n                      </v-row>\n                      <v-row v-if=\"mobilemedia.type === 5\" class=\"mb-2\">\n                        <v-spacer></v-spacer>\n                        <v-text-field\n                          v-model=\"mobilemedia.object\"\n                          :rules=\"linkUrlRules\"\n                          label=\"Url\"\n                          required\n                        ></v-text-field>\n                        <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                          <v-icon\n                            x-large\n                            color=\"red\"\n                            @click=\"deleteMobileMediaQuestion(i, idmobile)\"\n                            >mdi-minus-box</v-icon\n                          >\n                        </v-btn>\n                        <v-spacer></v-spacer>\n                      </v-row>\n                    </div>\n                  </v-col>\n                </div>\n\n                <div\n                  v-if=\"item.typeQuestion === 1\"\n                  style=\"display: block; width: 100%; margin-top:-20px;\"\n                >\n                  <p style=\"color:#f43e00; margin-bottom: -10px;\">\n                    <strong>*AVISO:</strong> Marque o checkbox da alternativa\n                    caso ela esteja correta.\n                  </p>\n                  <div\n                    style=\"display: flex; margin-bottom:-30px;\"\n                    v-for=\"(itemAlternative,\n                    indexAlternative) in questionsControl[i]\n                      .answersAlternatives\"\n                    :key=\"indexAlternative\"\n                  >\n                    <v-col\n                      cols=\"1\"\n                      class=\"mt-5\"\n                      style=\" margin-right: -40px;font-size:1.3em;\"\n                    >\n                      <strong>{{ idObjAnswerItems[indexAlternative] }})</strong>\n                    </v-col>\n                    <v-col cols=\"7\">\n                      <v-text-field\n                        v-model=\"\n                          questionsControl[i].answersAlternatives[\n                            indexAlternative\n                          ].answers\n                        \"\n                        label=\"Descrio da alternativa\"\n                        :rules=\"alternativeDescriptionRules\"\n                        required\n                      ></v-text-field>\n                    </v-col>\n                    <v-col cols=\"1\" style=\"margin-right:-40px;\">\n                      <v-checkbox\n                        v-model=\"\n                          questionsControl[i].answersAlternatives[\n                            indexAlternative\n                          ].isTrue\n                        \"\n                      ></v-checkbox>\n                    </v-col>\n                    <v-col cols=\"1\">\n                      <v-btn\n                        icon=\"icon\"\n                        @click=\"deleteAlternative(i, indexAlternative)\"\n                      >\n                        <v-icon large class=\"mt-7\" color=\"red\"\n                          >mdi-minus-box</v-icon\n                        >\n                      </v-btn>\n                    </v-col>\n                  </div>\n                </div>\n                <div\n                  v-else-if=\"item.typeQuestion === 2\"\n                  style=\"display: block; width: 100%; margin-top:-20px;\"\n                >\n                  <v-col cols=\"12\">\n                    <v-textarea\n                      v-model=\"questionsControl[i].correctAnswer\"\n                      background-color=\"#F2F3F3\"\n                      clearable\n                      clear-icon=\"mdi-close-circle\"\n                      class=\"mt-2\"\n                      name=\"input-3-1\"\n                      label=\"Resposta da questo\"\n                      filled\n                      auto-grow\n                      required\n                    ></v-textarea>\n                  </v-col>\n                </div>\n              </v-row>\n            </v-container>\n          </div>\n        </v-form>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-menu\n          v-if=\"questionsControl.length > 0\"\n          top=\"top\"\n          width=\"300px\"\n          origin=\"center center\"\n          :offset-y=\"true\"\n          transition=\"scale-transition\"\n        >\n          <template v-slot:activator=\"{ on }\">\n            <v-btn v-on=\"on\" color=\"primary\" height=\"49\">\n              <strong>Adicionar Questo</strong>\n              <v-icon class=\"ml-2\" large color=\"white\">mdi-plus-box</v-icon>\n            </v-btn>\n          </template>\n\n          <v-list>\n            <v-list-item @click=\"addQuestion(1)\">\n              <v-list-item-title>Questo Objetiva</v-list-item-title>\n            </v-list-item>\n            <v-list-item @click=\"addQuestion(2)\">\n              <v-list-item-title>Questo Discussiva</v-list-item-title>\n            </v-list-item>\n          </v-list>\n        </v-menu>\n        <v-btn color=\"red\" height=\"49\" dark large @click=\"reset()\">\n          Cancelar\n          <v-icon dark right>mdi-close</v-icon>\n        </v-btn>\n        <v-btn color=\"success\" height=\"49\" dark large @click=\"validate()\">\n          Salvar\n          <v-icon dark right>mdi-content-save</v-icon>\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n    <div class=\"text-center\">\n      <v-dialog v-model=\"dialog_alert\" width=\"500\">\n        <v-card>\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\"\n            >ALERTA!</v-card-title\n          >\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\"\n            >Para salvar um questionrio,  necessrio criar pelo uma\n            questo.</v-card-text\n          >\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" text @click=\"dialog_alert = false\">Ok</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n    <div class=\"text-center\">\n      <v-dialog v-model=\"dialog_alert2\" width=\"500\">\n        <v-card>\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\"\n            >ALERTA!</v-card-title\n          >\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\">\n            Questes objetivas necessitam de pelo menos uma alternativa correta.\n            <br />\n            Ajuste a questo {{ questionAjust }}.\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" text @click=\"dialog_alert2 = false\"\n              >Ok</v-btn\n            >\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n    <div class=\"text-center\">\n      <v-dialog v-model=\"dialog_alert3\" width=\"500\">\n        <v-card>\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\"\n            >ALERTA!</v-card-title\n          >\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\">\n            Questes objetivas necessitam de pelo menos uma alternativa.\n            <br />\n            Ajuste a questo {{ questionAjust }}.\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" text @click=\"dialog_alert3 = false\"\n              >Ok</v-btn\n            >\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n  </v-container>\n</template>\n\n<script>\n  import Api from \"@/services/Api\";\n  import * as firebase from \"firebase\";\n  export default {\n    name: \"AtividadeColaborativaDialog\",\n    props: [\n      \"instrucOptionCall\",\n      \"instrucType\",\n      \"domain\",\n      \"dialog\",\n      \"procedure\",\n      \"concept\",\n      \"module\",\n      \"instructionalelement\",\n    ],\n    data: () => ({\n      i: 0,\n      auxGetSrc: [],\n      valid: true,\n      dialog_alert: false,\n      dialog_alert2: false,\n      dialog_alert3: false,\n      questionAjust: \"\",\n      colaborativeName: \"\",\n      colaborativeNameRules: [\n        (v) =>\n          !!v ||\n          \" necessrio descrever um identificador para a atividade colaborativa\",\n        (v) =>\n          (v && v.length <= 100) ||\n          \"Nome do identificador da atividade colaborativa deve ter no mximo 100 caracteres\",\n      ],\n      memberAmount: \"\",\n      memberAmountRules: [\n        (v) =>\n          !!v ||\n          \" necessrio inserir a quantidade de alunos envolvidos na atividade\",\n      ],\n      colaborativeDescription: \"\",\n      colaborativeDescriptionRules: [\n        (v) =>\n          !!v ||\n          \" necessrio inserir uma descrio da atividade colaborativa a ser inserida\",\n      ],\n      itemsMobileMedia: [\n        {\n          icon: \"mdi-file-image\",\n          name: \"Imagem\",\n        },\n        {\n          icon: \"mdi-file-video\",\n          name: \"Video\",\n        },\n        {\n          icon: \"mdi-file-music\",\n          name: \"Audio\",\n        },\n        {\n          icon: \"mdi-link-variant\",\n          name: \"Link\",\n        },\n      ],\n      linkUrlRules: [(v) => !!v || \" necessrio inserir a url do seu link\"],\n      mobileMediasControl: [],\n      viewQuestions: false,\n      questionTypes: [\"Questo Objetiva\", \"Questo Discussiva\"],\n      questionsControl: [],\n      idObjAnswerItems: [\n        \"A\",\n        \"B\",\n        \"C\",\n        \"D\",\n        \"E\",\n        \"F\",\n        \"G\",\n        \"H\",\n        \"I\",\n        \"J\",\n        \"K\",\n        \"L\",\n        \"M\",\n        \"N\",\n        \"O\",\n        \"P\",\n        \"Q\",\n        \"R\",\n        \"S\",\n        \"T\",\n        \"U\",\n        \"V\",\n        \"W\",\n        \"X\",\n        \"Y\",\n        \"Z\",\n      ],\n      alternativeDescriptionRules: [\n        (v) => !!v || \" necessrio descrever a alternativa.\",\n      ],\n    }),\n    watch: {\n      dialog: async function() {\n        this.getColaborative();\n      },\n    },\n    mounted: function() {\n      this.getColaborative();\n      this.$refs.form.resetValidation();\n    },\n    methods: {\n      async getColaborative() {\n        if (this.instructionalelement) {\n          var vm = this;\n          this.$nextTick(function() {\n            this.colaborativeName = this.instructionalelement.label;\n            this.colaborativeDescription = this.instructionalelement.description;\n            this.memberAmount = parseInt(\n              this.instructionalelement.memberamount\n            );\n          });\n          this.questionsControl = [];\n          this.mobileMediasControl = [];\n          if (this.instructionalelement.mobilemedias.length > 0) {\n            await this.instructionalelement.mobilemedias.forEach(async function(\n              elementMobile,\n              indexMobile\n            ) {\n              if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"1\") {\n                vm.getSrcImage(\n                  indexMobile,\n                  elementMobile.path,\n                  elementMobile.namefile\n                );\n                await vm.mobileMediasControl.push({\n                  type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                  object: null,\n                  resolution: elementMobile.resolution,\n                  path: elementMobile.path,\n                  namefile: elementMobile.namefile,\n                  url: elementMobile.url,\n                });\n              } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"2\") {\n                vm.getSrcVideo(\n                  indexMobile,\n                  elementMobile.path,\n                  elementMobile.namefile\n                );\n                await vm.mobileMediasControl.push({\n                  type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                  object: null,\n                  resolution: elementMobile.resolution,\n                  time: elementMobile.time,\n                  path: elementMobile.path,\n                  namefile: elementMobile.namefile,\n                  url: elementMobile.url,\n                });\n              } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"3\") {\n                vm.getSrcAudio(\n                  indexMobile,\n                  elementMobile.path,\n                  elementMobile.namefile\n                );\n                await vm.mobileMediasControl.push({\n                  type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                  object: null,\n                  path: elementMobile.path,\n                  namefile: elementMobile.namefile,\n                  url: elementMobile.url,\n                });\n              } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"5\") {\n                await vm.mobileMediasControl.push({\n                  type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                  object: elementMobile.urllink,\n                  url: elementMobile.url,\n                });\n              }\n            });\n          }\n          if (this.instructionalelement.questions.length > 0) {\n            this.viewQuestions = true;\n            await this.instructionalelement.questions.forEach(async function(\n              elementQuestion,\n              indexQuestion\n            ) {\n              if (elementQuestion.typequestion === `/questiontype/1/`) {\n                await vm.questionsControl.push({\n                  typeQuestion: parseInt(\n                    elementQuestion.typequestion.split(\"/\")[4]\n                  ),\n                  descriptionQuestion: elementQuestion.descriptionquestion,\n                  answersAlternatives: [],\n                  mobileMedias: [],\n                  url: elementQuestion.url,\n                });\n                await elementQuestion.answersalternatives.forEach(\n                  async function(elementAlternative) {\n                    await vm.questionsControl[\n                      indexQuestion\n                    ].answersAlternatives.push({\n                      isTrue: elementAlternative.istrue,\n                      answers: elementAlternative.answers,\n                      url: elementAlternative.url,\n                    });\n                  }\n                );\n              } else if (elementQuestion.typequestion === `/questiontype/2/`) {\n                await vm.questionsControl.push({\n                  typeQuestion: parseInt(\n                    elementQuestion.typequestion.split(\"/\")[4]\n                  ),\n                  descriptionQuestion: elementQuestion.descriptionquestion,\n                  correctAnswer:\n                    elementQuestion.resolutionquestion[0].correctanswer,\n                  mobileMedias: [],\n                  url: elementQuestion.url,\n                  urlCorrectAnswer: elementQuestion.resolutionquestion[0].url,\n                });\n              }\n              if (elementQuestion.mobilemedias) {\n                await elementQuestion.mobilemedias.forEach(async function(\n                  elementMobile,\n                  indexMobile\n                ) {\n                  if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"1\") {\n                    vm.getSrcImageQuestions(\n                      indexQuestion,\n                      indexMobile,\n                      elementMobile.path,\n                      elementMobile.namefile\n                    );\n                    await vm.questionsControl[indexQuestion].mobileMedias.push({\n                      type: parseInt(\n                        elementMobile.fk_idmediatype.split(\"/\")[4]\n                      ),\n                      object: null,\n                      resolution: elementMobile.resolution,\n                      path: elementMobile.path,\n                      namefile: elementMobile.namefile,\n                      url: elementMobile.url,\n                    });\n                  } else if (\n                    elementMobile.fk_idmediatype.split(\"/\")[4] === \"2\"\n                  ) {\n                    vm.getSrcVideoQuestions(\n                      indexQuestion,\n                      indexMobile,\n                      elementMobile.path,\n                      elementMobile.namefile\n                    );\n                    await vm.questionsControl[indexQuestion].mobileMedias.push({\n                      type: parseInt(\n                        elementMobile.fk_idmediatype.split(\"/\")[4]\n                      ),\n                      object: null,\n                      resolution: elementMobile.resolution,\n                      time: elementMobile.time,\n                      path: elementMobile.path,\n                      namefile: elementMobile.namefile,\n                      url: elementMobile.url,\n                    });\n                  } else if (\n                    elementMobile.fk_idmediatype.split(\"/\")[4] === \"3\"\n                  ) {\n                    vm.getSrcAudioQuestions(\n                      indexQuestion,\n                      indexMobile,\n                      elementMobile.path,\n                      elementMobile.namefile\n                    );\n                    await vm.questionsControl[indexQuestion].mobileMedias.push({\n                      type: parseInt(\n                        elementMobile.fk_idmediatype.split(\"/\")[4]\n                      ),\n                      object: null,\n                      path: elementMobile.path,\n                      namefile: elementMobile.namefile,\n                      url: elementMobile.url,\n                    });\n                  } else if (\n                    elementMobile.fk_idmediatype.split(\"/\")[4] === \"5\"\n                  ) {\n                    await vm.questionsControl[indexQuestion].mobileMedias.push({\n                      type: parseInt(\n                        elementMobile.fk_idmediatype.split(\"/\")[4]\n                      ),\n                      object: elementMobile.urllink,\n                      url: elementMobile.url,\n                    });\n                  }\n                });\n              }\n            });\n            vm.viewQuestions = true;\n          }\n        } else {\n          this.questionsControl = [];\n          this.mobileMediasControl = [];\n          this.resetValidation();\n          this.viewQuestions = false;\n          this.resetVariables();\n        }\n      },\n      /* FUNO PARA SALVAR ATIVIDADE COLABORATIVA QUE TENHA QUESTES */\n      async postQuestions() {\n        var instructionalelement = {\n          label: this.colaborativeName,\n          fk_instructionalelementtype: `/instrucelementtype/3/`,\n          memberamount: this.memberAmount,\n          description: this.colaborativeDescription,\n        };\n        var vm = this;\n        var auxPath = \"\";\n        if (this.mobileMediasControl) {\n          this.mobileMediasControl.forEach(async (mobilemedia) => {\n            if (mobilemedia.url) {\n              if (mobilemedia.type !== 5) {\n                firebase\n                  .storage()\n                  .ref()\n                  .child(mobilemedia.path)\n                  .put(mobilemedia.object);\n              }\n            } else {\n              auxPath =\n                vm.domain.idknowledgedomain.toString() +\n                \"/\" +\n                (await setTimeout(async function() {\n                  await Date.now().toString();\n                }, 1));\n              if (mobilemedia.type !== 5) {\n                firebase\n                  .storage()\n                  .ref()\n                  .child(auxPath)\n                  .put(mobilemedia.object);\n\n                mobilemedia.path = auxPath;\n              }\n            }\n          });\n        }\n        var auxPathQuestions = \"\";\n        this.questionsControl.forEach(async function(question) {\n          if (question.mobileMedias) {\n            await question.mobileMedias.forEach((mobilemedia) => {\n              if (mobilemedia.url) {\n                if (mobilemedia.type !== 5) {\n                  firebase\n                    .storage()\n                    .ref()\n                    .child(mobilemedia.path)\n                    .put(mobilemedia.object);\n                }\n              } else {\n                setTimeout(function() {\n                  auxPathQuestions =\n                    vm.domain.idknowledgedomain.toString() +\n                    \"/\" +\n                    Date.now().toString();\n                  if (mobilemedia.type !== 5) {\n                    firebase\n                      .storage()\n                      .ref()\n                      .child(auxPathQuestions)\n                      .put(mobilemedia.object);\n\n                    mobilemedia.path = auxPathQuestions;\n                  }\n                }, 37);\n              }\n            });\n          }\n        });\n\n        if (this.instrucType === \"dominio\") {\n          Object.assign(instructionalelement, {\n            fk_idknowledgedomain: this.instrucOptionCall.url,\n          });\n        } else if (this.instrucType === \"modulo\") {\n          Object.assign(instructionalelement, {\n            fk_idmodule: this.instrucOptionCall.url,\n          });\n        } else if (this.instrucType === \"conceito\") {\n          Object.assign(instructionalelement, {\n            fk_idconcept: this.instrucOptionCall.url,\n          });\n        }\n\n        if (this.instructionalelement) {\n          /* CDIGO PARA EDIO DA AVALIAO/EXERCCIO */\n          await Api()\n            .put(vm.instructionalelement.url, instructionalelement)\n            .then(async function(resposta) {\n              if (vm.mobileMediasControl) {\n                await vm.mobileMediasControl.forEach(async function(\n                  mobilemedia,\n                  indexmobile\n                ) {\n                  /* DANDO PUT NOS MOBILEMEDIAS QUE POSSUEM URL*/\n                  if (mobilemedia.url) {\n                    if (mobilemedia.type === 1) {\n                      await Api().put(mobilemedia.url, {\n                        label: \"Imagem \" + (indexmobile + 1),\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\n                        path: mobilemedia.path,\n                        resolution: mobilemedia.resolution,\n                        namefile: mobilemedia.namefile,\n                        description:\n                          \"Imagem \" +\n                          (indexmobile + 1) +\n                          \" \" +\n                          resposta.data.label,\n                        time: null,\n                        textfull: null,\n                        textshort: null,\n                        urllink: null,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url,\n                      });\n                    } else if (mobilemedia.type === 2) {\n                      await Api().put(mobilemedia.url, {\n                        label: \"Video \" + (indexmobile + 1),\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\n                        path: mobilemedia.path,\n                        resolution: mobilemedia.resolution,\n                        namefile: mobilemedia.namefile,\n                        description: null,\n                        time: mobilemedia.time,\n                        textfull: null,\n                        textshort: null,\n                        urllink: null,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url,\n                      });\n                    } else if (mobilemedia.type === 3) {\n                      await Api().put(mobilemedia.url, {\n                        label: \"Audio \" + (indexmobile + 1),\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\n                        path: mobilemedia.path,\n                        resolution: null,\n                        namefile: mobilemedia.namefile,\n                        description: null,\n                        time: null,\n                        textfull: null,\n                        textshort: null,\n                        urllink: null,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url,\n                      });\n                    } else if (mobilemedia.type === 5) {\n                      await Api().put(mobilemedia.url, {\n                        label: \"Link \" + (indexmobile + 1),\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\n                        path: null,\n                        resolution: null,\n                        namefile: null,\n                        description: null,\n                        time: null,\n                        textfull: null,\n                        textshort: null,\n                        urllink: mobilemedia.object,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url,\n                      });\n                    }\n                  } else {\n                    /* DANDO POST NOS MOBILEMEDIAS QUE NO POSSUEM URL*/\n                    if (mobilemedia.type === 1) {\n                      await Api().post(`/mobilemedia/`, {\n                        label: \"Imagem \" + (indexmobile + 1),\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\n                        path: mobilemedia.path,\n                        resolution: mobilemedia.resolution,\n                        namefile: mobilemedia.path.split(\"/\")[1],\n                        description:\n                          \"Imagem \" +\n                          (indexmobile + 1) +\n                          \" \" +\n                          resposta.data.label,\n                        time: null,\n                        textfull: null,\n                        textshort: null,\n                        urllink: null,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url,\n                      });\n                    } else if (mobilemedia.type === 2) {\n                      await Api().post(`/mobilemedia/`, {\n                        label: \"Video \" + (indexmobile + 1),\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\n                        path: mobilemedia.path,\n                        resolution: mobilemedia.resolution,\n                        namefile: mobilemedia.path.split(\"/\")[1],\n                        description: null,\n                        time: mobilemedia.time,\n                        textfull: null,\n                        textshort: null,\n                        urllink: null,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url,\n                      });\n                    } else if (mobilemedia.type === 3) {\n                      await Api().post(`/mobilemedia/`, {\n                        label: \"Audio \" + (indexmobile + 1),\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\n                        path: mobilemedia.path,\n                        resolution: null,\n                        namefile: mobilemedia.path.split(\"/\")[1],\n                        description: null,\n                        time: null,\n                        textfull: null,\n                        textshort: null,\n                        urllink: null,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url,\n                      });\n                    } else if (mobilemedia.type === 5) {\n                      await Api().post(`/mobilemedia/`, {\n                        label: \"Link \" + (indexmobile + 1),\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\n                        path: null,\n                        resolution: null,\n                        namefile: null,\n                        description: null,\n                        time: null,\n                        textfull: null,\n                        textshort: null,\n                        urllink: mobilemedia.object,\n                        difficultyLevel: null,\n                        learningStyle: null,\n                        fk_idinstructionalelement: resposta.data.url,\n                      });\n                    }\n                  }\n                });\n              }\n\n              await vm.questionsControl.forEach(async function(\n                elementQuestion,\n                indexQuestion\n              ) {\n                /*DANDO PUT NAS QUESTES COM URL*/\n                if (elementQuestion.url) {\n                  await Api()\n                    .put(elementQuestion.url, {\n                      orderquestion: indexQuestion,\n                      descriptionquestion: elementQuestion.descriptionQuestion,\n                      typequestion:\n                        `/questiontype/` + elementQuestion.typeQuestion + `/`,\n                      fk_idinstructionalelement: vm.instructionalelement.url,\n                    })\n                    .then(async function(resposta2) {\n                      /*DANDO PUT NOS MOBILEMEDIAS DAS QUESTES COM URL*/\n\n                      await elementQuestion.mobileMedias.forEach(async function(\n                        elementMobile,\n                        indexMobile\n                      ) {\n                        if (elementMobile.url) {\n                          if (elementMobile.type === 1) {\n                            await Api().put(elementMobile.url, {\n                              label: \"Imagem \" + (indexMobile + 1),\n                              fk_idmediatype:\n                                \"/mediatype/\" + elementMobile.type + \"/\",\n                              path: elementMobile.path,\n                              resolution: elementMobile.resolution,\n                              namefile: elementMobile.namefile,\n                              description:\n                                \"Imagem \" +\n                                (indexMobile + 1) +\n                                \" Questo\" +\n                                resposta2.data.orderquestion,\n                              time: null,\n                              textfull: null,\n                              textshort: null,\n                              urllink: null,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url,\n                            });\n                          } else if (elementMobile.type === 2) {\n                            await Api().put(elementMobile.url, {\n                              label: \"Video \" + (indexMobile + 1),\n                              fk_idmediatype:\n                                \"/mediatype/\" + elementMobile.type + \"/\",\n                              path: elementMobile.path,\n                              resolution: elementMobile.resolution,\n                              namefile: elementMobile.namefile,\n                              description: null,\n                              time: elementMobile.time,\n                              textfull: null,\n                              textshort: null,\n                              urllink: null,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url,\n                            });\n                          } else if (elementMobile.type === 3) {\n                            await Api().put(elementMobile.url, {\n                              label: \"Audio \" + (indexMobile + 1),\n                              fk_idmediatype:\n                                \"/mediatype/\" + elementMobile.type + \"/\",\n                              path: elementMobile.path,\n                              resolution: null,\n                              namefile: elementMobile.namefile,\n                              description: null,\n                              time: null,\n                              textfull: null,\n                              textshort: null,\n                              urllink: null,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url,\n                            });\n                          } else if (elementMobile.type === 5) {\n                            await Api().put(elementMobile.url, {\n                              label: \"Link \" + (indexMobile + 1) + vm.i++ * 0,\n                              fk_idmediatype:\n                                \"/mediatype/\" + elementMobile.type + \"/\",\n                              path: null,\n                              resolution: null,\n                              namefile: null,\n                              description: null,\n                              time: null,\n                              textfull: null,\n                              textshort: null,\n                              urllink: elementMobile.object,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url,\n                            });\n                          }\n                        } else {\n                          if (elementMobile.type === 1) {\n                            await Api().post(`/mobilemedia/`, {\n                              label: \"Imagem \" + (indexMobile + 1),\n                              fk_idmediatype:\n                                \"/mediatype/\" + elementMobile.type + \"/\",\n                              path: elementMobile.path,\n                              resolution: elementMobile.resolution,\n                              namefile: elementMobile.path.split(\"/\")[1],\n                              description:\n                                \"Imagem \" +\n                                (indexMobile + 1) +\n                                \" Questo\" +\n                                resposta2.data.orderquestion,\n                              time: null,\n                              textfull: null,\n                              textshort: null,\n                              urllink: null,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url,\n                            });\n                          } else if (elementMobile.type === 2) {\n                            await Api().post(`/mobilemedia/`, {\n                              label: \"Video \" + (indexMobile + 1),\n                              fk_idmediatype:\n                                \"/mediatype/\" + elementMobile.type + \"/\",\n                              path: elementMobile.path,\n                              resolution: elementMobile.resolution,\n                              namefile: elementMobile.path.split(\"/\")[1],\n                              description: null,\n                              time: elementMobile.time,\n                              textfull: null,\n                              textshort: null,\n                              urllink: null,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url,\n                            });\n                          } else if (elementMobile.type === 3) {\n                            await Api().post(`/mobilemedia/`, {\n                              label: \"Audio \" + (indexMobile + 1),\n                              fk_idmediatype:\n                                \"/mediatype/\" + elementMobile.type + \"/\",\n                              path: elementMobile.path,\n                              resolution: null,\n                              namefile: elementMobile.path.split(\"/\")[1],\n                              description: null,\n                              time: null,\n                              textfull: null,\n                              textshort: null,\n                              urllink: null,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url,\n                            });\n                          } else if (elementMobile.type === 5) {\n                            await Api().post(`/mobilemedia/`, {\n                              label: \"Link \" + (indexMobile + 1) + vm.i++ * 0,\n                              fk_idmediatype:\n                                \"/mediatype/\" + elementMobile.type + \"/\",\n                              path: null,\n                              resolution: null,\n                              namefile: null,\n                              description: null,\n                              time: null,\n                              textfull: null,\n                              textshort: null,\n                              urllink: elementMobile.object,\n                              difficultyLevel: null,\n                              learningStyle: null,\n                              fk_idquestion: resposta2.data.url,\n                            });\n                          }\n                        }\n                      });\n\n                      if (elementQuestion.typeQuestion === 1) {\n                        await elementQuestion.answersAlternatives.forEach(\n                          async function(elementAlternative, indexAlternative) {\n                            if (elementAlternative.url) {\n                              await Api().put(elementAlternative.url, {\n                                idobjanswer:\n                                  vm.idObjAnswerItems[indexAlternative],\n                                answers: elementAlternative.answers,\n                                istrue: elementAlternative.isTrue,\n                                fk_idquestion: resposta2.data.url,\n                                orderansweralternatives: indexAlternative,\n                              });\n                            } else {\n                              await Api().post(`/answersalternatives/`, {\n                                idobjanswer:\n                                  vm.idObjAnswerItems[indexAlternative],\n                                answers: elementAlternative.answers,\n                                istrue: elementAlternative.isTrue,\n                                fk_idquestion: resposta2.data.url,\n                                orderansweralternatives: indexAlternative,\n                              });\n                            }\n                          }\n                        );\n                      } else if (elementQuestion.typeQuestion === 2) {\n                        await Api().put(elementQuestion.urlCorrectAnswer, {\n                          correctanswer: elementQuestion.correctAnswer,\n                        });\n                      }\n                    });\n                } else {\n                  await Api()\n                    .post(`/question/`, {\n                      orderquestion: indexQuestion + 1,\n                      descriptionquestion: elementQuestion.descriptionQuestion,\n                      fk_idinstructionalelement: resposta.data.url,\n                      typequestion:\n                        `/questiontype/` + elementQuestion.typeQuestion + `/`,\n                    })\n                    .then(async function(resposta2) {\n                      if (elementQuestion.typeQuestion === 1) {\n                        await elementQuestion.answersAlternatives.forEach(\n                          async function(elementAlternative, indexAlternative) {\n                            await Api().post(`/answersalternatives/`, {\n                              idobjanswer:\n                                vm.idObjAnswerItems[indexAlternative],\n                              answers: elementAlternative.answers,\n                              istrue: elementAlternative.isTrue,\n                              fk_idquestion: resposta2.data.url,\n                              orderansweralternatives: indexAlternative,\n                            });\n                          }\n                        );\n                      } else if (elementQuestion.typeQuestion === 2) {\n                        await Api().post(`/resolutionquestion/`, {\n                          correctanswer: elementQuestion.correctAnswer,\n                          fk_idquestion: resposta2.data.url,\n                        });\n                      }\n                    });\n                }\n              });\n            });\n        } else {\n          /* CDIGO PARA CRIAO DA ATIVIDADE COLABORATIVA */\n          await Api()\n            .post(`/instructionalelement/`, instructionalelement)\n            .then(async function(resposta) {\n              if (vm.mobileMediasControl) {\n                /* INSERO DOS MOBILEMEDIAS DA ATIVIDADE COLABORATIVA */\n                await vm.mobileMediasControl.forEach(async function(\n                  mobilemedia,\n                  indexmobile\n                ) {\n                  if (mobilemedia.type === 1) {\n                    await Api().post(`/mobilemedia/`, {\n                      label: \"Imagem \" + (indexmobile + 1),\n                      fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\n                      path: mobilemedia.path,\n                      resolution: mobilemedia.resolution,\n                      namefile: mobilemedia.path.split(\"/\")[1],\n                      description:\n                        \"Imagem \" +\n                        (indexmobile + 1) +\n                        \" \" +\n                        resposta.data.label,\n                      time: null,\n                      textfull: null,\n                      textshort: null,\n                      urllink: null,\n                      difficultyLevel: null,\n                      learningStyle: null,\n                      fk_idinstructionalelement: resposta.data.url,\n                    });\n                  } else if (mobilemedia.type === 2) {\n                    await Api().post(`/mobilemedia/`, {\n                      label: \"Video \" + (indexmobile + 1),\n                      fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\n                      path: mobilemedia.path,\n                      resolution: mobilemedia.resolution,\n                      namefile: mobilemedia.path.split(\"/\")[1],\n                      description: null,\n                      time: mobilemedia.time,\n                      textfull: null,\n                      textshort: null,\n                      urllink: null,\n                      difficultyLevel: null,\n                      learningStyle: null,\n                      fk_idinstructionalelement: resposta.data.url,\n                    });\n                  } else if (mobilemedia.type === 3) {\n                    await Api().post(`/mobilemedia/`, {\n                      label: \"Audio \" + (indexmobile + 1),\n                      fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\n                      path: mobilemedia.path,\n                      resolution: null,\n                      namefile: mobilemedia.path.split(\"/\")[1],\n                      description: null,\n                      time: null,\n                      textfull: null,\n                      textshort: null,\n                      urllink: null,\n                      difficultyLevel: null,\n                      learningStyle: null,\n                      fk_idinstructionalelement: resposta.data.url,\n                    });\n                  } else if (mobilemedia.type === 5) {\n                    await Api().post(`/mobilemedia/`, {\n                      label: \"Link \" + (indexmobile + 1),\n                      fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\n                      path: null,\n                      resolution: null,\n                      namefile: null,\n                      description: null,\n                      time: null,\n                      textfull: null,\n                      textshort: null,\n                      urllink: mobilemedia.object,\n                      difficultyLevel: null,\n                      learningStyle: null,\n                      fk_idinstructionalelement: resposta.data.url,\n                    });\n                  }\n                });\n              }\n              await vm.questionsControl.forEach(async function(\n                elementQuestion,\n                indexQuestion\n              ) {\n                /* INSERO DAS QUESTES DA ATIVIDADE COLABORATIVA */\n                await Api()\n                  .post(`/question/`, {\n                    descriptionquestion: elementQuestion.descriptionQuestion,\n                    orderquestion: indexQuestion,\n                    fk_idinstructionalelement: resposta.data.url,\n                    typequestion:\n                      `/questiontype/` + elementQuestion.typeQuestion + `/`,\n                  })\n                  .then(async function(resposta2) {\n                    /* INSERO DOS MOBILEMEDIAS DAS QUESTES DA ATIVIDADE COLABORATIVA */\n                    await elementQuestion.mobileMedias.forEach(async function(\n                      elementMobile,\n                      indexMobile\n                    ) {\n                      if (elementMobile.type === 1) {\n                        await Api().post(`/mobilemedia/`, {\n                          label: \"Imagem \" + (indexMobile + 1),\n                          fk_idmediatype:\n                            \"/mediatype/\" + elementMobile.type + \"/\",\n                          path: elementMobile.path,\n                          resolution: elementMobile.resolution,\n                          namefile: elementMobile.path.split(\"/\")[1],\n                          description:\n                            \"Imagem \" +\n                            (indexMobile + 1) +\n                            \" Questo\" +\n                            resposta2.data.orderquestion,\n                          time: null,\n                          textfull: null,\n                          textshort: null,\n                          urllink: null,\n                          difficultyLevel: null,\n                          learningStyle: null,\n                          fk_idquestion: resposta2.data.url,\n                        });\n                      } else if (elementMobile.type === 2) {\n                        await Api().post(`/mobilemedia/`, {\n                          label: \"Video \" + (indexMobile + 1),\n                          fk_idmediatype:\n                            \"/mediatype/\" + elementMobile.type + \"/\",\n                          path: elementMobile.path,\n                          resolution: elementMobile.resolution,\n                          namefile: elementMobile.path.split(\"/\")[1],\n                          description: null,\n                          time: elementMobile.time,\n                          textfull: null,\n                          textshort: null,\n                          urllink: null,\n                          difficultyLevel: null,\n                          learningStyle: null,\n                          fk_idquestion: resposta2.data.url,\n                        });\n                      } else if (elementMobile.type === 3) {\n                        await Api().post(`/mobilemedia/`, {\n                          label: \"Audio \" + (indexMobile + 1),\n                          fk_idmediatype:\n                            \"/mediatype/\" + elementMobile.type + \"/\",\n                          path: elementMobile.path,\n                          resolution: null,\n                          namefile: elementMobile.path.split(\"/\")[1],\n                          description: null,\n                          time: null,\n                          textfull: null,\n                          textshort: null,\n                          urllink: null,\n                          difficultyLevel: null,\n                          learningStyle: null,\n                          fk_idquestion: resposta2.data.url,\n                        });\n                      } else if (elementMobile.type === 5) {\n                        await Api().post(`/mobilemedia/`, {\n                          label: \"Link \" + (indexMobile + 1) + vm.i++ * 0,\n                          fk_idmediatype:\n                            \"/mediatype/\" + elementMobile.type + \"/\",\n                          path: null,\n                          resolution: null,\n                          namefile: null,\n                          description: null,\n                          time: null,\n                          textfull: null,\n                          textshort: null,\n                          urllink: elementMobile.object,\n                          difficultyLevel: null,\n                          learningStyle: null,\n                          fk_idquestion: resposta2.data.url,\n                        });\n                      }\n                    });\n                    if (elementQuestion.typeQuestion === 1) {\n                      /* INSERO DAS ALTERNATIVAS DAS QUESTES DA ATIVIDADE COLABORATIVA */\n                      await elementQuestion.answersAlternatives.forEach(\n                        async function(elementAlternative, indexAlternative) {\n                          await Api().post(`/answersalternatives/`, {\n                            idobjanswer: vm.idObjAnswerItems[indexAlternative],\n                            answers: elementAlternative.answers,\n                            istrue: elementAlternative.isTrue,\n                            fk_idquestion: resposta2.data.url,\n                            orderansweralternatives: indexAlternative,\n                          });\n                        }\n                      );\n                    } else if (elementQuestion.typeQuestion === 2) {\n                      /* INSERO DA RESPOSTA DAS QUESTES DA ATIVIDADE COLABORATIVA */\n                      await Api().post(`/resolutionquestion/`, {\n                        correctanswer: elementQuestion.correctAnswer,\n                        fk_idquestion: resposta2.data.url,\n                      });\n                    }\n                  });\n              });\n            });\n        }\n      },\n      addMobileMedia(mobileMediaType) {\n        if (mobileMediaType === 1) {\n          this.mobileMediasControl.push({\n            type: mobileMediaType,\n            object: null,\n            resolution: null,\n            path: null,\n            namefile: null,\n            url: null,\n          });\n        } else if (mobileMediaType === 2) {\n          this.mobileMediasControl.push({\n            type: mobileMediaType,\n            object: null,\n            resolution: null,\n            time: null,\n            path: null,\n            namefile: null,\n            url: null,\n          });\n        } else if (mobileMediaType === 3) {\n          this.mobileMediasControl.push({\n            type: mobileMediaType,\n            object: null,\n            path: null,\n            namefile: null,\n            url: null,\n          });\n        } else if (mobileMediaType === 4) {\n          this.mobileMediasControl.push({\n            type: mobileMediaType + 1,\n            object: null,\n            url: null,\n          });\n        }\n      },\n      async deleteMobileMedia(idMobileMedia) {\n        if (this.mobileMediasControl[idMobileMedia].url) {\n          if (this.mobileMediasControl[idMobileMedia].type !== 5) {\n            await firebase\n              .storage()\n              .ref()\n              .child(this.mobileMediasControl[idMobileMedia].path)\n              .delete();\n          }\n          await Api().delete(this.mobileMediasControl[idMobileMedia].url);\n        }\n        if (idMobileMedia == 0) {\n          this.mobileMediasControl.shift();\n        } else {\n          this.mobileMediasControl.splice(idMobileMedia, 1);\n        }\n      },\n      addQuestionario() {\n        if (this.viewQuestions === false) {\n          this.viewQuestions = true;\n        }\n      },\n      async deleteQuestionario() {\n        await this.questionsControl.forEach(async (question) => {\n          if (question.url) {\n            await Api().delete(question.url);\n          }\n        });\n        this.questionsControl = [];\n        this.viewQuestions = false;\n      },\n      addQuestion(questionType) {\n        if (questionType === 1) {\n          this.questionsControl.push({\n            typeQuestion: questionType,\n            descriptionQuestion: null,\n            answersAlternatives: [],\n            mobileMedias: [],\n            url: null,\n          });\n        } else if (questionType === 2) {\n          this.questionsControl.push({\n            typeQuestion: questionType,\n            descriptionQuestion: null,\n            correctAnswer: null,\n            mobileMedias: [],\n            url: null,\n            urlCorrectAnswer: null,\n          });\n        }\n      },\n      async deleteQuestion(idQuestion) {\n        if (this.questionsControl[idQuestion].url) {\n          await Api().delete(this.questionsControl[idQuestion].url);\n        }\n        if (idQuestion == 0) {\n          this.questionsControl.shift();\n        } else {\n          this.questionsControl.splice(idQuestion, 1);\n        }\n      },\n      addMobileMediaQuestion(idQuestion, mobileMediaType) {\n        if (mobileMediaType === 1) {\n          this.questionsControl[idQuestion].mobileMedias.push({\n            type: mobileMediaType,\n            object: null,\n            resolution: null,\n            path: null,\n            namefile: null,\n            url: null,\n          });\n        } else if (mobileMediaType === 2) {\n          this.questionsControl[idQuestion].mobileMedias.push({\n            type: mobileMediaType,\n            object: null,\n            resolution: null,\n            time: null,\n            path: null,\n            namefile: null,\n            url: null,\n          });\n        } else if (mobileMediaType === 3) {\n          this.questionsControl[idQuestion].mobileMedias.push({\n            type: mobileMediaType,\n            object: null,\n            path: null,\n            namefile: null,\n            url: null,\n          });\n        } else if (mobileMediaType === 4) {\n          this.questionsControl[idQuestion].mobileMedias.push({\n            type: mobileMediaType + 1,\n            object: null,\n            url: null,\n          });\n        }\n      },\n      async deleteMobileMediaQuestion(idQuestion, idMobileMedia) {\n        if (this.questionsControl[idQuestion].mobileMedias[idMobileMedia].url) {\n          if (\n            this.questionsControl[idQuestion].mobileMedias[idMobileMedia]\n              .type !== 5\n          ) {\n            await firebase\n              .storage()\n              .ref()\n              .child(\n                this.questionsControl[idQuestion].mobileMedias[idMobileMedia]\n                  .path\n              )\n              .delete();\n          }\n          await Api().delete(\n            this.questionsControl[idQuestion].mobileMedias[idMobileMedia].url\n          );\n        }\n        if (idMobileMedia == 0) {\n          this.questionsControl[idQuestion].mobileMedias.shift();\n        } else {\n          this.questionsControl[idQuestion].mobileMedias.splice(\n            idMobileMedia,\n            1\n          );\n        }\n      },\n      addAlternative(idQuestion) {\n        this.questionsControl[idQuestion].answersAlternatives.push({\n          isTrue: false,\n          answers: null,\n          url: null,\n        });\n      },\n      async deleteAlternative(idQuestion, idAlternative) {\n        if (\n          this.questionsControl[idQuestion].answersAlternatives[idAlternative]\n            .url\n        ) {\n          await Api().delete(\n            this.questionsControl[idQuestion].answersAlternatives[idAlternative]\n              .url\n          );\n        }\n        if (idAlternative == 0) {\n          this.questionsControl[idQuestion].answersAlternatives.shift();\n        } else {\n          this.questionsControl[idQuestion].answersAlternatives.splice(\n            idAlternative,\n            1\n          );\n        }\n      },\n      async validate() {\n        if (this.$refs.form.validate()) {\n          if (this.viewQuestions) {\n            if (this.questionsControl.length > 0) {\n              var vm = this;\n              var aux = 1;\n              for (var i = 0; i < this.questionsControl.length; i++) {\n                if (aux === 1) {\n                  if (this.questionsControl[i].typeQuestion === 1) {\n                    if (\n                      this.questionsControl[i].answersAlternatives.length === 0\n                    ) {\n                      vm.questionAjust = i + 1;\n                      vm.dialog_alert3 = true;\n                      aux = 0;\n                      break;\n                    }\n                    for (\n                      var j = 0;\n                      j < this.questionsControl[i].answersAlternatives.length;\n                      j++\n                    ) {\n                      if (\n                        this.questionsControl[i].answersAlternatives[j].isTrue\n                      ) {\n                        break;\n                      }\n                      if (\n                        j ===\n                        this.questionsControl[i].answersAlternatives.length - 1\n                      ) {\n                        vm.questionAjust = i + 1;\n                        vm.dialog_alert2 = true;\n                        aux = 0;\n                      }\n                    }\n                  }\n                } else {\n                  break;\n                }\n              }\n              if (aux === 1) {\n                var auxNumberQuestions = this.questionsControl.length;\n                await this.postQuestions();\n                await this.resetVariables();\n                this.questionsControl = [];\n                this.mobileMediasControl = [];\n                await this.$emit(\"instrucclose\", auxNumberQuestions);\n              }\n            } else {\n              this.dialog_alert = true;\n            }\n          } else {\n            await this.postQuestions();\n            await this.resetVariables();\n            await this.$emit(\"instrucclose\");\n          }\n        }\n      },\n      resetVariables() {\n        this.i = 0;\n        this.auxGetSrc = [];\n        this.auxGetSrcQuestions = [];\n        this.questionsControl = [];\n        this.mobileMediasControl = [];\n        this.colaborativeName = \"\";\n        this.memberAmount = \"\";\n        this.colaborativeDescription = \"\";\n        this.viewQuestions = false;\n      },\n      async reset() {\n        await this.$emit(\"instrucclose\");\n        await this.resetVariables();\n        this.questionsControl = [];\n        this.mobileMediasControl = [];\n        await this.$refs.form.reset();\n      },\n      atualizaObj(file, indexMobile) {\n        this.mobileMediasControl[indexMobile].object = file;\n      },\n      atualizaMeta() {\n        if (this.mobileMediasControl.length > 0) {\n          this.mobileMediasControl.forEach((mobilemedia) => {\n            if (mobilemedia.object && !mobilemedia.url) {\n              if (mobilemedia.type === 1) {\n                var img = new Image();\n                img.src = URL.createObjectURL(mobilemedia.object);\n                img.onload = function() {\n                  mobilemedia.resolution = img.width + \"X\" + img.height;\n                };\n              } else if (mobilemedia.type === 2) {\n                var video = document.createElement(\"video\");\n                var source = document.createElement(\"source\");\n                source.setAttribute(\n                  \"src\",\n                  URL.createObjectURL(mobilemedia.object)\n                );\n                video.appendChild(source);\n                video.oncanplay = function() {\n                  mobilemedia.resolution =\n                    video.videoWidth + \"X\" + video.videoHeight;\n                  mobilemedia.time = video.duration;\n                };\n              }\n            }\n          });\n        }\n      },\n      async getSrcImage(indexMobile, path, namefile) {\n        /*var obj = {};*/\n        if (path) {\n          var vm = this;\n          await firebase\n            .storage()\n            .ref(path)\n            .getDownloadURL()\n            .then(function(url) {\n              /*vm.viewImageSrc = url;*/\n              var xhr = new XMLHttpRequest();\n              xhr.responseType = \"blob\";\n              xhr.onload = function() {\n                var blob = xhr.response;\n                var file = new File([blob], namefile, {\n                  type: blob.type,\n                });\n                // vm.auxGetSrc.push(file);\n                vm.atualizaObj(file, indexMobile);\n              };\n              xhr.open(\"GET\", url);\n              xhr.send();\n            });\n        }\n      },\n      async getSrcVideo(indexMobile, path, namefile) {\n        /*var obj = {};*/\n        if (path) {\n          var vm = this;\n          await firebase\n            .storage()\n            .ref(path)\n            .getDownloadURL()\n            .then(function(url) {\n              /*vm.viewVideoSrc = url;*/\n              var xhr = new XMLHttpRequest();\n              xhr.responseType = \"blob\";\n              xhr.onload = function() {\n                var blob = xhr.response;\n                var file = new File([blob], namefile, {\n                  type: blob.type,\n                });\n                // vm.auxGetSrc.push(file);\n                vm.atualizaObj(file, indexMobile);\n              };\n              xhr.open(\"GET\", url);\n              xhr.send();\n            });\n        }\n      },\n      async getSrcAudio(indexMobile, path, namefile) {\n        /*var obj = {};*/\n        if (path) {\n          var vm = this;\n          await firebase\n            .storage()\n            .ref(path)\n            .getDownloadURL()\n            .then(function(url) {\n              /*vm.viewAudioSrc = url;*/\n              var xhr = new XMLHttpRequest();\n              xhr.responseType = \"blob\";\n              xhr.onload = function() {\n                var blob = xhr.response;\n                var file = new File([blob], namefile, {\n                  type: blob.type,\n                });\n                // vm.auxGetSrc.push(file);\n                vm.atualizaObj(file, indexMobile);\n              };\n              xhr.open(\"GET\", url);\n              xhr.send();\n            });\n        }\n      },\n      atualizaMetaQuestions() {\n        if (this.questionsControl.length > 0) {\n          this.questionsControl.forEach((question) => {\n            if (question.mobileMedias) {\n              question.mobileMedias.forEach((mobilemedia) => {\n                if (mobilemedia.object && !mobilemedia.url) {\n                  if (mobilemedia.type === 1) {\n                    var img = new Image();\n                    img.src = URL.createObjectURL(mobilemedia.object);\n                    img.onload = function() {\n                      mobilemedia.resolution = img.width + \"X\" + img.height;\n                    };\n                  } else if (mobilemedia.type === 2) {\n                    var video = document.createElement(\"video\");\n                    var source = document.createElement(\"source\");\n                    source.setAttribute(\n                      \"src\",\n                      URL.createObjectURL(mobilemedia.object)\n                    );\n                    video.appendChild(source);\n                    video.oncanplay = function() {\n                      mobilemedia.resolution =\n                        video.videoWidth + \"X\" + video.videoHeight;\n                      mobilemedia.time = video.duration;\n                    };\n                  }\n                }\n              });\n            }\n          });\n        }\n      },\n      atualizaObjQuestions(file, indexQuestion, indexMobile) {\n        this.questionsControl[indexQuestion].mobileMedias[\n          indexMobile\n        ].object = file;\n      },\n      async getSrcImageQuestions(indexQuestion, indexMobile, path, namefile) {\n        /*var obj = {};*/\n        if (path) {\n          var vm = this;\n          await firebase\n            .storage()\n            .ref(path)\n            .getDownloadURL()\n            .then(function(url) {\n              /*vm.viewImageSrc = url;*/\n              var xhr = new XMLHttpRequest();\n              xhr.responseType = \"blob\";\n              xhr.onload = function() {\n                var blob = xhr.response;\n                var file = new File([blob], namefile, {\n                  type: blob.type,\n                });\n                /*vm.auxGetSrcQuestions.push(file);*/\n                vm.atualizaObjQuestions(file, indexQuestion, indexMobile);\n              };\n              xhr.open(\"GET\", url);\n              xhr.send();\n            });\n        }\n      },\n      async getSrcVideoQuestions(indexQuestion, indexMobile, path, namefile) {\n        /*var obj = {};*/\n        if (path) {\n          var vm = this;\n          await firebase\n            .storage()\n            .ref(path)\n            .getDownloadURL()\n            .then(function(url) {\n              /*vm.viewVideoSrc = url;*/\n              var xhr = new XMLHttpRequest();\n              xhr.responseType = \"blob\";\n              xhr.onload = function() {\n                var blob = xhr.response;\n                var file = new File([blob], namefile, {\n                  type: blob.type,\n                });\n                // vm.auxGetSrcQuestions.push(file);\n                vm.atualizaObjQuestions(file, indexQuestion, indexMobile);\n              };\n              xhr.open(\"GET\", url);\n              xhr.send();\n            });\n        }\n      },\n      async getSrcAudioQuestions(indexQuestion, indexMobile, path, namefile) {\n        /*var obj = {};*/\n        if (path) {\n          var vm = this;\n          await firebase\n            .storage()\n            .ref(path)\n            .getDownloadURL()\n            .then(function(url) {\n              /*vm.viewAudioSrc = url;*/\n              var xhr = new XMLHttpRequest();\n              xhr.responseType = \"blob\";\n              xhr.onload = function() {\n                var blob = xhr.response;\n                var file = new File([blob], namefile, {\n                  type: blob.type,\n                });\n                // vm.auxGetSrcQuestions.push(file);\n                vm.atualizaObjQuestions(file, indexQuestion, indexMobile);\n              };\n              xhr.open(\"GET\", url);\n              xhr.send();\n            });\n        }\n      },\n      resetValidation() {\n        this.$refs.form.resetValidation();\n      },\n    },\n  };\n</script>\n"]}]}