{"remainingRequest":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\www\\EducomML\\EducomML_Front\\src\\components\\instructional_model\\AtividadeColaborativaDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\www\\EducomML\\EducomML_Front\\src\\components\\instructional_model\\AtividadeColaborativaDialog.vue","mtime":1596743861335},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593634551412},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\babel-loader\\lib\\index.js","mtime":1593634550126},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1593634595918},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593634551412},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js","mtime":1593634595223}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBcGkgZnJvbSAiQC9zZXJ2aWNlcy9BcGkiOwppbXBvcnQgKiBhcyBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXRpdmlkYWRlQ29sYWJvcmF0aXZhRGlhbG9nIiwKICBwcm9wczogWwogICAgImluc3RydWNPcHRpb25DYWxsIiwKICAgICJpbnN0cnVjVHlwZSIsCiAgICAiZG9tYWluIiwKICAgICJkaWFsb2ciLAogICAgInByb2NlZHVyZSIsCiAgICAiY29uY2VwdCIsCiAgICAibW9kdWxlIiwKICAgICJpbnN0cnVjdGlvbmFsZWxlbWVudCIsCiAgXSwKICBkYXRhOiAoKSA9PiAoewogICAgaTogMCwKICAgIGF1eEdldFNyYzogW10sCiAgICB2YWxpZDogdHJ1ZSwKICAgIGRpYWxvZ19hbGVydDogZmFsc2UsCiAgICBkaWFsb2dfYWxlcnQyOiBmYWxzZSwKICAgIGRpYWxvZ19hbGVydDM6IGZhbHNlLAogICAgcXVlc3Rpb25BanVzdDogIiIsCiAgICBjb2xhYm9yYXRpdmVOYW1lOiAiIiwKICAgIGNvbGFib3JhdGl2ZU5hbWVSdWxlczogWwogICAgICAodikgPT4KICAgICAgICAhIXYgfHwKICAgICAgICAiw4kgbmVjZXNzw6FyaW8gZGVzY3JldmVyIHVtIGlkZW50aWZpY2Fkb3IgcGFyYSBhIGF0aXZpZGFkZSBjb2xhYm9yYXRpdmEiLAogICAgICAodikgPT4KICAgICAgICAodiAmJiB2Lmxlbmd0aCA8PSAxMDApIHx8CiAgICAgICAgIk5vbWUgZG8gaWRlbnRpZmljYWRvciBkYSBhdGl2aWRhZGUgY29sYWJvcmF0aXZhIGRldmUgdGVyIG5vIG3DoXhpbW8gMTAwIGNhcmFjdGVyZXMiLAogICAgXSwKICAgIG1lbWJlckFtb3VudDogIiIsCiAgICBtZW1iZXJBbW91bnRSdWxlczogWwogICAgICAodikgPT4KICAgICAgICAhIXYgfHwKICAgICAgICAiw4kgbmVjZXNzw6FyaW8gaW5zZXJpciBhIHF1YW50aWRhZGUgZGUgYWx1bm9zIGVudm9sdmlkb3MgbmEgYXRpdmlkYWRlIiwKICAgIF0sCiAgICBjb2xhYm9yYXRpdmVEZXNjcmlwdGlvbjogIiIsCiAgICBjb2xhYm9yYXRpdmVEZXNjcmlwdGlvblJ1bGVzOiBbCiAgICAgICh2KSA9PgogICAgICAgICEhdiB8fAogICAgICAgICLDiSBuZWNlc3PDoXJpbyBpbnNlcmlyIHVtYSBkZXNjcmnDp8OjbyBkYSBhdGl2aWRhZGUgY29sYWJvcmF0aXZhIGEgc2VyIGluc2VyaWRhIiwKICAgIF0sCiAgICBpdGVtc01vYmlsZU1lZGlhOiBbCiAgICAgIHsKICAgICAgICBpY29uOiAibWRpLWZpbGUtaW1hZ2UiLAogICAgICAgIG5hbWU6ICJJbWFnZW0iLAogICAgICB9LAogICAgICB7CiAgICAgICAgaWNvbjogIm1kaS1maWxlLXZpZGVvIiwKICAgICAgICBuYW1lOiAiVmlkZW8iLAogICAgICB9LAogICAgICB7CiAgICAgICAgaWNvbjogIm1kaS1maWxlLW11c2ljIiwKICAgICAgICBuYW1lOiAiQXVkaW8iLAogICAgICB9LAogICAgICB7CiAgICAgICAgaWNvbjogIm1kaS1saW5rLXZhcmlhbnQiLAogICAgICAgIG5hbWU6ICJMaW5rIiwKICAgICAgfSwKICAgIF0sCiAgICBsaW5rVXJsUnVsZXM6IFsodikgPT4gISF2IHx8ICLDiSBuZWNlc3PDoXJpbyBpbnNlcmlyIGEgdXJsIGRvIHNldSBsaW5rIl0sCiAgICBtb2JpbGVNZWRpYXNDb250cm9sOiBbXSwKICAgIHZpZXdRdWVzdGlvbnM6IGZhbHNlLAogICAgcXVlc3Rpb25UeXBlczogWyJRdWVzdMOjbyBPYmpldGl2YSIsICJRdWVzdMOjbyBEaXNjdXNzaXZhIl0sCiAgICBxdWVzdGlvbnNDb250cm9sOiBbXSwKICAgIGlkT2JqQW5zd2VySXRlbXM6IFsKICAgICAgIkEiLAogICAgICAiQiIsCiAgICAgICJDIiwKICAgICAgIkQiLAogICAgICAiRSIsCiAgICAgICJGIiwKICAgICAgIkciLAogICAgICAiSCIsCiAgICAgICJJIiwKICAgICAgIkoiLAogICAgICAiSyIsCiAgICAgICJMIiwKICAgICAgIk0iLAogICAgICAiTiIsCiAgICAgICJPIiwKICAgICAgIlAiLAogICAgICAiUSIsCiAgICAgICJSIiwKICAgICAgIlMiLAogICAgICAiVCIsCiAgICAgICJVIiwKICAgICAgIlYiLAogICAgICAiVyIsCiAgICAgICJYIiwKICAgICAgIlkiLAogICAgICAiWiIsCiAgICBdLAogICAgYWx0ZXJuYXRpdmVEZXNjcmlwdGlvblJ1bGVzOiBbCiAgICAgICh2KSA9PiAhIXYgfHwgIsOJIG5lY2Vzc8OhcmlvIGRlc2NyZXZlciBhIGFsdGVybmF0aXZhLiIsCiAgICBdLAogIH0pLAogIHdhdGNoOiB7CiAgICBkaWFsb2c6IGFzeW5jIGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmdldENvbGFib3JhdGl2ZSgpOwogICAgfSwKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5nZXRDb2xhYm9yYXRpdmUoKTsKICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldENvbGFib3JhdGl2ZSgpIHsKICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpIHsKICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgdGhpcy5jb2xhYm9yYXRpdmVOYW1lID0gdGhpcy5pbnN0cnVjdGlvbmFsZWxlbWVudC5sYWJlbDsKICAgICAgICAgIHRoaXMuY29sYWJvcmF0aXZlRGVzY3JpcHRpb24gPSB0aGlzLmluc3RydWN0aW9uYWxlbGVtZW50LmRlc2NyaXB0aW9uOwogICAgICAgICAgdGhpcy5tZW1iZXJBbW91bnQgPSBwYXJzZUludCgKICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbmFsZWxlbWVudC5tZW1iZXJhbW91bnQKICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sID0gW107CiAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sID0gW107CiAgICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubW9iaWxlbWVkaWFzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGF3YWl0IHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubW9iaWxlbWVkaWFzLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUsCiAgICAgICAgICAgIGluZGV4TW9iaWxlCiAgICAgICAgICApIHsKICAgICAgICAgICAgaWYgKGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjEiKSB7CiAgICAgICAgICAgICAgdm0uZ2V0U3JjSW1hZ2UoCiAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUubmFtZWZpbGUKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0pLAogICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgcGF0aDogZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjIiKSB7CiAgICAgICAgICAgICAgdm0uZ2V0U3JjVmlkZW8oCiAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUubmFtZWZpbGUKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0pLAogICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgdGltZTogZWxlbWVudE1vYmlsZS50aW1lLAogICAgICAgICAgICAgICAgcGF0aDogZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjMiKSB7CiAgICAgICAgICAgICAgdm0uZ2V0U3JjQXVkaW8oCiAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUubmFtZWZpbGUKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0pLAogICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgcGF0aDogZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjUiKSB7CiAgICAgICAgICAgICAgYXdhaXQgdm0ubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlSW50KGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSksCiAgICAgICAgICAgICAgICBvYmplY3Q6IGVsZW1lbnRNb2JpbGUudXJsbGluaywKICAgICAgICAgICAgICAgIHVybDogZWxlbWVudE1vYmlsZS51cmwsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5pbnN0cnVjdGlvbmFsZWxlbWVudC5xdWVzdGlvbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy52aWV3UXVlc3Rpb25zID0gdHJ1ZTsKICAgICAgICAgIGF3YWl0IHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQucXVlc3Rpb25zLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgIGVsZW1lbnRRdWVzdGlvbiwKICAgICAgICAgICAgaW5kZXhRdWVzdGlvbgogICAgICAgICAgKSB7CiAgICAgICAgICAgIGlmIChlbGVtZW50UXVlc3Rpb24udHlwZXF1ZXN0aW9uID09PSBgL3F1ZXN0aW9udHlwZS8xL2ApIHsKICAgICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sLnB1c2goewogICAgICAgICAgICAgICAgdHlwZVF1ZXN0aW9uOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgZWxlbWVudFF1ZXN0aW9uLnR5cGVxdWVzdGlvbi5zcGxpdCgiLyIpWzRdCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb25RdWVzdGlvbjogZWxlbWVudFF1ZXN0aW9uLmRlc2NyaXB0aW9ucXVlc3Rpb24sCiAgICAgICAgICAgICAgICBhbnN3ZXJzQWx0ZXJuYXRpdmVzOiBbXSwKICAgICAgICAgICAgICAgIG1vYmlsZU1lZGlhczogW10sCiAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRRdWVzdGlvbi51cmwsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudFF1ZXN0aW9uLmFuc3dlcnNhbHRlcm5hdGl2ZXMuZm9yRWFjaCgKICAgICAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uKGVsZW1lbnRBbHRlcm5hdGl2ZSkgewogICAgICAgICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sWwogICAgICAgICAgICAgICAgICAgIGluZGV4UXVlc3Rpb24KICAgICAgICAgICAgICAgICAgXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzLnB1c2goewogICAgICAgICAgICAgICAgICAgIGlzVHJ1ZTogZWxlbWVudEFsdGVybmF0aXZlLmlzdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBhbnN3ZXJzOiBlbGVtZW50QWx0ZXJuYXRpdmUuYW5zd2VycywKICAgICAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRBbHRlcm5hdGl2ZS51cmwsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFF1ZXN0aW9uLnR5cGVxdWVzdGlvbiA9PT0gYC9xdWVzdGlvbnR5cGUvMi9gKSB7CiAgICAgICAgICAgICAgYXdhaXQgdm0ucXVlc3Rpb25zQ29udHJvbC5wdXNoKHsKICAgICAgICAgICAgICAgIHR5cGVRdWVzdGlvbjogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgIGVsZW1lbnRRdWVzdGlvbi50eXBlcXVlc3Rpb24uc3BsaXQoIi8iKVs0XQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uUXVlc3Rpb246IGVsZW1lbnRRdWVzdGlvbi5kZXNjcmlwdGlvbnF1ZXN0aW9uLAogICAgICAgICAgICAgICAgY29ycmVjdEFuc3dlcjoKICAgICAgICAgICAgICAgICAgZWxlbWVudFF1ZXN0aW9uLnJlc29sdXRpb25xdWVzdGlvblswXS5jb3JyZWN0YW5zd2VyLAogICAgICAgICAgICAgICAgbW9iaWxlTWVkaWFzOiBbXSwKICAgICAgICAgICAgICAgIHVybDogZWxlbWVudFF1ZXN0aW9uLnVybCwKICAgICAgICAgICAgICAgIHVybENvcnJlY3RBbnN3ZXI6IGVsZW1lbnRRdWVzdGlvbi5yZXNvbHV0aW9ucXVlc3Rpb25bMF0udXJsLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlbGVtZW50UXVlc3Rpb24ubW9iaWxlbWVkaWFzKSB7CiAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudFF1ZXN0aW9uLm1vYmlsZW1lZGlhcy5mb3JFYWNoKGFzeW5jIGZ1bmN0aW9uKAogICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZSwKICAgICAgICAgICAgICAgIGluZGV4TW9iaWxlCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudE1vYmlsZS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdID09PSAiMSIpIHsKICAgICAgICAgICAgICAgICAgdm0uZ2V0U3JjSW1hZ2VRdWVzdGlvbnMoCiAgICAgICAgICAgICAgICAgICAgaW5kZXhRdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS5uYW1lZmlsZQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sW2luZGV4UXVlc3Rpb25dLm1vYmlsZU1lZGlhcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IGVsZW1lbnRNb2JpbGUucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgICAgdXJsOiBlbGVtZW50TW9iaWxlLnVybCwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0gPT09ICIyIgogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHZtLmdldFNyY1ZpZGVvUXVlc3Rpb25zKAogICAgICAgICAgICAgICAgICAgIGluZGV4UXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgICAgaW5kZXhNb2JpbGUsCiAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUubmFtZWZpbGUKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgYXdhaXQgdm0ucXVlc3Rpb25zQ29udHJvbFtpbmRleFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0KICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIG9iamVjdDogbnVsbCwKICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBlbGVtZW50TW9iaWxlLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgdGltZTogZWxlbWVudE1vYmlsZS50aW1lLAogICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjMiCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgdm0uZ2V0U3JjQXVkaW9RdWVzdGlvbnMoCiAgICAgICAgICAgICAgICAgICAgaW5kZXhRdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS5uYW1lZmlsZQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sW2luZGV4UXVlc3Rpb25dLm1vYmlsZU1lZGlhcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnRNb2JpbGUudXJsLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjUiCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgYXdhaXQgdm0ucXVlc3Rpb25zQ29udHJvbFtpbmRleFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0KICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIG9iamVjdDogZWxlbWVudE1vYmlsZS51cmxsaW5rLAogICAgICAgICAgICAgICAgICAgIHVybDogZWxlbWVudE1vYmlsZS51cmwsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHZtLnZpZXdRdWVzdGlvbnMgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wgPSBbXTsKICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wgPSBbXTsKICAgICAgICB0aGlzLnJlc2V0VmFsaWRhdGlvbigpOwogICAgICAgIHRoaXMudmlld1F1ZXN0aW9ucyA9IGZhbHNlOwogICAgICAgIHRoaXMucmVzZXRWYXJpYWJsZXMoKTsKICAgICAgfQogICAgfSwKICAgIC8qIEZVTsOHw4NPIFBBUkEgU0FMVkFSIEFUSVZJREFERSBDT0xBQk9SQVRJVkEgUVVFIFRFTkhBIFFVRVNUw5VFUyAqLwogICAgYXN5bmMgcG9zdFF1ZXN0aW9ucygpIHsKICAgICAgdmFyIGluc3RydWN0aW9uYWxlbGVtZW50ID0gewogICAgICAgIGxhYmVsOiB0aGlzLmNvbGFib3JhdGl2ZU5hbWUsCiAgICAgICAgZmtfaW5zdHJ1Y3Rpb25hbGVsZW1lbnR0eXBlOiBgL2luc3RydWNlbGVtZW50dHlwZS8zL2AsCiAgICAgICAgbWVtYmVyYW1vdW50OiB0aGlzLm1lbWJlckFtb3VudCwKICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jb2xhYm9yYXRpdmVEZXNjcmlwdGlvbiwKICAgICAgfTsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIGF1eFBhdGggPSAiIjsKICAgICAgaWYgKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbCkgewogICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5mb3JFYWNoKGFzeW5jIChtb2JpbGVtZWRpYSkgPT4gewogICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnVybCkgewogICAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudHlwZSAhPT0gNSkgewogICAgICAgICAgICAgIGZpcmViYXNlCiAgICAgICAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAgICAgICAucmVmKCkKICAgICAgICAgICAgICAgIC5jaGlsZChtb2JpbGVtZWRpYS5wYXRoKQogICAgICAgICAgICAgICAgLnB1dChtb2JpbGVtZWRpYS5vYmplY3QpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhdXhQYXRoID0KICAgICAgICAgICAgICB2bS5kb21haW4uaWRrbm93bGVkZ2Vkb21haW4udG9TdHJpbmcoKSArCiAgICAgICAgICAgICAgIi8iICsKICAgICAgICAgICAgICAoYXdhaXQgc2V0VGltZW91dChhc3luYyBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGF3YWl0IERhdGUubm93KCkudG9TdHJpbmcoKTsKICAgICAgICAgICAgICB9LCAxKSk7CiAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlICE9PSA1KSB7CiAgICAgICAgICAgICAgZmlyZWJhc2UKICAgICAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgICAgIC5yZWYoKQogICAgICAgICAgICAgICAgLmNoaWxkKGF1eFBhdGgpCiAgICAgICAgICAgICAgICAucHV0KG1vYmlsZW1lZGlhLm9iamVjdCk7CgogICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnBhdGggPSBhdXhQYXRoOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdmFyIGF1eFBhdGhRdWVzdGlvbnMgPSAiIjsKICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sLmZvckVhY2goYXN5bmMgZnVuY3Rpb24ocXVlc3Rpb24pIHsKICAgICAgICBpZiAocXVlc3Rpb24ubW9iaWxlTWVkaWFzKSB7CiAgICAgICAgICBhd2FpdCBxdWVzdGlvbi5tb2JpbGVNZWRpYXMuZm9yRWFjaCgobW9iaWxlbWVkaWEpID0+IHsKICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnVybCkgewogICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlICE9PSA1KSB7CiAgICAgICAgICAgICAgICBmaXJlYmFzZQogICAgICAgICAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAgICAgICAgIC5yZWYoKQogICAgICAgICAgICAgICAgICAuY2hpbGQobW9iaWxlbWVkaWEucGF0aCkKICAgICAgICAgICAgICAgICAgLnB1dChtb2JpbGVtZWRpYS5vYmplY3QpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgYXV4UGF0aFF1ZXN0aW9ucyA9CiAgICAgICAgICAgICAgICAgIHZtLmRvbWFpbi5pZGtub3dsZWRnZWRvbWFpbi50b1N0cmluZygpICsKICAgICAgICAgICAgICAgICAgIi8iICsKICAgICAgICAgICAgICAgICAgRGF0ZS5ub3coKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgIT09IDUpIHsKICAgICAgICAgICAgICAgICAgZmlyZWJhc2UKICAgICAgICAgICAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAgICAgICAgICAgLnJlZigpCiAgICAgICAgICAgICAgICAgICAgLmNoaWxkKGF1eFBhdGhRdWVzdGlvbnMpCiAgICAgICAgICAgICAgICAgICAgLnB1dChtb2JpbGVtZWRpYS5vYmplY3QpOwoKICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEucGF0aCA9IGF1eFBhdGhRdWVzdGlvbnM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgMzcpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuaW5zdHJ1Y1R5cGUgPT09ICJkb21pbmlvIikgewogICAgICAgIE9iamVjdC5hc3NpZ24oaW5zdHJ1Y3Rpb25hbGVsZW1lbnQsIHsKICAgICAgICAgIGZrX2lka25vd2xlZGdlZG9tYWluOiB0aGlzLmluc3RydWNPcHRpb25DYWxsLnVybCwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmluc3RydWNUeXBlID09PSAibW9kdWxvIikgewogICAgICAgIE9iamVjdC5hc3NpZ24oaW5zdHJ1Y3Rpb25hbGVsZW1lbnQsIHsKICAgICAgICAgIGZrX2lkbW9kdWxlOiB0aGlzLmluc3RydWNPcHRpb25DYWxsLnVybCwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmluc3RydWNUeXBlID09PSAiY29uY2VpdG8iKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbihpbnN0cnVjdGlvbmFsZWxlbWVudCwgewogICAgICAgICAgZmtfaWRjb25jZXB0OiB0aGlzLmluc3RydWNPcHRpb25DYWxsLnVybCwKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpIHsKICAgICAgICAvKiBDw5NESUdPIFBBUkEgRURJw4fDg08gREEgQVZBTElBw4fDg08vRVhFUkPDjUNJTyAqLwogICAgICAgIGF3YWl0IEFwaSgpCiAgICAgICAgICAucHV0KHZtLmluc3RydWN0aW9uYWxlbGVtZW50LnVybCwgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpCiAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgewogICAgICAgICAgICBpZiAodm0ubW9iaWxlTWVkaWFzQ29udHJvbCkgewogICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wuZm9yRWFjaChhc3luYyBmdW5jdGlvbigKICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLAogICAgICAgICAgICAgICAgaW5kZXhtb2JpbGUKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIC8qIERBTkRPIFBVVCBOT1MgTU9CSUxFTUVESUFTIFFVRSBQT1NTVUVNIFVSTCovCiAgICAgICAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudXJsKSB7CiAgICAgICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KG1vYmlsZW1lZGlhLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJJbWFnZW0gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICIvbWVkaWF0eXBlLyIgKyBtb2JpbGVtZWRpYS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgcGF0aDogbW9iaWxlbWVkaWEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG1vYmlsZW1lZGlhLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICAgIkltYWdlbSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgKGluZGV4bW9iaWxlICsgMSkgKwogICAgICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgICAgICByZXNwb3N0YS5kYXRhLmxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KG1vYmlsZW1lZGlhLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJWaWRlbyAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZTogIi9tZWRpYXR5cGUvIiArIG1vYmlsZW1lZGlhLnR5cGUgKyAiLyIsCiAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbW9iaWxlbWVkaWEucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBtb2JpbGVtZWRpYS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGltZTogbW9iaWxlbWVkaWEudGltZSwKICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KG1vYmlsZW1lZGlhLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJBdWRpbyAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZTogIi9tZWRpYXR5cGUvIiArIG1vYmlsZW1lZGlhLnR5cGUgKyAiLyIsCiAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBtb2JpbGVtZWRpYS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSA1KSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KG1vYmlsZW1lZGlhLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJMaW5rICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiL21lZGlhdHlwZS8iICsgbW9iaWxlbWVkaWEudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG1vYmlsZW1lZGlhLm9iamVjdCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLyogREFORE8gUE9TVCBOT1MgTU9CSUxFTUVESUFTIFFVRSBOw4NPIFBPU1NVRU0gVVJMKi8KICAgICAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJJbWFnZW0gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICIvbWVkaWF0eXBlLyIgKyBtb2JpbGVtZWRpYS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgcGF0aDogbW9iaWxlbWVkaWEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG1vYmlsZW1lZGlhLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246CiAgICAgICAgICAgICAgICAgICAgICAgICJJbWFnZW0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleG1vYmlsZSArIDEpICsKICAgICAgICAgICAgICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9zdGEuZGF0YS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRpbnN0cnVjdGlvbmFsZWxlbWVudDogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnBvc3QoYC9tb2JpbGVtZWRpYS9gLCB7CiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIlZpZGVvICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiL21lZGlhdHlwZS8iICsgbW9iaWxlbWVkaWEudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG1vYmlsZW1lZGlhLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGltZTogbW9iaWxlbWVkaWEudGltZSwKICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQXVkaW8gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICIvbWVkaWF0eXBlLyIgKyBtb2JpbGVtZWRpYS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgcGF0aDogbW9iaWxlbWVkaWEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDUpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJMaW5rICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiL21lZGlhdHlwZS8iICsgbW9iaWxlbWVkaWEudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG1vYmlsZW1lZGlhLm9iamVjdCwKICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhd2FpdCB2bS5xdWVzdGlvbnNDb250cm9sLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgICAgZWxlbWVudFF1ZXN0aW9uLAogICAgICAgICAgICAgIGluZGV4UXVlc3Rpb24KICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgLypEQU5ETyBQVVQgTkFTIFFVRVNUw5VFUyBDT00gVVJMKi8KICAgICAgICAgICAgICBpZiAoZWxlbWVudFF1ZXN0aW9uLnVybCkgewogICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkKICAgICAgICAgICAgICAgICAgLnB1dChlbGVtZW50UXVlc3Rpb24udXJsLCB7CiAgICAgICAgICAgICAgICAgICAgb3JkZXJxdWVzdGlvbjogaW5kZXhRdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbnF1ZXN0aW9uOiBlbGVtZW50UXVlc3Rpb24uZGVzY3JpcHRpb25RdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICB0eXBlcXVlc3Rpb246CiAgICAgICAgICAgICAgICAgICAgICBgL3F1ZXN0aW9udHlwZS9gICsgZWxlbWVudFF1ZXN0aW9uLnR5cGVRdWVzdGlvbiArIGAvYCwKICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiB2bS5pbnN0cnVjdGlvbmFsZWxlbWVudC51cmwsCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uKHJlc3Bvc3RhMikgewogICAgICAgICAgICAgICAgICAgIC8qREFORE8gUFVUIE5PUyBNT0JJTEVNRURJQVMgREFTIFFVRVNUw5VFUyBDT00gVVJMKi8KCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudFF1ZXN0aW9uLm1vYmlsZU1lZGlhcy5mb3JFYWNoKGFzeW5jIGZ1bmN0aW9uKAogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZSwKICAgICAgICAgICAgICAgICAgICAgIGluZGV4TW9iaWxlCiAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudE1vYmlsZS51cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRNb2JpbGUudHlwZSA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50TW9iaWxlLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJJbWFnZW0gIiArIChpbmRleE1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvbWVkaWF0eXBlLyIgKyBlbGVtZW50TW9iaWxlLnR5cGUgKyAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBlbGVtZW50TW9iaWxlLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSW1hZ2VtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5kZXhNb2JpbGUgKyAxKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgUXVlc3TDo28iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9zdGEyLmRhdGEub3JkZXJxdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUudHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50TW9iaWxlLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJWaWRlbyAiICsgKGluZGV4TW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi9tZWRpYXR5cGUvIiArIGVsZW1lbnRNb2JpbGUudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IGVsZW1lbnRNb2JpbGUucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBlbGVtZW50TW9iaWxlLm5hbWVmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBlbGVtZW50TW9iaWxlLnRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUudHlwZSA9PT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50TW9iaWxlLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJBdWRpbyAiICsgKGluZGV4TW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi9tZWRpYXR5cGUvIiArIGVsZW1lbnRNb2JpbGUudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSA1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KGVsZW1lbnRNb2JpbGUudXJsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkxpbmsgIiArIChpbmRleE1vYmlsZSArIDEpICsgdm0uaSsrICogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiL21lZGlhdHlwZS8iICsgZWxlbWVudE1vYmlsZS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogZWxlbWVudE1vYmlsZS5vYmplY3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiSW1hZ2VtICIgKyAoaW5kZXhNb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiL21lZGlhdHlwZS8iICsgZWxlbWVudE1vYmlsZS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJbWFnZW0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleE1vYmlsZSArIDEpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiBRdWVzdMOjbyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb3N0YTIuZGF0YS5vcmRlcnF1ZXN0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiVmlkZW8gIiArIChpbmRleE1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvbWVkaWF0eXBlLyIgKyBlbGVtZW50TW9iaWxlLnR5cGUgKyAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBlbGVtZW50TW9iaWxlLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5wYXRoLnNwbGl0KCIvIilbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IGVsZW1lbnRNb2JpbGUudGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudE1vYmlsZS50eXBlID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQXVkaW8gIiArIChpbmRleE1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvbWVkaWF0eXBlLyIgKyBlbGVtZW50TW9iaWxlLnR5cGUgKyAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50TW9iaWxlLnR5cGUgPT09IDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJMaW5rICIgKyAoaW5kZXhNb2JpbGUgKyAxKSArIHZtLmkrKyAqIDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi9tZWRpYXR5cGUvIiArIGVsZW1lbnRNb2JpbGUudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IGVsZW1lbnRNb2JpbGUub2JqZWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFF1ZXN0aW9uLnR5cGVRdWVzdGlvbiA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudFF1ZXN0aW9uLmFuc3dlcnNBbHRlcm5hdGl2ZXMuZm9yRWFjaCgKICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24oZWxlbWVudEFsdGVybmF0aXZlLCBpbmRleEFsdGVybmF0aXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRBbHRlcm5hdGl2ZS51cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50QWx0ZXJuYXRpdmUudXJsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkb2JqYW5zd2VyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmlkT2JqQW5zd2VySXRlbXNbaW5kZXhBbHRlcm5hdGl2ZV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcnM6IGVsZW1lbnRBbHRlcm5hdGl2ZS5hbnN3ZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc3RydWU6IGVsZW1lbnRBbHRlcm5hdGl2ZS5pc1RydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJhbnN3ZXJhbHRlcm5hdGl2ZXM6IGluZGV4QWx0ZXJuYXRpdmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL2Fuc3dlcnNhbHRlcm5hdGl2ZXMvYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZG9iamFuc3dlcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5pZE9iakFuc3dlckl0ZW1zW2luZGV4QWx0ZXJuYXRpdmVdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnN3ZXJzOiBlbGVtZW50QWx0ZXJuYXRpdmUuYW5zd2VycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXN0cnVlOiBlbGVtZW50QWx0ZXJuYXRpdmUuaXNUcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyYW5zd2VyYWx0ZXJuYXRpdmVzOiBpbmRleEFsdGVybmF0aXZlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFF1ZXN0aW9uLnR5cGVRdWVzdGlvbiA9PT0gMikgewogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KGVsZW1lbnRRdWVzdGlvbi51cmxDb3JyZWN0QW5zd2VyLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3RhbnN3ZXI6IGVsZW1lbnRRdWVzdGlvbi5jb3JyZWN0QW5zd2VyLAogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkKICAgICAgICAgICAgICAgICAgLnBvc3QoYC9xdWVzdGlvbi9gLCB7CiAgICAgICAgICAgICAgICAgICAgb3JkZXJxdWVzdGlvbjogaW5kZXhRdWVzdGlvbiArIDEsCiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25xdWVzdGlvbjogZWxlbWVudFF1ZXN0aW9uLmRlc2NyaXB0aW9uUXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgICAgZmtfaWRpbnN0cnVjdGlvbmFsZWxlbWVudDogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgdHlwZXF1ZXN0aW9uOgogICAgICAgICAgICAgICAgICAgICAgYC9xdWVzdGlvbnR5cGUvYCArIGVsZW1lbnRRdWVzdGlvbi50eXBlUXVlc3Rpb24gKyBgL2AsCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uKHJlc3Bvc3RhMikgewogICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50UXVlc3Rpb24udHlwZVF1ZXN0aW9uID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBlbGVtZW50UXVlc3Rpb24uYW5zd2Vyc0FsdGVybmF0aXZlcy5mb3JFYWNoKAogICAgICAgICAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbihlbGVtZW50QWx0ZXJuYXRpdmUsIGluZGV4QWx0ZXJuYXRpdmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvYW5zd2Vyc2FsdGVybmF0aXZlcy9gLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZG9iamFuc3dlcjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uaWRPYmpBbnN3ZXJJdGVtc1tpbmRleEFsdGVybmF0aXZlXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcnM6IGVsZW1lbnRBbHRlcm5hdGl2ZS5hbnN3ZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXN0cnVlOiBlbGVtZW50QWx0ZXJuYXRpdmUuaXNUcnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJhbnN3ZXJhbHRlcm5hdGl2ZXM6IGluZGV4QWx0ZXJuYXRpdmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50UXVlc3Rpb24udHlwZVF1ZXN0aW9uID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvcmVzb2x1dGlvbnF1ZXN0aW9uL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdGFuc3dlcjogZWxlbWVudFF1ZXN0aW9uLmNvcnJlY3RBbnN3ZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8qIEPDk0RJR08gUEFSQSBDUklBw4fDg08gREEgQVRJVklEQURFIENPTEFCT1JBVElWQSAqLwogICAgICAgIGF3YWl0IEFwaSgpCiAgICAgICAgICAucG9zdChgL2luc3RydWN0aW9uYWxlbGVtZW50L2AsIGluc3RydWN0aW9uYWxlbGVtZW50KQogICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24ocmVzcG9zdGEpIHsKICAgICAgICAgICAgaWYgKHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wpIHsKICAgICAgICAgICAgICAvKiBJTlNFUsOHw4NPIERPUyBNT0JJTEVNRURJQVMgREEgQVRJVklEQURFIENPTEFCT1JBVElWQSAqLwogICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wuZm9yRWFjaChhc3luYyBmdW5jdGlvbigKICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLAogICAgICAgICAgICAgICAgaW5kZXhtb2JpbGUKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnBvc3QoYC9tb2JpbGVtZWRpYS9gLCB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJJbWFnZW0gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiL21lZGlhdHlwZS8iICsgbW9iaWxlbWVkaWEudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG1vYmlsZW1lZGlhLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICJJbWFnZW0gIiArCiAgICAgICAgICAgICAgICAgICAgICAoaW5kZXhtb2JpbGUgKyAxKSArCiAgICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgICAgcmVzcG9zdGEuZGF0YS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiVmlkZW8gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiL21lZGlhdHlwZS8iICsgbW9iaWxlbWVkaWEudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG1vYmlsZW1lZGlhLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICB0aW1lOiBtb2JpbGVtZWRpYS50aW1lLAogICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gMykgewogICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQXVkaW8gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiL21lZGlhdHlwZS8iICsgbW9iaWxlbWVkaWEudHlwZSArICIvIiwKICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gNSkgewogICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiTGluayAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICIvbWVkaWF0eXBlLyIgKyBtb2JpbGVtZWRpYS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBtb2JpbGVtZWRpYS5vYmplY3QsCiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgZmtfaWRpbnN0cnVjdGlvbmFsZWxlbWVudDogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGF3YWl0IHZtLnF1ZXN0aW9uc0NvbnRyb2wuZm9yRWFjaChhc3luYyBmdW5jdGlvbigKICAgICAgICAgICAgICBlbGVtZW50UXVlc3Rpb24sCiAgICAgICAgICAgICAgaW5kZXhRdWVzdGlvbgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAvKiBJTlNFUsOHw4NPIERBUyBRVUVTVMOVRVMgREEgQVRJVklEQURFIENPTEFCT1JBVElWQSAqLwogICAgICAgICAgICAgIGF3YWl0IEFwaSgpCiAgICAgICAgICAgICAgICAucG9zdChgL3F1ZXN0aW9uL2AsIHsKICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25xdWVzdGlvbjogZWxlbWVudFF1ZXN0aW9uLmRlc2NyaXB0aW9uUXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgIG9yZGVycXVlc3Rpb246IGluZGV4UXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICB0eXBlcXVlc3Rpb246CiAgICAgICAgICAgICAgICAgICAgYC9xdWVzdGlvbnR5cGUvYCArIGVsZW1lbnRRdWVzdGlvbi50eXBlUXVlc3Rpb24gKyBgL2AsCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24ocmVzcG9zdGEyKSB7CiAgICAgICAgICAgICAgICAgIC8qIElOU0VSw4fDg08gRE9TIE1PQklMRU1FRElBUyBEQVMgUVVFU1TDlUVTIERBIEFUSVZJREFERSBDT0xBQk9SQVRJVkEgKi8KICAgICAgICAgICAgICAgICAgYXdhaXQgZWxlbWVudFF1ZXN0aW9uLm1vYmlsZU1lZGlhcy5mb3JFYWNoKGFzeW5jIGZ1bmN0aW9uKAogICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUsCiAgICAgICAgICAgICAgICAgICAgaW5kZXhNb2JpbGUKICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRNb2JpbGUudHlwZSA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJJbWFnZW0gIiArIChpbmRleE1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAiL21lZGlhdHlwZS8iICsgZWxlbWVudE1vYmlsZS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IGVsZW1lbnRNb2JpbGUucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoKICAgICAgICAgICAgICAgICAgICAgICAgICAiSW1hZ2VtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleE1vYmlsZSArIDEpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAiIFF1ZXN0w6NvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9zdGEyLmRhdGEub3JkZXJxdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUudHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJWaWRlbyAiICsgKGluZGV4TW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOgogICAgICAgICAgICAgICAgICAgICAgICAgICIvbWVkaWF0eXBlLyIgKyBlbGVtZW50TW9iaWxlLnR5cGUgKyAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGVsZW1lbnRNb2JpbGUucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogZWxlbWVudE1vYmlsZS5wYXRoLnNwbGl0KCIvIilbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBlbGVtZW50TW9iaWxlLnRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50TW9iaWxlLnR5cGUgPT09IDMpIHsKICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnBvc3QoYC9tb2JpbGVtZWRpYS9gLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQXVkaW8gIiArIChpbmRleE1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAiL21lZGlhdHlwZS8iICsgZWxlbWVudE1vYmlsZS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBlbGVtZW50TW9iaWxlLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRxdWVzdGlvbjogcmVzcG9zdGEyLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50TW9iaWxlLnR5cGUgPT09IDUpIHsKICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnBvc3QoYC9tb2JpbGVtZWRpYS9gLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiTGluayAiICsgKGluZGV4TW9iaWxlICsgMSkgKyB2bS5pKysgKiAwLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZToKICAgICAgICAgICAgICAgICAgICAgICAgICAiL21lZGlhdHlwZS8iICsgZWxlbWVudE1vYmlsZS50eXBlICsgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IGVsZW1lbnRNb2JpbGUub2JqZWN0LAogICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50UXVlc3Rpb24udHlwZVF1ZXN0aW9uID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgLyogSU5TRVLDh8ODTyBEQVMgQUxURVJOQVRJVkFTIERBUyBRVUVTVMOVRVMgREEgQVRJVklEQURFIENPTEFCT1JBVElWQSAqLwogICAgICAgICAgICAgICAgICAgIGF3YWl0IGVsZW1lbnRRdWVzdGlvbi5hbnN3ZXJzQWx0ZXJuYXRpdmVzLmZvckVhY2goCiAgICAgICAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbihlbGVtZW50QWx0ZXJuYXRpdmUsIGluZGV4QWx0ZXJuYXRpdmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL2Fuc3dlcnNhbHRlcm5hdGl2ZXMvYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlkb2JqYW5zd2VyOiB2bS5pZE9iakFuc3dlckl0ZW1zW2luZGV4QWx0ZXJuYXRpdmVdLAogICAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlcnM6IGVsZW1lbnRBbHRlcm5hdGl2ZS5hbnN3ZXJzLAogICAgICAgICAgICAgICAgICAgICAgICAgIGlzdHJ1ZTogZWxlbWVudEFsdGVybmF0aXZlLmlzVHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZHF1ZXN0aW9uOiByZXNwb3N0YTIuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJhbnN3ZXJhbHRlcm5hdGl2ZXM6IGluZGV4QWx0ZXJuYXRpdmUsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFF1ZXN0aW9uLnR5cGVRdWVzdGlvbiA9PT0gMikgewogICAgICAgICAgICAgICAgICAgIC8qIElOU0VSw4fDg08gREEgUkVTUE9TVEEgREFTIFFVRVNUw5VFUyBEQSBBVElWSURBREUgQ09MQUJPUkFUSVZBICovCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdChgL3Jlc29sdXRpb25xdWVzdGlvbi9gLCB7CiAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0YW5zd2VyOiBlbGVtZW50UXVlc3Rpb24uY29ycmVjdEFuc3dlciwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkcXVlc3Rpb246IHJlc3Bvc3RhMi5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRNb2JpbGVNZWRpYShtb2JpbGVNZWRpYVR5cGUpIHsKICAgICAgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMSkgewogICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgIHR5cGU6IG1vYmlsZU1lZGlhVHlwZSwKICAgICAgICAgIG9iamVjdDogbnVsbCwKICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICBwYXRoOiBudWxsLAogICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICB1cmw6IG51bGwsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAobW9iaWxlTWVkaWFUeXBlID09PSAyKSB7CiAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sLnB1c2goewogICAgICAgICAgdHlwZTogbW9iaWxlTWVkaWFUeXBlLAogICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgcmVzb2x1dGlvbjogbnVsbCwKICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICBwYXRoOiBudWxsLAogICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICB1cmw6IG51bGwsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAobW9iaWxlTWVkaWFUeXBlID09PSAzKSB7CiAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sLnB1c2goewogICAgICAgICAgdHlwZTogbW9iaWxlTWVkaWFUeXBlLAogICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgcGF0aDogbnVsbCwKICAgICAgICAgIG5hbWVmaWxlOiBudWxsLAogICAgICAgICAgdXJsOiBudWxsLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gNCkgewogICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgIHR5cGU6IG1vYmlsZU1lZGlhVHlwZSArIDEsCiAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICB1cmw6IG51bGwsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBkZWxldGVNb2JpbGVNZWRpYShpZE1vYmlsZU1lZGlhKSB7CiAgICAgIGlmICh0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2xbaWRNb2JpbGVNZWRpYV0udXJsKSB7CiAgICAgICAgaWYgKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbFtpZE1vYmlsZU1lZGlhXS50eXBlICE9PSA1KSB7CiAgICAgICAgICBhd2FpdCBmaXJlYmFzZQogICAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAgIC5yZWYoKQogICAgICAgICAgICAuY2hpbGQodGhpcy5tb2JpbGVNZWRpYXNDb250cm9sW2lkTW9iaWxlTWVkaWFdLnBhdGgpCiAgICAgICAgICAgIC5kZWxldGUoKTsKICAgICAgICB9CiAgICAgICAgYXdhaXQgQXBpKCkuZGVsZXRlKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbFtpZE1vYmlsZU1lZGlhXS51cmwpOwogICAgICB9CiAgICAgIGlmIChpZE1vYmlsZU1lZGlhID09IDApIHsKICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wuc2hpZnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wuc3BsaWNlKGlkTW9iaWxlTWVkaWEsIDEpOwogICAgICB9CiAgICB9LAogICAgYWRkUXVlc3Rpb25hcmlvKCkgewogICAgICBpZiAodGhpcy52aWV3UXVlc3Rpb25zID09PSBmYWxzZSkgewogICAgICAgIHRoaXMudmlld1F1ZXN0aW9ucyA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBkZWxldGVRdWVzdGlvbmFyaW8oKSB7CiAgICAgIGF3YWl0IHRoaXMucXVlc3Rpb25zQ29udHJvbC5mb3JFYWNoKGFzeW5jIChxdWVzdGlvbikgPT4gewogICAgICAgIGlmIChxdWVzdGlvbi51cmwpIHsKICAgICAgICAgIGF3YWl0IEFwaSgpLmRlbGV0ZShxdWVzdGlvbi51cmwpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbCA9IFtdOwogICAgICB0aGlzLnZpZXdRdWVzdGlvbnMgPSBmYWxzZTsKICAgIH0sCiAgICBhZGRRdWVzdGlvbihxdWVzdGlvblR5cGUpIHsKICAgICAgaWYgKHF1ZXN0aW9uVHlwZSA9PT0gMSkgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbC5wdXNoKHsKICAgICAgICAgIHR5cGVRdWVzdGlvbjogcXVlc3Rpb25UeXBlLAogICAgICAgICAgZGVzY3JpcHRpb25RdWVzdGlvbjogbnVsbCwKICAgICAgICAgIGFuc3dlcnNBbHRlcm5hdGl2ZXM6IFtdLAogICAgICAgICAgbW9iaWxlTWVkaWFzOiBbXSwKICAgICAgICAgIHVybDogbnVsbCwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChxdWVzdGlvblR5cGUgPT09IDIpIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICB0eXBlUXVlc3Rpb246IHF1ZXN0aW9uVHlwZSwKICAgICAgICAgIGRlc2NyaXB0aW9uUXVlc3Rpb246IG51bGwsCiAgICAgICAgICBjb3JyZWN0QW5zd2VyOiBudWxsLAogICAgICAgICAgbW9iaWxlTWVkaWFzOiBbXSwKICAgICAgICAgIHVybDogbnVsbCwKICAgICAgICAgIHVybENvcnJlY3RBbnN3ZXI6IG51bGwsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBkZWxldGVRdWVzdGlvbihpZFF1ZXN0aW9uKSB7CiAgICAgIGlmICh0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0udXJsKSB7CiAgICAgICAgYXdhaXQgQXBpKCkuZGVsZXRlKHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS51cmwpOwogICAgICB9CiAgICAgIGlmIChpZFF1ZXN0aW9uID09IDApIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wuc2hpZnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wuc3BsaWNlKGlkUXVlc3Rpb24sIDEpOwogICAgICB9CiAgICB9LAogICAgYWRkTW9iaWxlTWVkaWFRdWVzdGlvbihpZFF1ZXN0aW9uLCBtb2JpbGVNZWRpYVR5cGUpIHsKICAgICAgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMSkgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMucHVzaCh7CiAgICAgICAgICB0eXBlOiBtb2JpbGVNZWRpYVR5cGUsCiAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgcGF0aDogbnVsbCwKICAgICAgICAgIG5hbWVmaWxlOiBudWxsLAogICAgICAgICAgdXJsOiBudWxsLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMikgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMucHVzaCh7CiAgICAgICAgICB0eXBlOiBtb2JpbGVNZWRpYVR5cGUsCiAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgIHVybDogbnVsbCwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChtb2JpbGVNZWRpYVR5cGUgPT09IDMpIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzLnB1c2goewogICAgICAgICAgdHlwZTogbW9iaWxlTWVkaWFUeXBlLAogICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgcGF0aDogbnVsbCwKICAgICAgICAgIG5hbWVmaWxlOiBudWxsLAogICAgICAgICAgdXJsOiBudWxsLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gNCkgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXMucHVzaCh7CiAgICAgICAgICB0eXBlOiBtb2JpbGVNZWRpYVR5cGUgKyAxLAogICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgdXJsOiBudWxsLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZGVsZXRlTW9iaWxlTWVkaWFRdWVzdGlvbihpZFF1ZXN0aW9uLCBpZE1vYmlsZU1lZGlhKSB7CiAgICAgIGlmICh0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzW2lkTW9iaWxlTWVkaWFdLnVybCkgewogICAgICAgIGlmICgKICAgICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXNbaWRNb2JpbGVNZWRpYV0KICAgICAgICAgICAgLnR5cGUgIT09IDUKICAgICAgICApIHsKICAgICAgICAgIGF3YWl0IGZpcmViYXNlCiAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgLnJlZigpCiAgICAgICAgICAgIC5jaGlsZCgKICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzW2lkTW9iaWxlTWVkaWFdCiAgICAgICAgICAgICAgICAucGF0aAogICAgICAgICAgICApCiAgICAgICAgICAgIC5kZWxldGUoKTsKICAgICAgICB9CiAgICAgICAgYXdhaXQgQXBpKCkuZGVsZXRlKAogICAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sW2lkUXVlc3Rpb25dLm1vYmlsZU1lZGlhc1tpZE1vYmlsZU1lZGlhXS51cmwKICAgICAgICApOwogICAgICB9CiAgICAgIGlmIChpZE1vYmlsZU1lZGlhID09IDApIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0ubW9iaWxlTWVkaWFzLnNoaWZ0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sW2lkUXVlc3Rpb25dLm1vYmlsZU1lZGlhcy5zcGxpY2UoCiAgICAgICAgICBpZE1vYmlsZU1lZGlhLAogICAgICAgICAgMQogICAgICAgICk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRBbHRlcm5hdGl2ZShpZFF1ZXN0aW9uKSB7CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzLnB1c2goewogICAgICAgIGlzVHJ1ZTogZmFsc2UsCiAgICAgICAgYW5zd2VyczogbnVsbCwKICAgICAgICB1cmw6IG51bGwsCiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGRlbGV0ZUFsdGVybmF0aXZlKGlkUXVlc3Rpb24sIGlkQWx0ZXJuYXRpdmUpIHsKICAgICAgaWYgKAogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzW2lkQWx0ZXJuYXRpdmVdCiAgICAgICAgICAudXJsCiAgICAgICkgewogICAgICAgIGF3YWl0IEFwaSgpLmRlbGV0ZSgKICAgICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzW2lkQWx0ZXJuYXRpdmVdCiAgICAgICAgICAgIC51cmwKICAgICAgICApOwogICAgICB9CiAgICAgIGlmIChpZEFsdGVybmF0aXZlID09IDApIHsKICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaWRRdWVzdGlvbl0uYW5zd2Vyc0FsdGVybmF0aXZlcy5zaGlmdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpZFF1ZXN0aW9uXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzLnNwbGljZSgKICAgICAgICAgIGlkQWx0ZXJuYXRpdmUsCiAgICAgICAgICAxCiAgICAgICAgKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHZhbGlkYXRlKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICBpZiAodGhpcy52aWV3UXVlc3Rpb25zKSB7CiAgICAgICAgICBpZiAodGhpcy5xdWVzdGlvbnNDb250cm9sLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgICAgICAgdmFyIGF1eCA9IDE7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5xdWVzdGlvbnNDb250cm9sLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgaWYgKGF1eCA9PT0gMSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMucXVlc3Rpb25zQ29udHJvbFtpXS50eXBlUXVlc3Rpb24gPT09IDEpIHsKICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpXS5hbnN3ZXJzQWx0ZXJuYXRpdmVzLmxlbmd0aCA9PT0gMAogICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICB2bS5xdWVzdGlvbkFqdXN0ID0gaSArIDE7CiAgICAgICAgICAgICAgICAgICAgdm0uZGlhbG9nX2FsZXJ0MyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYXV4ID0gMDsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICAgIHZhciBqID0gMDsKICAgICAgICAgICAgICAgICAgICBqIDwgdGhpcy5xdWVzdGlvbnNDb250cm9sW2ldLmFuc3dlcnNBbHRlcm5hdGl2ZXMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIGorKwogICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2xbaV0uYW5zd2Vyc0FsdGVybmF0aXZlc1tqXS5pc1RydWUKICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICBqID09PQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sW2ldLmFuc3dlcnNBbHRlcm5hdGl2ZXMubGVuZ3RoIC0gMQogICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgdm0ucXVlc3Rpb25BanVzdCA9IGkgKyAxOwogICAgICAgICAgICAgICAgICAgICAgdm0uZGlhbG9nX2FsZXJ0MiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICBhdXggPSAwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGF1eCA9PT0gMSkgewogICAgICAgICAgICAgIHZhciBhdXhOdW1iZXJRdWVzdGlvbnMgPSB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wubGVuZ3RoOwogICAgICAgICAgICAgIGF3YWl0IHRoaXMucG9zdFF1ZXN0aW9ucygpOwogICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVzZXRWYXJpYWJsZXMoKTsKICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uc0NvbnRyb2wgPSBbXTsKICAgICAgICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wgPSBbXTsKICAgICAgICAgICAgICBhd2FpdCB0aGlzLiRlbWl0KCJpbnN0cnVjY2xvc2UiLCBhdXhOdW1iZXJRdWVzdGlvbnMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmRpYWxvZ19hbGVydCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF3YWl0IHRoaXMucG9zdFF1ZXN0aW9ucygpOwogICAgICAgICAgYXdhaXQgdGhpcy5yZXNldFZhcmlhYmxlcygpOwogICAgICAgICAgYXdhaXQgdGhpcy4kZW1pdCgiaW5zdHJ1Y2Nsb3NlIik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVzZXRWYXJpYWJsZXMoKSB7CiAgICAgIHRoaXMuaSA9IDA7CiAgICAgIHRoaXMuYXV4R2V0U3JjID0gW107CiAgICAgIHRoaXMuYXV4R2V0U3JjUXVlc3Rpb25zID0gW107CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbCA9IFtdOwogICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wgPSBbXTsKICAgICAgdGhpcy5jb2xhYm9yYXRpdmVOYW1lID0gIiI7CiAgICAgIHRoaXMubWVtYmVyQW1vdW50ID0gIiI7CiAgICAgIHRoaXMuY29sYWJvcmF0aXZlRGVzY3JpcHRpb24gPSAiIjsKICAgICAgdGhpcy52aWV3UXVlc3Rpb25zID0gZmFsc2U7CiAgICB9LAogICAgYXN5bmMgcmVzZXQoKSB7CiAgICAgIGF3YWl0IHRoaXMuJGVtaXQoImluc3RydWNjbG9zZSIpOwogICAgICBhd2FpdCB0aGlzLnJlc2V0VmFyaWFibGVzKCk7CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbCA9IFtdOwogICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wgPSBbXTsKICAgICAgYXdhaXQgdGhpcy4kcmVmcy5mb3JtLnJlc2V0KCk7CiAgICB9LAogICAgYXR1YWxpemFPYmooZmlsZSwgaW5kZXhNb2JpbGUpIHsKICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sW2luZGV4TW9iaWxlXS5vYmplY3QgPSBmaWxlOwogICAgfSwKICAgIGF0dWFsaXphTWV0YSgpIHsKICAgICAgaWYgKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sLmZvckVhY2goKG1vYmlsZW1lZGlhKSA9PiB7CiAgICAgICAgICBpZiAobW9iaWxlbWVkaWEub2JqZWN0ICYmICFtb2JpbGVtZWRpYS51cmwpIHsKICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgaW1nLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwobW9iaWxlbWVkaWEub2JqZWN0KTsKICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uID0gaW1nLndpZHRoICsgIlgiICsgaW1nLmhlaWdodDsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICB2YXIgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ2aWRlbyIpOwogICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzb3VyY2UiKTsKICAgICAgICAgICAgICBzb3VyY2Uuc2V0QXR0cmlidXRlKAogICAgICAgICAgICAgICAgInNyYyIsCiAgICAgICAgICAgICAgICBVUkwuY3JlYXRlT2JqZWN0VVJMKG1vYmlsZW1lZGlhLm9iamVjdCkKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHZpZGVvLmFwcGVuZENoaWxkKHNvdXJjZSk7CiAgICAgICAgICAgICAgdmlkZW8ub25jYW5wbGF5ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uID0KICAgICAgICAgICAgICAgICAgdmlkZW8udmlkZW9XaWR0aCArICJYIiArIHZpZGVvLnZpZGVvSGVpZ2h0OwogICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudGltZSA9IHZpZGVvLmR1cmF0aW9uOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGdldFNyY0ltYWdlKGluZGV4TW9iaWxlLCBwYXRoLCBuYW1lZmlsZSkgewogICAgICAvKnZhciBvYmogPSB7fTsqLwogICAgICBpZiAocGF0aCkgewogICAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgICAgYXdhaXQgZmlyZWJhc2UKICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgIC5yZWYocGF0aCkKICAgICAgICAgIC5nZXREb3dubG9hZFVSTCgpCiAgICAgICAgICAudGhlbihmdW5jdGlvbih1cmwpIHsKICAgICAgICAgICAgLyp2bS52aWV3SW1hZ2VTcmMgPSB1cmw7Ki8KICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gImJsb2IiOwogICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgdmFyIGJsb2IgPSB4aHIucmVzcG9uc2U7CiAgICAgICAgICAgICAgdmFyIGZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIG5hbWVmaWxlLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBibG9iLnR5cGUsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gdm0uYXV4R2V0U3JjLnB1c2goZmlsZSk7CiAgICAgICAgICAgICAgdm0uYXR1YWxpemFPYmooZmlsZSwgaW5kZXhNb2JpbGUpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB4aHIub3BlbigiR0VUIiwgdXJsKTsKICAgICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ2V0U3JjVmlkZW8oaW5kZXhNb2JpbGUsIHBhdGgsIG5hbWVmaWxlKSB7CiAgICAgIC8qdmFyIG9iaiA9IHt9OyovCiAgICAgIGlmIChwYXRoKSB7CiAgICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgICBhd2FpdCBmaXJlYmFzZQogICAgICAgICAgLnN0b3JhZ2UoKQogICAgICAgICAgLnJlZihwYXRoKQogICAgICAgICAgLmdldERvd25sb2FkVVJMKCkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHVybCkgewogICAgICAgICAgICAvKnZtLnZpZXdWaWRlb1NyYyA9IHVybDsqLwogICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAiYmxvYiI7CiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB2YXIgYmxvYiA9IHhoci5yZXNwb25zZTsKICAgICAgICAgICAgICB2YXIgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgbmFtZWZpbGUsIHsKICAgICAgICAgICAgICAgIHR5cGU6IGJsb2IudHlwZSwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAvLyB2bS5hdXhHZXRTcmMucHVzaChmaWxlKTsKICAgICAgICAgICAgICB2bS5hdHVhbGl6YU9iaihmaWxlLCBpbmRleE1vYmlsZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHhoci5vcGVuKCJHRVQiLCB1cmwpOwogICAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXRTcmNBdWRpbyhpbmRleE1vYmlsZSwgcGF0aCwgbmFtZWZpbGUpIHsKICAgICAgLyp2YXIgb2JqID0ge307Ki8KICAgICAgaWYgKHBhdGgpIHsKICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgIGF3YWl0IGZpcmViYXNlCiAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAucmVmKHBhdGgpCiAgICAgICAgICAuZ2V0RG93bmxvYWRVUkwoKQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24odXJsKSB7CiAgICAgICAgICAgIC8qdm0udmlld0F1ZGlvU3JjID0gdXJsOyovCiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICJibG9iIjsKICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBibG9iID0geGhyLnJlc3BvbnNlOwogICAgICAgICAgICAgIHZhciBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBuYW1lZmlsZSwgewogICAgICAgICAgICAgICAgdHlwZTogYmxvYi50eXBlLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIC8vIHZtLmF1eEdldFNyYy5wdXNoKGZpbGUpOwogICAgICAgICAgICAgIHZtLmF0dWFsaXphT2JqKGZpbGUsIGluZGV4TW9iaWxlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgeGhyLm9wZW4oIkdFVCIsIHVybCk7CiAgICAgICAgICAgIHhoci5zZW5kKCk7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGF0dWFsaXphTWV0YVF1ZXN0aW9ucygpIHsKICAgICAgaWYgKHRoaXMucXVlc3Rpb25zQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5xdWVzdGlvbnNDb250cm9sLmZvckVhY2goKHF1ZXN0aW9uKSA9PiB7CiAgICAgICAgICBpZiAocXVlc3Rpb24ubW9iaWxlTWVkaWFzKSB7CiAgICAgICAgICAgIHF1ZXN0aW9uLm1vYmlsZU1lZGlhcy5mb3JFYWNoKChtb2JpbGVtZWRpYSkgPT4gewogICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS5vYmplY3QgJiYgIW1vYmlsZW1lZGlhLnVybCkgewogICAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICAgICAgICBpbWcuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChtb2JpbGVtZWRpYS5vYmplY3QpOwogICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEucmVzb2x1dGlvbiA9IGltZy53aWR0aCArICJYIiArIGltZy5oZWlnaHQ7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidmlkZW8iKTsKICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNvdXJjZSIpOwogICAgICAgICAgICAgICAgICBzb3VyY2Uuc2V0QXR0cmlidXRlKAogICAgICAgICAgICAgICAgICAgICJzcmMiLAogICAgICAgICAgICAgICAgICAgIFVSTC5jcmVhdGVPYmplY3RVUkwobW9iaWxlbWVkaWEub2JqZWN0KQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB2aWRlby5hcHBlbmRDaGlsZChzb3VyY2UpOwogICAgICAgICAgICAgICAgICB2aWRlby5vbmNhbnBsYXkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uID0KICAgICAgICAgICAgICAgICAgICAgIHZpZGVvLnZpZGVvV2lkdGggKyAiWCIgKyB2aWRlby52aWRlb0hlaWdodDsKICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS50aW1lID0gdmlkZW8uZHVyYXRpb247CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGF0dWFsaXphT2JqUXVlc3Rpb25zKGZpbGUsIGluZGV4UXVlc3Rpb24sIGluZGV4TW9iaWxlKSB7CiAgICAgIHRoaXMucXVlc3Rpb25zQ29udHJvbFtpbmRleFF1ZXN0aW9uXS5tb2JpbGVNZWRpYXNbCiAgICAgICAgaW5kZXhNb2JpbGUKICAgICAgXS5vYmplY3QgPSBmaWxlOwogICAgfSwKICAgIGFzeW5jIGdldFNyY0ltYWdlUXVlc3Rpb25zKGluZGV4UXVlc3Rpb24sIGluZGV4TW9iaWxlLCBwYXRoLCBuYW1lZmlsZSkgewogICAgICAvKnZhciBvYmogPSB7fTsqLwogICAgICBpZiAocGF0aCkgewogICAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgICAgYXdhaXQgZmlyZWJhc2UKICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgIC5yZWYocGF0aCkKICAgICAgICAgIC5nZXREb3dubG9hZFVSTCgpCiAgICAgICAgICAudGhlbihmdW5jdGlvbih1cmwpIHsKICAgICAgICAgICAgLyp2bS52aWV3SW1hZ2VTcmMgPSB1cmw7Ki8KICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gImJsb2IiOwogICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgdmFyIGJsb2IgPSB4aHIucmVzcG9uc2U7CiAgICAgICAgICAgICAgdmFyIGZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIG5hbWVmaWxlLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBibG9iLnR5cGUsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLyp2bS5hdXhHZXRTcmNRdWVzdGlvbnMucHVzaChmaWxlKTsqLwogICAgICAgICAgICAgIHZtLmF0dWFsaXphT2JqUXVlc3Rpb25zKGZpbGUsIGluZGV4UXVlc3Rpb24sIGluZGV4TW9iaWxlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgeGhyLm9wZW4oIkdFVCIsIHVybCk7CiAgICAgICAgICAgIHhoci5zZW5kKCk7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGdldFNyY1ZpZGVvUXVlc3Rpb25zKGluZGV4UXVlc3Rpb24sIGluZGV4TW9iaWxlLCBwYXRoLCBuYW1lZmlsZSkgewogICAgICAvKnZhciBvYmogPSB7fTsqLwogICAgICBpZiAocGF0aCkgewogICAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgICAgYXdhaXQgZmlyZWJhc2UKICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgIC5yZWYocGF0aCkKICAgICAgICAgIC5nZXREb3dubG9hZFVSTCgpCiAgICAgICAgICAudGhlbihmdW5jdGlvbih1cmwpIHsKICAgICAgICAgICAgLyp2bS52aWV3VmlkZW9TcmMgPSB1cmw7Ki8KICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gImJsb2IiOwogICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgdmFyIGJsb2IgPSB4aHIucmVzcG9uc2U7CiAgICAgICAgICAgICAgdmFyIGZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIG5hbWVmaWxlLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBibG9iLnR5cGUsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgLy8gdm0uYXV4R2V0U3JjUXVlc3Rpb25zLnB1c2goZmlsZSk7CiAgICAgICAgICAgICAgdm0uYXR1YWxpemFPYmpRdWVzdGlvbnMoZmlsZSwgaW5kZXhRdWVzdGlvbiwgaW5kZXhNb2JpbGUpOwogICAgICAgICAgICB9OwogICAgICAgICAgICB4aHIub3BlbigiR0VUIiwgdXJsKTsKICAgICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ2V0U3JjQXVkaW9RdWVzdGlvbnMoaW5kZXhRdWVzdGlvbiwgaW5kZXhNb2JpbGUsIHBhdGgsIG5hbWVmaWxlKSB7CiAgICAgIC8qdmFyIG9iaiA9IHt9OyovCiAgICAgIGlmIChwYXRoKSB7CiAgICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgICBhd2FpdCBmaXJlYmFzZQogICAgICAgICAgLnN0b3JhZ2UoKQogICAgICAgICAgLnJlZihwYXRoKQogICAgICAgICAgLmdldERvd25sb2FkVVJMKCkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHVybCkgewogICAgICAgICAgICAvKnZtLnZpZXdBdWRpb1NyYyA9IHVybDsqLwogICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAiYmxvYiI7CiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB2YXIgYmxvYiA9IHhoci5yZXNwb25zZTsKICAgICAgICAgICAgICB2YXIgZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgbmFtZWZpbGUsIHsKICAgICAgICAgICAgICAgIHR5cGU6IGJsb2IudHlwZSwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAvLyB2bS5hdXhHZXRTcmNRdWVzdGlvbnMucHVzaChmaWxlKTsKICAgICAgICAgICAgICB2bS5hdHVhbGl6YU9ialF1ZXN0aW9ucyhmaWxlLCBpbmRleFF1ZXN0aW9uLCBpbmRleE1vYmlsZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHhoci5vcGVuKCJHRVQiLCB1cmwpOwogICAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICByZXNldFZhbGlkYXRpb24oKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["AtividadeColaborativaDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0lBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AtividadeColaborativaDialog.vue","sourceRoot":"src/components/instructional_model","sourcesContent":["<template>\r\n  <v-container class=\"pa-0\">\r\n    <v-card>\r\n      <v-card-title style=\"background-color:#63B0B0; color:white;\">\r\n        <v-col cols=\"8\">\r\n          <span class=\"headline\">\r\n            <p>Descreva a atividade colaborativa a ser criada.</p>\r\n          </span>\r\n        </v-col>\r\n        <v-spacer></v-spacer>\r\n        <v-col cols=\"4\" class=\"pl-11\" style=\"margin-right: -16px;\">\r\n          <v-btn color=\"red\" dark large @click=\"reset()\" class=\"ml-2 mb-3\">\r\n            Cancelar\r\n            <v-icon dark right>mdi-close</v-icon>\r\n          </v-btn>\r\n          <v-btn\r\n            color=\"success\"\r\n            dark\r\n            large\r\n            @click=\"validate()\"\r\n            class=\"ml-2 mb-3\"\r\n          >\r\n            Salvar\r\n            <v-icon dark right>mdi-content-save</v-icon>\r\n          </v-btn>\r\n        </v-col>\r\n      </v-card-title>\r\n      <v-card-text>\r\n        <v-form ref=\"form\" v-model=\"valid\" lazy-validation class=\"mt-3\">\r\n          <label\r\n            class=\"pt-2\"\r\n            style=\"font-size:1.3em;\"\r\n            for=\"colaborativeNameArea\"\r\n          >\r\n            <strong>Identificador da atividade:</strong>\r\n          </label>\r\n          <v-text-field\r\n            id=\"colaborativeNameArea\"\r\n            v-model=\"colaborativeName\"\r\n            :counter=\"100\"\r\n            :rules=\"colaborativeNameRules\"\r\n            required\r\n            class=\"mt-2 mb-4\"\r\n          ></v-text-field>\r\n          <label\r\n            class=\"pt-2\"\r\n            style=\"font-size:1.3em;\"\r\n            for=\"colaborativeDescriptionArea\"\r\n          >\r\n            <strong>Escreva a descrição da atividade:</strong>\r\n          </label>\r\n          <v-textarea\r\n            id=\"colaborativeDescriptionArea\"\r\n            v-model=\"colaborativeDescription\"\r\n            :rules=\"colaborativeDescriptionRules\"\r\n            background-color=\"#F2F3F3\"\r\n            clearable\r\n            clear-icon=\"mdi-close-circle\"\r\n            class=\"mt-2\"\r\n            name=\"input-4-1\"\r\n            rows=\"8\"\r\n            filled\r\n            auto-grow\r\n            required\r\n          ></v-textarea>\r\n          <p class=\"pt-2\" style=\"font-size:1.3em;\">\r\n            <strong>Número de alunos para realização da atividade:</strong>\r\n            <v-text-field\r\n              style=\"width: 15%;\"\r\n              id=\"memberAmountArea\"\r\n              type=\"number\"\r\n              v-model=\"memberAmount\"\r\n              :rules=\"memberAmountRules\"\r\n              required\r\n              class=\"mt-2 mb-4\"\r\n            ></v-text-field>\r\n          </p>\r\n\r\n          <v-row style=\"margin-top: -20px;\" class=\"mb-2\">\r\n            <v-col cols=\"4\"></v-col>\r\n            <v-col>\r\n              <v-menu\r\n                top=\"top\"\r\n                width=\"300px\"\r\n                origin=\"center center\"\r\n                :offset-y=\"true\"\r\n                transition=\"scale-transition\"\r\n              >\r\n                <template v-slot:activator=\"{ on }\">\r\n                  <v-btn\r\n                    v-on=\"on\"\r\n                    large\r\n                    color=\"primary\"\r\n                    style=\"color:white; font-size: 1.2em;\"\r\n                  >\r\n                    <strong>Adicionar MobileMedia</strong>\r\n                    <v-icon class=\"ml-2\" large color=\"white\"\r\n                      >mdi-plus-box</v-icon\r\n                    >\r\n                  </v-btn>\r\n                </template>\r\n\r\n                <v-list>\r\n                  <v-list-item\r\n                    v-for=\"(item, i) in itemsMobileMedia\"\r\n                    :key=\"i\"\r\n                    @click=\"addMobileMedia(i + 1)\"\r\n                  >\r\n                    <v-icon x-large color=\"blue\">{{ item.icon }}</v-icon>\r\n                    <v-list-item-title\r\n                      style=\"font-size: 1.2em; color:#2196F3;\"\r\n                      class=\"ml-1\"\r\n                    >\r\n                      <strong>{{ item.name }}</strong>\r\n                    </v-list-item-title>\r\n                  </v-list-item>\r\n                </v-list>\r\n              </v-menu>\r\n\r\n              <v-btn\r\n                color=\"primary\"\r\n                class=\"ml-2\"\r\n                large\r\n                style=\"color:white; font-size: 1.2em;\"\r\n                @click=\"addQuestionario()\"\r\n              >\r\n                <strong>Adicionar Questões</strong>\r\n                <v-icon class=\"ml-2\" large color=\"white\">mdi-plus-box</v-icon>\r\n              </v-btn>\r\n            </v-col>\r\n          </v-row>\r\n\r\n          <div v-if=\"mobileMediasControl.length > 0\">\r\n            <label\r\n              class=\"mb-6 pt-2\"\r\n              style=\"font-size:1.3em;\"\r\n              for=\"colaborativeNameArea\"\r\n            >\r\n              <strong>MobileMedias da atividade:</strong>\r\n            </label>\r\n            <div class=\"mt-8\"></div>\r\n            <div v-for=\"(mobilemedia, i) in mobileMediasControl\" :key=\"i\">\r\n              <v-row v-if=\"mobilemedia.type === 1\">\r\n                <v-spacer></v-spacer>\r\n                <v-file-input\r\n                  style=\"width: 165px;\"\r\n                  label=\"UPLOAD IMAGE\"\r\n                  filled\r\n                  @change=\"atualizaMeta\"\r\n                  v-model=\"mobilemedia.object\"\r\n                  accept=\"image/*\"\r\n                  prepend-icon=\"mdi-camera\"\r\n                ></v-file-input>\r\n                <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\r\n                  <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\"\r\n                    >mdi-minus-box</v-icon\r\n                  >\r\n                </v-btn>\r\n                <v-spacer></v-spacer>\r\n              </v-row>\r\n              <v-row v-if=\"mobilemedia.type === 2\">\r\n                <v-spacer></v-spacer>\r\n                <v-file-input\r\n                  style=\"width: 165px;\"\r\n                  label=\"UPLOAD VIDEO\"\r\n                  filled\r\n                  @change=\"atualizaMeta\"\r\n                  v-model=\"mobilemedia.object\"\r\n                  accept=\"video/*\"\r\n                  prepend-icon=\"mdi-video\"\r\n                ></v-file-input>\r\n                <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\r\n                  <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\"\r\n                    >mdi-minus-box</v-icon\r\n                  >\r\n                </v-btn>\r\n                <v-spacer></v-spacer>\r\n              </v-row>\r\n              <v-row v-if=\"mobilemedia.type === 3\">\r\n                <v-spacer></v-spacer>\r\n                <v-file-input\r\n                  style=\"width: 165px;\"\r\n                  label=\"UPLOAD AUDIO\"\r\n                  filled\r\n                  v-model=\"mobilemedia.object\"\r\n                  accept=\"audio/*\"\r\n                  prepend-icon=\"mdi-file-music\"\r\n                ></v-file-input>\r\n                <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\r\n                  <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\"\r\n                    >mdi-minus-box</v-icon\r\n                  >\r\n                </v-btn>\r\n                <v-spacer></v-spacer>\r\n              </v-row>\r\n              <v-row v-if=\"mobilemedia.type === 5\" class=\"mb-2\">\r\n                <v-spacer></v-spacer>\r\n                <v-text-field\r\n                  v-model=\"mobilemedia.object\"\r\n                  :rules=\"linkUrlRules\"\r\n                  label=\"Url\"\r\n                  required\r\n                ></v-text-field>\r\n                <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\r\n                  <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\"\r\n                    >mdi-minus-box</v-icon\r\n                  >\r\n                </v-btn>\r\n                <v-spacer></v-spacer>\r\n              </v-row>\r\n            </div>\r\n          </div>\r\n          <div v-if=\"viewQuestions\">\r\n            <v-app-bar color=\"#D2A64D\" dense dark height=\"45px\" class=\"mt-4\">\r\n              <v-col cols=\"7\">\r\n                <v-toolbar-title style=\"font-size:1.2em;\">\r\n                  <strong>Lista de questões da atividade</strong>\r\n                </v-toolbar-title>\r\n              </v-col>\r\n              <v-col class=\"ml-8\">\r\n                <v-menu\r\n                  top=\"top\"\r\n                  width=\"300px\"\r\n                  origin=\"center center\"\r\n                  :offset-y=\"true\"\r\n                  transition=\"scale-transition\"\r\n                >\r\n                  <template v-slot:activator=\"{ on }\">\r\n                    <v-btn\r\n                      v-on=\"on\"\r\n                      color=\"white\"\r\n                      style=\"color:black; font-size: 1.2em;\"\r\n                    >\r\n                      <strong>Adicionar Questão</strong>\r\n                      <v-icon class=\"ml-2\" large color=\"black\"\r\n                        >mdi-plus-box</v-icon\r\n                      >\r\n                    </v-btn>\r\n                  </template>\r\n\r\n                  <v-list>\r\n                    <v-list-item @click=\"addQuestion(1)\">\r\n                      <v-list-item-title>Questão Objetiva</v-list-item-title>\r\n                    </v-list-item>\r\n                    <v-list-item @click=\"addQuestion(2)\">\r\n                      <v-list-item-title>Questão Discussiva</v-list-item-title>\r\n                    </v-list-item>\r\n                  </v-list>\r\n                </v-menu>\r\n              </v-col>\r\n              <v-col cols=\"2\">\r\n                <v-btn icon=\"icon\">\r\n                  <v-icon\r\n                    x-large\r\n                    color=\"red\"\r\n                    @click=\"deleteQuestionario()\"\r\n                    style=\"background-color:white;\"\r\n                    >mdi-close-box</v-icon\r\n                  >\r\n                </v-btn>\r\n              </v-col>\r\n            </v-app-bar>\r\n            <v-container>\r\n              <v-row v-for=\"(item, i) in questionsControl\" :key=\"i\">\r\n                <v-col\r\n                  cols=\"10\"\r\n                  style=\"background-color:grey;color:white;\"\r\n                  class=\"mt-5\"\r\n                >\r\n                  <h3>Questão {{ i + 1 }}</h3>\r\n                </v-col>\r\n                <v-col cols=\"2\" style=\"paddin-left:-20px; margin-left:-30px;\">\r\n                  <v-menu\r\n                    top=\"top\"\r\n                    width=\"300px\"\r\n                    origin=\"center center\"\r\n                    :offset-y=\"true\"\r\n                    transition=\"scale-transition\"\r\n                  >\r\n                    <template v-slot:activator=\"{ on }\">\r\n                      <v-btn icon v-on=\"on\" class=\"ml-11\">\r\n                        <v-icon class=\"mt-6\" x-large color=\"primary\"\r\n                          >mdi-plus-box</v-icon\r\n                        >\r\n                      </v-btn>\r\n                    </template>\r\n\r\n                    <v-list>\r\n                      <v-list-item\r\n                        v-for=\"(itemType, idItemType) in itemsMobileMedia\"\r\n                        :key=\"idItemType\"\r\n                        @click=\"addMobileMediaQuestion(i, idItemType + 1)\"\r\n                      >\r\n                        <v-icon x-large color=\"blue\">{{\r\n                          itemType.icon\r\n                        }}</v-icon>\r\n                        <v-list-item-title\r\n                          style=\"font-size: 1.2em; color:#2196F3;\"\r\n                          class=\"ml-1\"\r\n                        >\r\n                          <strong>{{ itemType.name }}</strong>\r\n                        </v-list-item-title>\r\n                      </v-list-item>\r\n                    </v-list>\r\n                  </v-menu>\r\n                  <v-btn icon @click=\"deleteQuestion(i)\" class=\"ml-4\">\r\n                    <v-icon class=\"mt-6\" x-large color=\"red\"\r\n                      >mdi-close-box</v-icon\r\n                    >\r\n                  </v-btn>\r\n                </v-col>\r\n                <v-row>\r\n                  <v-col cols>\r\n                    <v-text-field\r\n                      v-model=\"questionsControl[i].descriptionQuestion\"\r\n                      label=\"Descrição da questão\"\r\n                      required\r\n                    ></v-text-field>\r\n                  </v-col>\r\n                  <v-col cols=\"3\" class=\"mt-3\" v-if=\"item.typeQuestion === 1\">\r\n                    <v-btn\r\n                      color=\"primary\"\r\n                      style=\"color:white;\"\r\n                      @click=\"addAlternative(i)\"\r\n                      >Adicionar Alternativa</v-btn\r\n                    >\r\n                  </v-col>\r\n                </v-row>\r\n\r\n                <div\r\n                  v-if=\"questionsControl[i].mobileMedias.length > 0\"\r\n                  style=\"display: block; width: 100%; margin-top:-20px;\"\r\n                >\r\n                  <v-col cols=\"12\">\r\n                    <div\r\n                      v-for=\"(mobilemedia, idmobile) in questionsControl[i]\r\n                        .mobileMedias\"\r\n                      :key=\"idmobile\"\r\n                    >\r\n                      <v-row v-if=\"mobilemedia.type === 1\">\r\n                        <v-spacer></v-spacer>\r\n                        <v-file-input\r\n                          style=\"width: 165px;\"\r\n                          label=\"UPLOAD IMAGE\"\r\n                          filled\r\n                          @change=\"atualizaMetaQuestions\"\r\n                          v-model=\"mobilemedia.object\"\r\n                          accept=\"image/*\"\r\n                          prepend-icon=\"mdi-camera\"\r\n                        ></v-file-input>\r\n                        <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\r\n                          <v-icon\r\n                            x-large\r\n                            color=\"red\"\r\n                            @click=\"deleteMobileMediaQuestion(i, idmobile)\"\r\n                            >mdi-minus-box</v-icon\r\n                          >\r\n                        </v-btn>\r\n                        <v-spacer></v-spacer>\r\n                      </v-row>\r\n                      <v-row v-if=\"mobilemedia.type === 2\">\r\n                        <v-spacer></v-spacer>\r\n                        <v-file-input\r\n                          style=\"width: 165px;\"\r\n                          label=\"UPLOAD VIDEO\"\r\n                          filled\r\n                          @change=\"atualizaMetaQuestions\"\r\n                          v-model=\"mobilemedia.object\"\r\n                          accept=\"video/*\"\r\n                          prepend-icon=\"mdi-video\"\r\n                        ></v-file-input>\r\n                        <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\r\n                          <v-icon\r\n                            x-large\r\n                            color=\"red\"\r\n                            @click=\"deleteMobileMediaQuestion(i, idmobile)\"\r\n                            >mdi-minus-box</v-icon\r\n                          >\r\n                        </v-btn>\r\n                        <v-spacer></v-spacer>\r\n                      </v-row>\r\n                      <v-row v-if=\"mobilemedia.type === 3\">\r\n                        <v-spacer></v-spacer>\r\n                        <v-file-input\r\n                          style=\"width: 165px;\"\r\n                          label=\"UPLOAD AUDIO\"\r\n                          filled\r\n                          v-model=\"mobilemedia.object\"\r\n                          accept=\"audio/*\"\r\n                          prepend-icon=\"mdi-file-music\"\r\n                        ></v-file-input>\r\n                        <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\r\n                          <v-icon\r\n                            x-large\r\n                            color=\"red\"\r\n                            @click=\"deleteMobileMediaQuestion(i, idmobile)\"\r\n                            >mdi-minus-box</v-icon\r\n                          >\r\n                        </v-btn>\r\n                        <v-spacer></v-spacer>\r\n                      </v-row>\r\n                      <v-row v-if=\"mobilemedia.type === 5\" class=\"mb-2\">\r\n                        <v-spacer></v-spacer>\r\n                        <v-text-field\r\n                          v-model=\"mobilemedia.object\"\r\n                          :rules=\"linkUrlRules\"\r\n                          label=\"Url\"\r\n                          required\r\n                        ></v-text-field>\r\n                        <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\r\n                          <v-icon\r\n                            x-large\r\n                            color=\"red\"\r\n                            @click=\"deleteMobileMediaQuestion(i, idmobile)\"\r\n                            >mdi-minus-box</v-icon\r\n                          >\r\n                        </v-btn>\r\n                        <v-spacer></v-spacer>\r\n                      </v-row>\r\n                    </div>\r\n                  </v-col>\r\n                </div>\r\n\r\n                <div\r\n                  v-if=\"item.typeQuestion === 1\"\r\n                  style=\"display: block; width: 100%; margin-top:-20px;\"\r\n                >\r\n                  <p style=\"color:#f43e00; margin-bottom: -10px;\">\r\n                    <strong>*AVISO:</strong> Marque o checkbox da alternativa\r\n                    caso ela esteja correta.\r\n                  </p>\r\n                  <div\r\n                    style=\"display: flex; margin-bottom:-30px;\"\r\n                    v-for=\"(itemAlternative,\r\n                    indexAlternative) in questionsControl[i]\r\n                      .answersAlternatives\"\r\n                    :key=\"indexAlternative\"\r\n                  >\r\n                    <v-col\r\n                      cols=\"1\"\r\n                      class=\"mt-5\"\r\n                      style=\" margin-right: -40px;font-size:1.3em;\"\r\n                    >\r\n                      <strong>{{ idObjAnswerItems[indexAlternative] }})</strong>\r\n                    </v-col>\r\n                    <v-col cols=\"7\">\r\n                      <v-text-field\r\n                        v-model=\"\r\n                          questionsControl[i].answersAlternatives[\r\n                            indexAlternative\r\n                          ].answers\r\n                        \"\r\n                        label=\"Descrição da alternativa\"\r\n                        :rules=\"alternativeDescriptionRules\"\r\n                        required\r\n                      ></v-text-field>\r\n                    </v-col>\r\n                    <v-col cols=\"1\" style=\"margin-right:-40px;\">\r\n                      <v-checkbox\r\n                        v-model=\"\r\n                          questionsControl[i].answersAlternatives[\r\n                            indexAlternative\r\n                          ].isTrue\r\n                        \"\r\n                      ></v-checkbox>\r\n                    </v-col>\r\n                    <v-col cols=\"1\">\r\n                      <v-btn\r\n                        icon=\"icon\"\r\n                        @click=\"deleteAlternative(i, indexAlternative)\"\r\n                      >\r\n                        <v-icon large class=\"mt-7\" color=\"red\"\r\n                          >mdi-minus-box</v-icon\r\n                        >\r\n                      </v-btn>\r\n                    </v-col>\r\n                  </div>\r\n                </div>\r\n                <div\r\n                  v-else-if=\"item.typeQuestion === 2\"\r\n                  style=\"display: block; width: 100%; margin-top:-20px;\"\r\n                >\r\n                  <v-col cols=\"12\">\r\n                    <v-textarea\r\n                      v-model=\"questionsControl[i].correctAnswer\"\r\n                      background-color=\"#F2F3F3\"\r\n                      clearable\r\n                      clear-icon=\"mdi-close-circle\"\r\n                      class=\"mt-2\"\r\n                      name=\"input-3-1\"\r\n                      label=\"Resposta da questão\"\r\n                      filled\r\n                      auto-grow\r\n                      required\r\n                    ></v-textarea>\r\n                  </v-col>\r\n                </div>\r\n              </v-row>\r\n            </v-container>\r\n          </div>\r\n        </v-form>\r\n      </v-card-text>\r\n      <v-card-actions>\r\n        <v-spacer></v-spacer>\r\n        <v-menu\r\n          v-if=\"questionsControl.length > 0\"\r\n          top=\"top\"\r\n          width=\"300px\"\r\n          origin=\"center center\"\r\n          :offset-y=\"true\"\r\n          transition=\"scale-transition\"\r\n        >\r\n          <template v-slot:activator=\"{ on }\">\r\n            <v-btn v-on=\"on\" color=\"primary\" height=\"49\">\r\n              <strong>Adicionar Questão</strong>\r\n              <v-icon class=\"ml-2\" large color=\"white\">mdi-plus-box</v-icon>\r\n            </v-btn>\r\n          </template>\r\n\r\n          <v-list>\r\n            <v-list-item @click=\"addQuestion(1)\">\r\n              <v-list-item-title>Questão Objetiva</v-list-item-title>\r\n            </v-list-item>\r\n            <v-list-item @click=\"addQuestion(2)\">\r\n              <v-list-item-title>Questão Discussiva</v-list-item-title>\r\n            </v-list-item>\r\n          </v-list>\r\n        </v-menu>\r\n        <v-btn color=\"red\" height=\"49\" dark large @click=\"reset()\">\r\n          Cancelar\r\n          <v-icon dark right>mdi-close</v-icon>\r\n        </v-btn>\r\n        <v-btn color=\"success\" height=\"49\" dark large @click=\"validate()\">\r\n          Salvar\r\n          <v-icon dark right>mdi-content-save</v-icon>\r\n        </v-btn>\r\n      </v-card-actions>\r\n    </v-card>\r\n    <div class=\"text-center\">\r\n      <v-dialog v-model=\"dialog_alert\" width=\"500\">\r\n        <v-card>\r\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\"\r\n            >ALERTA!</v-card-title\r\n          >\r\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\"\r\n            >Para salvar um questionário, é necessário criar pelo uma\r\n            questão.</v-card-text\r\n          >\r\n          <v-divider></v-divider>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"primary\" text @click=\"dialog_alert = false\">Ok</v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n    </div>\r\n    <div class=\"text-center\">\r\n      <v-dialog v-model=\"dialog_alert2\" width=\"500\">\r\n        <v-card>\r\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\"\r\n            >ALERTA!</v-card-title\r\n          >\r\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\">\r\n            Questões objetivas necessitam de pelo menos uma alternativa correta.\r\n            <br />\r\n            Ajuste a questão {{ questionAjust }}.\r\n          </v-card-text>\r\n          <v-divider></v-divider>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"primary\" text @click=\"dialog_alert2 = false\"\r\n              >Ok</v-btn\r\n            >\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n    </div>\r\n    <div class=\"text-center\">\r\n      <v-dialog v-model=\"dialog_alert3\" width=\"500\">\r\n        <v-card>\r\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\"\r\n            >ALERTA!</v-card-title\r\n          >\r\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\">\r\n            Questões objetivas necessitam de pelo menos uma alternativa.\r\n            <br />\r\n            Ajuste a questão {{ questionAjust }}.\r\n          </v-card-text>\r\n          <v-divider></v-divider>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"primary\" text @click=\"dialog_alert3 = false\"\r\n              >Ok</v-btn\r\n            >\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n    </div>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\n  import Api from \"@/services/Api\";\r\n  import * as firebase from \"firebase\";\r\n  export default {\r\n    name: \"AtividadeColaborativaDialog\",\r\n    props: [\r\n      \"instrucOptionCall\",\r\n      \"instrucType\",\r\n      \"domain\",\r\n      \"dialog\",\r\n      \"procedure\",\r\n      \"concept\",\r\n      \"module\",\r\n      \"instructionalelement\",\r\n    ],\r\n    data: () => ({\r\n      i: 0,\r\n      auxGetSrc: [],\r\n      valid: true,\r\n      dialog_alert: false,\r\n      dialog_alert2: false,\r\n      dialog_alert3: false,\r\n      questionAjust: \"\",\r\n      colaborativeName: \"\",\r\n      colaborativeNameRules: [\r\n        (v) =>\r\n          !!v ||\r\n          \"É necessário descrever um identificador para a atividade colaborativa\",\r\n        (v) =>\r\n          (v && v.length <= 100) ||\r\n          \"Nome do identificador da atividade colaborativa deve ter no máximo 100 caracteres\",\r\n      ],\r\n      memberAmount: \"\",\r\n      memberAmountRules: [\r\n        (v) =>\r\n          !!v ||\r\n          \"É necessário inserir a quantidade de alunos envolvidos na atividade\",\r\n      ],\r\n      colaborativeDescription: \"\",\r\n      colaborativeDescriptionRules: [\r\n        (v) =>\r\n          !!v ||\r\n          \"É necessário inserir uma descrição da atividade colaborativa a ser inserida\",\r\n      ],\r\n      itemsMobileMedia: [\r\n        {\r\n          icon: \"mdi-file-image\",\r\n          name: \"Imagem\",\r\n        },\r\n        {\r\n          icon: \"mdi-file-video\",\r\n          name: \"Video\",\r\n        },\r\n        {\r\n          icon: \"mdi-file-music\",\r\n          name: \"Audio\",\r\n        },\r\n        {\r\n          icon: \"mdi-link-variant\",\r\n          name: \"Link\",\r\n        },\r\n      ],\r\n      linkUrlRules: [(v) => !!v || \"É necessário inserir a url do seu link\"],\r\n      mobileMediasControl: [],\r\n      viewQuestions: false,\r\n      questionTypes: [\"Questão Objetiva\", \"Questão Discussiva\"],\r\n      questionsControl: [],\r\n      idObjAnswerItems: [\r\n        \"A\",\r\n        \"B\",\r\n        \"C\",\r\n        \"D\",\r\n        \"E\",\r\n        \"F\",\r\n        \"G\",\r\n        \"H\",\r\n        \"I\",\r\n        \"J\",\r\n        \"K\",\r\n        \"L\",\r\n        \"M\",\r\n        \"N\",\r\n        \"O\",\r\n        \"P\",\r\n        \"Q\",\r\n        \"R\",\r\n        \"S\",\r\n        \"T\",\r\n        \"U\",\r\n        \"V\",\r\n        \"W\",\r\n        \"X\",\r\n        \"Y\",\r\n        \"Z\",\r\n      ],\r\n      alternativeDescriptionRules: [\r\n        (v) => !!v || \"É necessário descrever a alternativa.\",\r\n      ],\r\n    }),\r\n    watch: {\r\n      dialog: async function() {\r\n        this.getColaborative();\r\n      },\r\n    },\r\n    mounted: function() {\r\n      this.getColaborative();\r\n      this.$refs.form.resetValidation();\r\n    },\r\n    methods: {\r\n      async getColaborative() {\r\n        if (this.instructionalelement) {\r\n          var vm = this;\r\n          this.$nextTick(function() {\r\n            this.colaborativeName = this.instructionalelement.label;\r\n            this.colaborativeDescription = this.instructionalelement.description;\r\n            this.memberAmount = parseInt(\r\n              this.instructionalelement.memberamount\r\n            );\r\n          });\r\n          this.questionsControl = [];\r\n          this.mobileMediasControl = [];\r\n          if (this.instructionalelement.mobilemedias.length > 0) {\r\n            await this.instructionalelement.mobilemedias.forEach(async function(\r\n              elementMobile,\r\n              indexMobile\r\n            ) {\r\n              if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"1\") {\r\n                vm.getSrcImage(\r\n                  indexMobile,\r\n                  elementMobile.path,\r\n                  elementMobile.namefile\r\n                );\r\n                await vm.mobileMediasControl.push({\r\n                  type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\r\n                  object: null,\r\n                  resolution: elementMobile.resolution,\r\n                  path: elementMobile.path,\r\n                  namefile: elementMobile.namefile,\r\n                  url: elementMobile.url,\r\n                });\r\n              } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"2\") {\r\n                vm.getSrcVideo(\r\n                  indexMobile,\r\n                  elementMobile.path,\r\n                  elementMobile.namefile\r\n                );\r\n                await vm.mobileMediasControl.push({\r\n                  type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\r\n                  object: null,\r\n                  resolution: elementMobile.resolution,\r\n                  time: elementMobile.time,\r\n                  path: elementMobile.path,\r\n                  namefile: elementMobile.namefile,\r\n                  url: elementMobile.url,\r\n                });\r\n              } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"3\") {\r\n                vm.getSrcAudio(\r\n                  indexMobile,\r\n                  elementMobile.path,\r\n                  elementMobile.namefile\r\n                );\r\n                await vm.mobileMediasControl.push({\r\n                  type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\r\n                  object: null,\r\n                  path: elementMobile.path,\r\n                  namefile: elementMobile.namefile,\r\n                  url: elementMobile.url,\r\n                });\r\n              } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"5\") {\r\n                await vm.mobileMediasControl.push({\r\n                  type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\r\n                  object: elementMobile.urllink,\r\n                  url: elementMobile.url,\r\n                });\r\n              }\r\n            });\r\n          }\r\n          if (this.instructionalelement.questions.length > 0) {\r\n            this.viewQuestions = true;\r\n            await this.instructionalelement.questions.forEach(async function(\r\n              elementQuestion,\r\n              indexQuestion\r\n            ) {\r\n              if (elementQuestion.typequestion === `/questiontype/1/`) {\r\n                await vm.questionsControl.push({\r\n                  typeQuestion: parseInt(\r\n                    elementQuestion.typequestion.split(\"/\")[4]\r\n                  ),\r\n                  descriptionQuestion: elementQuestion.descriptionquestion,\r\n                  answersAlternatives: [],\r\n                  mobileMedias: [],\r\n                  url: elementQuestion.url,\r\n                });\r\n                await elementQuestion.answersalternatives.forEach(\r\n                  async function(elementAlternative) {\r\n                    await vm.questionsControl[\r\n                      indexQuestion\r\n                    ].answersAlternatives.push({\r\n                      isTrue: elementAlternative.istrue,\r\n                      answers: elementAlternative.answers,\r\n                      url: elementAlternative.url,\r\n                    });\r\n                  }\r\n                );\r\n              } else if (elementQuestion.typequestion === `/questiontype/2/`) {\r\n                await vm.questionsControl.push({\r\n                  typeQuestion: parseInt(\r\n                    elementQuestion.typequestion.split(\"/\")[4]\r\n                  ),\r\n                  descriptionQuestion: elementQuestion.descriptionquestion,\r\n                  correctAnswer:\r\n                    elementQuestion.resolutionquestion[0].correctanswer,\r\n                  mobileMedias: [],\r\n                  url: elementQuestion.url,\r\n                  urlCorrectAnswer: elementQuestion.resolutionquestion[0].url,\r\n                });\r\n              }\r\n              if (elementQuestion.mobilemedias) {\r\n                await elementQuestion.mobilemedias.forEach(async function(\r\n                  elementMobile,\r\n                  indexMobile\r\n                ) {\r\n                  if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"1\") {\r\n                    vm.getSrcImageQuestions(\r\n                      indexQuestion,\r\n                      indexMobile,\r\n                      elementMobile.path,\r\n                      elementMobile.namefile\r\n                    );\r\n                    await vm.questionsControl[indexQuestion].mobileMedias.push({\r\n                      type: parseInt(\r\n                        elementMobile.fk_idmediatype.split(\"/\")[4]\r\n                      ),\r\n                      object: null,\r\n                      resolution: elementMobile.resolution,\r\n                      path: elementMobile.path,\r\n                      namefile: elementMobile.namefile,\r\n                      url: elementMobile.url,\r\n                    });\r\n                  } else if (\r\n                    elementMobile.fk_idmediatype.split(\"/\")[4] === \"2\"\r\n                  ) {\r\n                    vm.getSrcVideoQuestions(\r\n                      indexQuestion,\r\n                      indexMobile,\r\n                      elementMobile.path,\r\n                      elementMobile.namefile\r\n                    );\r\n                    await vm.questionsControl[indexQuestion].mobileMedias.push({\r\n                      type: parseInt(\r\n                        elementMobile.fk_idmediatype.split(\"/\")[4]\r\n                      ),\r\n                      object: null,\r\n                      resolution: elementMobile.resolution,\r\n                      time: elementMobile.time,\r\n                      path: elementMobile.path,\r\n                      namefile: elementMobile.namefile,\r\n                      url: elementMobile.url,\r\n                    });\r\n                  } else if (\r\n                    elementMobile.fk_idmediatype.split(\"/\")[4] === \"3\"\r\n                  ) {\r\n                    vm.getSrcAudioQuestions(\r\n                      indexQuestion,\r\n                      indexMobile,\r\n                      elementMobile.path,\r\n                      elementMobile.namefile\r\n                    );\r\n                    await vm.questionsControl[indexQuestion].mobileMedias.push({\r\n                      type: parseInt(\r\n                        elementMobile.fk_idmediatype.split(\"/\")[4]\r\n                      ),\r\n                      object: null,\r\n                      path: elementMobile.path,\r\n                      namefile: elementMobile.namefile,\r\n                      url: elementMobile.url,\r\n                    });\r\n                  } else if (\r\n                    elementMobile.fk_idmediatype.split(\"/\")[4] === \"5\"\r\n                  ) {\r\n                    await vm.questionsControl[indexQuestion].mobileMedias.push({\r\n                      type: parseInt(\r\n                        elementMobile.fk_idmediatype.split(\"/\")[4]\r\n                      ),\r\n                      object: elementMobile.urllink,\r\n                      url: elementMobile.url,\r\n                    });\r\n                  }\r\n                });\r\n              }\r\n            });\r\n            vm.viewQuestions = true;\r\n          }\r\n        } else {\r\n          this.questionsControl = [];\r\n          this.mobileMediasControl = [];\r\n          this.resetValidation();\r\n          this.viewQuestions = false;\r\n          this.resetVariables();\r\n        }\r\n      },\r\n      /* FUNÇÃO PARA SALVAR ATIVIDADE COLABORATIVA QUE TENHA QUESTÕES */\r\n      async postQuestions() {\r\n        var instructionalelement = {\r\n          label: this.colaborativeName,\r\n          fk_instructionalelementtype: `/instrucelementtype/3/`,\r\n          memberamount: this.memberAmount,\r\n          description: this.colaborativeDescription,\r\n        };\r\n        var vm = this;\r\n        var auxPath = \"\";\r\n        if (this.mobileMediasControl) {\r\n          this.mobileMediasControl.forEach(async (mobilemedia) => {\r\n            if (mobilemedia.url) {\r\n              if (mobilemedia.type !== 5) {\r\n                firebase\r\n                  .storage()\r\n                  .ref()\r\n                  .child(mobilemedia.path)\r\n                  .put(mobilemedia.object);\r\n              }\r\n            } else {\r\n              auxPath =\r\n                vm.domain.idknowledgedomain.toString() +\r\n                \"/\" +\r\n                (await setTimeout(async function() {\r\n                  await Date.now().toString();\r\n                }, 1));\r\n              if (mobilemedia.type !== 5) {\r\n                firebase\r\n                  .storage()\r\n                  .ref()\r\n                  .child(auxPath)\r\n                  .put(mobilemedia.object);\r\n\r\n                mobilemedia.path = auxPath;\r\n              }\r\n            }\r\n          });\r\n        }\r\n        var auxPathQuestions = \"\";\r\n        this.questionsControl.forEach(async function(question) {\r\n          if (question.mobileMedias) {\r\n            await question.mobileMedias.forEach((mobilemedia) => {\r\n              if (mobilemedia.url) {\r\n                if (mobilemedia.type !== 5) {\r\n                  firebase\r\n                    .storage()\r\n                    .ref()\r\n                    .child(mobilemedia.path)\r\n                    .put(mobilemedia.object);\r\n                }\r\n              } else {\r\n                setTimeout(function() {\r\n                  auxPathQuestions =\r\n                    vm.domain.idknowledgedomain.toString() +\r\n                    \"/\" +\r\n                    Date.now().toString();\r\n                  if (mobilemedia.type !== 5) {\r\n                    firebase\r\n                      .storage()\r\n                      .ref()\r\n                      .child(auxPathQuestions)\r\n                      .put(mobilemedia.object);\r\n\r\n                    mobilemedia.path = auxPathQuestions;\r\n                  }\r\n                }, 37);\r\n              }\r\n            });\r\n          }\r\n        });\r\n\r\n        if (this.instrucType === \"dominio\") {\r\n          Object.assign(instructionalelement, {\r\n            fk_idknowledgedomain: this.instrucOptionCall.url,\r\n          });\r\n        } else if (this.instrucType === \"modulo\") {\r\n          Object.assign(instructionalelement, {\r\n            fk_idmodule: this.instrucOptionCall.url,\r\n          });\r\n        } else if (this.instrucType === \"conceito\") {\r\n          Object.assign(instructionalelement, {\r\n            fk_idconcept: this.instrucOptionCall.url,\r\n          });\r\n        }\r\n\r\n        if (this.instructionalelement) {\r\n          /* CÓDIGO PARA EDIÇÃO DA AVALIAÇÃO/EXERCÍCIO */\r\n          await Api()\r\n            .put(vm.instructionalelement.url, instructionalelement)\r\n            .then(async function(resposta) {\r\n              if (vm.mobileMediasControl) {\r\n                await vm.mobileMediasControl.forEach(async function(\r\n                  mobilemedia,\r\n                  indexmobile\r\n                ) {\r\n                  /* DANDO PUT NOS MOBILEMEDIAS QUE POSSUEM URL*/\r\n                  if (mobilemedia.url) {\r\n                    if (mobilemedia.type === 1) {\r\n                      await Api().put(mobilemedia.url, {\r\n                        label: \"Imagem \" + (indexmobile + 1),\r\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\r\n                        path: mobilemedia.path,\r\n                        resolution: mobilemedia.resolution,\r\n                        namefile: mobilemedia.namefile,\r\n                        description:\r\n                          \"Imagem \" +\r\n                          (indexmobile + 1) +\r\n                          \" \" +\r\n                          resposta.data.label,\r\n                        time: null,\r\n                        textfull: null,\r\n                        textshort: null,\r\n                        urllink: null,\r\n                        difficultyLevel: null,\r\n                        learningStyle: null,\r\n                        fk_idinstructionalelement: resposta.data.url,\r\n                      });\r\n                    } else if (mobilemedia.type === 2) {\r\n                      await Api().put(mobilemedia.url, {\r\n                        label: \"Video \" + (indexmobile + 1),\r\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\r\n                        path: mobilemedia.path,\r\n                        resolution: mobilemedia.resolution,\r\n                        namefile: mobilemedia.namefile,\r\n                        description: null,\r\n                        time: mobilemedia.time,\r\n                        textfull: null,\r\n                        textshort: null,\r\n                        urllink: null,\r\n                        difficultyLevel: null,\r\n                        learningStyle: null,\r\n                        fk_idinstructionalelement: resposta.data.url,\r\n                      });\r\n                    } else if (mobilemedia.type === 3) {\r\n                      await Api().put(mobilemedia.url, {\r\n                        label: \"Audio \" + (indexmobile + 1),\r\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\r\n                        path: mobilemedia.path,\r\n                        resolution: null,\r\n                        namefile: mobilemedia.namefile,\r\n                        description: null,\r\n                        time: null,\r\n                        textfull: null,\r\n                        textshort: null,\r\n                        urllink: null,\r\n                        difficultyLevel: null,\r\n                        learningStyle: null,\r\n                        fk_idinstructionalelement: resposta.data.url,\r\n                      });\r\n                    } else if (mobilemedia.type === 5) {\r\n                      await Api().put(mobilemedia.url, {\r\n                        label: \"Link \" + (indexmobile + 1),\r\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\r\n                        path: null,\r\n                        resolution: null,\r\n                        namefile: null,\r\n                        description: null,\r\n                        time: null,\r\n                        textfull: null,\r\n                        textshort: null,\r\n                        urllink: mobilemedia.object,\r\n                        difficultyLevel: null,\r\n                        learningStyle: null,\r\n                        fk_idinstructionalelement: resposta.data.url,\r\n                      });\r\n                    }\r\n                  } else {\r\n                    /* DANDO POST NOS MOBILEMEDIAS QUE NÃO POSSUEM URL*/\r\n                    if (mobilemedia.type === 1) {\r\n                      await Api().post(`/mobilemedia/`, {\r\n                        label: \"Imagem \" + (indexmobile + 1),\r\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\r\n                        path: mobilemedia.path,\r\n                        resolution: mobilemedia.resolution,\r\n                        namefile: mobilemedia.path.split(\"/\")[1],\r\n                        description:\r\n                          \"Imagem \" +\r\n                          (indexmobile + 1) +\r\n                          \" \" +\r\n                          resposta.data.label,\r\n                        time: null,\r\n                        textfull: null,\r\n                        textshort: null,\r\n                        urllink: null,\r\n                        difficultyLevel: null,\r\n                        learningStyle: null,\r\n                        fk_idinstructionalelement: resposta.data.url,\r\n                      });\r\n                    } else if (mobilemedia.type === 2) {\r\n                      await Api().post(`/mobilemedia/`, {\r\n                        label: \"Video \" + (indexmobile + 1),\r\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\r\n                        path: mobilemedia.path,\r\n                        resolution: mobilemedia.resolution,\r\n                        namefile: mobilemedia.path.split(\"/\")[1],\r\n                        description: null,\r\n                        time: mobilemedia.time,\r\n                        textfull: null,\r\n                        textshort: null,\r\n                        urllink: null,\r\n                        difficultyLevel: null,\r\n                        learningStyle: null,\r\n                        fk_idinstructionalelement: resposta.data.url,\r\n                      });\r\n                    } else if (mobilemedia.type === 3) {\r\n                      await Api().post(`/mobilemedia/`, {\r\n                        label: \"Audio \" + (indexmobile + 1),\r\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\r\n                        path: mobilemedia.path,\r\n                        resolution: null,\r\n                        namefile: mobilemedia.path.split(\"/\")[1],\r\n                        description: null,\r\n                        time: null,\r\n                        textfull: null,\r\n                        textshort: null,\r\n                        urllink: null,\r\n                        difficultyLevel: null,\r\n                        learningStyle: null,\r\n                        fk_idinstructionalelement: resposta.data.url,\r\n                      });\r\n                    } else if (mobilemedia.type === 5) {\r\n                      await Api().post(`/mobilemedia/`, {\r\n                        label: \"Link \" + (indexmobile + 1),\r\n                        fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\r\n                        path: null,\r\n                        resolution: null,\r\n                        namefile: null,\r\n                        description: null,\r\n                        time: null,\r\n                        textfull: null,\r\n                        textshort: null,\r\n                        urllink: mobilemedia.object,\r\n                        difficultyLevel: null,\r\n                        learningStyle: null,\r\n                        fk_idinstructionalelement: resposta.data.url,\r\n                      });\r\n                    }\r\n                  }\r\n                });\r\n              }\r\n\r\n              await vm.questionsControl.forEach(async function(\r\n                elementQuestion,\r\n                indexQuestion\r\n              ) {\r\n                /*DANDO PUT NAS QUESTÕES COM URL*/\r\n                if (elementQuestion.url) {\r\n                  await Api()\r\n                    .put(elementQuestion.url, {\r\n                      orderquestion: indexQuestion,\r\n                      descriptionquestion: elementQuestion.descriptionQuestion,\r\n                      typequestion:\r\n                        `/questiontype/` + elementQuestion.typeQuestion + `/`,\r\n                      fk_idinstructionalelement: vm.instructionalelement.url,\r\n                    })\r\n                    .then(async function(resposta2) {\r\n                      /*DANDO PUT NOS MOBILEMEDIAS DAS QUESTÕES COM URL*/\r\n\r\n                      await elementQuestion.mobileMedias.forEach(async function(\r\n                        elementMobile,\r\n                        indexMobile\r\n                      ) {\r\n                        if (elementMobile.url) {\r\n                          if (elementMobile.type === 1) {\r\n                            await Api().put(elementMobile.url, {\r\n                              label: \"Imagem \" + (indexMobile + 1),\r\n                              fk_idmediatype:\r\n                                \"/mediatype/\" + elementMobile.type + \"/\",\r\n                              path: elementMobile.path,\r\n                              resolution: elementMobile.resolution,\r\n                              namefile: elementMobile.namefile,\r\n                              description:\r\n                                \"Imagem \" +\r\n                                (indexMobile + 1) +\r\n                                \" Questão\" +\r\n                                resposta2.data.orderquestion,\r\n                              time: null,\r\n                              textfull: null,\r\n                              textshort: null,\r\n                              urllink: null,\r\n                              difficultyLevel: null,\r\n                              learningStyle: null,\r\n                              fk_idquestion: resposta2.data.url,\r\n                            });\r\n                          } else if (elementMobile.type === 2) {\r\n                            await Api().put(elementMobile.url, {\r\n                              label: \"Video \" + (indexMobile + 1),\r\n                              fk_idmediatype:\r\n                                \"/mediatype/\" + elementMobile.type + \"/\",\r\n                              path: elementMobile.path,\r\n                              resolution: elementMobile.resolution,\r\n                              namefile: elementMobile.namefile,\r\n                              description: null,\r\n                              time: elementMobile.time,\r\n                              textfull: null,\r\n                              textshort: null,\r\n                              urllink: null,\r\n                              difficultyLevel: null,\r\n                              learningStyle: null,\r\n                              fk_idquestion: resposta2.data.url,\r\n                            });\r\n                          } else if (elementMobile.type === 3) {\r\n                            await Api().put(elementMobile.url, {\r\n                              label: \"Audio \" + (indexMobile + 1),\r\n                              fk_idmediatype:\r\n                                \"/mediatype/\" + elementMobile.type + \"/\",\r\n                              path: elementMobile.path,\r\n                              resolution: null,\r\n                              namefile: elementMobile.namefile,\r\n                              description: null,\r\n                              time: null,\r\n                              textfull: null,\r\n                              textshort: null,\r\n                              urllink: null,\r\n                              difficultyLevel: null,\r\n                              learningStyle: null,\r\n                              fk_idquestion: resposta2.data.url,\r\n                            });\r\n                          } else if (elementMobile.type === 5) {\r\n                            await Api().put(elementMobile.url, {\r\n                              label: \"Link \" + (indexMobile + 1) + vm.i++ * 0,\r\n                              fk_idmediatype:\r\n                                \"/mediatype/\" + elementMobile.type + \"/\",\r\n                              path: null,\r\n                              resolution: null,\r\n                              namefile: null,\r\n                              description: null,\r\n                              time: null,\r\n                              textfull: null,\r\n                              textshort: null,\r\n                              urllink: elementMobile.object,\r\n                              difficultyLevel: null,\r\n                              learningStyle: null,\r\n                              fk_idquestion: resposta2.data.url,\r\n                            });\r\n                          }\r\n                        } else {\r\n                          if (elementMobile.type === 1) {\r\n                            await Api().post(`/mobilemedia/`, {\r\n                              label: \"Imagem \" + (indexMobile + 1),\r\n                              fk_idmediatype:\r\n                                \"/mediatype/\" + elementMobile.type + \"/\",\r\n                              path: elementMobile.path,\r\n                              resolution: elementMobile.resolution,\r\n                              namefile: elementMobile.path.split(\"/\")[1],\r\n                              description:\r\n                                \"Imagem \" +\r\n                                (indexMobile + 1) +\r\n                                \" Questão\" +\r\n                                resposta2.data.orderquestion,\r\n                              time: null,\r\n                              textfull: null,\r\n                              textshort: null,\r\n                              urllink: null,\r\n                              difficultyLevel: null,\r\n                              learningStyle: null,\r\n                              fk_idquestion: resposta2.data.url,\r\n                            });\r\n                          } else if (elementMobile.type === 2) {\r\n                            await Api().post(`/mobilemedia/`, {\r\n                              label: \"Video \" + (indexMobile + 1),\r\n                              fk_idmediatype:\r\n                                \"/mediatype/\" + elementMobile.type + \"/\",\r\n                              path: elementMobile.path,\r\n                              resolution: elementMobile.resolution,\r\n                              namefile: elementMobile.path.split(\"/\")[1],\r\n                              description: null,\r\n                              time: elementMobile.time,\r\n                              textfull: null,\r\n                              textshort: null,\r\n                              urllink: null,\r\n                              difficultyLevel: null,\r\n                              learningStyle: null,\r\n                              fk_idquestion: resposta2.data.url,\r\n                            });\r\n                          } else if (elementMobile.type === 3) {\r\n                            await Api().post(`/mobilemedia/`, {\r\n                              label: \"Audio \" + (indexMobile + 1),\r\n                              fk_idmediatype:\r\n                                \"/mediatype/\" + elementMobile.type + \"/\",\r\n                              path: elementMobile.path,\r\n                              resolution: null,\r\n                              namefile: elementMobile.path.split(\"/\")[1],\r\n                              description: null,\r\n                              time: null,\r\n                              textfull: null,\r\n                              textshort: null,\r\n                              urllink: null,\r\n                              difficultyLevel: null,\r\n                              learningStyle: null,\r\n                              fk_idquestion: resposta2.data.url,\r\n                            });\r\n                          } else if (elementMobile.type === 5) {\r\n                            await Api().post(`/mobilemedia/`, {\r\n                              label: \"Link \" + (indexMobile + 1) + vm.i++ * 0,\r\n                              fk_idmediatype:\r\n                                \"/mediatype/\" + elementMobile.type + \"/\",\r\n                              path: null,\r\n                              resolution: null,\r\n                              namefile: null,\r\n                              description: null,\r\n                              time: null,\r\n                              textfull: null,\r\n                              textshort: null,\r\n                              urllink: elementMobile.object,\r\n                              difficultyLevel: null,\r\n                              learningStyle: null,\r\n                              fk_idquestion: resposta2.data.url,\r\n                            });\r\n                          }\r\n                        }\r\n                      });\r\n\r\n                      if (elementQuestion.typeQuestion === 1) {\r\n                        await elementQuestion.answersAlternatives.forEach(\r\n                          async function(elementAlternative, indexAlternative) {\r\n                            if (elementAlternative.url) {\r\n                              await Api().put(elementAlternative.url, {\r\n                                idobjanswer:\r\n                                  vm.idObjAnswerItems[indexAlternative],\r\n                                answers: elementAlternative.answers,\r\n                                istrue: elementAlternative.isTrue,\r\n                                fk_idquestion: resposta2.data.url,\r\n                                orderansweralternatives: indexAlternative,\r\n                              });\r\n                            } else {\r\n                              await Api().post(`/answersalternatives/`, {\r\n                                idobjanswer:\r\n                                  vm.idObjAnswerItems[indexAlternative],\r\n                                answers: elementAlternative.answers,\r\n                                istrue: elementAlternative.isTrue,\r\n                                fk_idquestion: resposta2.data.url,\r\n                                orderansweralternatives: indexAlternative,\r\n                              });\r\n                            }\r\n                          }\r\n                        );\r\n                      } else if (elementQuestion.typeQuestion === 2) {\r\n                        await Api().put(elementQuestion.urlCorrectAnswer, {\r\n                          correctanswer: elementQuestion.correctAnswer,\r\n                        });\r\n                      }\r\n                    });\r\n                } else {\r\n                  await Api()\r\n                    .post(`/question/`, {\r\n                      orderquestion: indexQuestion + 1,\r\n                      descriptionquestion: elementQuestion.descriptionQuestion,\r\n                      fk_idinstructionalelement: resposta.data.url,\r\n                      typequestion:\r\n                        `/questiontype/` + elementQuestion.typeQuestion + `/`,\r\n                    })\r\n                    .then(async function(resposta2) {\r\n                      if (elementQuestion.typeQuestion === 1) {\r\n                        await elementQuestion.answersAlternatives.forEach(\r\n                          async function(elementAlternative, indexAlternative) {\r\n                            await Api().post(`/answersalternatives/`, {\r\n                              idobjanswer:\r\n                                vm.idObjAnswerItems[indexAlternative],\r\n                              answers: elementAlternative.answers,\r\n                              istrue: elementAlternative.isTrue,\r\n                              fk_idquestion: resposta2.data.url,\r\n                              orderansweralternatives: indexAlternative,\r\n                            });\r\n                          }\r\n                        );\r\n                      } else if (elementQuestion.typeQuestion === 2) {\r\n                        await Api().post(`/resolutionquestion/`, {\r\n                          correctanswer: elementQuestion.correctAnswer,\r\n                          fk_idquestion: resposta2.data.url,\r\n                        });\r\n                      }\r\n                    });\r\n                }\r\n              });\r\n            });\r\n        } else {\r\n          /* CÓDIGO PARA CRIAÇÃO DA ATIVIDADE COLABORATIVA */\r\n          await Api()\r\n            .post(`/instructionalelement/`, instructionalelement)\r\n            .then(async function(resposta) {\r\n              if (vm.mobileMediasControl) {\r\n                /* INSERÇÃO DOS MOBILEMEDIAS DA ATIVIDADE COLABORATIVA */\r\n                await vm.mobileMediasControl.forEach(async function(\r\n                  mobilemedia,\r\n                  indexmobile\r\n                ) {\r\n                  if (mobilemedia.type === 1) {\r\n                    await Api().post(`/mobilemedia/`, {\r\n                      label: \"Imagem \" + (indexmobile + 1),\r\n                      fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\r\n                      path: mobilemedia.path,\r\n                      resolution: mobilemedia.resolution,\r\n                      namefile: mobilemedia.path.split(\"/\")[1],\r\n                      description:\r\n                        \"Imagem \" +\r\n                        (indexmobile + 1) +\r\n                        \" \" +\r\n                        resposta.data.label,\r\n                      time: null,\r\n                      textfull: null,\r\n                      textshort: null,\r\n                      urllink: null,\r\n                      difficultyLevel: null,\r\n                      learningStyle: null,\r\n                      fk_idinstructionalelement: resposta.data.url,\r\n                    });\r\n                  } else if (mobilemedia.type === 2) {\r\n                    await Api().post(`/mobilemedia/`, {\r\n                      label: \"Video \" + (indexmobile + 1),\r\n                      fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\r\n                      path: mobilemedia.path,\r\n                      resolution: mobilemedia.resolution,\r\n                      namefile: mobilemedia.path.split(\"/\")[1],\r\n                      description: null,\r\n                      time: mobilemedia.time,\r\n                      textfull: null,\r\n                      textshort: null,\r\n                      urllink: null,\r\n                      difficultyLevel: null,\r\n                      learningStyle: null,\r\n                      fk_idinstructionalelement: resposta.data.url,\r\n                    });\r\n                  } else if (mobilemedia.type === 3) {\r\n                    await Api().post(`/mobilemedia/`, {\r\n                      label: \"Audio \" + (indexmobile + 1),\r\n                      fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\r\n                      path: mobilemedia.path,\r\n                      resolution: null,\r\n                      namefile: mobilemedia.path.split(\"/\")[1],\r\n                      description: null,\r\n                      time: null,\r\n                      textfull: null,\r\n                      textshort: null,\r\n                      urllink: null,\r\n                      difficultyLevel: null,\r\n                      learningStyle: null,\r\n                      fk_idinstructionalelement: resposta.data.url,\r\n                    });\r\n                  } else if (mobilemedia.type === 5) {\r\n                    await Api().post(`/mobilemedia/`, {\r\n                      label: \"Link \" + (indexmobile + 1),\r\n                      fk_idmediatype: \"/mediatype/\" + mobilemedia.type + \"/\",\r\n                      path: null,\r\n                      resolution: null,\r\n                      namefile: null,\r\n                      description: null,\r\n                      time: null,\r\n                      textfull: null,\r\n                      textshort: null,\r\n                      urllink: mobilemedia.object,\r\n                      difficultyLevel: null,\r\n                      learningStyle: null,\r\n                      fk_idinstructionalelement: resposta.data.url,\r\n                    });\r\n                  }\r\n                });\r\n              }\r\n              await vm.questionsControl.forEach(async function(\r\n                elementQuestion,\r\n                indexQuestion\r\n              ) {\r\n                /* INSERÇÃO DAS QUESTÕES DA ATIVIDADE COLABORATIVA */\r\n                await Api()\r\n                  .post(`/question/`, {\r\n                    descriptionquestion: elementQuestion.descriptionQuestion,\r\n                    orderquestion: indexQuestion,\r\n                    fk_idinstructionalelement: resposta.data.url,\r\n                    typequestion:\r\n                      `/questiontype/` + elementQuestion.typeQuestion + `/`,\r\n                  })\r\n                  .then(async function(resposta2) {\r\n                    /* INSERÇÃO DOS MOBILEMEDIAS DAS QUESTÕES DA ATIVIDADE COLABORATIVA */\r\n                    await elementQuestion.mobileMedias.forEach(async function(\r\n                      elementMobile,\r\n                      indexMobile\r\n                    ) {\r\n                      if (elementMobile.type === 1) {\r\n                        await Api().post(`/mobilemedia/`, {\r\n                          label: \"Imagem \" + (indexMobile + 1),\r\n                          fk_idmediatype:\r\n                            \"/mediatype/\" + elementMobile.type + \"/\",\r\n                          path: elementMobile.path,\r\n                          resolution: elementMobile.resolution,\r\n                          namefile: elementMobile.path.split(\"/\")[1],\r\n                          description:\r\n                            \"Imagem \" +\r\n                            (indexMobile + 1) +\r\n                            \" Questão\" +\r\n                            resposta2.data.orderquestion,\r\n                          time: null,\r\n                          textfull: null,\r\n                          textshort: null,\r\n                          urllink: null,\r\n                          difficultyLevel: null,\r\n                          learningStyle: null,\r\n                          fk_idquestion: resposta2.data.url,\r\n                        });\r\n                      } else if (elementMobile.type === 2) {\r\n                        await Api().post(`/mobilemedia/`, {\r\n                          label: \"Video \" + (indexMobile + 1),\r\n                          fk_idmediatype:\r\n                            \"/mediatype/\" + elementMobile.type + \"/\",\r\n                          path: elementMobile.path,\r\n                          resolution: elementMobile.resolution,\r\n                          namefile: elementMobile.path.split(\"/\")[1],\r\n                          description: null,\r\n                          time: elementMobile.time,\r\n                          textfull: null,\r\n                          textshort: null,\r\n                          urllink: null,\r\n                          difficultyLevel: null,\r\n                          learningStyle: null,\r\n                          fk_idquestion: resposta2.data.url,\r\n                        });\r\n                      } else if (elementMobile.type === 3) {\r\n                        await Api().post(`/mobilemedia/`, {\r\n                          label: \"Audio \" + (indexMobile + 1),\r\n                          fk_idmediatype:\r\n                            \"/mediatype/\" + elementMobile.type + \"/\",\r\n                          path: elementMobile.path,\r\n                          resolution: null,\r\n                          namefile: elementMobile.path.split(\"/\")[1],\r\n                          description: null,\r\n                          time: null,\r\n                          textfull: null,\r\n                          textshort: null,\r\n                          urllink: null,\r\n                          difficultyLevel: null,\r\n                          learningStyle: null,\r\n                          fk_idquestion: resposta2.data.url,\r\n                        });\r\n                      } else if (elementMobile.type === 5) {\r\n                        await Api().post(`/mobilemedia/`, {\r\n                          label: \"Link \" + (indexMobile + 1) + vm.i++ * 0,\r\n                          fk_idmediatype:\r\n                            \"/mediatype/\" + elementMobile.type + \"/\",\r\n                          path: null,\r\n                          resolution: null,\r\n                          namefile: null,\r\n                          description: null,\r\n                          time: null,\r\n                          textfull: null,\r\n                          textshort: null,\r\n                          urllink: elementMobile.object,\r\n                          difficultyLevel: null,\r\n                          learningStyle: null,\r\n                          fk_idquestion: resposta2.data.url,\r\n                        });\r\n                      }\r\n                    });\r\n                    if (elementQuestion.typeQuestion === 1) {\r\n                      /* INSERÇÃO DAS ALTERNATIVAS DAS QUESTÕES DA ATIVIDADE COLABORATIVA */\r\n                      await elementQuestion.answersAlternatives.forEach(\r\n                        async function(elementAlternative, indexAlternative) {\r\n                          await Api().post(`/answersalternatives/`, {\r\n                            idobjanswer: vm.idObjAnswerItems[indexAlternative],\r\n                            answers: elementAlternative.answers,\r\n                            istrue: elementAlternative.isTrue,\r\n                            fk_idquestion: resposta2.data.url,\r\n                            orderansweralternatives: indexAlternative,\r\n                          });\r\n                        }\r\n                      );\r\n                    } else if (elementQuestion.typeQuestion === 2) {\r\n                      /* INSERÇÃO DA RESPOSTA DAS QUESTÕES DA ATIVIDADE COLABORATIVA */\r\n                      await Api().post(`/resolutionquestion/`, {\r\n                        correctanswer: elementQuestion.correctAnswer,\r\n                        fk_idquestion: resposta2.data.url,\r\n                      });\r\n                    }\r\n                  });\r\n              });\r\n            });\r\n        }\r\n      },\r\n      addMobileMedia(mobileMediaType) {\r\n        if (mobileMediaType === 1) {\r\n          this.mobileMediasControl.push({\r\n            type: mobileMediaType,\r\n            object: null,\r\n            resolution: null,\r\n            path: null,\r\n            namefile: null,\r\n            url: null,\r\n          });\r\n        } else if (mobileMediaType === 2) {\r\n          this.mobileMediasControl.push({\r\n            type: mobileMediaType,\r\n            object: null,\r\n            resolution: null,\r\n            time: null,\r\n            path: null,\r\n            namefile: null,\r\n            url: null,\r\n          });\r\n        } else if (mobileMediaType === 3) {\r\n          this.mobileMediasControl.push({\r\n            type: mobileMediaType,\r\n            object: null,\r\n            path: null,\r\n            namefile: null,\r\n            url: null,\r\n          });\r\n        } else if (mobileMediaType === 4) {\r\n          this.mobileMediasControl.push({\r\n            type: mobileMediaType + 1,\r\n            object: null,\r\n            url: null,\r\n          });\r\n        }\r\n      },\r\n      async deleteMobileMedia(idMobileMedia) {\r\n        if (this.mobileMediasControl[idMobileMedia].url) {\r\n          if (this.mobileMediasControl[idMobileMedia].type !== 5) {\r\n            await firebase\r\n              .storage()\r\n              .ref()\r\n              .child(this.mobileMediasControl[idMobileMedia].path)\r\n              .delete();\r\n          }\r\n          await Api().delete(this.mobileMediasControl[idMobileMedia].url);\r\n        }\r\n        if (idMobileMedia == 0) {\r\n          this.mobileMediasControl.shift();\r\n        } else {\r\n          this.mobileMediasControl.splice(idMobileMedia, 1);\r\n        }\r\n      },\r\n      addQuestionario() {\r\n        if (this.viewQuestions === false) {\r\n          this.viewQuestions = true;\r\n        }\r\n      },\r\n      async deleteQuestionario() {\r\n        await this.questionsControl.forEach(async (question) => {\r\n          if (question.url) {\r\n            await Api().delete(question.url);\r\n          }\r\n        });\r\n        this.questionsControl = [];\r\n        this.viewQuestions = false;\r\n      },\r\n      addQuestion(questionType) {\r\n        if (questionType === 1) {\r\n          this.questionsControl.push({\r\n            typeQuestion: questionType,\r\n            descriptionQuestion: null,\r\n            answersAlternatives: [],\r\n            mobileMedias: [],\r\n            url: null,\r\n          });\r\n        } else if (questionType === 2) {\r\n          this.questionsControl.push({\r\n            typeQuestion: questionType,\r\n            descriptionQuestion: null,\r\n            correctAnswer: null,\r\n            mobileMedias: [],\r\n            url: null,\r\n            urlCorrectAnswer: null,\r\n          });\r\n        }\r\n      },\r\n      async deleteQuestion(idQuestion) {\r\n        if (this.questionsControl[idQuestion].url) {\r\n          await Api().delete(this.questionsControl[idQuestion].url);\r\n        }\r\n        if (idQuestion == 0) {\r\n          this.questionsControl.shift();\r\n        } else {\r\n          this.questionsControl.splice(idQuestion, 1);\r\n        }\r\n      },\r\n      addMobileMediaQuestion(idQuestion, mobileMediaType) {\r\n        if (mobileMediaType === 1) {\r\n          this.questionsControl[idQuestion].mobileMedias.push({\r\n            type: mobileMediaType,\r\n            object: null,\r\n            resolution: null,\r\n            path: null,\r\n            namefile: null,\r\n            url: null,\r\n          });\r\n        } else if (mobileMediaType === 2) {\r\n          this.questionsControl[idQuestion].mobileMedias.push({\r\n            type: mobileMediaType,\r\n            object: null,\r\n            resolution: null,\r\n            time: null,\r\n            path: null,\r\n            namefile: null,\r\n            url: null,\r\n          });\r\n        } else if (mobileMediaType === 3) {\r\n          this.questionsControl[idQuestion].mobileMedias.push({\r\n            type: mobileMediaType,\r\n            object: null,\r\n            path: null,\r\n            namefile: null,\r\n            url: null,\r\n          });\r\n        } else if (mobileMediaType === 4) {\r\n          this.questionsControl[idQuestion].mobileMedias.push({\r\n            type: mobileMediaType + 1,\r\n            object: null,\r\n            url: null,\r\n          });\r\n        }\r\n      },\r\n      async deleteMobileMediaQuestion(idQuestion, idMobileMedia) {\r\n        if (this.questionsControl[idQuestion].mobileMedias[idMobileMedia].url) {\r\n          if (\r\n            this.questionsControl[idQuestion].mobileMedias[idMobileMedia]\r\n              .type !== 5\r\n          ) {\r\n            await firebase\r\n              .storage()\r\n              .ref()\r\n              .child(\r\n                this.questionsControl[idQuestion].mobileMedias[idMobileMedia]\r\n                  .path\r\n              )\r\n              .delete();\r\n          }\r\n          await Api().delete(\r\n            this.questionsControl[idQuestion].mobileMedias[idMobileMedia].url\r\n          );\r\n        }\r\n        if (idMobileMedia == 0) {\r\n          this.questionsControl[idQuestion].mobileMedias.shift();\r\n        } else {\r\n          this.questionsControl[idQuestion].mobileMedias.splice(\r\n            idMobileMedia,\r\n            1\r\n          );\r\n        }\r\n      },\r\n      addAlternative(idQuestion) {\r\n        this.questionsControl[idQuestion].answersAlternatives.push({\r\n          isTrue: false,\r\n          answers: null,\r\n          url: null,\r\n        });\r\n      },\r\n      async deleteAlternative(idQuestion, idAlternative) {\r\n        if (\r\n          this.questionsControl[idQuestion].answersAlternatives[idAlternative]\r\n            .url\r\n        ) {\r\n          await Api().delete(\r\n            this.questionsControl[idQuestion].answersAlternatives[idAlternative]\r\n              .url\r\n          );\r\n        }\r\n        if (idAlternative == 0) {\r\n          this.questionsControl[idQuestion].answersAlternatives.shift();\r\n        } else {\r\n          this.questionsControl[idQuestion].answersAlternatives.splice(\r\n            idAlternative,\r\n            1\r\n          );\r\n        }\r\n      },\r\n      async validate() {\r\n        if (this.$refs.form.validate()) {\r\n          if (this.viewQuestions) {\r\n            if (this.questionsControl.length > 0) {\r\n              var vm = this;\r\n              var aux = 1;\r\n              for (var i = 0; i < this.questionsControl.length; i++) {\r\n                if (aux === 1) {\r\n                  if (this.questionsControl[i].typeQuestion === 1) {\r\n                    if (\r\n                      this.questionsControl[i].answersAlternatives.length === 0\r\n                    ) {\r\n                      vm.questionAjust = i + 1;\r\n                      vm.dialog_alert3 = true;\r\n                      aux = 0;\r\n                      break;\r\n                    }\r\n                    for (\r\n                      var j = 0;\r\n                      j < this.questionsControl[i].answersAlternatives.length;\r\n                      j++\r\n                    ) {\r\n                      if (\r\n                        this.questionsControl[i].answersAlternatives[j].isTrue\r\n                      ) {\r\n                        break;\r\n                      }\r\n                      if (\r\n                        j ===\r\n                        this.questionsControl[i].answersAlternatives.length - 1\r\n                      ) {\r\n                        vm.questionAjust = i + 1;\r\n                        vm.dialog_alert2 = true;\r\n                        aux = 0;\r\n                      }\r\n                    }\r\n                  }\r\n                } else {\r\n                  break;\r\n                }\r\n              }\r\n              if (aux === 1) {\r\n                var auxNumberQuestions = this.questionsControl.length;\r\n                await this.postQuestions();\r\n                await this.resetVariables();\r\n                this.questionsControl = [];\r\n                this.mobileMediasControl = [];\r\n                await this.$emit(\"instrucclose\", auxNumberQuestions);\r\n              }\r\n            } else {\r\n              this.dialog_alert = true;\r\n            }\r\n          } else {\r\n            await this.postQuestions();\r\n            await this.resetVariables();\r\n            await this.$emit(\"instrucclose\");\r\n          }\r\n        }\r\n      },\r\n      resetVariables() {\r\n        this.i = 0;\r\n        this.auxGetSrc = [];\r\n        this.auxGetSrcQuestions = [];\r\n        this.questionsControl = [];\r\n        this.mobileMediasControl = [];\r\n        this.colaborativeName = \"\";\r\n        this.memberAmount = \"\";\r\n        this.colaborativeDescription = \"\";\r\n        this.viewQuestions = false;\r\n      },\r\n      async reset() {\r\n        await this.$emit(\"instrucclose\");\r\n        await this.resetVariables();\r\n        this.questionsControl = [];\r\n        this.mobileMediasControl = [];\r\n        await this.$refs.form.reset();\r\n      },\r\n      atualizaObj(file, indexMobile) {\r\n        this.mobileMediasControl[indexMobile].object = file;\r\n      },\r\n      atualizaMeta() {\r\n        if (this.mobileMediasControl.length > 0) {\r\n          this.mobileMediasControl.forEach((mobilemedia) => {\r\n            if (mobilemedia.object && !mobilemedia.url) {\r\n              if (mobilemedia.type === 1) {\r\n                var img = new Image();\r\n                img.src = URL.createObjectURL(mobilemedia.object);\r\n                img.onload = function() {\r\n                  mobilemedia.resolution = img.width + \"X\" + img.height;\r\n                };\r\n              } else if (mobilemedia.type === 2) {\r\n                var video = document.createElement(\"video\");\r\n                var source = document.createElement(\"source\");\r\n                source.setAttribute(\r\n                  \"src\",\r\n                  URL.createObjectURL(mobilemedia.object)\r\n                );\r\n                video.appendChild(source);\r\n                video.oncanplay = function() {\r\n                  mobilemedia.resolution =\r\n                    video.videoWidth + \"X\" + video.videoHeight;\r\n                  mobilemedia.time = video.duration;\r\n                };\r\n              }\r\n            }\r\n          });\r\n        }\r\n      },\r\n      async getSrcImage(indexMobile, path, namefile) {\r\n        /*var obj = {};*/\r\n        if (path) {\r\n          var vm = this;\r\n          await firebase\r\n            .storage()\r\n            .ref(path)\r\n            .getDownloadURL()\r\n            .then(function(url) {\r\n              /*vm.viewImageSrc = url;*/\r\n              var xhr = new XMLHttpRequest();\r\n              xhr.responseType = \"blob\";\r\n              xhr.onload = function() {\r\n                var blob = xhr.response;\r\n                var file = new File([blob], namefile, {\r\n                  type: blob.type,\r\n                });\r\n                // vm.auxGetSrc.push(file);\r\n                vm.atualizaObj(file, indexMobile);\r\n              };\r\n              xhr.open(\"GET\", url);\r\n              xhr.send();\r\n            });\r\n        }\r\n      },\r\n      async getSrcVideo(indexMobile, path, namefile) {\r\n        /*var obj = {};*/\r\n        if (path) {\r\n          var vm = this;\r\n          await firebase\r\n            .storage()\r\n            .ref(path)\r\n            .getDownloadURL()\r\n            .then(function(url) {\r\n              /*vm.viewVideoSrc = url;*/\r\n              var xhr = new XMLHttpRequest();\r\n              xhr.responseType = \"blob\";\r\n              xhr.onload = function() {\r\n                var blob = xhr.response;\r\n                var file = new File([blob], namefile, {\r\n                  type: blob.type,\r\n                });\r\n                // vm.auxGetSrc.push(file);\r\n                vm.atualizaObj(file, indexMobile);\r\n              };\r\n              xhr.open(\"GET\", url);\r\n              xhr.send();\r\n            });\r\n        }\r\n      },\r\n      async getSrcAudio(indexMobile, path, namefile) {\r\n        /*var obj = {};*/\r\n        if (path) {\r\n          var vm = this;\r\n          await firebase\r\n            .storage()\r\n            .ref(path)\r\n            .getDownloadURL()\r\n            .then(function(url) {\r\n              /*vm.viewAudioSrc = url;*/\r\n              var xhr = new XMLHttpRequest();\r\n              xhr.responseType = \"blob\";\r\n              xhr.onload = function() {\r\n                var blob = xhr.response;\r\n                var file = new File([blob], namefile, {\r\n                  type: blob.type,\r\n                });\r\n                // vm.auxGetSrc.push(file);\r\n                vm.atualizaObj(file, indexMobile);\r\n              };\r\n              xhr.open(\"GET\", url);\r\n              xhr.send();\r\n            });\r\n        }\r\n      },\r\n      atualizaMetaQuestions() {\r\n        if (this.questionsControl.length > 0) {\r\n          this.questionsControl.forEach((question) => {\r\n            if (question.mobileMedias) {\r\n              question.mobileMedias.forEach((mobilemedia) => {\r\n                if (mobilemedia.object && !mobilemedia.url) {\r\n                  if (mobilemedia.type === 1) {\r\n                    var img = new Image();\r\n                    img.src = URL.createObjectURL(mobilemedia.object);\r\n                    img.onload = function() {\r\n                      mobilemedia.resolution = img.width + \"X\" + img.height;\r\n                    };\r\n                  } else if (mobilemedia.type === 2) {\r\n                    var video = document.createElement(\"video\");\r\n                    var source = document.createElement(\"source\");\r\n                    source.setAttribute(\r\n                      \"src\",\r\n                      URL.createObjectURL(mobilemedia.object)\r\n                    );\r\n                    video.appendChild(source);\r\n                    video.oncanplay = function() {\r\n                      mobilemedia.resolution =\r\n                        video.videoWidth + \"X\" + video.videoHeight;\r\n                      mobilemedia.time = video.duration;\r\n                    };\r\n                  }\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      },\r\n      atualizaObjQuestions(file, indexQuestion, indexMobile) {\r\n        this.questionsControl[indexQuestion].mobileMedias[\r\n          indexMobile\r\n        ].object = file;\r\n      },\r\n      async getSrcImageQuestions(indexQuestion, indexMobile, path, namefile) {\r\n        /*var obj = {};*/\r\n        if (path) {\r\n          var vm = this;\r\n          await firebase\r\n            .storage()\r\n            .ref(path)\r\n            .getDownloadURL()\r\n            .then(function(url) {\r\n              /*vm.viewImageSrc = url;*/\r\n              var xhr = new XMLHttpRequest();\r\n              xhr.responseType = \"blob\";\r\n              xhr.onload = function() {\r\n                var blob = xhr.response;\r\n                var file = new File([blob], namefile, {\r\n                  type: blob.type,\r\n                });\r\n                /*vm.auxGetSrcQuestions.push(file);*/\r\n                vm.atualizaObjQuestions(file, indexQuestion, indexMobile);\r\n              };\r\n              xhr.open(\"GET\", url);\r\n              xhr.send();\r\n            });\r\n        }\r\n      },\r\n      async getSrcVideoQuestions(indexQuestion, indexMobile, path, namefile) {\r\n        /*var obj = {};*/\r\n        if (path) {\r\n          var vm = this;\r\n          await firebase\r\n            .storage()\r\n            .ref(path)\r\n            .getDownloadURL()\r\n            .then(function(url) {\r\n              /*vm.viewVideoSrc = url;*/\r\n              var xhr = new XMLHttpRequest();\r\n              xhr.responseType = \"blob\";\r\n              xhr.onload = function() {\r\n                var blob = xhr.response;\r\n                var file = new File([blob], namefile, {\r\n                  type: blob.type,\r\n                });\r\n                // vm.auxGetSrcQuestions.push(file);\r\n                vm.atualizaObjQuestions(file, indexQuestion, indexMobile);\r\n              };\r\n              xhr.open(\"GET\", url);\r\n              xhr.send();\r\n            });\r\n        }\r\n      },\r\n      async getSrcAudioQuestions(indexQuestion, indexMobile, path, namefile) {\r\n        /*var obj = {};*/\r\n        if (path) {\r\n          var vm = this;\r\n          await firebase\r\n            .storage()\r\n            .ref(path)\r\n            .getDownloadURL()\r\n            .then(function(url) {\r\n              /*vm.viewAudioSrc = url;*/\r\n              var xhr = new XMLHttpRequest();\r\n              xhr.responseType = \"blob\";\r\n              xhr.onload = function() {\r\n                var blob = xhr.response;\r\n                var file = new File([blob], namefile, {\r\n                  type: blob.type,\r\n                });\r\n                // vm.auxGetSrcQuestions.push(file);\r\n                vm.atualizaObjQuestions(file, indexQuestion, indexMobile);\r\n              };\r\n              xhr.open(\"GET\", url);\r\n              xhr.send();\r\n            });\r\n        }\r\n      },\r\n      resetValidation() {\r\n        this.$refs.form.resetValidation();\r\n      },\r\n    },\r\n  };\r\n</script>\r\n"]}]}