{"remainingRequest":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\www\\EducomML\\EducomML_Front\\src\\components\\didatic_model\\AssessmentParameterDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\www\\EducomML\\EducomML_Front\\src\\components\\didatic_model\\AssessmentParameterDialog.vue","mtime":1597708240569},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\babel-loader\\lib\\index.js","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js","mtime":1597353521000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBcGkgZnJvbSAiQC9zZXJ2aWNlcy9BcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFzc2Vzc21lbnRQYXJhbWV0ZXJEaWFsb2ciLAogIHByb3BzOiBbImRvbWFpbiIsICJkaWFsb2ciXSwKICBkYXRhOiAoKSA9PiAoewogICAgdmFsaWQ6IHRydWUsCiAgICB0cmVlRGF0YTogW10sCiAgICBzZWxlY3Rpb246IFtdLAogICAgZWxlbWVudERhdGE6IFtdLAogICAgc2NvcG9UeXBlczogWwogICAgICB7CiAgICAgICAgdGV4dDogIkF2YWxpYcOnw6NvIiwKICAgICAgICB2YWx1ZTogMSwKICAgICAgfSwKICAgICAgewogICAgICAgIHRleHQ6ICJEb23DrW5pbyIsCiAgICAgICAgdmFsdWU6IDIsCiAgICAgIH0sCiAgICBdLAogICAgdHlwZXNUaHJlc2hvbGQ6IFsKICAgICAgewogICAgICAgIHRleHQ6ICJQb3JjZW50YWdlbSIsCiAgICAgICAgdmFsdWU6IDEsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0ZXh0OiAiTGl0ZXJhbCIsCiAgICAgICAgdmFsdWU6IDIsCiAgICAgIH0sCiAgICBdLAogICAgdmFsdWVUeXBlczogWyJTaW1wbGVzIiwgIkZhaXhhIl0sCiAgICBhc3Nlc3NtZW50Q29udHJvbDogW10sCiAgICBkaWFsb2dFcnJvcjogZmFsc2UsCiAgICBtZXNzYWdlRXJyb3I6ICIiLAogICAgbmV3SXRlbXM6IFtdLAogICAgY2hlY2tib3g6IHRydWUsCiAgfSksCiAgd2F0Y2g6IHsKICAgIGRvbWFpbjogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sID0gW107CiAgICAgIGlmICh0aGlzLmRvbWFpbikgewogICAgICAgIGF3YWl0IHRoaXMuZ2V0QXNzZXNzbWVudHMoKTsKICAgICAgICBhd2FpdCB0aGlzLnNldERvbWFpblZhcmlhYmxlcygpOwogICAgICB9CiAgICB9LAogICAgZGlhbG9nOiBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2wgPSBbXTsKICAgICAgaWYgKHRoaXMuZG9tYWluKSB7CiAgICAgICAgYXdhaXQgdGhpcy5nZXRBc3Nlc3NtZW50cygpOwogICAgICAgIGF3YWl0IHRoaXMuc2V0RG9tYWluVmFyaWFibGVzKCk7CiAgICAgIH0KICAgIH0sCiAgICBhc3Nlc3NtZW50Q29udHJvbDogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLmZvckVhY2goKGFzc2VzcykgPT4gewogICAgICAgIGlmIChhc3Nlc3MudmFsdWVUeXBlID09PSAiU2luZ2xlIikgewogICAgICAgICAgYXNzZXNzLnJhbmdlcy5mb3JFYWNoKChyYW5nZSkgPT4gewogICAgICAgICAgICBpZiAocmFuZ2UudXJsKSB7CiAgICAgICAgICAgICAgdGhpcy5kZWxldGFTaW5nbGUocmFuZ2UudXJsKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBhc3Nlc3MucmFuZ2VzID0gW107CiAgICAgICAgfSBlbHNlIGlmIChhc3Nlc3MudmFsdWVUeXBlID09PSAiUmFuZ2UiKSB7CiAgICAgICAgICBpZiAoYXNzZXNzLnNpbmdsZS51cmwpIHsKICAgICAgICAgICAgdGhpcy5kZWxldGFTaW5nbGUoYXNzZXNzLnNpbmdsZS51cmwpOwogICAgICAgICAgICBhc3Nlc3Muc2luZ2xlLnVybCA9ICIiOwogICAgICAgICAgfQogICAgICAgICAgYXNzZXNzLnNpbmdsZS50aHJlc2hvbGQgPSAiIjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICB9LAogIG1vdW50ZWQ6IGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2wgPSBbXTsKICAgIGlmICh0aGlzLmRvbWFpbikgewogICAgICBhd2FpdCB0aGlzLmdldEFzc2Vzc21lbnRzKCk7CiAgICAgIGF3YWl0IHRoaXMuc2V0RG9tYWluVmFyaWFibGVzKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXREb21haW5WYXJpYWJsZXMoKSB7CiAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7CiAgICAgICAgdGV4dDogIltET01JTklPXSAiICsgdGhpcy5kb21haW4ubmFtZWtub3dsZWRnZWRvbWFpbiwKICAgICAgICB2YWx1ZTogdGhpcy5kb21haW4udXJsLAogICAgICB9KTsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5kb21haW4ubW9kdWxlcykgJiYgdGhpcy5kb21haW4ubW9kdWxlcy5sZW5ndGgpIHsKICAgICAgICB0aGlzLmRvbWFpbi5tb2R1bGVzLmZvckVhY2goKG1vZHVsbykgPT4gewogICAgICAgICAgaWYgKG1vZHVsby5ma19pZG1vZHVsZSA9PT0gbnVsbCkgewogICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgIGlkOiBtb2R1bG8udXJsLAogICAgICAgICAgICAgIG5hbWU6ICJbTU9EVUxPXSAiICsgbW9kdWxvLm5hbWVtb2R1bGUsCiAgICAgICAgICAgICAgdmlzaWJsZTogbW9kdWxvLnZpc2libGUsCiAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmVsZW1lbnREYXRhLnB1c2goewogICAgICAgICAgICAgIHRleHQ6IG9iamVjdC5uYW1lLAogICAgICAgICAgICAgIHZhbHVlOiBvYmplY3QuaWQsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAobW9kdWxvLnN1Ym1vZHVsZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgbW9kdWxvLnN1Ym1vZHVsZXMuZm9yRWFjaCgoc3VibW9kdWxvKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICBpZDogc3VibW9kdWxvLnVybCwKICAgICAgICAgICAgICAgICAgbmFtZTogIltTVUJNT0RVTE9dICIgKyBzdWJtb2R1bG8ubmFtZW1vZHVsZSwKICAgICAgICAgICAgICAgICAgdmlzaWJsZTogc3VibW9kdWxvLnZpc2libGUsCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnREYXRhLnB1c2goewogICAgICAgICAgICAgICAgICB0ZXh0OiBvYmplY3QubmFtZSwKICAgICAgICAgICAgICAgICAgdmFsdWU6IG9iamVjdC5pZCwKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChzdWJtb2R1bG8uY29uY2VwdHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsby5jb25jZXB0cy5mb3JFYWNoKChjb25jZWl0bykgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICBpZDogY29uY2VpdG8udXJsLAogICAgICAgICAgICAgICAgICAgICAgbmFtZTogIltDT05DRUlUT10gIiArIGNvbmNlaXRvLm5hbWVjb25jZXB0LAogICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogY29uY2VpdG8udmlzaWJsZSwKICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBvYmplY3QubmFtZSwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvYmplY3QuaWQsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtb2R1bG8uY29uY2VwdHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgbW9kdWxvLmNvbmNlcHRzLmZvckVhY2goKGNvbmNlaXRvKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICBpZDogY29uY2VpdG8udXJsLAogICAgICAgICAgICAgICAgICBuYW1lOiAiW0NPTkNFSVRPXSAiICsgY29uY2VpdG8ubmFtZWNvbmNlcHQsCiAgICAgICAgICAgICAgICAgIHZpc2libGU6IGNvbmNlaXRvLnZpc2libGUsCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnREYXRhLnB1c2goewogICAgICAgICAgICAgICAgICB0ZXh0OiBvYmplY3QubmFtZSwKICAgICAgICAgICAgICAgICAgdmFsdWU6IG9iamVjdC5pZCwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRBc3Nlc3NtZW50cygpIHsKICAgICAgLy8gdmFyIHZtID0gdGhpczsKICAgICAgaWYgKHRoaXMuZG9tYWluKSB7CiAgICAgICAgaWYgKHRoaXMuZG9tYWluLmFzc2Vzc21lbnRwYXJhbWV0ZXIubGVuZ3RoID4gMCkgewogICAgICAgICAgdmFyIGFzc2VzcyA9IHsKICAgICAgICAgICAgdHlwZVRocmVzaG9sZDogcGFyc2VJbnQoCiAgICAgICAgICAgICAgdGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlclswXS50eXBldGhyZXNob2xkLnNwbGl0KCIvIilbNF0KICAgICAgICAgICAgKSwKICAgICAgICAgICAgc2NvcG86IHBhcnNlSW50KAogICAgICAgICAgICAgIHRoaXMuZG9tYWluLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2NvcG8uc3BsaXQoIi8iKVs0XQogICAgICAgICAgICApLAogICAgICAgICAgICBma19lbGVtZW50OiB0aGlzLmRvbWFpbi5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLmZrX2lka25vd2xlZGdlZG9tYWluLAogICAgICAgICAgICB2YWx1ZVR5cGU6ICIiLAogICAgICAgICAgICBzaW5nbGU6IHsKICAgICAgICAgICAgICB0aHJlc2hvbGQ6ICIiLAogICAgICAgICAgICAgIHVybDogIiIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJhbmdlczogW10sCiAgICAgICAgICAgIHVybDogdGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlclswXS51cmwsCiAgICAgICAgICB9OwogICAgICAgICAgaWYgKHRoaXMuZG9tYWluLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgYXNzZXNzLnZhbHVlVHlwZSA9ICJTaW5nbGUiOwogICAgICAgICAgICBhc3Nlc3Muc2luZ2xlLnRocmVzaG9sZCA9IHRoaXMuZG9tYWluLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlWzBdLnRocmVzaG9sZDsKICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS51cmwgPSB0aGlzLmRvbWFpbi5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNpbmdsZVswXS51cmw7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZG9tYWluLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0ucmFuZ2VzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgYXNzZXNzLnZhbHVlVHlwZSA9ICJSYW5nZSI7CiAgICAgICAgICAgIHRoaXMuZG9tYWluLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0ucmFuZ2VzLmZvckVhY2goKHJhbmdlKSA9PiB7CiAgICAgICAgICAgICAgYXNzZXNzLnJhbmdlcy5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWVyYW5nZTogcmFuZ2UubmFtZXJhbmdlLAogICAgICAgICAgICAgICAgaW5pdGlhbHZhbHVlOiByYW5nZS5pbml0aWFsdmFsdWUsCiAgICAgICAgICAgICAgICBsaW1pdHZhbHVlOiByYW5nZS5saW1pdHZhbHVlLAogICAgICAgICAgICAgICAgdXJsOiByYW5nZS51cmwsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbC5wdXNoKGFzc2Vzcyk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmRvbWFpbi5tb2R1bGVzKSB7CiAgICAgICAgICB0aGlzLmRvbWFpbi5tb2R1bGVzLmZvckVhY2goKG1vZHVsZSkgPT4gewogICAgICAgICAgICBpZiAobW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXIubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIHZhciBhc3Nlc3MgPSB7CiAgICAgICAgICAgICAgICB0eXBlVGhyZXNob2xkOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgbW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0udHlwZXRocmVzaG9sZC5zcGxpdCgiLyIpWzRdCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgc2NvcG86IHBhcnNlSW50KAogICAgICAgICAgICAgICAgICBtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zY29wby5zcGxpdCgiLyIpWzRdCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgZmtfZWxlbWVudDogbW9kdWxlLnVybCwKICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogIiIsCiAgICAgICAgICAgICAgICBzaW5nbGU6IHsKICAgICAgICAgICAgICAgICAgdGhyZXNob2xkOiAiIiwKICAgICAgICAgICAgICAgICAgdXJsOiAiIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByYW5nZXM6IFtdLAogICAgICAgICAgICAgICAgdXJsOiBtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS51cmwsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBpZiAobW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGFzc2Vzcy52YWx1ZVR5cGUgPSAiU2luZ2xlIjsKICAgICAgICAgICAgICAgIGFzc2Vzcy5zaW5nbGUudGhyZXNob2xkID0KICAgICAgICAgICAgICAgICAgbW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlWzBdLnRocmVzaG9sZDsKICAgICAgICAgICAgICAgIGFzc2Vzcy5zaW5nbGUudXJsID0gbW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlWzBdLnVybDsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnJhbmdlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBhc3Nlc3MudmFsdWVUeXBlID0gIlJhbmdlIjsKICAgICAgICAgICAgICAgIG1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnJhbmdlcy5mb3JFYWNoKChyYW5nZSkgPT4gewogICAgICAgICAgICAgICAgICBhc3Nlc3MucmFuZ2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWVyYW5nZTogcmFuZ2UubmFtZXJhbmdlLAogICAgICAgICAgICAgICAgICAgIGluaXRpYWx2YWx1ZTogcmFuZ2UuaW5pdGlhbHZhbHVlLAogICAgICAgICAgICAgICAgICAgIGxpbWl0dmFsdWU6IHJhbmdlLmxpbWl0dmFsdWUsCiAgICAgICAgICAgICAgICAgICAgdXJsOiByYW5nZS51cmwsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2wucHVzaChhc3Nlc3MpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtb2R1bGUuY29uY2VwdHMpIHsKICAgICAgICAgICAgICBtb2R1bGUuY29uY2VwdHMuZm9yRWFjaCgobW9kdWxlQ29uY2VwdCkgPT4gewogICAgICAgICAgICAgICAgaWYgKG1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIHZhciBhc3Nlc3MgPSB7CiAgICAgICAgICAgICAgICAgICAgdHlwZVRocmVzaG9sZDogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0udHlwZXRocmVzaG9sZC5zcGxpdCgKICAgICAgICAgICAgICAgICAgICAgICAgIi8iCiAgICAgICAgICAgICAgICAgICAgICApWzRdCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBzY29wbzogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2NvcG8uc3BsaXQoIi8iKVs0XQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgZmtfZWxlbWVudDogbW9kdWxlQ29uY2VwdC51cmwsCiAgICAgICAgICAgICAgICAgICAgdmFsdWVUeXBlOiAiIiwKICAgICAgICAgICAgICAgICAgICBzaW5nbGU6IHsKICAgICAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogIiIsCiAgICAgICAgICAgICAgICAgICAgICB1cmw6ICIiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmFuZ2VzOiBbXSwKICAgICAgICAgICAgICAgICAgICB1cmw6IG1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS51cmwsCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGlmIChtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBhc3Nlc3MudmFsdWVUeXBlID0gIlNpbmdsZSI7CiAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS50aHJlc2hvbGQgPQogICAgICAgICAgICAgICAgICAgICAgbW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNpbmdsZVswXS50aHJlc2hvbGQ7CiAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS51cmwgPQogICAgICAgICAgICAgICAgICAgICAgbW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNpbmdsZVswXS51cmw7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgICAgICAgbW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnJhbmdlcy5sZW5ndGggPiAwCiAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIGFzc2Vzcy52YWx1ZVR5cGUgPSAiUmFuZ2UiOwogICAgICAgICAgICAgICAgICAgIG1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS5yYW5nZXMuZm9yRWFjaCgKICAgICAgICAgICAgICAgICAgICAgIChyYW5nZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBhc3Nlc3MucmFuZ2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVyYW5nZTogcmFuZ2UubmFtZXJhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWx2YWx1ZTogcmFuZ2UuaW5pdGlhbHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0dmFsdWU6IHJhbmdlLmxpbWl0dmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiByYW5nZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbC5wdXNoKGFzc2Vzcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1vZHVsZS5zdWJtb2R1bGVzKSB7CiAgICAgICAgICAgICAgbW9kdWxlLnN1Ym1vZHVsZXMuZm9yRWFjaCgoc3VibW9kdWxlKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoc3VibW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXIubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICB2YXIgYXNzZXNzID0gewogICAgICAgICAgICAgICAgICAgIHR5cGVUaHJlc2hvbGQ6IHBhcnNlSW50KAogICAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0udHlwZXRocmVzaG9sZC5zcGxpdCgKICAgICAgICAgICAgICAgICAgICAgICAgIi8iCiAgICAgICAgICAgICAgICAgICAgICApWzRdCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBzY29wbzogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zY29wby5zcGxpdCgiLyIpWzRdCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBma19lbGVtZW50OiBzdWJtb2R1bGUudXJsLAogICAgICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogIiIsCiAgICAgICAgICAgICAgICAgICAgc2luZ2xlOiB7CiAgICAgICAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6ICIiLAogICAgICAgICAgICAgICAgICAgICAgdXJsOiAiIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHJhbmdlczogW10sCiAgICAgICAgICAgICAgICAgICAgdXJsOiBzdWJtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS51cmwsCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGlmIChzdWJtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIGFzc2Vzcy52YWx1ZVR5cGUgPSAiU2luZ2xlIjsKICAgICAgICAgICAgICAgICAgICBhc3Nlc3Muc2luZ2xlLnRocmVzaG9sZCA9CiAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGVbMF0udGhyZXNob2xkOwogICAgICAgICAgICAgICAgICAgIGFzc2Vzcy5zaW5nbGUudXJsID0KICAgICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNpbmdsZVswXS51cmw7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0ucmFuZ2VzLmxlbmd0aCA+IDAKICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnZhbHVlVHlwZSA9ICJSYW5nZSI7CiAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0ucmFuZ2VzLmZvckVhY2goKHJhbmdlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBhc3Nlc3MucmFuZ2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lcmFuZ2U6IHJhbmdlLm5hbWVyYW5nZSwKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbHZhbHVlOiByYW5nZS5pbml0aWFsdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0dmFsdWU6IHJhbmdlLmxpbWl0dmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcmFuZ2UudXJsLAogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbC5wdXNoKGFzc2Vzcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoc3VibW9kdWxlLmNvbmNlcHRzKSB7CiAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZS5jb25jZXB0cy5mb3JFYWNoKChzdWJtb2R1bGVDb25jZXB0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Ym1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgYXNzZXNzID0gewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlVGhyZXNob2xkOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0udHlwZXRocmVzaG9sZC5zcGxpdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIgogICAgICAgICAgICAgICAgICAgICAgICAgIClbNF0KICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgc2NvcG86IHBhcnNlSW50KAogICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zY29wby5zcGxpdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIgogICAgICAgICAgICAgICAgICAgICAgICAgIClbNF0KICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmtfZWxlbWVudDogc3VibW9kdWxlQ29uY2VwdC51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VzOiBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzdWJtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0udXJsLAogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNpbmdsZS5sZW5ndGggPgogICAgICAgICAgICAgICAgICAgICAgICAwCiAgICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnZhbHVlVHlwZSA9ICJTaW5nbGUiOwogICAgICAgICAgICAgICAgICAgICAgICBhc3Nlc3Muc2luZ2xlLnRocmVzaG9sZCA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNpbmdsZVswXS50aHJlc2hvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2Vzcy5zaW5nbGUudXJsID0KICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlWzBdLnVybDsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS5yYW5nZXMubGVuZ3RoID4KICAgICAgICAgICAgICAgICAgICAgICAgMAogICAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2Vzcy52YWx1ZVR5cGUgPSAiUmFuZ2UiOwogICAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0ucmFuZ2VzLmZvckVhY2goCiAgICAgICAgICAgICAgICAgICAgICAgICAgKHJhbmdlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3Nlc3MucmFuZ2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lcmFuZ2U6IHJhbmdlLm5hbWVyYW5nZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbHZhbHVlOiByYW5nZS5pbml0aWFsdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0dmFsdWU6IHJhbmdlLmxpbWl0dmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogcmFuZ2UudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbC5wdXNoKGFzc2Vzcyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYXN5bmMgcG9zdEFzc2Vzc21lbnQoKSB7CiAgICAgIGF3YWl0IHRoaXMuYXNzZXNzbWVudENvbnRyb2wuZm9yRWFjaChhc3luYyAoYXNzZXNzbWVudCkgPT4gewogICAgICAgIHZhciBhdXhBc3Nlc3NtZW50ID0gewogICAgICAgICAgdHlwZXRocmVzaG9sZDogYC90eXBldGhyZXNob2xkL2AgKyBhc3Nlc3NtZW50LnR5cGVUaHJlc2hvbGQgKyBgL2AsCiAgICAgICAgICBzY29wbzogYC9zY29wby9gICsgYXNzZXNzbWVudC5zY29wbyArIGAvYCwKICAgICAgICAgIGZrX2lka25vd2xlZGdlZG9tYWluOiBudWxsLAogICAgICAgICAgZmtfaWRtb2R1bGU6IG51bGwsCiAgICAgICAgICBma19pZGNvbmNlcHQ6IG51bGwsCiAgICAgICAgfTsKICAgICAgICBpZiAoYXNzZXNzbWVudC5ma19lbGVtZW50LnNwbGl0KCIvIilbM10gPT09ICJrbm93bGVkZ2Vkb21haW4iKSB7CiAgICAgICAgICBhdXhBc3Nlc3NtZW50LmZrX2lka25vd2xlZGdlZG9tYWluID0gYXNzZXNzbWVudC5ma19lbGVtZW50OwogICAgICAgIH0gZWxzZSBpZiAoYXNzZXNzbWVudC5ma19lbGVtZW50LnNwbGl0KCIvIilbM10gPT09ICJtb2R1bGUiKSB7CiAgICAgICAgICBhdXhBc3Nlc3NtZW50LmZrX2lkbW9kdWxlID0gYXNzZXNzbWVudC5ma19lbGVtZW50OwogICAgICAgIH0gZWxzZSBpZiAoYXNzZXNzbWVudC5ma19lbGVtZW50LnNwbGl0KCIvIilbM10gPT09ICJjb25jZXB0IikgewogICAgICAgICAgYXV4QXNzZXNzbWVudC5ma19pZGNvbmNlcHQgPSBhc3Nlc3NtZW50LmZrX2VsZW1lbnQ7CiAgICAgICAgfQoKICAgICAgICBpZiAoYXNzZXNzbWVudC51cmwpIHsKICAgICAgICAgIGF3YWl0IEFwaSgpCiAgICAgICAgICAgIC5wdXQoYXNzZXNzbWVudC51cmwsIGF1eEFzc2Vzc21lbnQpCiAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgewogICAgICAgICAgICAgIGlmIChhc3Nlc3NtZW50LnZhbHVlVHlwZSA9PT0gIlNpbmdsZSIpIHsKICAgICAgICAgICAgICAgIGlmIChhc3Nlc3NtZW50LnJhbmdlcykgewogICAgICAgICAgICAgICAgICBhc3Nlc3NtZW50LnJhbmdlcy5mb3JFYWNoKChyYW5nZSkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZS51cmwpIHsKICAgICAgICAgICAgICAgICAgICAgIEFwaSgpLmRlbGV0ZShyYW5nZS51cmwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wdXQoYXNzZXNzbWVudC5zaW5nbGUudXJsLCB7CiAgICAgICAgICAgICAgICAgIGZrX2lkYXNzZXNzbWVudHBhcmFtZXRlcjogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogYXNzZXNzbWVudC5zaW5nbGUudGhyZXNob2xkLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhc3Nlc3NtZW50LnZhbHVlVHlwZSA9PT0gIlJhbmdlIikgewogICAgICAgICAgICAgICAgaWYgKGFzc2Vzc21lbnQuc2luZ2xlLnVybCkgewogICAgICAgICAgICAgICAgICBBcGkoKS5kZWxldGUoYXNzZXNzbWVudC5zaW5nbGUudXJsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGFzc2Vzc21lbnQucmFuZ2VzLmZvckVhY2goYXN5bmMgKHJhbmdlKSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmIChyYW5nZS51cmwpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wdXQocmFuZ2UudXJsLCB7CiAgICAgICAgICAgICAgICAgICAgICBuYW1lcmFuZ2U6IHJhbmdlLm5hbWVyYW5nZSwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkYXNzZXNzbWVudHBhcmFtZXRlcjogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsdmFsdWU6IHJhbmdlLmluaXRpYWx2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIGxpbWl0dmFsdWU6IHJhbmdlLmxpbWl0dmFsdWUsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdCgiL3JhbmdlLyIsIHsKICAgICAgICAgICAgICAgICAgICAgIG5hbWVyYW5nZTogcmFuZ2UubmFtZXJhbmdlLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRhc3Nlc3NtZW50cGFyYW1ldGVyOiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWx2YWx1ZTogcmFuZ2UuaW5pdGlhbHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgbGltaXR2YWx1ZTogcmFuZ2UubGltaXR2YWx1ZSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXdhaXQgQXBpKCkKICAgICAgICAgICAgLnBvc3QoIi9hc3Nlc3NtZW50cGFyYW1ldGVyLyIsIGF1eEFzc2Vzc21lbnQpCiAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgewogICAgICAgICAgICAgIGlmIChhc3Nlc3NtZW50LnZhbHVlVHlwZSA9PT0gIlNpbmdsZSIpIHsKICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnBvc3QoIi9zaW5nbGUvIiwgewogICAgICAgICAgICAgICAgICBma19pZGFzc2Vzc21lbnRwYXJhbWV0ZXI6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IGFzc2Vzc21lbnQuc2luZ2xlLnRocmVzaG9sZCwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNzZXNzbWVudC52YWx1ZVR5cGUgPT09ICJSYW5nZSIpIHsKICAgICAgICAgICAgICAgIGFzc2Vzc21lbnQucmFuZ2VzLmZvckVhY2goYXN5bmMgKHJhbmdlKSA9PiB7CiAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnBvc3QoIi9yYW5nZS8iLCB7CiAgICAgICAgICAgICAgICAgICAgbmFtZXJhbmdlOiByYW5nZS5uYW1lcmFuZ2UsCiAgICAgICAgICAgICAgICAgICAgZmtfaWRhc3Nlc3NtZW50cGFyYW1ldGVyOiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICBpbml0aWFsdmFsdWU6IHJhbmdlLmluaXRpYWx2YWx1ZSwKICAgICAgICAgICAgICAgICAgICBsaW1pdHZhbHVlOiByYW5nZS5saW1pdHZhbHVlLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhZGRSYW5nZShpZEFzc2Vzc21lbnQpIHsKICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbFtpZEFzc2Vzc21lbnRdLnJhbmdlcy5wdXNoKHsKICAgICAgICBuYW1lcmFuZ2U6ICIiLAogICAgICAgIGluaXRpYWx2YWx1ZTogIiIsCiAgICAgICAgbGltaXR2YWx1ZTogIiIsCiAgICAgICAgdXJsOiAiIiwKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgZGVsZXRhUmFuZ2UoaWRBc3Nlc3NtZW50LCBpZFJhbmdlKSB7CiAgICAgIGlmICh0aGlzLmFzc2Vzc21lbnRDb250cm9sW2lkQXNzZXNzbWVudF0ucmFuZ2VzW2lkUmFuZ2VdLnVybCkgewogICAgICAgIEFwaSgpLmRlbGV0ZSh0aGlzLmFzc2Vzc21lbnRDb250cm9sW2lkQXNzZXNzbWVudF0ucmFuZ2VzW2lkUmFuZ2VdLnVybCk7CiAgICAgIH0KICAgICAgaWYgKGlkUmFuZ2UgPT0gMCkgewogICAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2xbaWRBc3Nlc3NtZW50XS5yYW5nZXMuc2hpZnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sW2lkQXNzZXNzbWVudF0ucmFuZ2VzLnNwbGljZShpZFJhbmdlLCAxKTsKICAgICAgfQogICAgfSwKICAgIGFkZEFzc2Vzc21lbnQoKSB7CiAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2wucHVzaCh7CiAgICAgICAgdHlwZVRocmVzaG9sZDogIiIsCiAgICAgICAgc2NvcG86ICIiLAogICAgICAgIGZrX2VsZW1lbnQ6ICIiLAogICAgICAgIHZhbHVlVHlwZTogIiIsCiAgICAgICAgc2luZ2xlOiB7CiAgICAgICAgICB0aHJlc2hvbGQ6ICIiLAogICAgICAgICAgdXJsOiAiIiwKICAgICAgICB9LAogICAgICAgIHJhbmdlczogW10sCiAgICAgICAgdXJsOiAiIiwKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgZGVsZXRhQXNzZXNzbWVudChpZEFzc2Vzc21lbnQpIHsKICAgICAgaWYgKHRoaXMuYXNzZXNzbWVudENvbnRyb2xbaWRBc3Nlc3NtZW50XS51cmwgIT09IG51bGwpIHsKICAgICAgICBhd2FpdCBBcGkoKS5kZWxldGUodGhpcy5hc3Nlc3NtZW50Q29udHJvbFtpZEFzc2Vzc21lbnRdLnVybCk7CiAgICAgIH0KICAgICAgaWYgKGlkQXNzZXNzbWVudCA9PSAwKSB7CiAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbC5zaGlmdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2wuc3BsaWNlKGlkQXNzZXNzbWVudCwgMSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBkZWxldGFTaW5nbGUodXJsU2luZ2xlKSB7CiAgICAgIGF3YWl0IEFwaSgpLmRlbGV0ZSh1cmxTaW5nbGUpOwogICAgfSwKICAgIGFzeW5jIHZhbGlkYXRlKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICB2YXIgYXV4TG9vcFZhbGlkYXRpb24gPSAxOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hc3Nlc3NtZW50Q29udHJvbC5sZW5ndGg7IGkrKykgewogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLmFzc2Vzc21lbnRDb250cm9sLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sW2ldLmZrX2VsZW1lbnQgPT09CiAgICAgICAgICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sW2pdLmZrX2VsZW1lbnQgJiYKICAgICAgICAgICAgICBpICE9PSBqCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGF1eExvb3BWYWxpZGF0aW9uID0gMDsKICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VFcnJvciA9CiAgICAgICAgICAgICAgICAiTsOjbyBwb2RlIGV4aXN0aXIgbWFpcyBkZSB1bSBwYXLDom1ldHJvIGRlIGF2YWxpYcOnw6NvIHBhcmEgbyBtZXNtbyBlbGVtZW50by4gVmVyaWZpcXVlIG9zIHBhcsOibWV0cm9zIGRlIGF2YWxpYcOnw6NvICIgKwogICAgICAgICAgICAgICAgKGogKyAxKSArCiAgICAgICAgICAgICAgICAiIGUgIiArCiAgICAgICAgICAgICAgICAoaSArIDEpICsKICAgICAgICAgICAgICAgICIuIjsKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Vycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoYXV4TG9vcFZhbGlkYXRpb24gPT09IDEpIHsKICAgICAgICAgIGF3YWl0IHRoaXMucG9zdEFzc2Vzc21lbnQoKTsKICAgICAgICAgIGF3YWl0IHRoaXMucmVzZXRWYXJpYWJsZXMoKTsKICAgICAgICAgIGF3YWl0IHRoaXMuJGVtaXQoImNsb3NlX29yX3NhdmUiLCAic2F2ZSIpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHJlc2V0KCkgewogICAgICB0aGlzLiRlbWl0KCJjbG9zZV9vcl9zYXZlIiwgImNsb3NlIik7CiAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2wgPSBbXTsKICAgIH0sCiAgICByZXNldFZhcmlhYmxlcygpIHsKICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbCA9IFtdOwogICAgfSwKICAgIHJlc2V0VmFsaWRhdGlvbigpIHsKICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0VmFsaWRhdGlvbigpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["AssessmentParameterDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AssessmentParameterDialog.vue","sourceRoot":"src/components/didatic_model","sourcesContent":["<template>\n  <v-card>\n    <v-card-title style=\"background-color:purple; color:white;\">\n      <span class=\"headline\">\n        <p>Defina as informações equivalentes aos parâmetros de avaliação.</p>\n      </span>\n    </v-card-title>\n    <v-row class=\"mx-0 px-0\">\n      <v-row class=\"mx-0 px-0 pl-6\">\n        <h3 class=\"mt-5\">Parâmetros de avaliação</h3>\n        <v-btn icon=\"icon\" class=\"mb-1\">\n          <v-icon large class=\"mt-9 ml-2\" color=\"primary\" @click=\"addAssessment()\">mdi-plus-box</v-icon>\n        </v-btn>\n      </v-row>\n      <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n        <v-row\n          v-for=\"(assessment, i) in assessmentControl\"\n          :key=\"i\"\n          style=\"margin-bottom: -20px;\"\n          class=\"mx-0 px-0 pl-6\"\n        >\n          <v-col cols=\"2\">\n            <v-select\n              v-model=\"assessmentControl[i].scopo\"\n              :items=\"scopoTypes\"\n              :rules=\"[(v) => !!v || 'Conceito é requerido']\"\n              label=\"Scopo\"\n              style=\"margin:0px;\"\n              required\n            ></v-select>\n          </v-col>\n          <v-col cols=\"3\">\n            <v-select\n              v-model=\"assessmentControl[i].fk_element\"\n              :items=\"elementData\"\n              :rules=\"[(v) => !!v || 'O tipo do conceito é requerido']\"\n              label=\"Elemento\"\n              style=\"margin:0px;\"\n              required\n            ></v-select>\n          </v-col>\n          <v-col cols=\"3\">\n            <v-select\n              v-model=\"assessmentControl[i].typeThreshold\"\n              :items=\"typesThreshold\"\n              :rules=\"[(v) => !!v || 'O tipo do conceito é requerido']\"\n              label=\"Tipo de Threshold\"\n              style=\"margin:0px;\"\n              required\n            ></v-select>\n          </v-col>\n          <v-col cols=\"2\">\n            <v-select\n              style=\"margin-top: -1px;\"\n              v-model=\"assessmentControl[i].valueType\"\n              :items=\"valueTypes\"\n              :rules=\"[(v) => !!v || 'O tipo de dado é requerido']\"\n              label=\"Tipo de Dado\"\n              required\n            ></v-select>\n            <v-text-field\n              style=\"margin-top: -1px; margin-bottom: -10px;\"\n              v-if=\"assessmentControl[i].valueType === 'Single'\"\n              v-model=\"assessmentControl[i].single.threshold\"\n              label=\"Valor\"\n              :suffix=\"assessmentControl[i].typeThreshold === 1 ? '%' : ''\"\n              required\n            ></v-text-field>\n          </v-col>\n\n          <v-col cols=\"2\" class=\"mt-2\">\n            <v-btn icon=\"icon\" class=\"mb-1\" v-if=\"assessmentControl[i].valueType === 'Range'\">\n              <v-icon large class=\"mb-1\" color=\"primary\" @click=\"addRange(i)\">mdi-plus-box</v-icon>\n            </v-btn>\n            <v-btn icon=\"icon\" class=\"mb-1\">\n              <v-icon large class=\"mb-1\" color=\"red\" @click=\"deletaAssessment(i)\">mdi-minus-box</v-icon>\n            </v-btn>\n          </v-col>\n          <v-row v-if=\"assessmentControl[i].valueType === 'Single'\" style=\"margin-top: -40px;\">\n            <v-col cols=\"7\"></v-col>\n            <v-col cols=\"2\" class=\"ml-10\"></v-col>\n          </v-row>\n          <div v-else>\n            <v-row\n              v-for=\"(range, idRange) in assessment.ranges\"\n              :key=\"idRange\"\n              style=\"margin-top: -30px;\"\n            >\n              <v-col cols=\"4\"></v-col>\n              <v-col cols=\"3\">\n                <v-text-field\n                  v-model=\"assessmentControl[i].ranges[idRange].namerange\"\n                  counter=\"15\"\n                  label=\"Nome do range\"\n                  style=\"margin:0px;\"\n                  required\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"2\">\n                <v-text-field\n                  v-model=\"assessmentControl[i].ranges[idRange].initialvalue\"\n                  label=\"Valor inicial\"\n                  style=\"margin:0px;\"\n                  type=\"number\"\n                  :suffix=\"assessmentControl[i].typeThreshold === 1 ? '%' : ''\"\n                  required\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"2\">\n                <v-text-field\n                  v-model=\"assessmentControl[i].ranges[idRange].limitvalue\"\n                  label=\"Valor Limite\"\n                  style=\"margin:0px;\"\n                  type=\"number\"\n                  :suffix=\"assessmentControl[i].typeThreshold === 1 ? '%' : ''\"\n                  required\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"1\">\n                <v-btn icon=\"icon\" class=\"mt-4\">\n                  <v-icon\n                    large\n                    class=\"mb-1\"\n                    color=\"red\"\n                    @click=\"deletaRange(i, idRange)\"\n                  >mdi-minus-box</v-icon>\n                </v-btn>\n              </v-col>\n            </v-row>\n          </div>\n        </v-row>\n      </v-form>\n    </v-row>\n    <v-card-actions>\n      <v-spacer></v-spacer>\n      <v-btn color=\"red\" height=\"49\" dark large @click=\"reset\">\n        Cancelar\n        <v-icon dark right>mdi-close</v-icon>\n      </v-btn>\n      <v-btn color=\"success\" height=\"49\" dark large @click=\"validate\">\n        Salvar\n        <v-icon dark right>mdi-content-save</v-icon>\n      </v-btn>\n    </v-card-actions>\n    <div class=\"text-center\">\n      <v-dialog v-model=\"dialogError\" width=\"500\">\n        <v-card>\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\">ALERTA!</v-card-title>\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\">\n            {{\n            messageError\n            }}\n          </v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" text @click=\"dialogError = false\">Ok</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n  </v-card>\n</template>\n\n<script>\nimport Api from \"@/services/Api\";\nexport default {\n  name: \"AssessmentParameterDialog\",\n  props: [\"domain\", \"dialog\"],\n  data: () => ({\n    valid: true,\n    treeData: [],\n    selection: [],\n    elementData: [],\n    scopoTypes: [\n      {\n        text: \"Avaliação\",\n        value: 1,\n      },\n      {\n        text: \"Domínio\",\n        value: 2,\n      },\n    ],\n    typesThreshold: [\n      {\n        text: \"Porcentagem\",\n        value: 1,\n      },\n      {\n        text: \"Literal\",\n        value: 2,\n      },\n    ],\n    valueTypes: [\"Simples\", \"Faixa\"],\n    assessmentControl: [],\n    dialogError: false,\n    messageError: \"\",\n    newItems: [],\n    checkbox: true,\n  }),\n  watch: {\n    domain: async function () {\n      this.assessmentControl = [];\n      if (this.domain) {\n        await this.getAssessments();\n        await this.setDomainVariables();\n      }\n    },\n    dialog: async function () {\n      this.assessmentControl = [];\n      if (this.domain) {\n        await this.getAssessments();\n        await this.setDomainVariables();\n      }\n    },\n    assessmentControl: function () {\n      this.assessmentControl.forEach((assess) => {\n        if (assess.valueType === \"Single\") {\n          assess.ranges.forEach((range) => {\n            if (range.url) {\n              this.deletaSingle(range.url);\n            }\n          });\n          assess.ranges = [];\n        } else if (assess.valueType === \"Range\") {\n          if (assess.single.url) {\n            this.deletaSingle(assess.single.url);\n            assess.single.url = \"\";\n          }\n          assess.single.threshold = \"\";\n        }\n      });\n    },\n  },\n  mounted: async function () {\n    this.assessmentControl = [];\n    if (this.domain) {\n      await this.getAssessments();\n      await this.setDomainVariables();\n    }\n  },\n  methods: {\n    setDomainVariables() {\n      this.elementData.push({\n        text: \"[DOMINIO] \" + this.domain.nameknowledgedomain,\n        value: this.domain.url,\n      });\n      if (Array.isArray(this.domain.modules) && this.domain.modules.length) {\n        this.domain.modules.forEach((modulo) => {\n          if (modulo.fk_idmodule === null) {\n            var object = {\n              id: modulo.url,\n              name: \"[MODULO] \" + modulo.namemodule,\n              visible: modulo.visible,\n              children: [],\n            };\n            this.elementData.push({\n              text: object.name,\n              value: object.id,\n            });\n            if (modulo.submodules.length) {\n              modulo.submodules.forEach((submodulo) => {\n                var object = {\n                  id: submodulo.url,\n                  name: \"[SUBMODULO] \" + submodulo.namemodule,\n                  visible: submodulo.visible,\n                  children: [],\n                };\n                this.elementData.push({\n                  text: object.name,\n                  value: object.id,\n                });\n\n                if (submodulo.concepts.length) {\n                  submodulo.concepts.forEach((conceito) => {\n                    var object = {\n                      id: conceito.url,\n                      name: \"[CONCEITO] \" + conceito.nameconcept,\n                      visible: conceito.visible,\n                      children: [],\n                    };\n                    this.elementData.push({\n                      text: object.name,\n                      value: object.id,\n                    });\n                  });\n                }\n              });\n            }\n            if (modulo.concepts.length) {\n              modulo.concepts.forEach((conceito) => {\n                var object = {\n                  id: conceito.url,\n                  name: \"[CONCEITO] \" + conceito.nameconcept,\n                  visible: conceito.visible,\n                  children: [],\n                };\n                this.elementData.push({\n                  text: object.name,\n                  value: object.id,\n                });\n              });\n            }\n          }\n        });\n      }\n    },\n    getAssessments() {\n      // var vm = this;\n      if (this.domain) {\n        if (this.domain.assessmentparameter.length > 0) {\n          var assess = {\n            typeThreshold: parseInt(\n              this.domain.assessmentparameter[0].typethreshold.split(\"/\")[4]\n            ),\n            scopo: parseInt(\n              this.domain.assessmentparameter[0].scopo.split(\"/\")[4]\n            ),\n            fk_element: this.domain.assessmentparameter[0].fk_idknowledgedomain,\n            valueType: \"\",\n            single: {\n              threshold: \"\",\n              url: \"\",\n            },\n            ranges: [],\n            url: this.domain.assessmentparameter[0].url,\n          };\n          if (this.domain.assessmentparameter[0].single.length > 0) {\n            assess.valueType = \"Single\";\n            assess.single.threshold = this.domain.assessmentparameter[0].single[0].threshold;\n            assess.single.url = this.domain.assessmentparameter[0].single[0].url;\n          } else if (this.domain.assessmentparameter[0].ranges.length > 0) {\n            assess.valueType = \"Range\";\n            this.domain.assessmentparameter[0].ranges.forEach((range) => {\n              assess.ranges.push({\n                namerange: range.namerange,\n                initialvalue: range.initialvalue,\n                limitvalue: range.limitvalue,\n                url: range.url,\n              });\n            });\n          }\n          this.assessmentControl.push(assess);\n        }\n        if (this.domain.modules) {\n          this.domain.modules.forEach((module) => {\n            if (module.assessmentparameter.length > 0) {\n              var assess = {\n                typeThreshold: parseInt(\n                  module.assessmentparameter[0].typethreshold.split(\"/\")[4]\n                ),\n                scopo: parseInt(\n                  module.assessmentparameter[0].scopo.split(\"/\")[4]\n                ),\n                fk_element: module.url,\n                valueType: \"\",\n                single: {\n                  threshold: \"\",\n                  url: \"\",\n                },\n                ranges: [],\n                url: module.assessmentparameter[0].url,\n              };\n              if (module.assessmentparameter[0].single.length > 0) {\n                assess.valueType = \"Single\";\n                assess.single.threshold =\n                  module.assessmentparameter[0].single[0].threshold;\n                assess.single.url = module.assessmentparameter[0].single[0].url;\n              } else if (module.assessmentparameter[0].ranges.length > 0) {\n                assess.valueType = \"Range\";\n                module.assessmentparameter[0].ranges.forEach((range) => {\n                  assess.ranges.push({\n                    namerange: range.namerange,\n                    initialvalue: range.initialvalue,\n                    limitvalue: range.limitvalue,\n                    url: range.url,\n                  });\n                });\n              }\n              this.assessmentControl.push(assess);\n            }\n            if (module.concepts) {\n              module.concepts.forEach((moduleConcept) => {\n                if (moduleConcept.assessmentparameter.length > 0) {\n                  var assess = {\n                    typeThreshold: parseInt(\n                      moduleConcept.assessmentparameter[0].typethreshold.split(\n                        \"/\"\n                      )[4]\n                    ),\n                    scopo: parseInt(\n                      moduleConcept.assessmentparameter[0].scopo.split(\"/\")[4]\n                    ),\n                    fk_element: moduleConcept.url,\n                    valueType: \"\",\n                    single: {\n                      threshold: \"\",\n                      url: \"\",\n                    },\n                    ranges: [],\n                    url: moduleConcept.assessmentparameter[0].url,\n                  };\n                  if (moduleConcept.assessmentparameter[0].single.length > 0) {\n                    assess.valueType = \"Single\";\n                    assess.single.threshold =\n                      moduleConcept.assessmentparameter[0].single[0].threshold;\n                    assess.single.url =\n                      moduleConcept.assessmentparameter[0].single[0].url;\n                  } else if (\n                    moduleConcept.assessmentparameter[0].ranges.length > 0\n                  ) {\n                    assess.valueType = \"Range\";\n                    moduleConcept.assessmentparameter[0].ranges.forEach(\n                      (range) => {\n                        assess.ranges.push({\n                          namerange: range.namerange,\n                          initialvalue: range.initialvalue,\n                          limitvalue: range.limitvalue,\n                          url: range.url,\n                        });\n                      }\n                    );\n                  }\n                  this.assessmentControl.push(assess);\n                }\n              });\n            }\n            if (module.submodules) {\n              module.submodules.forEach((submodule) => {\n                if (submodule.assessmentparameter.length > 0) {\n                  var assess = {\n                    typeThreshold: parseInt(\n                      submodule.assessmentparameter[0].typethreshold.split(\n                        \"/\"\n                      )[4]\n                    ),\n                    scopo: parseInt(\n                      submodule.assessmentparameter[0].scopo.split(\"/\")[4]\n                    ),\n                    fk_element: submodule.url,\n                    valueType: \"\",\n                    single: {\n                      threshold: \"\",\n                      url: \"\",\n                    },\n                    ranges: [],\n                    url: submodule.assessmentparameter[0].url,\n                  };\n                  if (submodule.assessmentparameter[0].single.length > 0) {\n                    assess.valueType = \"Single\";\n                    assess.single.threshold =\n                      submodule.assessmentparameter[0].single[0].threshold;\n                    assess.single.url =\n                      submodule.assessmentparameter[0].single[0].url;\n                  } else if (\n                    submodule.assessmentparameter[0].ranges.length > 0\n                  ) {\n                    assess.valueType = \"Range\";\n                    submodule.assessmentparameter[0].ranges.forEach((range) => {\n                      assess.ranges.push({\n                        namerange: range.namerange,\n                        initialvalue: range.initialvalue,\n                        limitvalue: range.limitvalue,\n                        url: range.url,\n                      });\n                    });\n                  }\n                  this.assessmentControl.push(assess);\n                }\n                if (submodule.concepts) {\n                  submodule.concepts.forEach((submoduleConcept) => {\n                    if (submoduleConcept.assessmentparameter.length > 0) {\n                      var assess = {\n                        typeThreshold: parseInt(\n                          submoduleConcept.assessmentparameter[0].typethreshold.split(\n                            \"/\"\n                          )[4]\n                        ),\n                        scopo: parseInt(\n                          submoduleConcept.assessmentparameter[0].scopo.split(\n                            \"/\"\n                          )[4]\n                        ),\n                        fk_element: submoduleConcept.url,\n                        valueType: \"\",\n                        single: {\n                          threshold: \"\",\n                          url: \"\",\n                        },\n                        ranges: [],\n                        url: submoduleConcept.assessmentparameter[0].url,\n                      };\n                      if (\n                        submoduleConcept.assessmentparameter[0].single.length >\n                        0\n                      ) {\n                        assess.valueType = \"Single\";\n                        assess.single.threshold =\n                          submoduleConcept.assessmentparameter[0].single[0].threshold;\n                        assess.single.url =\n                          submoduleConcept.assessmentparameter[0].single[0].url;\n                      } else if (\n                        submoduleConcept.assessmentparameter[0].ranges.length >\n                        0\n                      ) {\n                        assess.valueType = \"Range\";\n                        submoduleConcept.assessmentparameter[0].ranges.forEach(\n                          (range) => {\n                            assess.ranges.push({\n                              namerange: range.namerange,\n                              initialvalue: range.initialvalue,\n                              limitvalue: range.limitvalue,\n                              url: range.url,\n                            });\n                          }\n                        );\n                      }\n                      this.assessmentControl.push(assess);\n                    }\n                  });\n                }\n              });\n            }\n          });\n        }\n      }\n    },\n    async postAssessment() {\n      await this.assessmentControl.forEach(async (assessment) => {\n        var auxAssessment = {\n          typethreshold: `/typethreshold/` + assessment.typeThreshold + `/`,\n          scopo: `/scopo/` + assessment.scopo + `/`,\n          fk_idknowledgedomain: null,\n          fk_idmodule: null,\n          fk_idconcept: null,\n        };\n        if (assessment.fk_element.split(\"/\")[3] === \"knowledgedomain\") {\n          auxAssessment.fk_idknowledgedomain = assessment.fk_element;\n        } else if (assessment.fk_element.split(\"/\")[3] === \"module\") {\n          auxAssessment.fk_idmodule = assessment.fk_element;\n        } else if (assessment.fk_element.split(\"/\")[3] === \"concept\") {\n          auxAssessment.fk_idconcept = assessment.fk_element;\n        }\n\n        if (assessment.url) {\n          await Api()\n            .put(assessment.url, auxAssessment)\n            .then(async function (resposta) {\n              if (assessment.valueType === \"Single\") {\n                if (assessment.ranges) {\n                  assessment.ranges.forEach((range) => {\n                    if (range.url) {\n                      Api().delete(range.url);\n                    }\n                  });\n                }\n                await Api().put(assessment.single.url, {\n                  fk_idassessmentparameter: resposta.data.url,\n                  threshold: assessment.single.threshold,\n                });\n              } else if (assessment.valueType === \"Range\") {\n                if (assessment.single.url) {\n                  Api().delete(assessment.single.url);\n                }\n                assessment.ranges.forEach(async (range) => {\n                  if (range.url) {\n                    await Api().put(range.url, {\n                      namerange: range.namerange,\n                      fk_idassessmentparameter: resposta.data.url,\n                      initialvalue: range.initialvalue,\n                      limitvalue: range.limitvalue,\n                    });\n                  } else {\n                    await Api().post(\"/range/\", {\n                      namerange: range.namerange,\n                      fk_idassessmentparameter: resposta.data.url,\n                      initialvalue: range.initialvalue,\n                      limitvalue: range.limitvalue,\n                    });\n                  }\n                });\n              }\n            });\n        } else {\n          await Api()\n            .post(\"/assessmentparameter/\", auxAssessment)\n            .then(async function (resposta) {\n              if (assessment.valueType === \"Single\") {\n                await Api().post(\"/single/\", {\n                  fk_idassessmentparameter: resposta.data.url,\n                  threshold: assessment.single.threshold,\n                });\n              } else if (assessment.valueType === \"Range\") {\n                assessment.ranges.forEach(async (range) => {\n                  await Api().post(\"/range/\", {\n                    namerange: range.namerange,\n                    fk_idassessmentparameter: resposta.data.url,\n                    initialvalue: range.initialvalue,\n                    limitvalue: range.limitvalue,\n                  });\n                });\n              }\n            });\n        }\n      });\n    },\n    addRange(idAssessment) {\n      this.assessmentControl[idAssessment].ranges.push({\n        namerange: \"\",\n        initialvalue: \"\",\n        limitvalue: \"\",\n        url: \"\",\n      });\n    },\n    async deletaRange(idAssessment, idRange) {\n      if (this.assessmentControl[idAssessment].ranges[idRange].url) {\n        Api().delete(this.assessmentControl[idAssessment].ranges[idRange].url);\n      }\n      if (idRange == 0) {\n        this.assessmentControl[idAssessment].ranges.shift();\n      } else {\n        this.assessmentControl[idAssessment].ranges.splice(idRange, 1);\n      }\n    },\n    addAssessment() {\n      this.assessmentControl.push({\n        typeThreshold: \"\",\n        scopo: \"\",\n        fk_element: \"\",\n        valueType: \"\",\n        single: {\n          threshold: \"\",\n          url: \"\",\n        },\n        ranges: [],\n        url: \"\",\n      });\n    },\n    async deletaAssessment(idAssessment) {\n      if (this.assessmentControl[idAssessment].url !== null) {\n        await Api().delete(this.assessmentControl[idAssessment].url);\n      }\n      if (idAssessment == 0) {\n        this.assessmentControl.shift();\n      } else {\n        this.assessmentControl.splice(idAssessment, 1);\n      }\n    },\n    async deletaSingle(urlSingle) {\n      await Api().delete(urlSingle);\n    },\n    async validate() {\n      if (this.$refs.form.validate()) {\n        var auxLoopValidation = 1;\n        for (var i = 0; i < this.assessmentControl.length; i++) {\n          for (var j = 0; j < this.assessmentControl.length; j++) {\n            if (\n              this.assessmentControl[i].fk_element ===\n                this.assessmentControl[j].fk_element &&\n              i !== j\n            ) {\n              auxLoopValidation = 0;\n              this.messageError =\n                \"Não pode existir mais de um parâmetro de avaliação para o mesmo elemento. Verifique os parâmetros de avaliação \" +\n                (j + 1) +\n                \" e \" +\n                (i + 1) +\n                \".\";\n              this.dialogError = true;\n              break;\n            }\n          }\n        }\n        if (auxLoopValidation === 1) {\n          await this.postAssessment();\n          await this.resetVariables();\n          await this.$emit(\"close_or_save\", \"save\");\n        }\n      }\n    },\n    reset() {\n      this.$emit(\"close_or_save\", \"close\");\n      this.assessmentControl = [];\n    },\n    resetVariables() {\n      this.assessmentControl = [];\n    },\n    resetValidation() {\n      this.$refs.form.resetValidation();\n    },\n  },\n};\n</script>\n"]}]}