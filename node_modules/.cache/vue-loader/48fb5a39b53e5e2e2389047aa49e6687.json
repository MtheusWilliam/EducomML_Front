{"remainingRequest":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vitor/Documentos/EducomML/EducomML_Front/master/src/components/didatic_model/VisibleDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/src/components/didatic_model/VisibleDialog.vue","mtime":1595786402109},{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/cache-loader/dist/cjs.js","mtime":1593613513250},{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/thread-loader/dist/cjs.js","mtime":1593613517896},{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/babel-loader/lib/index.js","mtime":1593613513143},{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/vuetify-loader/lib/loader.js","mtime":1593613518416},{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/cache-loader/dist/cjs.js","mtime":1593613513250},{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/vue-loader/lib/index.js","mtime":1593613518353}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBDb29raWUgZnJvbSAianMtY29va2llIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJWaXNpYmxlRGlhbG9nIiwKICBwcm9wczogWyJkb21haW4iLCAiZGlhbG9nIl0sCiAgZGF0YTogKCkgPT4gKHsKICAgIHZhbGlkOiB0cnVlLAogICAgdHJlZURhdGE6IFtdLAogICAgc2VsZWN0aW9uOiBbXSwKICAgIGVsZW1lbnREYXRhOiBbXSwKICAgIHNjb3BvVHlwZXM6IFsKICAgICAgewogICAgICAgIHRleHQ6ICJBdmFsaWHDp8OjbyIsCiAgICAgICAgdmFsdWU6IDEsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0ZXh0OiAiRG9tw61uaW8iLAogICAgICAgIHZhbHVlOiAyLAogICAgICB9LAogICAgXSwKICAgIHR5cGVzVGhyZXNob2xkOiBbCiAgICAgIHsKICAgICAgICB0ZXh0OiAiUG9yY2VudGFnZW0iLAogICAgICAgIHZhbHVlOiAxLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGV4dDogIkxpdGVyYWwiLAogICAgICAgIHZhbHVlOiAyLAogICAgICB9LAogICAgXSwKICAgIHZhbHVlVHlwZXM6IFsiU2luZ2xlIiwgIlJhbmdlIl0sCiAgICBhc3Nlc3NtZW50Q29udHJvbDogW10sCiAgICBjb25jZXB0c1ByaW9yOiBbXSwKICAgIHByaW9yQ29udHJvbDogW10sCiAgICBwcmlvckxldmVsczogWwogICAgICB7CiAgICAgICAgdGV4dDogIk9icmlnYXTDs3JpbyIsCiAgICAgICAgdmFsdWU6IDEsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0ZXh0OiAiRGVzZWrDoXZlbCIsCiAgICAgICAgdmFsdWU6IDIsCiAgICAgIH0sCiAgICBdLAogICAgZGlhbG9nRXJyb3I6IGZhbHNlLAogICAgbWVzc2FnZUVycm9yOiAiIiwKICAgIG5ld0l0ZW1zOiBbXSwKICAgIGNoZWNrYm94OiB0cnVlLAogIH0pLAogIHdhdGNoOiB7CiAgICBkb21haW46IGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbCA9IFtdOwogICAgICB0aGlzLnByaW9yQ29udHJvbCA9IFtdOwogICAgICBpZiAodGhpcy5kb21haW4pIHsKICAgICAgICB0aGlzLnRyZWVEYXRhID0gW107CiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBbXTsKICAgICAgICBhd2FpdCB0aGlzLmdldEFzc2Vzc21lbnRzKCk7CiAgICAgICAgYXdhaXQgdGhpcy5zZXREb21haW5WYXJpYWJsZXMoKTsKICAgICAgfQogICAgfSwKICAgIGFzc2Vzc21lbnRDb250cm9sOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2wuZm9yRWFjaCgoYXNzZXNzKSA9PiB7CiAgICAgICAgaWYgKGFzc2Vzcy52YWx1ZVR5cGUgPT09ICJTaW5nbGUiKSB7CiAgICAgICAgICBhc3Nlc3MucmFuZ2VzLmZvckVhY2goKHJhbmdlKSA9PiB7CiAgICAgICAgICAgIGlmIChyYW5nZS51cmwpIHsKICAgICAgICAgICAgICB0aGlzLmRlbGV0YVNpbmdsZShyYW5nZS51cmwpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGFzc2Vzcy5yYW5nZXMgPSBbXTsKICAgICAgICB9IGVsc2UgaWYgKGFzc2Vzcy52YWx1ZVR5cGUgPT09ICJSYW5nZSIpIHsKICAgICAgICAgIGlmIChhc3Nlc3Muc2luZ2xlLnVybCkgewogICAgICAgICAgICB0aGlzLmRlbGV0YVNpbmdsZShhc3Nlc3Muc2luZ2xlLnVybCk7CiAgICAgICAgICAgIGFzc2Vzcy5zaW5nbGUudXJsID0gIiI7CiAgICAgICAgICB9CiAgICAgICAgICBhc3Nlc3Muc2luZ2xlLnRocmVzaG9sZCA9ICIiOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogIH0sCiAgbW91bnRlZDogYXN5bmMgZnVuY3Rpb24gKCkgewogICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbCA9IFtdOwogICAgdGhpcy5wcmlvckNvbnRyb2wgPSBbXTsKICAgIGlmICh0aGlzLmRvbWFpbikgewogICAgICB0aGlzLnRyZWVEYXRhID0gW107CiAgICAgIHRoaXMuc2VsZWN0aW9uID0gW107CiAgICAgIGF3YWl0IHRoaXMuZ2V0QXNzZXNzbWVudHMoKTsKICAgICAgYXdhaXQgdGhpcy5zZXREb21haW5WYXJpYWJsZXMoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEFzc2Vzc21lbnRzKCkgewogICAgICAvLyB2YXIgdm0gPSB0aGlzOwogICAgICBpZiAodGhpcy5kb21haW4pIHsKICAgICAgICBpZiAodGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlci5sZW5ndGggPiAwKSB7CiAgICAgICAgICB2YXIgYXNzZXNzID0gewogICAgICAgICAgICB0eXBlVGhyZXNob2xkOiBwYXJzZUludCgKICAgICAgICAgICAgICB0aGlzLmRvbWFpbi5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnR5cGV0aHJlc2hvbGQuc3BsaXQoIi8iKVs0XQogICAgICAgICAgICApLAogICAgICAgICAgICBzY29wbzogcGFyc2VJbnQoCiAgICAgICAgICAgICAgdGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlclswXS5zY29wby5zcGxpdCgiLyIpWzRdCiAgICAgICAgICAgICksCiAgICAgICAgICAgIGZrX2VsZW1lbnQ6IHRoaXMuZG9tYWluLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uZmtfaWRrbm93bGVkZ2Vkb21haW4sCiAgICAgICAgICAgIHZhbHVlVHlwZTogIiIsCiAgICAgICAgICAgIHNpbmdsZTogewogICAgICAgICAgICAgIHRocmVzaG9sZDogIiIsCiAgICAgICAgICAgICAgdXJsOiAiIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmFuZ2VzOiBbXSwKICAgICAgICAgICAgdXJsOiB0aGlzLmRvbWFpbi5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnVybCwKICAgICAgICAgIH07CiAgICAgICAgICBpZiAodGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICBhc3Nlc3MudmFsdWVUeXBlID0gIlNpbmdsZSI7CiAgICAgICAgICAgIGFzc2Vzcy5zaW5nbGUudGhyZXNob2xkID0gdGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGVbMF0udGhyZXNob2xkOwogICAgICAgICAgICBhc3Nlc3Muc2luZ2xlLnVybCA9IHRoaXMuZG9tYWluLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlWzBdLnVybDsKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlclswXS5yYW5nZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBhc3Nlc3MudmFsdWVUeXBlID0gIlJhbmdlIjsKICAgICAgICAgICAgdGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlclswXS5yYW5nZXMuZm9yRWFjaCgocmFuZ2UpID0+IHsKICAgICAgICAgICAgICBhc3Nlc3MucmFuZ2VzLnB1c2goewogICAgICAgICAgICAgICAgbmFtZXJhbmdlOiByYW5nZS5uYW1lcmFuZ2UsCiAgICAgICAgICAgICAgICBpbml0aWFsdmFsdWU6IHJhbmdlLmluaXRpYWx2YWx1ZSwKICAgICAgICAgICAgICAgIGxpbWl0dmFsdWU6IHJhbmdlLmxpbWl0dmFsdWUsCiAgICAgICAgICAgICAgICB1cmw6IHJhbmdlLnVybCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnB1c2goYXNzZXNzKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuZG9tYWluLm1vZHVsZXMpIHsKICAgICAgICAgIHRoaXMuZG9tYWluLm1vZHVsZXMuZm9yRWFjaCgobW9kdWxlKSA9PiB7CiAgICAgICAgICAgIGlmIChtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgdmFyIGFzc2VzcyA9IHsKICAgICAgICAgICAgICAgIHR5cGVUaHJlc2hvbGQ6IHBhcnNlSW50KAogICAgICAgICAgICAgICAgICBtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS50eXBldGhyZXNob2xkLnNwbGl0KCIvIilbNF0KICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBzY29wbzogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgIG1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNjb3BvLnNwbGl0KCIvIilbNF0KICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBma19lbGVtZW50OiBtb2R1bGUudXJsLAogICAgICAgICAgICAgICAgdmFsdWVUeXBlOiAiIiwKICAgICAgICAgICAgICAgIHNpbmdsZTogewogICAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6ICIiLAogICAgICAgICAgICAgICAgICB1cmw6ICIiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJhbmdlczogW10sCiAgICAgICAgICAgICAgICB1cmw6IG1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnVybCwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGlmIChtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgYXNzZXNzLnZhbHVlVHlwZSA9ICJTaW5nbGUiOwogICAgICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS50aHJlc2hvbGQgPQogICAgICAgICAgICAgICAgICBtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGVbMF0udGhyZXNob2xkOwogICAgICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS51cmwgPSBtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGVbMF0udXJsOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0ucmFuZ2VzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGFzc2Vzcy52YWx1ZVR5cGUgPSAiUmFuZ2UiOwogICAgICAgICAgICAgICAgbW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0ucmFuZ2VzLmZvckVhY2goKHJhbmdlKSA9PiB7CiAgICAgICAgICAgICAgICAgIGFzc2Vzcy5yYW5nZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZXJhbmdlOiByYW5nZS5uYW1lcmFuZ2UsCiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbHZhbHVlOiByYW5nZS5pbml0aWFsdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgbGltaXR2YWx1ZTogcmFuZ2UubGltaXR2YWx1ZSwKICAgICAgICAgICAgICAgICAgICB1cmw6IHJhbmdlLnVybCwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbC5wdXNoKGFzc2Vzcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1vZHVsZS5jb25jZXB0cykgewogICAgICAgICAgICAgIG1vZHVsZS5jb25jZXB0cy5mb3JFYWNoKChtb2R1bGVDb25jZXB0KSA9PiB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgdmFyIGFzc2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICB0eXBlVGhyZXNob2xkOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS50eXBldGhyZXNob2xkLnNwbGl0KAogICAgICAgICAgICAgICAgICAgICAgICAiLyIKICAgICAgICAgICAgICAgICAgICAgIClbNF0KICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHNjb3BvOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zY29wby5zcGxpdCgiLyIpWzRdCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBma19lbGVtZW50OiBtb2R1bGVDb25jZXB0LnVybCwKICAgICAgICAgICAgICAgICAgICB2YWx1ZVR5cGU6ICIiLAogICAgICAgICAgICAgICAgICAgIHNpbmdsZTogewogICAgICAgICAgICAgICAgICAgICAgdGhyZXNob2xkOiAiIiwKICAgICAgICAgICAgICAgICAgICAgIHVybDogIiIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByYW5nZXM6IFtdLAogICAgICAgICAgICAgICAgICAgIHVybDogbW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnVybCwKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgaWYgKG1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIGFzc2Vzcy52YWx1ZVR5cGUgPSAiU2luZ2xlIjsKICAgICAgICAgICAgICAgICAgICBhc3Nlc3Muc2luZ2xlLnRocmVzaG9sZCA9CiAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlWzBdLnRocmVzaG9sZDsKICAgICAgICAgICAgICAgICAgICBhc3Nlc3Muc2luZ2xlLnVybCA9CiAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlWzBdLnVybDsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICAgICAgICBtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0ucmFuZ2VzLmxlbmd0aCA+IDAKICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnZhbHVlVHlwZSA9ICJSYW5nZSI7CiAgICAgICAgICAgICAgICAgICAgbW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnJhbmdlcy5mb3JFYWNoKAogICAgICAgICAgICAgICAgICAgICAgKHJhbmdlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2Vzcy5yYW5nZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXJhbmdlOiByYW5nZS5uYW1lcmFuZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbHZhbHVlOiByYW5nZS5pbml0aWFsdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXR2YWx1ZTogcmFuZ2UubGltaXR2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHJhbmdlLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnB1c2goYXNzZXNzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChtb2R1bGVDb25jZXB0LnByaW9ya25vd2xlZGdlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgdGhpcy5wcmlvckNvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZXByaW9ya25vd2xlZGdlOgogICAgICAgICAgICAgICAgICAgICAgbW9kdWxlQ29uY2VwdC5wcmlvcmtub3dsZWRnZVswXS5uYW1lcHJpb3Jrbm93bGVkZ2UsCiAgICAgICAgICAgICAgICAgICAgcHJpb3JsZXZlbDogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVDb25jZXB0LnByaW9ya25vd2xlZGdlWzBdLnByaW9ybGV2ZWwuc3BsaXQoIi8iKVs0XQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgZmtfaWRjb25jZXB0OiBtb2R1bGVDb25jZXB0LnByaW9ya25vd2xlZGdlWzBdLmZrX2lkY29uY2VwdCwKICAgICAgICAgICAgICAgICAgICB1cmw6IG1vZHVsZUNvbmNlcHQucHJpb3Jrbm93bGVkZ2VbMF0udXJsLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobW9kdWxlLnN1Ym1vZHVsZXMpIHsKICAgICAgICAgICAgICBtb2R1bGUuc3VibW9kdWxlcy5mb3JFYWNoKChzdWJtb2R1bGUpID0+IHsKICAgICAgICAgICAgICAgIGlmIChzdWJtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIHZhciBhc3Nlc3MgPSB7CiAgICAgICAgICAgICAgICAgICAgdHlwZVRocmVzaG9sZDogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS50eXBldGhyZXNob2xkLnNwbGl0KAogICAgICAgICAgICAgICAgICAgICAgICAiLyIKICAgICAgICAgICAgICAgICAgICAgIClbNF0KICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHNjb3BvOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNjb3BvLnNwbGl0KCIvIilbNF0KICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIGZrX2VsZW1lbnQ6IHN1Ym1vZHVsZS51cmwsCiAgICAgICAgICAgICAgICAgICAgdmFsdWVUeXBlOiAiIiwKICAgICAgICAgICAgICAgICAgICBzaW5nbGU6IHsKICAgICAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogIiIsCiAgICAgICAgICAgICAgICAgICAgICB1cmw6ICIiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcmFuZ2VzOiBbXSwKICAgICAgICAgICAgICAgICAgICB1cmw6IHN1Ym1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnVybCwKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgaWYgKHN1Ym1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNpbmdsZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnZhbHVlVHlwZSA9ICJTaW5nbGUiOwogICAgICAgICAgICAgICAgICAgIGFzc2Vzcy5zaW5nbGUudGhyZXNob2xkID0KICAgICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNpbmdsZVswXS50aHJlc2hvbGQ7CiAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS51cmwgPQogICAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlWzBdLnVybDsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5yYW5nZXMubGVuZ3RoID4gMAogICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICBhc3Nlc3MudmFsdWVUeXBlID0gIlJhbmdlIjsKICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5yYW5nZXMuZm9yRWFjaCgocmFuZ2UpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIGFzc2Vzcy5yYW5nZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVyYW5nZTogcmFuZ2UubmFtZXJhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsdmFsdWU6IHJhbmdlLmluaXRpYWx2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbGltaXR2YWx1ZTogcmFuZ2UubGltaXR2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiByYW5nZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnB1c2goYXNzZXNzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzdWJtb2R1bGUuY29uY2VwdHMpIHsKICAgICAgICAgICAgICAgICAgc3VibW9kdWxlLmNvbmNlcHRzLmZvckVhY2goKHN1Ym1vZHVsZUNvbmNlcHQpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoc3VibW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBhc3Nlc3MgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVUaHJlc2hvbGQ6IHBhcnNlSW50KAogICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS50eXBldGhyZXNob2xkLnNwbGl0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iCiAgICAgICAgICAgICAgICAgICAgICAgICAgKVs0XQogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICBzY29wbzogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNjb3BvLnNwbGl0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iCiAgICAgICAgICAgICAgICAgICAgICAgICAgKVs0XQogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICBma19lbGVtZW50OiBzdWJtb2R1bGVDb25jZXB0LnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUeXBlOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyZXNob2xkOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICByYW5nZXM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHN1Ym1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS51cmwsCiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlLmxlbmd0aCA+CiAgICAgICAgICAgICAgICAgICAgICAgIDAKICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICBhc3Nlc3MudmFsdWVUeXBlID0gIlNpbmdsZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2Vzcy5zaW5nbGUudGhyZXNob2xkID0KICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlWzBdLnRocmVzaG9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS51cmwgPQogICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGVbMF0udXJsOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnJhbmdlcy5sZW5ndGggPgogICAgICAgICAgICAgICAgICAgICAgICAwCiAgICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnZhbHVlVHlwZSA9ICJSYW5nZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS5yYW5nZXMuZm9yRWFjaCgKICAgICAgICAgICAgICAgICAgICAgICAgICAocmFuZ2UpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2Vzcy5yYW5nZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVyYW5nZTogcmFuZ2UubmFtZXJhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsdmFsdWU6IHJhbmdlLmluaXRpYWx2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXR2YWx1ZTogcmFuZ2UubGltaXR2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiByYW5nZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnB1c2goYXNzZXNzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Ym1vZHVsZUNvbmNlcHQucHJpb3Jrbm93bGVkZ2UubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmlvckNvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVwcmlvcmtub3dsZWRnZToKICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGVDb25jZXB0LnByaW9ya25vd2xlZGdlWzBdLm5hbWVwcmlvcmtub3dsZWRnZSwKICAgICAgICAgICAgICAgICAgICAgICAgcHJpb3JsZXZlbDogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlQ29uY2VwdC5wcmlvcmtub3dsZWRnZVswXS5wcmlvcmxldmVsLnNwbGl0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iCiAgICAgICAgICAgICAgICAgICAgICAgICAgKVs0XQogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZGNvbmNlcHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlQ29uY2VwdC5wcmlvcmtub3dsZWRnZVswXS5ma19pZGNvbmNlcHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc3VibW9kdWxlQ29uY2VwdC5wcmlvcmtub3dsZWRnZVswXS51cmwsCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB0ZXN0KHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZS5sZW5ndGgpIHsKICAgICAgICBpZiAodmFsdWVbMF0uc3BsaXQoIi8iKVs1XSA9PT0gInN1YiIpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoInR5cGUiLCB7IHR5cGU6ICJzdWJtb2R1bG8iLCB1cmw6IHZhbHVlWzBdIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCJ0eXBlIiwgeyB0eXBlOiB2YWx1ZVswXS5zcGxpdCgiLyIpWzNdLCB1cmw6IHZhbHVlWzBdIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNldERvbWFpblZhcmlhYmxlcygpIHsKICAgICAgdGhpcy50cmVlRGF0YSA9IFtdOwogICAgICB0aGlzLmVsZW1lbnREYXRhLnB1c2goewogICAgICAgIHRleHQ6ICJbRE9NSU5JT10gIiArIHRoaXMuZG9tYWluLm5hbWVrbm93bGVkZ2Vkb21haW4sCiAgICAgICAgdmFsdWU6IHRoaXMuZG9tYWluLnVybCwKICAgICAgfSk7CiAgICAgIHZhciBpbmRleG1vZHVsbyA9IDA7CiAgICAgIGlmICh0aGlzLmRvbWFpbi5tb2JpbGVtZWRpYXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5kb21haW4ubW9iaWxlbWVkaWFzLmZvckVhY2goKG1vYmlsZW1lZGlhKSA9PiB7CiAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICBpZDogbW9iaWxlbWVkaWEudXJsLAogICAgICAgICAgICBuYW1lOiAiW01PQklMRU1FRElBXSAiICsgbW9iaWxlbWVkaWEubGFiZWwsCiAgICAgICAgICAgIHZpc2libGU6IG1vYmlsZW1lZGlhLnZpc2libGUsCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy50cmVlRGF0YS5wdXNoKG9iamVjdCk7CiAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOwogICAgICAgICAgfQogICAgICAgICAgaW5kZXhtb2R1bG8rKzsKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAodGhpcy5kb21haW4uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmxlbmd0aCkgewogICAgICAgIHRoaXMuZG9tYWluLmluc3RydWN0aW9uYWxlbGVtZW50cy5mb3JFYWNoKChpbnN0cnVjdGlvbmFsZWxlbWVudCkgPT4gewogICAgICAgICAgaWYgKAogICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudC5ma19pbnN0cnVjdGlvbmFsZWxlbWVudHR5cGUuc3BsaXQoIi8iKVs0XSAhPT0gNAogICAgICAgICAgKSB7CiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7CiAgICAgICAgICAgICAgaWQ6IGluc3RydWN0aW9uYWxlbGVtZW50LnVybCwKICAgICAgICAgICAgICBuYW1lOiAiW0lOU1RSVUNUSU9OQUwgRUxFTUVOVF0gIiArIGluc3RydWN0aW9uYWxlbGVtZW50LmxhYmVsLAogICAgICAgICAgICAgIHZpc2libGU6IGluc3RydWN0aW9uYWxlbGVtZW50LnZpc2libGUsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMudHJlZURhdGEucHVzaChvYmplY3QpOwogICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaW5kZXhtb2R1bG8rKzsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmRvbWFpbi5tb2R1bGVzKSAmJiB0aGlzLmRvbWFpbi5tb2R1bGVzLmxlbmd0aCkgewogICAgICAgIHRoaXMuZG9tYWluLm1vZHVsZXMuZm9yRWFjaCgobW9kdWxvKSA9PiB7CiAgICAgICAgICBpZiAobW9kdWxvLmZrX2lkbW9kdWxlID09PSBudWxsKSB7CiAgICAgICAgICAgIHZhciBpbmRleHN1Ym1vZHVsbyA9IDA7CiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7CiAgICAgICAgICAgICAgaWQ6IG1vZHVsby51cmwsCiAgICAgICAgICAgICAgbmFtZTogIltNT0RVTE9dICIgKyBtb2R1bG8ubmFtZW1vZHVsZSwKICAgICAgICAgICAgICB2aXNpYmxlOiBtb2R1bG8udmlzaWJsZSwKICAgICAgICAgICAgICBjaGlsZHJlbjogW10sCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMudHJlZURhdGEucHVzaChvYmplY3QpOwogICAgICAgICAgICB0aGlzLmVsZW1lbnREYXRhLnB1c2goewogICAgICAgICAgICAgIHRleHQ6IG9iamVjdC5uYW1lLAogICAgICAgICAgICAgIHZhbHVlOiBvYmplY3QuaWQsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1vZHVsby5tb2JpbGVtZWRpYXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgbW9kdWxvLm1vYmlsZW1lZGlhcy5mb3JFYWNoKChtb2JpbGVtZWRpYSkgPT4gewogICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsKICAgICAgICAgICAgICAgICAgaWQ6IG1vYmlsZW1lZGlhLnVybCwKICAgICAgICAgICAgICAgICAgbmFtZTogIltNT0JJTEVNRURJQV0gIiArIG1vYmlsZW1lZGlhLmxhYmVsLAogICAgICAgICAgICAgICAgICB2aXNpYmxlOiBtb2JpbGVtZWRpYS52aXNpYmxlLAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgewogICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpbmRleHN1Ym1vZHVsbysrOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAobW9kdWxvLmluc3RydWN0aW9uYWxlbGVtZW50cy5sZW5ndGgpIHsKICAgICAgICAgICAgICBtb2R1bG8uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmZvckVhY2goKGluc3RydWN0aW9uYWxlbGVtZW50KSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uYWxlbGVtZW50LmZrX2luc3RydWN0aW9uYWxlbGVtZW50dHlwZS5zcGxpdCgKICAgICAgICAgICAgICAgICAgICAiLyIKICAgICAgICAgICAgICAgICAgKVs0XSAhPT0gNAogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGluc3RydWN0aW9uYWxlbGVtZW50LnVybCwKICAgICAgICAgICAgICAgICAgICBuYW1lOgogICAgICAgICAgICAgICAgICAgICAgIltJTlNUUlVDVElPTkFMIEVMRU1FTlRdICIgKyBpbnN0cnVjdGlvbmFsZWxlbWVudC5sYWJlbCwKICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBpbnN0cnVjdGlvbmFsZWxlbWVudC52aXNpYmxlLAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpbmRleHN1Ym1vZHVsbysrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAobW9kdWxvLnN1Ym1vZHVsZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgdmFyIGluZGV4Y29uY2VpdG8gPSAwOwogICAgICAgICAgICAgIG1vZHVsby5zdWJtb2R1bGVzLmZvckVhY2goKHN1Ym1vZHVsbykgPT4gewogICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsKICAgICAgICAgICAgICAgICAgaWQ6IHN1Ym1vZHVsby51cmwsCiAgICAgICAgICAgICAgICAgIG5hbWU6ICJbU1VCTU9EVUxPXSAiICsgc3VibW9kdWxvLm5hbWVtb2R1bGUsCiAgICAgICAgICAgICAgICAgIHZpc2libGU6IHN1Ym1vZHVsby52aXNpYmxlLAogICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW4ucHVzaChvYmplY3QpOwogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50RGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgdGV4dDogb2JqZWN0Lm5hbWUsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBvYmplY3QuaWQsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgewogICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHN1Ym1vZHVsby5tb2JpbGVtZWRpYXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsby5tb2JpbGVtZWRpYXMuZm9yRWFjaCgobW9iaWxlbWVkaWEpID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICAgICAgaWQ6IG1vYmlsZW1lZGlhLnVybCwKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJbTU9CSUxFTUVESUFdICIgKyBtb2JpbGVtZWRpYS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IG1vYmlsZW1lZGlhLnZpc2libGUsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsKICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvCiAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8rKzsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHN1Ym1vZHVsby5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsby5pbnN0cnVjdGlvbmFsZWxlbWVudHMuZm9yRWFjaCgKICAgICAgICAgICAgICAgICAgICAoaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpbnN0cnVjdGlvbmFsZWxlbWVudC51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgIltJTlNUUlVDVElPTkFMIEVMRU1FTlRdICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uYWxlbGVtZW50LmxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBpbnN0cnVjdGlvbmFsZWxlbWVudC52aXNpYmxlLAogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWwogICAgICAgICAgICAgICAgICAgICAgICBpbmRleHN1Ym1vZHVsbwogICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bysrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoc3VibW9kdWxvLmNvbmNlcHRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBzdWJtb2R1bG8uY29uY2VwdHMuZm9yRWFjaCgoY29uY2VpdG8pID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbmNlaXRvLnVybCwKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJbQ09OQ0VJVE9dICIgKyBjb25jZWl0by5uYW1lY29uY2VwdCwKICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGNvbmNlaXRvLnZpc2libGUsCiAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsKICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvCiAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBvYmplY3QubmFtZSwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvYmplY3QuaWQsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29uY2VwdHNQcmlvci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG9iamVjdC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9iamVjdC5pZCwKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmNlaXRvLm1vYmlsZW1lZGlhcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbmNlaXRvLm1vYmlsZW1lZGlhcy5mb3JFYWNoKChtb2JpbGVtZWRpYSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtb2JpbGVtZWRpYS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogIltNT0JJTEVNRURJQV0gIiArIG1vYmlsZW1lZGlhLmxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IG1vYmlsZW1lZGlhLnZpc2libGUsCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWwogICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvCiAgICAgICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW5baW5kZXhjb25jZWl0b10uY2hpbGRyZW4ucHVzaChvYmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmNlaXRvLmluc3RydWN0aW9uYWxlbGVtZW50cy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbmNlaXRvLmluc3RydWN0aW9uYWxlbGVtZW50cy5mb3JFYWNoKAogICAgICAgICAgICAgICAgICAgICAgICAoaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGluc3RydWN0aW9uYWxlbGVtZW50LnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJbSU5TVFJVQ1RJT05BTCBFTEVNRU5UXSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBpbnN0cnVjdGlvbmFsZWxlbWVudC52aXNpYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleHN1Ym1vZHVsbwogICAgICAgICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW5baW5kZXhjb25jZWl0b10uY2hpbGRyZW4ucHVzaChvYmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChjb25jZWl0by5pbmZvcm1hdGlvbml0ZW1zLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgY29uY2VpdG8uaW5mb3JtYXRpb25pdGVtcy5mb3JFYWNoKChwcm9jZWR1cmUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICAgIHByb2NlZHVyZS5ma19pbmZvcm1hdGlvbml0ZW10eXBlID09PQogICAgICAgICAgICAgICAgICAgICAgICAgICJodHRwczovL2VkdWNvbW1sLWJhY2suaGVyb2t1YXBwLmNvbS9pbmZvcm1hdGlvbml0ZW10eXBlLzQvIgogICAgICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHByb2NlZHVyZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiW1BST0NFRElNRU5UT10gIiArIHByb2NlZHVyZS5uYW1laW5mb3JtYXRpb25pdGVtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogcHJvY2VkdXJlLnZpc2libGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvCiAgICAgICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbltpbmRleGNvbmNlaXRvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8rKzsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpbmRleHN1Ym1vZHVsbysrOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtb2R1bG8uY29uY2VwdHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgaWYgKGluZGV4c3VibW9kdWxvID4gMCkgewogICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0byA9IGluZGV4c3VibW9kdWxvOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvID0gMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbW9kdWxvLmNvbmNlcHRzLmZvckVhY2goKGNvbmNlaXRvKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICBpZDogY29uY2VpdG8udXJsLAogICAgICAgICAgICAgICAgICBuYW1lOiAiW0NPTkNFSVRPXSAiICsgY29uY2VpdG8ubmFtZWNvbmNlcHQsCiAgICAgICAgICAgICAgICAgIHZpc2libGU6IGNvbmNlaXRvLnZpc2libGUsCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CgogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50RGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgdGV4dDogb2JqZWN0Lm5hbWUsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBvYmplY3QuaWQsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgewogICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmNvbmNlcHRzUHJpb3IucHVzaCh7CiAgICAgICAgICAgICAgICAgIHRleHQ6IG9iamVjdC5uYW1lLAogICAgICAgICAgICAgICAgICB2YWx1ZTogb2JqZWN0LmlkLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAoY29uY2VpdG8ubW9iaWxlbWVkaWFzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBjb25jZWl0by5tb2JpbGVtZWRpYXMuZm9yRWFjaCgobW9iaWxlbWVkaWEpID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICAgICAgaWQ6IG1vYmlsZW1lZGlhLnVybCwKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJbTU9CSUxFTUVESUFdICIgKyBtb2JpbGVtZWRpYS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IG1vYmlsZW1lZGlhLnZpc2libGUsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsKICAgICAgICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8KICAgICAgICAgICAgICAgICAgICBdLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChjb25jZWl0by5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGNvbmNlaXRvLmluc3RydWN0aW9uYWxlbGVtZW50cy5mb3JFYWNoKAogICAgICAgICAgICAgICAgICAgIChpbnN0cnVjdGlvbmFsZWxlbWVudCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGluc3RydWN0aW9uYWxlbGVtZW50LnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAiW0lOU1RSVUNUSU9OQUwgRUxFTUVOVF0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGluc3RydWN0aW9uYWxlbGVtZW50LnZpc2libGUsCiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8KICAgICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW4ucHVzaChvYmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGNvbmNlaXRvLmluZm9ybWF0aW9uaXRlbXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGNvbmNlaXRvLmluZm9ybWF0aW9uaXRlbXMuZm9yRWFjaCgocHJvY2VkdXJlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlLmZrX2luZm9ybWF0aW9uaXRlbXR5cGUgPT09CiAgICAgICAgICAgICAgICAgICAgICAiaHR0cHM6Ly9lZHVjb21tbC1iYWNrLmhlcm9rdWFwcC5jb20vaW5mb3JtYXRpb25pdGVtdHlwZS80LyIKICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwcm9jZWR1cmUudXJsLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiW1BST0NFRElNRU5UT10gIiArIHByb2NlZHVyZS5uYW1laW5mb3JtYXRpb25pdGVtLAogICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBwcm9jZWR1cmUudmlzaWJsZSwKICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsKICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bwogICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvKys7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaW5kZXhtb2R1bG8rKzsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHBvc3RBc3Nlc3NtZW50KCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB2YXIgaGVhZGVyID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldEhlYWRlciIpOwogICAgICBhd2FpdCB0aGlzLmFzc2Vzc21lbnRDb250cm9sLmZvckVhY2goYXN5bmMgKGFzc2Vzc21lbnQpID0+IHsKICAgICAgICB2YXIgYXV4QXNzZXNzbWVudCA9IHsKICAgICAgICAgIHR5cGV0aHJlc2hvbGQ6CiAgICAgICAgICAgIGBodHRwczovL2VkdWNvbW1sLWJhY2suaGVyb2t1YXBwLmNvbS90eXBldGhyZXNob2xkL2AgKwogICAgICAgICAgICBhc3Nlc3NtZW50LnR5cGVUaHJlc2hvbGQgKwogICAgICAgICAgICBgL2AsCiAgICAgICAgICBzY29wbzogYGh0dHBzOi8vZWR1Y29tbWwtYmFjay5oZXJva3VhcHAuY29tL3Njb3BvL2AgKyBhc3Nlc3NtZW50LnNjb3BvICsgYC9gLAogICAgICAgICAgZmtfaWRrbm93bGVkZ2Vkb21haW46IG51bGwsCiAgICAgICAgICBma19pZG1vZHVsZTogbnVsbCwKICAgICAgICAgIGZrX2lkY29uY2VwdDogbnVsbCwKICAgICAgICB9OwogICAgICAgIGlmIChhc3Nlc3NtZW50LmZrX2VsZW1lbnQuc3BsaXQoIi8iKVszXSA9PT0gImtub3dsZWRnZWRvbWFpbiIpIHsKICAgICAgICAgIGF1eEFzc2Vzc21lbnQuZmtfaWRrbm93bGVkZ2Vkb21haW4gPSBhc3Nlc3NtZW50LmZrX2VsZW1lbnQ7CiAgICAgICAgfSBlbHNlIGlmIChhc3Nlc3NtZW50LmZrX2VsZW1lbnQuc3BsaXQoIi8iKVszXSA9PT0gIm1vZHVsZSIpIHsKICAgICAgICAgIGF1eEFzc2Vzc21lbnQuZmtfaWRtb2R1bGUgPSBhc3Nlc3NtZW50LmZrX2VsZW1lbnQ7CiAgICAgICAgfSBlbHNlIGlmIChhc3Nlc3NtZW50LmZrX2VsZW1lbnQuc3BsaXQoIi8iKVszXSA9PT0gImNvbmNlcHQiKSB7CiAgICAgICAgICBhdXhBc3Nlc3NtZW50LmZrX2lkY29uY2VwdCA9IGFzc2Vzc21lbnQuZmtfZWxlbWVudDsKICAgICAgICB9CgogICAgICAgIGlmIChhc3Nlc3NtZW50LnVybCkgewogICAgICAgICAgYXdhaXQgdGhpcy5heGlvcwogICAgICAgICAgICAucHV0KGFzc2Vzc21lbnQudXJsLCBhdXhBc3Nlc3NtZW50LCBoZWFkZXIpCiAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgewogICAgICAgICAgICAgIGlmIChhc3Nlc3NtZW50LnZhbHVlVHlwZSA9PT0gIlNpbmdsZSIpIHsKICAgICAgICAgICAgICAgIGlmIChhc3Nlc3NtZW50LnJhbmdlcykgewogICAgICAgICAgICAgICAgICBhc3Nlc3NtZW50LnJhbmdlcy5mb3JFYWNoKChyYW5nZSkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZS51cmwpIHsKICAgICAgICAgICAgICAgICAgICAgIHZtLmF4aW9zLmRlbGV0ZShyYW5nZS51cmwsIGhlYWRlcik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGF3YWl0IHZtLmF4aW9zLnB1dCgKICAgICAgICAgICAgICAgICAgYXNzZXNzbWVudC5zaW5nbGUudXJsLAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZmtfaWRhc3Nlc3NtZW50cGFyYW1ldGVyOiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IGFzc2Vzc21lbnQuc2luZ2xlLnRocmVzaG9sZCwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgaGVhZGVyCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNzZXNzbWVudC52YWx1ZVR5cGUgPT09ICJSYW5nZSIpIHsKICAgICAgICAgICAgICAgIGlmIChhc3Nlc3NtZW50LnNpbmdsZS51cmwpIHsKICAgICAgICAgICAgICAgICAgdm0uYXhpb3MuZGVsZXRlKGFzc2Vzc21lbnQuc2luZ2xlLnVybCwgaGVhZGVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGFzc2Vzc21lbnQucmFuZ2VzLmZvckVhY2goYXN5bmMgKHJhbmdlKSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmIChyYW5nZS51cmwpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCB2bS5heGlvcy5wdXQoCiAgICAgICAgICAgICAgICAgICAgICByYW5nZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVyYW5nZTogcmFuZ2UubmFtZXJhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICBma19pZGFzc2Vzc21lbnRwYXJhbWV0ZXI6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsdmFsdWU6IHJhbmdlLmluaXRpYWx2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbGltaXR2YWx1ZTogcmFuZ2UubGltaXR2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IHZtLmF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICAiaHR0cHM6Ly9lZHVjb21tbC1iYWNrLmhlcm9rdWFwcC5jb20vcmFuZ2UvIiwKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXJhbmdlOiByYW5nZS5uYW1lcmFuZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkYXNzZXNzbWVudHBhcmFtZXRlcjogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWx2YWx1ZTogcmFuZ2UuaW5pdGlhbHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBsaW1pdHZhbHVlOiByYW5nZS5saW1pdHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcgogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF3YWl0IHRoaXMuYXhpb3MKICAgICAgICAgICAgLnBvc3QoCiAgICAgICAgICAgICAgImh0dHBzOi8vZWR1Y29tbWwtYmFjay5oZXJva3VhcHAuY29tL2Fzc2Vzc21lbnRwYXJhbWV0ZXIvIiwKICAgICAgICAgICAgICBhdXhBc3Nlc3NtZW50LAogICAgICAgICAgICAgIGhlYWRlcgogICAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgewogICAgICAgICAgICAgIGlmIChhc3Nlc3NtZW50LnZhbHVlVHlwZSA9PT0gIlNpbmdsZSIpIHsKICAgICAgICAgICAgICAgIGF3YWl0IHZtLmF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAgICJodHRwczovL2VkdWNvbW1sLWJhY2suaGVyb2t1YXBwLmNvbS9zaW5nbGUvIiwKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGZrX2lkYXNzZXNzbWVudHBhcmFtZXRlcjogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgdGhyZXNob2xkOiBhc3Nlc3NtZW50LnNpbmdsZS50aHJlc2hvbGQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGhlYWRlcgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFzc2Vzc21lbnQudmFsdWVUeXBlID09PSAiUmFuZ2UiKSB7CiAgICAgICAgICAgICAgICBhc3Nlc3NtZW50LnJhbmdlcy5mb3JFYWNoKGFzeW5jIChyYW5nZSkgPT4gewogICAgICAgICAgICAgICAgICBhd2FpdCB2bS5heGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICJodHRwczovL2VkdWNvbW1sLWJhY2suaGVyb2t1YXBwLmNvbS9yYW5nZS8iLAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIG5hbWVyYW5nZTogcmFuZ2UubmFtZXJhbmdlLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRhc3Nlc3NtZW50cGFyYW1ldGVyOiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWx2YWx1ZTogcmFuZ2UuaW5pdGlhbHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgbGltaXR2YWx1ZTogcmFuZ2UubGltaXR2YWx1ZSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGhlYWRlcgogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIHBvc3RQcmlvcktub3dsZWRnZXMoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciBoZWFkZXIgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0SGVhZGVyIik7CiAgICAgIGF3YWl0IHRoaXMucHJpb3JDb250cm9sLmZvckVhY2goYXN5bmMgKHByaW9yKSA9PiB7CiAgICAgICAgaWYgKHByaW9yLnVybCkgewogICAgICAgICAgYXdhaXQgdm0uYXhpb3MucHV0KAogICAgICAgICAgICBwcmlvci51cmwsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBuYW1lcHJpb3Jrbm93bGVkZ2U6IHByaW9yLm5hbWVwcmlvcmtub3dsZWRnZSwKICAgICAgICAgICAgICBwcmlvcmxldmVsOgogICAgICAgICAgICAgICAgYGh0dHBzOi8vZWR1Y29tbWwtYmFjay5oZXJva3VhcHAuY29tL3ByaW9ybGV2ZWwvYCArIHByaW9yLnByaW9ybGV2ZWwgKyBgL2AsCiAgICAgICAgICAgICAgZmtfaWRjb25jZXB0OiBwcmlvci5ma19pZGNvbmNlcHQsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGhlYWRlcgogICAgICAgICAgKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXdhaXQgdm0uYXhpb3MucG9zdCgKICAgICAgICAgICAgYGh0dHBzOi8vZWR1Y29tbWwtYmFjay5oZXJva3VhcHAuY29tL3ByaW9ya25vd2xlZGdlL2AsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBuYW1lcHJpb3Jrbm93bGVkZ2U6IHByaW9yLm5hbWVwcmlvcmtub3dsZWRnZSwKICAgICAgICAgICAgICBwcmlvcmxldmVsOgogICAgICAgICAgICAgICAgYGh0dHBzOi8vZWR1Y29tbWwtYmFjay5oZXJva3VhcHAuY29tL3ByaW9ybGV2ZWwvYCArIHByaW9yLnByaW9ybGV2ZWwgKyBgL2AsCiAgICAgICAgICAgICAgZmtfaWRjb25jZXB0OiBwcmlvci5ma19pZGNvbmNlcHQsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGhlYWRlcgogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIHB1dFZpc2libGUoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciBjc3JmdG9rZW4gPSBDb29raWUuZ2V0KCJjc3JmdG9rZW4iKTsKICAgICAgdmFyIGhlYWRlcnMgPSB7CiAgICAgICAgIlgtQ1NSRlRPS0VOIjogY3NyZnRva2VuLAogICAgICB9OwogICAgICB0aGlzLnRyZWVEYXRhLmZvckVhY2goKGVsZW1lbnQpID0+IHsKICAgICAgICBpZiAoCiAgICAgICAgICBlbGVtZW50LnZpc2libGUgPT09IHRydWUgJiYKICAgICAgICAgICF0aGlzLnNlbGVjdGlvbi5maW5kKChmaW5kRWxlbWVudCkgPT4gZmluZEVsZW1lbnQuaWQgPT09IGVsZW1lbnQuaWQpCiAgICAgICAgKSB7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucGF0Y2goCiAgICAgICAgICAgICAgZWxlbWVudC5pZCwKICAgICAgICAgICAgICB7IGhlYWRlcnM6IGhlYWRlcnMgfSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgewogICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOwogICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsKICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wdXQoZWxlbWVudC5pZCwgYXV4LCB7CiAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICBlbGVtZW50LnZpc2libGUgPT09IGZhbHNlICYmCiAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5maW5kKChmaW5kRWxlbWVudCkgPT4gZmluZEVsZW1lbnQuaWQgPT09IGVsZW1lbnQuaWQpCiAgICAgICAgKSB7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAucGF0Y2goCiAgICAgICAgICAgICAgZWxlbWVudC5pZCwKICAgICAgICAgICAgICB7IGhlYWRlcnM6IGhlYWRlcnMgfSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgewogICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOwogICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsKICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dChlbGVtZW50LmlkLCBhdXgsIHsKICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVsZW1lbnQuY2hpbGRyZW4pICYmIGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICBlbGVtZW50LmNoaWxkcmVuLmZvckVhY2goKGVsZW1lbnQyKSA9PiB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICBlbGVtZW50Mi52aXNpYmxlID09PSB0cnVlICYmCiAgICAgICAgICAgICAgIXRoaXMuc2VsZWN0aW9uLmZpbmQoCiAgICAgICAgICAgICAgICAoZmluZEVsZW1lbnQyKSA9PiBmaW5kRWxlbWVudDIuaWQgPT09IGVsZW1lbnQyLmlkCiAgICAgICAgICAgICAgKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgICAgLnBhdGNoKAogICAgICAgICAgICAgICAgICBlbGVtZW50Mi5pZCwKICAgICAgICAgICAgICAgICAgeyBoZWFkZXJzOiBoZWFkZXJzIH0sCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgewogICAgICAgICAgICAgICAgICB2YXIgYXV4ID0gcmVzcG9zdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKChhdHJpYnV0bykgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7CiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgewogICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7CiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsKICAgICAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dChlbGVtZW50Mi5pZCwgYXV4LCB7CiAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICAgIGVsZW1lbnQyLnZpc2libGUgPT09IGZhbHNlICYmCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZmluZCgKICAgICAgICAgICAgICAgIChmaW5kRWxlbWVudDIpID0+IGZpbmRFbGVtZW50Mi5pZCA9PT0gZWxlbWVudDIuaWQKICAgICAgICAgICAgICApCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgICAucGF0Y2goCiAgICAgICAgICAgICAgICAgIGVsZW1lbnQyLmlkLAogICAgICAgICAgICAgICAgICB7IGhlYWRlcnM6IGhlYWRlcnMgfSwKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24gKHJlc3Bvc3RhKSB7CiAgICAgICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOwogICAgICAgICAgICAgICAgICBhd2FpdCBPYmplY3Qua2V5cyhhdXgpLmZvckVhY2goKGF0cmlidXRvKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsKICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ1cmwiKSB7CiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsKICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgewogICAgICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wdXQoZWxlbWVudDIuaWQsIGF1eCwgewogICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZWxlbWVudDIuY2hpbGRyZW4pICYmIGVsZW1lbnQyLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgICAgIGVsZW1lbnQyLmNoaWxkcmVuLmZvckVhY2goKGVsZW1lbnQzKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgIGVsZW1lbnQzLnZpc2libGUgPT09IHRydWUgJiYKICAgICAgICAgICAgICAgICAgIXRoaXMuc2VsZWN0aW9uLmZpbmQoCiAgICAgICAgICAgICAgICAgICAgKGZpbmRFbGVtZW50MykgPT4gZmluZEVsZW1lbnQzLmlkID09PSBlbGVtZW50My5pZAogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgICAgICAucGF0Y2goCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50My5pZCwKICAgICAgICAgICAgICAgICAgICAgIHsgaGVhZGVyczogaGVhZGVycyB9LAogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGF1eCA9IHJlc3Bvc3RhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBPYmplY3Qua2V5cyhhdXgpLmZvckVhY2goKGF0cmlidXRvKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ1cmwiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG9bMF0gKyBhdHJpYnV0b1sxXSA9PT0gImlkIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhdXgudmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dChlbGVtZW50My5pZCwgYXV4LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICAgICAgZWxlbWVudDMudmlzaWJsZSA9PT0gZmFsc2UgJiYKICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZmluZCgKICAgICAgICAgICAgICAgICAgICAoZmluZEVsZW1lbnQzKSA9PiBmaW5kRWxlbWVudDMuaWQgPT09IGVsZW1lbnQzLmlkCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgICAgICAgIC5wYXRjaCgKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQzLmlkLAogICAgICAgICAgICAgICAgICAgICAgeyBoZWFkZXJzOiBoZWFkZXJzIH0sCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24gKHJlc3Bvc3RhKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgYXV4ID0gcmVzcG9zdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wdXQoZWxlbWVudDMuaWQsIGF1eCwgewogICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoZWxlbWVudDMuY2hpbGRyZW4pICYmCiAgICAgICAgICAgICAgICAgIGVsZW1lbnQzLmNoaWxkcmVuLmxlbmd0aAogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIGVsZW1lbnQzLmNoaWxkcmVuLmZvckVhY2goKGVsZW1lbnQ0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDQudmlzaWJsZSA9PT0gdHJ1ZSAmJgogICAgICAgICAgICAgICAgICAgICAgIXRoaXMuc2VsZWN0aW9uLmZpbmQoCiAgICAgICAgICAgICAgICAgICAgICAgIChmaW5kRWxlbWVudDQpID0+IGZpbmRFbGVtZW50NC5pZCA9PT0gZWxlbWVudDQuaWQKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgICAgICAgICAgIC5wYXRjaCgKICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50NC5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICB7IGhlYWRlcnM6IGhlYWRlcnMgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wdXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50NC5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50NC52aXNpYmxlID09PSBmYWxzZSAmJgogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZmluZCgKICAgICAgICAgICAgICAgICAgICAgICAgKGZpbmRFbGVtZW50NCkgPT4gZmluZEVsZW1lbnQ0LmlkID09PSBlbGVtZW50NC5pZAogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgICAgICAgICAgLnBhdGNoKAogICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ0LmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgIHsgaGVhZGVyczogaGVhZGVycyB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24gKHJlc3Bvc3RhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF1eCA9IHJlc3Bvc3RhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKChhdHJpYnV0bykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG9bMF0gKyBhdHJpYnV0b1sxXSA9PT0gImlkIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXgudmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDQuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1eCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBhd2FpdCBzZXRUaW1lb3V0KGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgICAgICB2bS4kZW1pdCgiY2xvc2Vfb3Jfc2F2ZSIsICJjbG9zZSIpOwogICAgICB9LCAzMDApOwogICAgfSwKCiAgICBkZXNlbGVjdEFsbCgpIHsKICAgICAgdGhpcy5zZWxlY3Rpb24gPSBbXTsKICAgIH0sCiAgICBzZWxlY3RBbGwoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHRoaXMuc2VsZWN0aW9uID0gW107CiAgICAgIHRoaXMudHJlZURhdGEuZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgICAgIHZtLnNlbGVjdGlvbi5wdXNoKGVsZW1lbnQpOwogICAgICAgIGlmIChlbGVtZW50LmNoaWxkcmVuKSB7CiAgICAgICAgICBlbGVtZW50LmNoaWxkcmVuLmZvckVhY2goKGVsZW1lbnQyKSA9PiB7CiAgICAgICAgICAgIHZtLnNlbGVjdGlvbi5wdXNoKGVsZW1lbnQyKTsKICAgICAgICAgICAgaWYgKGVsZW1lbnQyLmNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgZWxlbWVudDIuY2hpbGRyZW4uZm9yRWFjaCgoZWxlbWVudDMpID0+IHsKICAgICAgICAgICAgICAgIHZtLnNlbGVjdGlvbi5wdXNoKGVsZW1lbnQzKTsKICAgICAgICAgICAgICAgIGlmIChlbGVtZW50My5jaGlsZHJlbikgewogICAgICAgICAgICAgICAgICBlbGVtZW50My5jaGlsZHJlbi5mb3JFYWNoKChlbGVtZW50NCkgPT4gewogICAgICAgICAgICAgICAgICAgIHZtLnNlbGVjdGlvbi5wdXNoKGVsZW1lbnQ0KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYWRkUmFuZ2UoaWRBc3Nlc3NtZW50KSB7CiAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2xbaWRBc3Nlc3NtZW50XS5yYW5nZXMucHVzaCh7CiAgICAgICAgbmFtZXJhbmdlOiAiIiwKICAgICAgICBpbml0aWFsdmFsdWU6ICIiLAogICAgICAgIGxpbWl0dmFsdWU6ICIiLAogICAgICAgIHVybDogIiIsCiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGRlbGV0YVJhbmdlKGlkQXNzZXNzbWVudCwgaWRSYW5nZSkgewogICAgICBpZiAodGhpcy5hc3Nlc3NtZW50Q29udHJvbFtpZEFzc2Vzc21lbnRdLnJhbmdlc1tpZFJhbmdlXS51cmwpIHsKICAgICAgICB2YXIgaGVhZGVyID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldEhlYWRlciIpOwogICAgICAgIHRoaXMuYXhpb3MuZGVsZXRlKAogICAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbFtpZEFzc2Vzc21lbnRdLnJhbmdlc1tpZFJhbmdlXS51cmwsCiAgICAgICAgICBoZWFkZXIKICAgICAgICApOwogICAgICB9CiAgICAgIGlmIChpZFJhbmdlID09IDApIHsKICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sW2lkQXNzZXNzbWVudF0ucmFuZ2VzLnNoaWZ0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbFtpZEFzc2Vzc21lbnRdLnJhbmdlcy5zcGxpY2UoaWRSYW5nZSwgMSk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRBc3Nlc3NtZW50KCkgewogICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnB1c2goewogICAgICAgIHR5cGVUaHJlc2hvbGQ6ICIiLAogICAgICAgIHNjb3BvOiAiIiwKICAgICAgICBma19lbGVtZW50OiAiIiwKICAgICAgICB2YWx1ZVR5cGU6ICIiLAogICAgICAgIHNpbmdsZTogewogICAgICAgICAgdGhyZXNob2xkOiAiIiwKICAgICAgICAgIHVybDogIiIsCiAgICAgICAgfSwKICAgICAgICByYW5nZXM6IFtdLAogICAgICAgIHVybDogIiIsCiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGRlbGV0YUFzc2Vzc21lbnQoaWRBc3Nlc3NtZW50KSB7CiAgICAgIGlmICh0aGlzLmFzc2Vzc21lbnRDb250cm9sW2lkQXNzZXNzbWVudF0udXJsICE9PSBudWxsKSB7CiAgICAgICAgdmFyIGhlYWRlciA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRIZWFkZXIiKTsKICAgICAgICBhd2FpdCB0aGlzLmF4aW9zLmRlbGV0ZSgKICAgICAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2xbaWRBc3Nlc3NtZW50XS51cmwsCiAgICAgICAgICBoZWFkZXIKICAgICAgICApOwogICAgICB9CiAgICAgIGlmIChpZEFzc2Vzc21lbnQgPT0gMCkgewogICAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2wuc2hpZnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnNwbGljZShpZEFzc2Vzc21lbnQsIDEpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZGVsZXRhU2luZ2xlKHVybFNpbmdsZSkgewogICAgICB2YXIgaGVhZGVyID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldEhlYWRlciIpOwogICAgICBhd2FpdCB0aGlzLmF4aW9zLmRlbGV0ZSh1cmxTaW5nbGUsIGhlYWRlcik7CiAgICB9LAogICAgYWRkUHJpb3JLbm93bGVkZ2UoKSB7CiAgICAgIHRoaXMucHJpb3JDb250cm9sLnB1c2goewogICAgICAgIG5hbWVwcmlvcmtub3dsZWRnZTogIiIsCiAgICAgICAgcHJpb3JsZXZlbDogIiIsCiAgICAgICAgZmtfaWRjb25jZXB0OiAiIiwKICAgICAgICB1cmw6ICIiLAogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBkZWxldGFQcmlvcktub3dsZWRnZShpZFByaW9yKSB7CiAgICAgIGlmICh0aGlzLnByaW9yQ29udHJvbFtpZFByaW9yXS51cmwpIHsKICAgICAgICB2YXIgaGVhZGVyID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldEhlYWRlciIpOwogICAgICAgIGF3YWl0IHRoaXMuYXhpb3MuZGVsZXRlKHRoaXMucHJpb3JDb250cm9sW2lkUHJpb3JdLnVybCwgaGVhZGVyKTsKICAgICAgfQogICAgICBpZiAoaWRQcmlvciA9PSAwKSB7CiAgICAgICAgdGhpcy5wcmlvckNvbnRyb2wuc2hpZnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnByaW9yQ29udHJvbC5zcGxpY2UoaWRQcmlvciwgMSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyB2YWxpZGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgdmFyIGF1eExvb3BWYWxpZGF0aW9uID0gMTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYXNzZXNzbWVudENvbnRyb2wubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5hc3Nlc3NtZW50Q29udHJvbC5sZW5ndGg7IGorKykgewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbFtpXS5ma19lbGVtZW50ID09PQogICAgICAgICAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbFtqXS5ma19lbGVtZW50ICYmCiAgICAgICAgICAgICAgaSAhPT0gagogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBhdXhMb29wVmFsaWRhdGlvbiA9IDA7CiAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlRXJyb3IgPQogICAgICAgICAgICAgICAgIk7Do28gcG9kZSBleGlzdGlyIG1haXMgZGUgdW0gcGFyw6JtZXRybyBkZSBhdmFsaWHDp8OjbyBwYXJhIG8gbWVzbW8gZWxlbWVudG8uIFZlcmlmaXF1ZSBvcyBwYXLDom1ldHJvcyBkZSBhdmFsaWHDp8OjbyAiICsKICAgICAgICAgICAgICAgIChqICsgMSkgKwogICAgICAgICAgICAgICAgIiBlICIgKwogICAgICAgICAgICAgICAgKGkgKyAxKSArCiAgICAgICAgICAgICAgICAiLiI7CiAgICAgICAgICAgICAgdGhpcy5kaWFsb2dFcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGF1eExvb3BWYWxpZGF0aW9uID09PSAxKSB7CiAgICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IHRoaXMucHJpb3JDb250cm9sLmxlbmd0aDsgbSsrKSB7CiAgICAgICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgdGhpcy5wcmlvckNvbnRyb2wubGVuZ3RoOyBuKyspIHsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICB0aGlzLnByaW9yQ29udHJvbFttXS5ma19pZGNvbmNlcHQgPT09CiAgICAgICAgICAgICAgICAgIHRoaXMucHJpb3JDb250cm9sW25dLmZrX2lkY29uY2VwdCAmJgogICAgICAgICAgICAgICAgbSAhPT0gbgogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgYXV4TG9vcFZhbGlkYXRpb24gPSAwOwogICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlRXJyb3IgPQogICAgICAgICAgICAgICAgICAiTsOjbyDDqSBwb3Nzw612ZWwgZGVmaW5pciB1bSBjb25oZWNpbWVudG8gcHJpb3JpdMOhcmlvIG1haXMgZGUgdW1hIHZlei4gVmVyaWZpcXVlIG9zIGNvbmhlY2ltZW50b3MgcHJpb3JpdMOhcmlvcyAiICsKICAgICAgICAgICAgICAgICAgKG4gKyAxKSArCiAgICAgICAgICAgICAgICAgICIgZSAiICsKICAgICAgICAgICAgICAgICAgKG0gKyAxKSArCiAgICAgICAgICAgICAgICAgICIuIjsKICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChhdXhMb29wVmFsaWRhdGlvbiA9PT0gMSkgewogICAgICAgICAgYXdhaXQgdGhpcy5wb3N0QXNzZXNzbWVudCgpOwogICAgICAgICAgYXdhaXQgdGhpcy5wb3N0UHJpb3JLbm93bGVkZ2VzKCk7CiAgICAgICAgICBhd2FpdCB0aGlzLnB1dFZpc2libGUoKTsKICAgICAgICAgIGF3YWl0IHRoaXMucmVzZXRWYXJpYWJsZXMoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICByZXNldCgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2xvc2Vfb3Jfc2F2ZSIsICJjbG9zZSIpOwogICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sID0gW107CiAgICAgIHRoaXMucHJpb3JDb250cm9sID0gW107CiAgICB9LAogICAgcmVzZXRWYXJpYWJsZXMoKSB7CiAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2wgPSBbXTsKICAgICAgdGhpcy5wcmlvckNvbnRyb2wgPSBbXTsKICAgIH0sCiAgICByZXNldFZhbGlkYXRpb24oKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["VisibleDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VisibleDialog.vue","sourceRoot":"src/components/didatic_model","sourcesContent":["<template>\n  <v-card>\n    <v-card-title style=\"background-color:purple; color:white;\">\n      <span class=\"headline\">\n        <p>Defina as informações equivalentes ao modelo didático.</p>\n      </span>\n    </v-card-title>\n    <v-row style=\"width : 100%\">\n      <v-col cols=\"4\">\n        <v-card-text>\n          <v-row class=\"ml-2\">\n            <v-btn\n              color=\"warning\"\n              height=\"40px\"\n              dark\n              x-small\n              small\n              @click=\"deselectAll()\"\n            >Deselecionar tudo</v-btn>\n            <v-btn\n              class=\"ml-1\"\n              color=\"primary\"\n              height=\"40\"\n              dark\n              small\n              @click=\"selectAll()\"\n            >Selecionar tudo</v-btn>\n          </v-row>\n\n          <v-treeview\n            @update:active=\"test\"\n            v-model=\"selection\"\n            :selection-type=\"'independent'\"\n            :items=\"treeData\"\n            return-object\n            selectable\n            selected-color=\"success\"\n            open-all\n          ></v-treeview>\n        </v-card-text>\n      </v-col>\n      <v-col cols=\"8\">\n        <v-row>\n          <h3 class=\"mt-5\">Parâmetros de avaliação</h3>\n          <v-btn icon=\"icon\" class=\"mb-1\">\n            <v-icon large class=\"mt-9 ml-2\" color=\"primary\" @click=\"addAssessment()\">mdi-plus-box</v-icon>\n          </v-btn>\n        </v-row>\n        <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n          <v-row\n            v-for=\"(assessment, i) in assessmentControl\"\n            :key=\"i\"\n            style=\"margin-bottom: -20px;\"\n          >\n            <v-col cols=\"2\">\n              <v-select\n                v-model=\"assessmentControl[i].scopo\"\n                :items=\"scopoTypes\"\n                :rules=\"[v => !!v || 'Conceito é requerido']\"\n                label=\"Scopo\"\n                style=\"margin:0px;\"\n                required\n              ></v-select>\n            </v-col>\n            <v-col cols=\"3\">\n              <v-select\n                v-model=\"assessmentControl[i].fk_element\"\n                :items=\"elementData\"\n                :rules=\"[v => !!v || 'O tipo do conceito é requerido']\"\n                label=\"Elemento\"\n                style=\"margin:0px;\"\n                required\n              ></v-select>\n            </v-col>\n            <v-col cols=\"3\">\n              <v-select\n                v-model=\"assessmentControl[i].typeThreshold\"\n                :items=\"typesThreshold\"\n                :rules=\"[v => !!v || 'O tipo do conceito é requerido']\"\n                label=\"Tipo de Threshold\"\n                style=\"margin:0px;\"\n                required\n              ></v-select>\n            </v-col>\n            <v-col cols=\"2\">\n              <v-select\n                style=\"margin-top: -1px;\"\n                v-model=\"assessmentControl[i].valueType\"\n                :items=\"valueTypes\"\n                :rules=\"[v => !!v || 'O tipo de dado é requerido']\"\n                label=\"Tipo de Dado\"\n                required\n              ></v-select>\n              <v-text-field\n                style=\"margin-top: -1px; margin-bottom: -10px;\"\n                v-if=\"assessmentControl[i].valueType==='Single'\"\n                v-model=\"assessmentControl[i].single.threshold\"\n                label=\"Valor\"\n                :suffix=\" assessmentControl[i].typeThreshold===1 ? '%' : ''\"\n                required\n              ></v-text-field>\n            </v-col>\n\n            <v-col cols=\"2\" class=\"mt-2\">\n              <v-btn icon=\"icon\" class=\"mb-1\" v-if=\"assessmentControl[i].valueType==='Range'\">\n                <v-icon large class=\"mb-1\" color=\"primary\" @click=\"addRange(i)\">mdi-plus-box</v-icon>\n              </v-btn>\n              <v-btn icon=\"icon\" class=\"mb-1\">\n                <v-icon large class=\"mb-1\" color=\"red\" @click=\"deletaAssessment(i)\">mdi-minus-box</v-icon>\n              </v-btn>\n            </v-col>\n            <v-row v-if=\"assessmentControl[i].valueType === 'Single'\" style=\"margin-top: -40px;\">\n              <v-col cols=\"7\"></v-col>\n              <v-col cols=\"2\" class=\"ml-10\"></v-col>\n            </v-row>\n            <div v-else>\n              <v-row\n                v-for=\"(range, idRange) in assessment.ranges\"\n                :key=\"idRange\"\n                style=\"margin-top: -30px;\"\n              >\n                <v-col cols=\"4\"></v-col>\n                <v-col cols=\"3\">\n                  <v-text-field\n                    v-model=\"assessmentControl[i].ranges[idRange].namerange\"\n                    counter=\"15\"\n                    label=\"Nome do range\"\n                    style=\"margin:0px;\"\n                    required\n                  ></v-text-field>\n                </v-col>\n                <v-col cols=\"2\">\n                  <v-text-field\n                    v-model=\"assessmentControl[i].ranges[idRange].initialvalue\"\n                    label=\"Valor inicial\"\n                    style=\"margin:0px;\"\n                    type=\"number\"\n                    :suffix=\" assessmentControl[i].typeThreshold===1 ? '%' : ''\"\n                    required\n                  ></v-text-field>\n                </v-col>\n                <v-col cols=\"2\">\n                  <v-text-field\n                    v-model=\"assessmentControl[i].ranges[idRange].limitvalue\"\n                    label=\"Valor Limite\"\n                    style=\"margin:0px;\"\n                    type=\"number\"\n                    :suffix=\" assessmentControl[i].typeThreshold===1 ? '%' : ''\"\n                    required\n                  ></v-text-field>\n                </v-col>\n                <v-col cols=\"1\">\n                  <v-btn icon=\"icon\" class=\"mt-4\">\n                    <v-icon\n                      large\n                      class=\"mb-1\"\n                      color=\"red\"\n                      @click=\"deletaRange(i, idRange)\"\n                    >mdi-minus-box</v-icon>\n                  </v-btn>\n                </v-col>\n              </v-row>\n            </div>\n          </v-row>\n          <v-row>\n            <h3 class=\"mt-5\">Conhecimentos prioritários</h3>\n            <v-btn icon=\"icon\" class=\"mb-1\">\n              <v-icon\n                large\n                class=\"mt-9 ml-2\"\n                color=\"primary\"\n                @click=\"addPriorKnowledge()\"\n              >mdi-plus-box</v-icon>\n            </v-btn>\n          </v-row>\n          <v-row\n            v-for=\"(prior, idPrior) in priorControl\"\n            :key=\"idPrior\"\n            style=\"margin-bottom: -25px;\"\n          >\n            <v-col cols=\"4\">\n              <v-select\n                v-model=\"priorControl[idPrior].fk_idconcept\"\n                :items=\"conceptsPrior\"\n                :rules=\"[v => !!v || 'Necessário informar o conceito prioritário']\"\n                label=\"Conceito Prioritário\"\n                style=\"margin:0px;\"\n                required\n              ></v-select>\n            </v-col>\n            <v-col cols=\"3\">\n              <v-text-field\n                style=\"margin-top: -1px; margin-bottom: -10px;\"\n                :rules=\"[v => !!v || 'Necessário informar identificador da prioridade']\"\n                v-model=\"priorControl[idPrior].namepriorknowledge\"\n                label=\"Identificador da prioridade\"\n                required\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"3\">\n              <v-select\n                v-model=\"priorControl[idPrior].priorlevel\"\n                :items=\"priorLevels\"\n                :rules=\"[v => !!v || 'Necessário informar o nível de prioridade']\"\n                label=\"Nível de prioridade\"\n                style=\"margin:0px;\"\n                required\n              ></v-select>\n            </v-col>\n            <v-col cols=\"1\">\n              <v-btn icon=\"icon\" class=\"mt-4\">\n                <v-icon\n                  large\n                  class=\"mb-1\"\n                  color=\"red\"\n                  @click=\"deletaPriorKnowledge(idPrior)\"\n                >mdi-minus-box</v-icon>\n              </v-btn>\n            </v-col>\n          </v-row>\n        </v-form>\n      </v-col>\n    </v-row>\n    <v-card-actions>\n      <v-spacer></v-spacer>\n      <v-btn color=\"red\" height=\"49\" dark large @click=\"reset\">\n        Cancelar\n        <v-icon dark right>mdi-close</v-icon>\n      </v-btn>\n      <v-btn color=\"success\" height=\"49\" dark large @click=\"validate\">\n        Salvar\n        <v-icon dark right>mdi-content-save</v-icon>\n      </v-btn>\n    </v-card-actions>\n    <div class=\"text-center\">\n      <v-dialog v-model=\"dialogError\" width=\"500\">\n        <v-card>\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\">ALERTA!</v-card-title>\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\">{{messageError}}</v-card-text>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" text @click=\"dialogError = false\">Ok</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n  </v-card>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Cookie from \"js-cookie\";\nexport default {\n  name: \"VisibleDialog\",\n  props: [\"domain\", \"dialog\"],\n  data: () => ({\n    valid: true,\n    treeData: [],\n    selection: [],\n    elementData: [],\n    scopoTypes: [\n      {\n        text: \"Avaliação\",\n        value: 1,\n      },\n      {\n        text: \"Domínio\",\n        value: 2,\n      },\n    ],\n    typesThreshold: [\n      {\n        text: \"Porcentagem\",\n        value: 1,\n      },\n      {\n        text: \"Literal\",\n        value: 2,\n      },\n    ],\n    valueTypes: [\"Single\", \"Range\"],\n    assessmentControl: [],\n    conceptsPrior: [],\n    priorControl: [],\n    priorLevels: [\n      {\n        text: \"Obrigatório\",\n        value: 1,\n      },\n      {\n        text: \"Desejável\",\n        value: 2,\n      },\n    ],\n    dialogError: false,\n    messageError: \"\",\n    newItems: [],\n    checkbox: true,\n  }),\n  watch: {\n    domain: async function () {\n      this.assessmentControl = [];\n      this.priorControl = [];\n      if (this.domain) {\n        this.treeData = [];\n        this.selection = [];\n        await this.getAssessments();\n        await this.setDomainVariables();\n      }\n    },\n    assessmentControl: function () {\n      this.assessmentControl.forEach((assess) => {\n        if (assess.valueType === \"Single\") {\n          assess.ranges.forEach((range) => {\n            if (range.url) {\n              this.deletaSingle(range.url);\n            }\n          });\n          assess.ranges = [];\n        } else if (assess.valueType === \"Range\") {\n          if (assess.single.url) {\n            this.deletaSingle(assess.single.url);\n            assess.single.url = \"\";\n          }\n          assess.single.threshold = \"\";\n        }\n      });\n    },\n  },\n  mounted: async function () {\n    this.assessmentControl = [];\n    this.priorControl = [];\n    if (this.domain) {\n      this.treeData = [];\n      this.selection = [];\n      await this.getAssessments();\n      await this.setDomainVariables();\n    }\n  },\n  methods: {\n    getAssessments() {\n      // var vm = this;\n      if (this.domain) {\n        if (this.domain.assessmentparameter.length > 0) {\n          var assess = {\n            typeThreshold: parseInt(\n              this.domain.assessmentparameter[0].typethreshold.split(\"/\")[4]\n            ),\n            scopo: parseInt(\n              this.domain.assessmentparameter[0].scopo.split(\"/\")[4]\n            ),\n            fk_element: this.domain.assessmentparameter[0].fk_idknowledgedomain,\n            valueType: \"\",\n            single: {\n              threshold: \"\",\n              url: \"\",\n            },\n            ranges: [],\n            url: this.domain.assessmentparameter[0].url,\n          };\n          if (this.domain.assessmentparameter[0].single.length > 0) {\n            assess.valueType = \"Single\";\n            assess.single.threshold = this.domain.assessmentparameter[0].single[0].threshold;\n            assess.single.url = this.domain.assessmentparameter[0].single[0].url;\n          } else if (this.domain.assessmentparameter[0].ranges.length > 0) {\n            assess.valueType = \"Range\";\n            this.domain.assessmentparameter[0].ranges.forEach((range) => {\n              assess.ranges.push({\n                namerange: range.namerange,\n                initialvalue: range.initialvalue,\n                limitvalue: range.limitvalue,\n                url: range.url,\n              });\n            });\n          }\n          this.assessmentControl.push(assess);\n        }\n        if (this.domain.modules) {\n          this.domain.modules.forEach((module) => {\n            if (module.assessmentparameter.length > 0) {\n              var assess = {\n                typeThreshold: parseInt(\n                  module.assessmentparameter[0].typethreshold.split(\"/\")[4]\n                ),\n                scopo: parseInt(\n                  module.assessmentparameter[0].scopo.split(\"/\")[4]\n                ),\n                fk_element: module.url,\n                valueType: \"\",\n                single: {\n                  threshold: \"\",\n                  url: \"\",\n                },\n                ranges: [],\n                url: module.assessmentparameter[0].url,\n              };\n              if (module.assessmentparameter[0].single.length > 0) {\n                assess.valueType = \"Single\";\n                assess.single.threshold =\n                  module.assessmentparameter[0].single[0].threshold;\n                assess.single.url = module.assessmentparameter[0].single[0].url;\n              } else if (module.assessmentparameter[0].ranges.length > 0) {\n                assess.valueType = \"Range\";\n                module.assessmentparameter[0].ranges.forEach((range) => {\n                  assess.ranges.push({\n                    namerange: range.namerange,\n                    initialvalue: range.initialvalue,\n                    limitvalue: range.limitvalue,\n                    url: range.url,\n                  });\n                });\n              }\n              this.assessmentControl.push(assess);\n            }\n            if (module.concepts) {\n              module.concepts.forEach((moduleConcept) => {\n                if (moduleConcept.assessmentparameter.length > 0) {\n                  var assess = {\n                    typeThreshold: parseInt(\n                      moduleConcept.assessmentparameter[0].typethreshold.split(\n                        \"/\"\n                      )[4]\n                    ),\n                    scopo: parseInt(\n                      moduleConcept.assessmentparameter[0].scopo.split(\"/\")[4]\n                    ),\n                    fk_element: moduleConcept.url,\n                    valueType: \"\",\n                    single: {\n                      threshold: \"\",\n                      url: \"\",\n                    },\n                    ranges: [],\n                    url: moduleConcept.assessmentparameter[0].url,\n                  };\n                  if (moduleConcept.assessmentparameter[0].single.length > 0) {\n                    assess.valueType = \"Single\";\n                    assess.single.threshold =\n                      moduleConcept.assessmentparameter[0].single[0].threshold;\n                    assess.single.url =\n                      moduleConcept.assessmentparameter[0].single[0].url;\n                  } else if (\n                    moduleConcept.assessmentparameter[0].ranges.length > 0\n                  ) {\n                    assess.valueType = \"Range\";\n                    moduleConcept.assessmentparameter[0].ranges.forEach(\n                      (range) => {\n                        assess.ranges.push({\n                          namerange: range.namerange,\n                          initialvalue: range.initialvalue,\n                          limitvalue: range.limitvalue,\n                          url: range.url,\n                        });\n                      }\n                    );\n                  }\n                  this.assessmentControl.push(assess);\n                }\n                if (moduleConcept.priorknowledge.length > 0) {\n                  this.priorControl.push({\n                    namepriorknowledge:\n                      moduleConcept.priorknowledge[0].namepriorknowledge,\n                    priorlevel: parseInt(\n                      moduleConcept.priorknowledge[0].priorlevel.split(\"/\")[4]\n                    ),\n                    fk_idconcept: moduleConcept.priorknowledge[0].fk_idconcept,\n                    url: moduleConcept.priorknowledge[0].url,\n                  });\n                }\n              });\n            }\n            if (module.submodules) {\n              module.submodules.forEach((submodule) => {\n                if (submodule.assessmentparameter.length > 0) {\n                  var assess = {\n                    typeThreshold: parseInt(\n                      submodule.assessmentparameter[0].typethreshold.split(\n                        \"/\"\n                      )[4]\n                    ),\n                    scopo: parseInt(\n                      submodule.assessmentparameter[0].scopo.split(\"/\")[4]\n                    ),\n                    fk_element: submodule.url,\n                    valueType: \"\",\n                    single: {\n                      threshold: \"\",\n                      url: \"\",\n                    },\n                    ranges: [],\n                    url: submodule.assessmentparameter[0].url,\n                  };\n                  if (submodule.assessmentparameter[0].single.length > 0) {\n                    assess.valueType = \"Single\";\n                    assess.single.threshold =\n                      submodule.assessmentparameter[0].single[0].threshold;\n                    assess.single.url =\n                      submodule.assessmentparameter[0].single[0].url;\n                  } else if (\n                    submodule.assessmentparameter[0].ranges.length > 0\n                  ) {\n                    assess.valueType = \"Range\";\n                    submodule.assessmentparameter[0].ranges.forEach((range) => {\n                      assess.ranges.push({\n                        namerange: range.namerange,\n                        initialvalue: range.initialvalue,\n                        limitvalue: range.limitvalue,\n                        url: range.url,\n                      });\n                    });\n                  }\n                  this.assessmentControl.push(assess);\n                }\n                if (submodule.concepts) {\n                  submodule.concepts.forEach((submoduleConcept) => {\n                    if (submoduleConcept.assessmentparameter.length > 0) {\n                      var assess = {\n                        typeThreshold: parseInt(\n                          submoduleConcept.assessmentparameter[0].typethreshold.split(\n                            \"/\"\n                          )[4]\n                        ),\n                        scopo: parseInt(\n                          submoduleConcept.assessmentparameter[0].scopo.split(\n                            \"/\"\n                          )[4]\n                        ),\n                        fk_element: submoduleConcept.url,\n                        valueType: \"\",\n                        single: {\n                          threshold: \"\",\n                          url: \"\",\n                        },\n                        ranges: [],\n                        url: submoduleConcept.assessmentparameter[0].url,\n                      };\n                      if (\n                        submoduleConcept.assessmentparameter[0].single.length >\n                        0\n                      ) {\n                        assess.valueType = \"Single\";\n                        assess.single.threshold =\n                          submoduleConcept.assessmentparameter[0].single[0].threshold;\n                        assess.single.url =\n                          submoduleConcept.assessmentparameter[0].single[0].url;\n                      } else if (\n                        submoduleConcept.assessmentparameter[0].ranges.length >\n                        0\n                      ) {\n                        assess.valueType = \"Range\";\n                        submoduleConcept.assessmentparameter[0].ranges.forEach(\n                          (range) => {\n                            assess.ranges.push({\n                              namerange: range.namerange,\n                              initialvalue: range.initialvalue,\n                              limitvalue: range.limitvalue,\n                              url: range.url,\n                            });\n                          }\n                        );\n                      }\n                      this.assessmentControl.push(assess);\n                    }\n                    if (submoduleConcept.priorknowledge.length > 0) {\n                      this.priorControl.push({\n                        namepriorknowledge:\n                          submoduleConcept.priorknowledge[0].namepriorknowledge,\n                        priorlevel: parseInt(\n                          submoduleConcept.priorknowledge[0].priorlevel.split(\n                            \"/\"\n                          )[4]\n                        ),\n                        fk_idconcept:\n                          submoduleConcept.priorknowledge[0].fk_idconcept,\n                        url: submoduleConcept.priorknowledge[0].url,\n                      });\n                    }\n                  });\n                }\n              });\n            }\n          });\n        }\n      }\n    },\n    test(value) {\n      if (value.length) {\n        if (value[0].split(\"/\")[5] === \"sub\") {\n          this.$emit(\"type\", { type: \"submodulo\", url: value[0] });\n        } else {\n          this.$emit(\"type\", { type: value[0].split(\"/\")[3], url: value[0] });\n        }\n      }\n    },\n    setDomainVariables() {\n      this.treeData = [];\n      this.elementData.push({\n        text: \"[DOMINIO] \" + this.domain.nameknowledgedomain,\n        value: this.domain.url,\n      });\n      var indexmodulo = 0;\n      if (this.domain.mobilemedias.length) {\n        this.domain.mobilemedias.forEach((mobilemedia) => {\n          var object = {\n            id: mobilemedia.url,\n            name: \"[MOBILEMEDIA] \" + mobilemedia.label,\n            visible: mobilemedia.visible,\n          };\n          this.treeData.push(object);\n          if (object.visible) {\n            this.selection.push(object);\n          }\n          indexmodulo++;\n        });\n      }\n      if (this.domain.instructionalelements.length) {\n        this.domain.instructionalelements.forEach((instructionalelement) => {\n          if (\n            instructionalelement.fk_instructionalelementtype.split(\"/\")[4] !== 4\n          ) {\n            var object = {\n              id: instructionalelement.url,\n              name: \"[INSTRUCTIONAL ELEMENT] \" + instructionalelement.label,\n              visible: instructionalelement.visible,\n            };\n            this.treeData.push(object);\n            if (object.visible) {\n              this.selection.push(object);\n            }\n            indexmodulo++;\n          }\n        });\n      }\n      if (Array.isArray(this.domain.modules) && this.domain.modules.length) {\n        this.domain.modules.forEach((modulo) => {\n          if (modulo.fk_idmodule === null) {\n            var indexsubmodulo = 0;\n            var object = {\n              id: modulo.url,\n              name: \"[MODULO] \" + modulo.namemodule,\n              visible: modulo.visible,\n              children: [],\n            };\n            this.treeData.push(object);\n            this.elementData.push({\n              text: object.name,\n              value: object.id,\n            });\n            if (object.visible) {\n              this.selection.push(object);\n            }\n            if (modulo.mobilemedias.length) {\n              modulo.mobilemedias.forEach((mobilemedia) => {\n                var object = {\n                  id: mobilemedia.url,\n                  name: \"[MOBILEMEDIA] \" + mobilemedia.label,\n                  visible: mobilemedia.visible,\n                };\n                this.treeData[indexmodulo].children.push(object);\n                if (object.visible) {\n                  this.selection.push(object);\n                }\n                indexsubmodulo++;\n              });\n            }\n\n            if (modulo.instructionalelements.length) {\n              modulo.instructionalelements.forEach((instructionalelement) => {\n                if (\n                  instructionalelement.fk_instructionalelementtype.split(\n                    \"/\"\n                  )[4] !== 4\n                ) {\n                  var object = {\n                    id: instructionalelement.url,\n                    name:\n                      \"[INSTRUCTIONAL ELEMENT] \" + instructionalelement.label,\n                    visible: instructionalelement.visible,\n                  };\n                  this.treeData[indexmodulo].children.push(object);\n                  if (object.visible) {\n                    this.selection.push(object);\n                  }\n                  indexsubmodulo++;\n                }\n              });\n            }\n\n            if (modulo.submodules.length) {\n              var indexconceito = 0;\n              modulo.submodules.forEach((submodulo) => {\n                var object = {\n                  id: submodulo.url,\n                  name: \"[SUBMODULO] \" + submodulo.namemodule,\n                  visible: submodulo.visible,\n                  children: [],\n                };\n                this.treeData[indexmodulo].children.push(object);\n                this.elementData.push({\n                  text: object.name,\n                  value: object.id,\n                });\n                if (object.visible) {\n                  this.selection.push(object);\n                }\n\n                if (submodulo.mobilemedias.length) {\n                  submodulo.mobilemedias.forEach((mobilemedia) => {\n                    var object = {\n                      id: mobilemedia.url,\n                      name: \"[MOBILEMEDIA] \" + mobilemedia.label,\n                      visible: mobilemedia.visible,\n                    };\n                    this.treeData[indexmodulo].children[\n                      indexsubmodulo\n                    ].children.push(object);\n                    if (object.visible) {\n                      this.selection.push(object);\n                    }\n                    indexconceito++;\n                  });\n                }\n\n                if (submodulo.instructionalelements.length) {\n                  submodulo.instructionalelements.forEach(\n                    (instructionalelement) => {\n                      var object = {\n                        id: instructionalelement.url,\n                        name:\n                          \"[INSTRUCTIONAL ELEMENT] \" +\n                          instructionalelement.label,\n                        visible: instructionalelement.visible,\n                      };\n                      this.treeData[indexmodulo].children[\n                        indexsubmodulo\n                      ].children.push(object);\n                      if (object.visible) {\n                        this.selection.push(object);\n                      }\n                      indexconceito++;\n                    }\n                  );\n                }\n\n                if (submodulo.concepts.length) {\n                  submodulo.concepts.forEach((conceito) => {\n                    var object = {\n                      id: conceito.url,\n                      name: \"[CONCEITO] \" + conceito.nameconcept,\n                      visible: conceito.visible,\n                      children: [],\n                    };\n                    this.treeData[indexmodulo].children[\n                      indexsubmodulo\n                    ].children.push(object);\n\n                    this.elementData.push({\n                      text: object.name,\n                      value: object.id,\n                    });\n                    if (object.visible) {\n                      this.selection.push(object);\n                    }\n                    this.conceptsPrior.push({\n                      text: object.name,\n                      value: object.id,\n                    });\n\n                    if (conceito.mobilemedias.length) {\n                      conceito.mobilemedias.forEach((mobilemedia) => {\n                        var object = {\n                          id: mobilemedia.url,\n                          name: \"[MOBILEMEDIA] \" + mobilemedia.label,\n                          visible: mobilemedia.visible,\n                        };\n                        this.treeData[indexmodulo].children[\n                          indexsubmodulo\n                        ].children[indexconceito].children.push(object);\n                        if (object.visible) {\n                          this.selection.push(object);\n                        }\n                      });\n                    }\n\n                    if (conceito.instructionalelements.length) {\n                      conceito.instructionalelements.forEach(\n                        (instructionalelement) => {\n                          var object = {\n                            id: instructionalelement.url,\n                            name:\n                              \"[INSTRUCTIONAL ELEMENT] \" +\n                              instructionalelement.label,\n                            visible: instructionalelement.visible,\n                          };\n                          this.treeData[indexmodulo].children[\n                            indexsubmodulo\n                          ].children[indexconceito].children.push(object);\n                          if (object.visible) {\n                            this.selection.push(object);\n                          }\n                        }\n                      );\n                    }\n\n                    if (conceito.informationitems.length) {\n                      conceito.informationitems.forEach((procedure) => {\n                        if (\n                          procedure.fk_informationitemtype ===\n                          \"https://educomml-back.herokuapp.com/informationitemtype/4/\"\n                        ) {\n                          var object = {\n                            id: procedure.url,\n                            name:\n                              \"[PROCEDIMENTO] \" + procedure.nameinformationitem,\n                            visible: procedure.visible,\n                          };\n                          this.treeData[indexmodulo].children[\n                            indexsubmodulo\n                          ].children[indexconceito].children.push(object);\n                          if (object.visible) {\n                            this.selection.push(object);\n                          }\n                        }\n                      });\n                    }\n\n                    indexconceito++;\n                  });\n                }\n                indexsubmodulo++;\n              });\n            }\n            if (modulo.concepts.length) {\n              if (indexsubmodulo > 0) {\n                indexconceito = indexsubmodulo;\n              } else {\n                indexconceito = 0;\n              }\n              modulo.concepts.forEach((conceito) => {\n                var object = {\n                  id: conceito.url,\n                  name: \"[CONCEITO] \" + conceito.nameconcept,\n                  visible: conceito.visible,\n                  children: [],\n                };\n                this.treeData[indexmodulo].children.push(object);\n\n                this.elementData.push({\n                  text: object.name,\n                  value: object.id,\n                });\n                if (object.visible) {\n                  this.selection.push(object);\n                }\n                this.conceptsPrior.push({\n                  text: object.name,\n                  value: object.id,\n                });\n                if (conceito.mobilemedias.length) {\n                  conceito.mobilemedias.forEach((mobilemedia) => {\n                    var object = {\n                      id: mobilemedia.url,\n                      name: \"[MOBILEMEDIA] \" + mobilemedia.label,\n                      visible: mobilemedia.visible,\n                    };\n                    this.treeData[indexmodulo].children[\n                      indexconceito\n                    ].children.push(object);\n                    if (object.visible) {\n                      this.selection.push(object);\n                    }\n                  });\n                }\n\n                if (conceito.instructionalelements.length) {\n                  conceito.instructionalelements.forEach(\n                    (instructionalelement) => {\n                      var object = {\n                        id: instructionalelement.url,\n                        name:\n                          \"[INSTRUCTIONAL ELEMENT] \" +\n                          instructionalelement.label,\n                        visible: instructionalelement.visible,\n                      };\n                      this.treeData[indexmodulo].children[\n                        indexconceito\n                      ].children.push(object);\n                      if (object.visible) {\n                        this.selection.push(object);\n                      }\n                    }\n                  );\n                }\n\n                if (conceito.informationitems.length) {\n                  conceito.informationitems.forEach((procedure) => {\n                    if (\n                      procedure.fk_informationitemtype ===\n                      \"https://educomml-back.herokuapp.com/informationitemtype/4/\"\n                    ) {\n                      var object = {\n                        id: procedure.url,\n                        name: \"[PROCEDIMENTO] \" + procedure.nameinformationitem,\n                        visible: procedure.visible,\n                      };\n                      this.treeData[indexmodulo].children[\n                        indexconceito\n                      ].children.push(object);\n                      if (object.visible) {\n                        this.selection.push(object);\n                      }\n                    }\n                  });\n                }\n                indexconceito++;\n              });\n            }\n            indexmodulo++;\n          }\n        });\n      }\n    },\n    async postAssessment() {\n      var vm = this;\n      var header = await this.$store.dispatch(\"getHeader\");\n      await this.assessmentControl.forEach(async (assessment) => {\n        var auxAssessment = {\n          typethreshold:\n            `https://educomml-back.herokuapp.com/typethreshold/` +\n            assessment.typeThreshold +\n            `/`,\n          scopo: `https://educomml-back.herokuapp.com/scopo/` + assessment.scopo + `/`,\n          fk_idknowledgedomain: null,\n          fk_idmodule: null,\n          fk_idconcept: null,\n        };\n        if (assessment.fk_element.split(\"/\")[3] === \"knowledgedomain\") {\n          auxAssessment.fk_idknowledgedomain = assessment.fk_element;\n        } else if (assessment.fk_element.split(\"/\")[3] === \"module\") {\n          auxAssessment.fk_idmodule = assessment.fk_element;\n        } else if (assessment.fk_element.split(\"/\")[3] === \"concept\") {\n          auxAssessment.fk_idconcept = assessment.fk_element;\n        }\n\n        if (assessment.url) {\n          await this.axios\n            .put(assessment.url, auxAssessment, header)\n            .then(async function (resposta) {\n              if (assessment.valueType === \"Single\") {\n                if (assessment.ranges) {\n                  assessment.ranges.forEach((range) => {\n                    if (range.url) {\n                      vm.axios.delete(range.url, header);\n                    }\n                  });\n                }\n                await vm.axios.put(\n                  assessment.single.url,\n                  {\n                    fk_idassessmentparameter: resposta.data.url,\n                    threshold: assessment.single.threshold,\n                  },\n                  header\n                );\n              } else if (assessment.valueType === \"Range\") {\n                if (assessment.single.url) {\n                  vm.axios.delete(assessment.single.url, header);\n                }\n                assessment.ranges.forEach(async (range) => {\n                  if (range.url) {\n                    await vm.axios.put(\n                      range.url,\n                      {\n                        namerange: range.namerange,\n                        fk_idassessmentparameter: resposta.data.url,\n                        initialvalue: range.initialvalue,\n                        limitvalue: range.limitvalue,\n                      },\n                      header\n                    );\n                  } else {\n                    await vm.axios.post(\n                      \"https://educomml-back.herokuapp.com/range/\",\n                      {\n                        namerange: range.namerange,\n                        fk_idassessmentparameter: resposta.data.url,\n                        initialvalue: range.initialvalue,\n                        limitvalue: range.limitvalue,\n                      },\n                      header\n                    );\n                  }\n                });\n              }\n            });\n        } else {\n          await this.axios\n            .post(\n              \"https://educomml-back.herokuapp.com/assessmentparameter/\",\n              auxAssessment,\n              header\n            )\n            .then(async function (resposta) {\n              if (assessment.valueType === \"Single\") {\n                await vm.axios.post(\n                  \"https://educomml-back.herokuapp.com/single/\",\n                  {\n                    fk_idassessmentparameter: resposta.data.url,\n                    threshold: assessment.single.threshold,\n                  },\n                  header\n                );\n              } else if (assessment.valueType === \"Range\") {\n                assessment.ranges.forEach(async (range) => {\n                  await vm.axios.post(\n                    \"https://educomml-back.herokuapp.com/range/\",\n                    {\n                      namerange: range.namerange,\n                      fk_idassessmentparameter: resposta.data.url,\n                      initialvalue: range.initialvalue,\n                      limitvalue: range.limitvalue,\n                    },\n                    header\n                  );\n                });\n              }\n            });\n        }\n      });\n    },\n    async postPriorKnowledges() {\n      var vm = this;\n      var header = await this.$store.dispatch(\"getHeader\");\n      await this.priorControl.forEach(async (prior) => {\n        if (prior.url) {\n          await vm.axios.put(\n            prior.url,\n            {\n              namepriorknowledge: prior.namepriorknowledge,\n              priorlevel:\n                `https://educomml-back.herokuapp.com/priorlevel/` + prior.priorlevel + `/`,\n              fk_idconcept: prior.fk_idconcept,\n            },\n            header\n          );\n        } else {\n          await vm.axios.post(\n            `https://educomml-back.herokuapp.com/priorknowledge/`,\n            {\n              namepriorknowledge: prior.namepriorknowledge,\n              priorlevel:\n                `https://educomml-back.herokuapp.com/priorlevel/` + prior.priorlevel + `/`,\n              fk_idconcept: prior.fk_idconcept,\n            },\n            header\n          );\n        }\n      });\n    },\n    async putVisible() {\n      var vm = this;\n      var csrftoken = Cookie.get(\"csrftoken\");\n      var headers = {\n        \"X-CSRFTOKEN\": csrftoken,\n      };\n      this.treeData.forEach((element) => {\n        if (\n          element.visible === true &&\n          !this.selection.find((findElement) => findElement.id === element.id)\n        ) {\n          axios\n            .patch(\n              element.id,\n              { headers: headers },\n              {\n                auth: {\n                  username: \"admin\",\n                  password: \"admin\",\n                },\n              }\n            )\n            .then(async function (resposta) {\n              var aux = resposta.data;\n              await Object.keys(aux).forEach((atributo) => {\n                if (Array.isArray(aux[atributo])) {\n                  delete aux[atributo];\n                } else if (atributo === \"url\") {\n                  delete aux[atributo];\n                } else if (atributo[0] + atributo[1] === \"id\") {\n                  delete aux[atributo];\n                } else if (atributo === \"visible\") {\n                  aux.visible = false;\n                }\n              });\n              await axios.put(element.id, aux, {\n                auth: {\n                  username: \"admin\",\n                  password: \"admin\",\n                },\n              });\n            });\n        } else if (\n          element.visible === false &&\n          this.selection.find((findElement) => findElement.id === element.id)\n        ) {\n          axios\n            .patch(\n              element.id,\n              { headers: headers },\n              {\n                auth: {\n                  username: \"admin\",\n                  password: \"admin\",\n                },\n              }\n            )\n            .then(async function (resposta) {\n              var aux = resposta.data;\n              await Object.keys(aux).forEach((atributo) => {\n                if (Array.isArray(aux[atributo])) {\n                  delete aux[atributo];\n                } else if (atributo === \"url\") {\n                  delete aux[atributo];\n                } else if (atributo[0] + atributo[1] === \"id\") {\n                  delete aux[atributo];\n                } else if (atributo === \"visible\") {\n                  aux.visible = true;\n                }\n              });\n              await axios.put(element.id, aux, {\n                auth: {\n                  username: \"admin\",\n                  password: \"admin\",\n                },\n              });\n            });\n        }\n        if (Array.isArray(element.children) && element.children.length) {\n          element.children.forEach((element2) => {\n            if (\n              element2.visible === true &&\n              !this.selection.find(\n                (findElement2) => findElement2.id === element2.id\n              )\n            ) {\n              axios\n                .patch(\n                  element2.id,\n                  { headers: headers },\n                  {\n                    auth: {\n                      username: \"admin\",\n                      password: \"admin\",\n                    },\n                  }\n                )\n                .then(async function (resposta) {\n                  var aux = resposta.data;\n                  await Object.keys(aux).forEach((atributo) => {\n                    if (Array.isArray(aux[atributo])) {\n                      delete aux[atributo];\n                    } else if (atributo === \"url\") {\n                      delete aux[atributo];\n                    } else if (atributo[0] + atributo[1] === \"id\") {\n                      delete aux[atributo];\n                    } else if (atributo === \"visible\") {\n                      aux.visible = false;\n                    }\n                  });\n\n                  await axios.put(element2.id, aux, {\n                    auth: {\n                      username: \"admin\",\n                      password: \"admin\",\n                    },\n                  });\n                });\n            } else if (\n              element2.visible === false &&\n              this.selection.find(\n                (findElement2) => findElement2.id === element2.id\n              )\n            ) {\n              axios\n                .patch(\n                  element2.id,\n                  { headers: headers },\n                  {\n                    auth: {\n                      username: \"admin\",\n                      password: \"admin\",\n                    },\n                  }\n                )\n                .then(async function (resposta) {\n                  var aux = resposta.data;\n                  await Object.keys(aux).forEach((atributo) => {\n                    if (Array.isArray(aux[atributo])) {\n                      delete aux[atributo];\n                    } else if (atributo === \"url\") {\n                      delete aux[atributo];\n                    } else if (atributo[0] + atributo[1] === \"id\") {\n                      delete aux[atributo];\n                    } else if (atributo === \"visible\") {\n                      aux.visible = true;\n                    }\n                  });\n\n                  await axios.put(element2.id, aux, {\n                    auth: {\n                      username: \"admin\",\n                      password: \"admin\",\n                    },\n                  });\n                });\n            }\n\n            if (Array.isArray(element2.children) && element2.children.length) {\n              element2.children.forEach((element3) => {\n                if (\n                  element3.visible === true &&\n                  !this.selection.find(\n                    (findElement3) => findElement3.id === element3.id\n                  )\n                ) {\n                  axios\n                    .patch(\n                      element3.id,\n                      { headers: headers },\n                      {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\",\n                        },\n                      }\n                    )\n                    .then(async function (resposta) {\n                      var aux = resposta.data;\n                      await Object.keys(aux).forEach((atributo) => {\n                        if (Array.isArray(aux[atributo])) {\n                          delete aux[atributo];\n                        } else if (atributo === \"url\") {\n                          delete aux[atributo];\n                        } else if (atributo[0] + atributo[1] === \"id\") {\n                          delete aux[atributo];\n                        } else if (atributo === \"visible\") {\n                          aux.visible = false;\n                        }\n                      });\n                      await axios.put(element3.id, aux, {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\",\n                        },\n                      });\n                    });\n                } else if (\n                  element3.visible === false &&\n                  this.selection.find(\n                    (findElement3) => findElement3.id === element3.id\n                  )\n                ) {\n                  axios\n                    .patch(\n                      element3.id,\n                      { headers: headers },\n                      {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\",\n                        },\n                      }\n                    )\n                    .then(async function (resposta) {\n                      var aux = resposta.data;\n                      await Object.keys(aux).forEach((atributo) => {\n                        if (Array.isArray(aux[atributo])) {\n                          delete aux[atributo];\n                        } else if (atributo === \"url\") {\n                          delete aux[atributo];\n                        } else if (atributo[0] + atributo[1] === \"id\") {\n                          delete aux[atributo];\n                        } else if (atributo === \"visible\") {\n                          aux.visible = true;\n                        }\n                      });\n                      await axios.put(element3.id, aux, {\n                        auth: {\n                          username: \"admin\",\n                          password: \"admin\",\n                        },\n                      });\n                    });\n                }\n\n                if (\n                  Array.isArray(element3.children) &&\n                  element3.children.length\n                ) {\n                  element3.children.forEach((element4) => {\n                    if (\n                      element4.visible === true &&\n                      !this.selection.find(\n                        (findElement4) => findElement4.id === element4.id\n                      )\n                    ) {\n                      axios\n                        .patch(\n                          element4.id,\n                          { headers: headers },\n                          {\n                            auth: {\n                              username: \"admin\",\n                              password: \"admin\",\n                            },\n                          }\n                        )\n                        .then(async function (resposta) {\n                          var aux = resposta.data;\n                          await Object.keys(aux).forEach((atributo) => {\n                            if (Array.isArray(aux[atributo])) {\n                              delete aux[atributo];\n                            } else if (atributo === \"url\") {\n                              delete aux[atributo];\n                            } else if (atributo[0] + atributo[1] === \"id\") {\n                              delete aux[atributo];\n                            } else if (atributo === \"visible\") {\n                              aux.visible = false;\n                            }\n                          });\n                          await axios.put(\n                            element4.id,\n                            {\n                              aux,\n                            },\n                            {\n                              auth: {\n                                username: \"admin\",\n                                password: \"admin\",\n                              },\n                            }\n                          );\n                        });\n                    } else if (\n                      element4.visible === false &&\n                      this.selection.find(\n                        (findElement4) => findElement4.id === element4.id\n                      )\n                    ) {\n                      axios\n                        .patch(\n                          element4.id,\n                          { headers: headers },\n                          {\n                            auth: {\n                              username: \"admin\",\n                              password: \"admin\",\n                            },\n                          }\n                        )\n                        .then(async function (resposta) {\n                          var aux = resposta.data;\n                          await Object.keys(aux).forEach((atributo) => {\n                            if (Array.isArray(aux[atributo])) {\n                              delete aux[atributo];\n                            } else if (atributo === \"url\") {\n                              delete aux[atributo];\n                            } else if (atributo[0] + atributo[1] === \"id\") {\n                              delete aux[atributo];\n                            } else if (atributo === \"visible\") {\n                              aux.visible = true;\n                            }\n                          });\n                          await axios.put(\n                            element4.id,\n                            {\n                              aux,\n                            },\n                            {\n                              auth: {\n                                username: \"admin\",\n                                password: \"admin\",\n                              },\n                            }\n                          );\n                        });\n                    }\n                  });\n                }\n              });\n            }\n          });\n        }\n      });\n      await setTimeout(async function () {\n        vm.$emit(\"close_or_save\", \"close\");\n      }, 300);\n    },\n\n    deselectAll() {\n      this.selection = [];\n    },\n    selectAll() {\n      var vm = this;\n      this.selection = [];\n      this.treeData.forEach((element) => {\n        vm.selection.push(element);\n        if (element.children) {\n          element.children.forEach((element2) => {\n            vm.selection.push(element2);\n            if (element2.children) {\n              element2.children.forEach((element3) => {\n                vm.selection.push(element3);\n                if (element3.children) {\n                  element3.children.forEach((element4) => {\n                    vm.selection.push(element4);\n                  });\n                }\n              });\n            }\n          });\n        }\n      });\n    },\n    addRange(idAssessment) {\n      this.assessmentControl[idAssessment].ranges.push({\n        namerange: \"\",\n        initialvalue: \"\",\n        limitvalue: \"\",\n        url: \"\",\n      });\n    },\n    async deletaRange(idAssessment, idRange) {\n      if (this.assessmentControl[idAssessment].ranges[idRange].url) {\n        var header = await this.$store.dispatch(\"getHeader\");\n        this.axios.delete(\n          this.assessmentControl[idAssessment].ranges[idRange].url,\n          header\n        );\n      }\n      if (idRange == 0) {\n        this.assessmentControl[idAssessment].ranges.shift();\n      } else {\n        this.assessmentControl[idAssessment].ranges.splice(idRange, 1);\n      }\n    },\n    addAssessment() {\n      this.assessmentControl.push({\n        typeThreshold: \"\",\n        scopo: \"\",\n        fk_element: \"\",\n        valueType: \"\",\n        single: {\n          threshold: \"\",\n          url: \"\",\n        },\n        ranges: [],\n        url: \"\",\n      });\n    },\n    async deletaAssessment(idAssessment) {\n      if (this.assessmentControl[idAssessment].url !== null) {\n        var header = await this.$store.dispatch(\"getHeader\");\n        await this.axios.delete(\n          this.assessmentControl[idAssessment].url,\n          header\n        );\n      }\n      if (idAssessment == 0) {\n        this.assessmentControl.shift();\n      } else {\n        this.assessmentControl.splice(idAssessment, 1);\n      }\n    },\n    async deletaSingle(urlSingle) {\n      var header = await this.$store.dispatch(\"getHeader\");\n      await this.axios.delete(urlSingle, header);\n    },\n    addPriorKnowledge() {\n      this.priorControl.push({\n        namepriorknowledge: \"\",\n        priorlevel: \"\",\n        fk_idconcept: \"\",\n        url: \"\",\n      });\n    },\n    async deletaPriorKnowledge(idPrior) {\n      if (this.priorControl[idPrior].url) {\n        var header = await this.$store.dispatch(\"getHeader\");\n        await this.axios.delete(this.priorControl[idPrior].url, header);\n      }\n      if (idPrior == 0) {\n        this.priorControl.shift();\n      } else {\n        this.priorControl.splice(idPrior, 1);\n      }\n    },\n    async validate() {\n      if (this.$refs.form.validate()) {\n        var auxLoopValidation = 1;\n        for (var i = 0; i < this.assessmentControl.length; i++) {\n          for (var j = 0; j < this.assessmentControl.length; j++) {\n            if (\n              this.assessmentControl[i].fk_element ===\n                this.assessmentControl[j].fk_element &&\n              i !== j\n            ) {\n              auxLoopValidation = 0;\n              this.messageError =\n                \"Não pode existir mais de um parâmetro de avaliação para o mesmo elemento. Verifique os parâmetros de avaliação \" +\n                (j + 1) +\n                \" e \" +\n                (i + 1) +\n                \".\";\n              this.dialogError = true;\n              break;\n            }\n          }\n        }\n        if (auxLoopValidation === 1) {\n          for (var m = 0; m < this.priorControl.length; m++) {\n            for (var n = 0; n < this.priorControl.length; n++) {\n              if (\n                this.priorControl[m].fk_idconcept ===\n                  this.priorControl[n].fk_idconcept &&\n                m !== n\n              ) {\n                auxLoopValidation = 0;\n                this.messageError =\n                  \"Não é possível definir um conhecimento prioritário mais de uma vez. Verifique os conhecimentos prioritários \" +\n                  (n + 1) +\n                  \" e \" +\n                  (m + 1) +\n                  \".\";\n                this.dialogError = true;\n                break;\n              }\n            }\n          }\n        }\n        if (auxLoopValidation === 1) {\n          await this.postAssessment();\n          await this.postPriorKnowledges();\n          await this.putVisible();\n          await this.resetVariables();\n        }\n      }\n    },\n    reset() {\n      this.$emit(\"close_or_save\", \"close\");\n      this.assessmentControl = [];\n      this.priorControl = [];\n    },\n    resetVariables() {\n      this.assessmentControl = [];\n      this.priorControl = [];\n    },\n    resetValidation() {\n      this.$refs.form.resetValidation();\n    },\n  },\n};\n</script>\n"]}]}