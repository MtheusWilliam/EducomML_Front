{"remainingRequest":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vitor/Documentos/EducomML/EducomML_Front/master/src/components/instructional_model/ProcedureDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/src/components/instructional_model/ProcedureDialog.vue","mtime":1595699018926},{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/cache-loader/dist/cjs.js","mtime":1593613513250},{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/babel-loader/lib/index.js","mtime":1593613513143},{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/vuetify-loader/lib/loader.js","mtime":1593613518416},{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/cache-loader/dist/cjs.js","mtime":1593613513250},{"path":"/home/vitor/Documentos/EducomML/EducomML_Front/master/node_modules/vue-loader/lib/index.js","mtime":1593613518353}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgKiBhcyBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiUHJvY2VkdXJlRGlhbG9nIiwKICAgIHByb3BzOiBbImRpYWxvZyIsICJwcm9jZWR1cmUiLCAiY29uY2VwdCIsICJtb2R1bGUiLCAiZG9tYWluIl0sCiAgICBkYXRhOiAoKSA9PiAoewogICAgICAgIHZhbGlkOiB0cnVlLAogICAgICAgIGRpYWxvZ19hbGVydDogZmFsc2UsCiAgICAgICAgYXV4SXRlbUluZm86ICIiLAogICAgICAgIHBoYXNlc0NvbnRyb2w6IFtdLAogICAgICAgIGxpbmtVcmxSdWxlczogWyh2KSA9PiAhIXYgfHwgIsOJIG5lY2Vzc8OhcmlvIGluc2VyaXIgYSB1cmwgZG8gc2V1IGxpbmsiXSwKICAgICAgICBwaGFzZXNDb250cm9sUnVsZXM6IFsKICAgICAgICAgICAgKHYpID0+CiAgICAgICAgICAgICEhdiB8fAogICAgICAgICAgICAiw4kgbmVjZXNzw6FyaW8gaW5zZXJpciBhbGd1bSBjb250ZcO6ZG8gbmVzc2EgZXRhcGEgZG8gcHJvY2VkaW1lbnRvIiwKICAgICAgICBdLAogICAgICAgIHByb2NlZHVyZU5hbWU6ICIiLAogICAgICAgIHByb2NlZHVyZU5hbWVSdWxlczogWwogICAgICAgICAgICAodikgPT4gISF2IHx8ICLDiSBuZWNlc3PDoXJpbyBkZXNjcmV2ZXIgbyBub21lIGRvIHByb2NlZGltZW50byIsICh2KSA9PgogICAgICAgICAgICAodiAmJiB2Lmxlbmd0aCA8PSAxMDApIHx8CiAgICAgICAgICAgICJOb21lIGRvIHByb2NlZGltZW50byBkZXZlIHRlciBubyBtw6F4aW1vIDI1IGNhcmFjdGVyZXMiLAogICAgICAgIF0sCiAgICAgICAgcHJvY2VkdXJlRGVzY3JpcHRpb246ICIiLAogICAgICAgIHByb2NlZHVyZURlc2NyaXB0aW9uUnVsZXM6IFsKICAgICAgICAgICAgKHYpID0+CiAgICAgICAgICAgICEhdiB8fAogICAgICAgICAgICAiw4kgbmVjZXNzw6FyaW8gaW5zZXJpciB1bWEgZGVzY3Jpw6fDo28gZG8gcHJvY2VkaW1lbnRvIGEgc2VyIGluc2VyaWRvIiwKICAgICAgICBdLAogICAgICAgIG1vYmlsZU1lZGlhc0NvbnRyb2w6IFtdLAogICAgICAgIGl0ZW1zTW9iaWxlTWVkaWE6IFt7CiAgICAgICAgICAgIGljb246ICJtZGktZmlsZS1pbWFnZSIsCiAgICAgICAgICAgIG5hbWU6ICJJbWFnZW0iLAogICAgICAgIH0sIHsKICAgICAgICAgICAgaWNvbjogIm1kaS1maWxlLXZpZGVvIiwKICAgICAgICAgICAgbmFtZTogIlZpZGVvIiwKICAgICAgICB9LCB7CiAgICAgICAgICAgIGljb246ICJtZGktZmlsZS1tdXNpYyIsCiAgICAgICAgICAgIG5hbWU6ICJBdWRpbyIsCiAgICAgICAgfSwgewogICAgICAgICAgICBpY29uOiAibWRpLWxpbmstdmFyaWFudCIsCiAgICAgICAgICAgIG5hbWU6ICJMaW5rIiwKICAgICAgICB9LCBdLAogICAgfSksCiAgICB3YXRjaDogewogICAgICAgIGRpYWxvZzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHRoaXMuZ2V0UHJvY2VkdXJlKCk7CiAgICAgICAgfSwKICAgICAgICBwcm9jZWR1cmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB0aGlzLmdldFByb2NlZHVyZSgpOwogICAgICAgIH0sCiAgICB9LAogICAgbW91bnRlZDogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5nZXRQcm9jZWR1cmUoKTsKICAgICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRWYWxpZGF0aW9uKCk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGFzeW5jIGdldFByb2NlZHVyZSgpIHsKICAgICAgICAgICAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgICAgICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2bS5wcm9jZWR1cmVOYW1lID0gdm0ucHJvY2VkdXJlLm5hbWVpbmZvcm1hdGlvbml0ZW07CiAgICAgICAgICAgICAgICAgICAgdm0ucHJvY2VkdXJlRGVzY3JpcHRpb24gPSB2bS5wcm9jZWR1cmUuZGVzY3JpcHRpb25pbmZvcm1hdGlvbml0ZW07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMucGhhc2VzQ29udHJvbCA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sID0gW107CiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9jZWR1cmUgIT09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZWR1cmUucGhhc2Vwcm9jZWR1cmVzLmZvckVhY2goKGVsZW1lbnQpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waGFzZXNDb250cm9sLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGVsZW1lbnQuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGVsZW1lbnQudXJsLAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZWR1cmUubW9iaWxlbWVkaWFzLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4TW9iaWxlCiAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0gPT09ICIxIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uZ2V0U3JjSW1hZ2UoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhNb2JpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRNb2JpbGUubmFtZWZpbGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB2bS5tb2JpbGVNZWRpYXNDb250cm9sLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlSW50KGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IGVsZW1lbnRNb2JpbGUucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBlbGVtZW50TW9iaWxlLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5nZXRTcmNWaWRlbygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS5uYW1lZmlsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VJbnQoZWxlbWVudE1vYmlsZS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogZWxlbWVudE1vYmlsZS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IGVsZW1lbnRNb2JpbGUudGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IGVsZW1lbnRNb2JpbGUubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBlbGVtZW50TW9iaWxlLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRNb2JpbGUuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSA9PT0gIjMiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5nZXRTcmNBdWRpbygKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleE1vYmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50TW9iaWxlLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudE1vYmlsZS5uYW1lZmlsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VJbnQoZWxlbWVudE1vYmlsZS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogZWxlbWVudE1vYmlsZS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBlbGVtZW50TW9iaWxlLm5hbWVmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZWxlbWVudE1vYmlsZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0gPT09ICI1IikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdm0ubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZUludChlbGVtZW50TW9iaWxlLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogZWxlbWVudE1vYmlsZS51cmxsaW5rLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZWxlbWVudE1vYmlsZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBhc3luYyBhbHRlcmFfQ3JpYV9Qcm9jZWRpbWVudG8oKSB7CiAgICAgICAgICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvY2VkdXJlID09PSAiIikgewogICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXIgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0SGVhZGVyIik7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImVzcG9zdGEuZGF0YS51cmwiKTsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcwogICAgICAgICAgICAgICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvaW5mb3JtYXRpb25pdGVtL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1laW5mb3JtYXRpb25pdGVtOiB0aGlzLnByb2NlZHVyZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb25pbmZvcm1hdGlvbml0ZW06IHRoaXMucHJvY2VkdXJlRGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaW5mb3JtYXRpb25pdGVtdHlwZTogYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9pbmZvcm1hdGlvbml0ZW10eXBlLzQvYCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZGNvbmNlcHQ6IHRoaXMuY29uY2VwdC51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uYXV4SXRlbUluZm8gPSByZXNwb3N0YS5kYXRhLnVybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdXhQYXRoID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodm0ubW9iaWxlTWVkaWFzQ29udHJvbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wuZm9yRWFjaChhc3luYyhtb2JpbGVtZWRpYSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudXJsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudHlwZSAhPT0gNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmViYXNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlZigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZChtb2JpbGVtZWRpYS5wYXRoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucHV0KG1vYmlsZW1lZGlhLm9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXhQYXRoID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5kb21haW4uaWRrbm93bGVkZ2Vkb21haW4udG9TdHJpbmcoKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYXdhaXQgc2V0VGltZW91dChhc3luYyBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgRGF0ZS5ub3coKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlICE9PSA1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWJhc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0b3JhZ2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVmKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKGF1eFBhdGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wdXQobW9iaWxlbWVkaWEub2JqZWN0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEucGF0aCA9IGF1eFBhdGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2bS5tb2JpbGVNZWRpYXNDb250cm9sKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wuZm9yRWFjaChhc3luYyBmdW5jdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4bW9iaWxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIERBTkRPIFBVVCBOT1MgTU9CSUxFTUVESUFTIFFVRSBQT1NTVUVNIFVSTCovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS51cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS51cmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiSW1hZ2VtICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiaHR0cDovL2xvY2FsaG9zdDo4MDAwL21lZGlhdHlwZS8iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbW9iaWxlbWVkaWEucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBtb2JpbGVtZWRpYS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiSW1hZ2VtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleG1vYmlsZSArIDEpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3Bvc3RhLmRhdGEubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2luZm9ybWF0aW9uaXRlbTogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS51cmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiVmlkZW8gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnR5cGUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG1vYmlsZW1lZGlhLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLm5hbWVmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBtb2JpbGVtZWRpYS50aW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2luZm9ybWF0aW9uaXRlbTogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS51cmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQXVkaW8gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnR5cGUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG1vYmlsZW1lZGlhLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLm5hbWVmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2luZm9ybWF0aW9uaXRlbTogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSA1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS51cmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiTGluayAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZTogImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbW9iaWxlbWVkaWEub2JqZWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2luZm9ybWF0aW9uaXRlbTogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogREFORE8gUE9TVCBOT1MgTU9CSUxFTUVESUFTIFFVRSBOw4NPIFBPU1NVRU0gVVJMKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1vYmlsZW1lZGlhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImFzZGZzZGZzZCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJJbWFnZW0gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnR5cGUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG1vYmlsZW1lZGlhLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiSW1hZ2VtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleG1vYmlsZSArIDEpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3Bvc3RhLmRhdGEubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2luZm9ybWF0aW9uaXRlbTogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImkiLCBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDo4MDAwL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiVmlkZW8gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnR5cGUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG1vYmlsZW1lZGlhLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLnBhdGguc3BsaXQoIi8iKVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbW9iaWxlbWVkaWEudGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pbmZvcm1hdGlvbml0ZW06IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJBdWRpbyAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZTogImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbW9iaWxlbWVkaWEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2luZm9ybWF0aW9uaXRlbTogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSA1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tb2JpbGVtZWRpYS9gLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkxpbmsgIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnR5cGUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG1vYmlsZW1lZGlhLm9iamVjdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pbmZvcm1hdGlvbml0ZW06IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MKICAgICAgICAgICAgICAgICAgICAgICAgLnB1dCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvaW5mb3JtYXRpb25pdGVtL2AgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZWR1cmUuaWRpbmZvcm1hdGlvbml0ZW0gKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYC9gLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWluZm9ybWF0aW9uaXRlbTogdGhpcy5wcm9jZWR1cmVOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uaW5mb3JtYXRpb25pdGVtOiB0aGlzLnByb2NlZHVyZURlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2luZm9ybWF0aW9uaXRlbXR5cGU6IGBodHRwOi8vbG9jYWxob3N0OjgwMDAvaW5mb3JtYXRpb25pdGVtdHlwZS80L2AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRjb25jZXB0OiB0aGlzLmNvbmNlcHQudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24ocmVzcG9zdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZtLmF1eEl0ZW1JbmZvID0gcmVzcG9zdGEuZGF0YS51cmw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXV4UGF0aCA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZtLm1vYmlsZU1lZGlhc0NvbnRyb2wpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB2bS5tb2JpbGVNZWRpYXNDb250cm9sLmZvckVhY2goYXN5bmMobW9iaWxlbWVkaWEpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnVybCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgIT09IDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlYmFzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZWYoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGQobW9iaWxlbWVkaWEucGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnB1dChtb2JpbGVtZWRpYS5vYmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV4UGF0aCA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uZG9tYWluLmlka25vd2xlZGdlZG9tYWluLnRvU3RyaW5nKCkgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGF3YWl0IHNldFRpbWVvdXQoYXN5bmMgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IERhdGUubm93KCkudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9iaWxlbWVkaWEudHlwZSAhPT0gNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmViYXNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlZigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZChhdXhQYXRoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucHV0KG1vYmlsZW1lZGlhLm9iamVjdCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnBhdGggPSBhdXhQYXRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodm0ubW9iaWxlTWVkaWFzQ29udHJvbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB2bS5tb2JpbGVNZWRpYXNDb250cm9sLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleG1vYmlsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBEQU5ETyBQVVQgTk9TIE1PQklMRU1FRElBUyBRVUUgUE9TU1VFTSBVUkwqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtb2JpbGVtZWRpYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS51cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS51cmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiSW1hZ2VtICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiaHR0cDovL2xvY2FsaG9zdDo4MDAwL21lZGlhdHlwZS8iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbW9iaWxlbWVkaWEucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBtb2JpbGVtZWRpYS5uYW1lZmlsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiSW1hZ2VtICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbmRleG1vYmlsZSArIDEpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3Bvc3RhLmRhdGEubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2luZm9ybWF0aW9uaXRlbTogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wdXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnVybCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJWaWRlbyAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZTogImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbW9iaWxlbWVkaWEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG1vYmlsZW1lZGlhLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEubmFtZWZpbGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG1vYmlsZW1lZGlhLnRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRpbnN0cnVjdGlvbmFsZWxlbWVudDogcmVzcG9zdGEuZGF0YS51cmwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2JpbGVtZWRpYS50eXBlID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS51cmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQXVkaW8gIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnR5cGUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG1vYmlsZW1lZGlhLnBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG1vYmlsZW1lZGlhLm5hbWVmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudXJsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkxpbmsgIiArIChpbmRleG1vYmlsZSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRtZWRpYXR5cGU6ICJodHRwOi8vbG9jYWxob3N0OjgwMDAvbWVkaWF0eXBlLyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnR5cGUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZWZpbGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ZnVsbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRzaG9ydDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybGxpbms6IG1vYmlsZW1lZGlhLm9iamVjdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBEQU5ETyBQT1NUIE5PUyBNT0JJTEVNRURJQVMgUVVFIE7Dg08gUE9TU1VFTSBVUkwqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDo4MDAwL21vYmlsZW1lZGlhL2AsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiSW1hZ2VtICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiaHR0cDovL2xvY2FsaG9zdDo4MDAwL21lZGlhdHlwZS8iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBtb2JpbGVtZWRpYS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbW9iaWxlbWVkaWEucmVzb2x1dGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBtb2JpbGVtZWRpYS5wYXRoLnNwbGl0KCIvIilbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIkltYWdlbSAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5kZXhtb2JpbGUgKyAxKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb3N0YS5kYXRhLmxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRmdWxsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHNob3J0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsbGluazogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHlMZXZlbDogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXJuaW5nU3R5bGU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZGluc3RydWN0aW9uYWxlbGVtZW50OiByZXNwb3N0YS5kYXRhLnVybAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiaSIsIGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJWaWRlbyAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZTogImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbW9iaWxlbWVkaWEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG1vYmlsZW1lZGlhLnJlc29sdXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBtb2JpbGVtZWRpYS50aW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJBdWRpbyAiICsgKGluZGV4bW9iaWxlICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pZG1lZGlhdHlwZTogImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9tZWRpYXR5cGUvIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudHlwZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogbW9iaWxlbWVkaWEucGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lZmlsZTogbW9iaWxlbWVkaWEucGF0aC5zcGxpdCgiLyIpWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eUxldmVsOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhcm5pbmdTdHlsZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkaW5zdHJ1Y3Rpb25hbGVsZW1lbnQ6IHJlc3Bvc3RhLmRhdGEudXJsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9iaWxlbWVkaWEudHlwZSA9PT0gNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvbW9iaWxlbWVkaWEvYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJMaW5rICIgKyAoaW5kZXhtb2JpbGUgKyAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkbWVkaWF0eXBlOiAiaHR0cDovL2xvY2FsaG9zdDo4MDAwL21lZGlhdHlwZS8iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS50eXBlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dGZ1bGw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0c2hvcnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxsaW5rOiBtb2JpbGVtZWRpYS5vYmplY3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmaWN1bHR5TGV2ZWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWFybmluZ1N0eWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaWRpbnN0cnVjdGlvbmFsZWxlbWVudDogcmVzcG9zdGEuZGF0YS51cmwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXN5bmMgYWx0ZXJhX0NyaWFfRmFzZXMoKSB7CiAgICAgICAgICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgICAgICAgICAgdGhpcy5waGFzZXNDb250cm9sLmZvckVhY2goYXN5bmMgZnVuY3Rpb24oZWxlbWVudCwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC51cmwgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0OjgwMDAvcGhhc2Vwcm9jZWR1cmUvYCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyOiBpbmRleCArIDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGVsZW1lbnQuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtfaW5mb3JtYXRpb25pdGVtOiB2bS5hdXhJdGVtSW5mbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudXJsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IGluZGV4ICsgMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZWxlbWVudC5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma19pbmZvcm1hdGlvbml0ZW06IHZtLmF1eEl0ZW1JbmZvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBhc3luYyB2YWxpZGF0ZSgpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBoYXNlc0NvbnRyb2wubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMucGhhc2VzQ29udHJvbC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWx0ZXJhX0NyaWFfUHJvY2VkaW1lbnRvKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWx0ZXJhX0NyaWFfRmFzZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waGFzZXNDb250cm9sID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuJGVtaXQoImNsb3NlIiwgaSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dfYWxlcnQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVzZXQoKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXQoKTsKICAgICAgICAgICAgICAgIHRoaXMucGhhc2VzQ29udHJvbCA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgiY2xvc2UiKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWRkUGhhc2UoKSB7CiAgICAgICAgICAgICAgICB0aGlzLnBoYXNlc0NvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgdXJsOiBudWxsLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFzeW5jIGRlbGV0YVBoYXNlKGlkUGhhc2UpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnBoYXNlc0NvbnRyb2xbaWRQaGFzZV0udXJsICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKHRoaXMucGhhc2VzQ29udHJvbFtpZFBoYXNlXS51cmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFsdGVyYV9DcmlhX0Zhc2VzKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoaWRQaGFzZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5waGFzZXNDb250cm9sLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMucGhhc2VzQ29udHJvbC5zcGxpY2UoaWRQaGFzZSwgMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFkZE1vYmlsZU1lZGlhKG1vYmlsZU1lZGlhVHlwZSkgewogICAgICAgICAgICAgICAgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogbW9iaWxlTWVkaWFUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMikgewogICAgICAgICAgICAgICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogbW9iaWxlTWVkaWFUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gMykgewogICAgICAgICAgICAgICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogbW9iaWxlTWVkaWFUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Q6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVmaWxlOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZU1lZGlhVHlwZSA9PT0gNCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogbW9iaWxlTWVkaWFUeXBlICsgMSwKICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFzeW5jIGRlbGV0ZU1vYmlsZU1lZGlhKGlkTW9iaWxlTWVkaWEpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2xbaWRNb2JpbGVNZWRpYV0udXJsKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbFtpZE1vYmlsZU1lZGlhXS50eXBlICE9PSA1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZpcmViYXNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RvcmFnZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVmKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2xbaWRNb2JpbGVNZWRpYV0ucGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kZWxldGUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbFtpZE1vYmlsZU1lZGlhXS51cmwsIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIiwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChpZE1vYmlsZU1lZGlhID09IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1vYmlsZU1lZGlhc0NvbnRyb2wuc2hpZnQoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sLnNwbGljZShpZE1vYmlsZU1lZGlhLCAxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXR1YWxpemFNZXRhKCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2JpbGVNZWRpYXNDb250cm9sLmZvckVhY2goKG1vYmlsZW1lZGlhKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2JpbGVtZWRpYS5vYmplY3QgJiYgIW1vYmlsZW1lZGlhLnVybCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwobW9iaWxlbWVkaWEub2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLnJlc29sdXRpb24gPSBpbWcud2lkdGggKyAiWCIgKyBpbWcuaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vYmlsZW1lZGlhLnR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ2aWRlbyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzb3VyY2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2Uuc2V0QXR0cmlidXRlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAic3JjIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVVJMLmNyZWF0ZU9iamVjdFVSTChtb2JpbGVtZWRpYS5vYmplY3QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlby5hcHBlbmRDaGlsZChzb3VyY2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvLm9uY2FucGxheSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5yZXNvbHV0aW9uID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvLnZpZGVvV2lkdGggKyAiWCIgKyB2aWRlby52aWRlb0hlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEudGltZSA9IHZpZGVvLmR1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXN5bmMgZ2V0U3JjSW1hZ2UoaW5kZXhNb2JpbGUsIHBhdGgsIG5hbWVmaWxlKSB7CiAgICAgICAgICAgICAgICAvKnZhciBvYmogPSB7fTsqLwogICAgICAgICAgICAgICAgaWYgKHBhdGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZpcmViYXNlCiAgICAgICAgICAgICAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgICAgICAgICAgICAgLnJlZihwYXRoKQogICAgICAgICAgICAgICAgICAgICAgICAuZ2V0RG93bmxvYWRVUkwoKQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbih1cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qdm0udmlld0ltYWdlU3JjID0gdXJsOyovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gImJsb2IiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibG9iID0geGhyLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBuYW1lZmlsZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBibG9iLnR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2bS5hdXhHZXRTcmMucHVzaChmaWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5hdHVhbGl6YU9iaihmaWxlLCBpbmRleE1vYmlsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9wZW4oIkdFVCIsIHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXN5bmMgZ2V0U3JjVmlkZW8oaW5kZXhNb2JpbGUsIHBhdGgsIG5hbWVmaWxlKSB7CiAgICAgICAgICAgICAgICAvKnZhciBvYmogPSB7fTsqLwogICAgICAgICAgICAgICAgaWYgKHBhdGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZpcmViYXNlCiAgICAgICAgICAgICAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgICAgICAgICAgICAgLnJlZihwYXRoKQogICAgICAgICAgICAgICAgICAgICAgICAuZ2V0RG93bmxvYWRVUkwoKQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbih1cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qdm0udmlld1ZpZGVvU3JjID0gdXJsOyovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gImJsb2IiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibG9iID0geGhyLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBuYW1lZmlsZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBibG9iLnR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2bS5hdXhHZXRTcmMucHVzaChmaWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5hdHVhbGl6YU9iaihmaWxlLCBpbmRleE1vYmlsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9wZW4oIkdFVCIsIHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXN5bmMgZ2V0U3JjQXVkaW8oaW5kZXhNb2JpbGUsIHBhdGgsIG5hbWVmaWxlKSB7CiAgICAgICAgICAgICAgICAvKnZhciBvYmogPSB7fTsqLwogICAgICAgICAgICAgICAgaWYgKHBhdGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdm0gPSB0aGlzOwogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZpcmViYXNlCiAgICAgICAgICAgICAgICAgICAgICAgIC5zdG9yYWdlKCkKICAgICAgICAgICAgICAgICAgICAgICAgLnJlZihwYXRoKQogICAgICAgICAgICAgICAgICAgICAgICAuZ2V0RG93bmxvYWRVUkwoKQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbih1cmwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qdm0udmlld0F1ZGlvU3JjID0gdXJsOyovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gImJsb2IiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibG9iID0geGhyLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBuYW1lZmlsZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBibG9iLnR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2bS5hdXhHZXRTcmMucHVzaChmaWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5hdHVhbGl6YU9iaihmaWxlLCBpbmRleE1vYmlsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9wZW4oIkdFVCIsIHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXR1YWxpemFPYmooZmlsZSwgaW5kZXhNb2JpbGUpIHsKICAgICAgICAgICAgICAgIHRoaXMubW9iaWxlTWVkaWFzQ29udHJvbFtpbmRleE1vYmlsZV0ub2JqZWN0ID0gZmlsZTsKICAgICAgICAgICAgfSwKICAgIH0sCn07Cgo="},{"version":3,"sources":["ProcedureDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqJA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProcedureDialog.vue","sourceRoot":"src/components/instructional_model","sourcesContent":["\n\n<template>\n\n<v-container class=\"pa-0\">\n    <v-card>\n        <v-card-title style=\"background-color:#63B0B0; color:white;\">\n            <span class=\"headline\">\n          <p>Descreva o procedimento a ser criado.</p>\n        </span>\n            <v-spacer></v-spacer>\n            <v-menu width=\"300px\" origin=\"bottom bottom\" :offset-y=\"true\" transition=\"scale-transition\">\n                <template v-slot:activator=\"{ on }\">\n                    <v-btn v-on=\"on\" large color=\"primary\" style=\"color:white;\" class=\"mb-3\">\n                        <strong>Adicionar MobileMedia</strong>\n                        <v-icon class=\"ml-2\" large color=\"white\">mdi-plus-box</v-icon>\n                    </v-btn>\n                </template>\n\n                <v-list>\n                    <v-list-item v-for=\"(item, i) in itemsMobileMedia\" :key=\"i\" @click=\"addMobileMedia(i + 1)\">\n                        <v-icon x-large color=\"blue\">{{ item.icon }}</v-icon>\n                        <v-list-item-title style=\"font-size: 1.2em; color:#2196F3;\" class=\"ml-1\">\n                            <strong>{{ item.name }}</strong>\n                        </v-list-item-title>\n                    </v-list-item>\n                </v-list>\n            </v-menu>\n        </v-card-title>\n        <v-card-text>\n            <v-form ref=\"form\" v-model=\"valid\" lazy-validation class=\"mt-3\">\n                <label class=\"pt-2\" style=\"font-size:1.3em;\" for=\"procedureNameArea\">\n                    <strong>Identificador do procedimento:</strong>\n                </label>\n                <v-text-field id=\"procedureNameArea\" v-model=\"procedureName\" :counter=\"100\" :rules=\"procedureNameRules\" required class=\"mt-2 mb-4\"></v-text-field>\n                <label class=\"pt-2\" style=\"font-size:1.3em;\" for=\"procedureDescriptionArea\">\n                    <strong>Escreva a descrição do procedimento:</strong>\n                </label>\n                <v-textarea id=\"procedureDescriptionArea\" v-model=\"procedureDescription\" :rules=\"procedureDescriptionRules\" background-color=\"#F2F3F3\" clearable clear-icon=\"mdi-close-circle\" class=\"mt-2\" name=\"input-3-1\" filled auto-grow required></v-textarea>\n                <div v-if=\"mobileMediasControl.length > 0\">\n                    <label class=\"mb-6 pt-2\" style=\"font-size:1.3em;\">\n                        <strong>MobileMedias do procedimento:</strong>\n                    </label>\n                    <div class=\"mt-8\"></div>\n                    <div v-for=\"(mobilemedia, i) in mobileMediasControl\" :key=\"i\">\n                        <v-row v-if=\"mobilemedia.type === 1\">\n                            <v-spacer></v-spacer>\n                            <v-file-input style=\"width: 165px;\" label=\"UPLOAD IMAGE\" filled @change=\"atualizaMeta\" v-model=\"mobilemedia.object\" accept=\"image/*\" prepend-icon=\"mdi-camera\"></v-file-input>\n                            <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                                <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\">mdi-minus-box</v-icon>\n                            </v-btn>\n                            <v-spacer></v-spacer>\n                        </v-row>\n                        <v-row v-if=\"mobilemedia.type === 2\">\n                            <v-spacer></v-spacer>\n                            <v-file-input style=\"width: 165px;\" label=\"UPLOAD VIDEO\" filled @change=\"atualizaMeta\" v-model=\"mobilemedia.object\" accept=\"video/*\" prepend-icon=\"mdi-video\"></v-file-input>\n                            <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                                <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\">mdi-minus-box</v-icon>\n                            </v-btn>\n                            <v-spacer></v-spacer>\n                        </v-row>\n                        <v-row v-if=\"mobilemedia.type === 3\">\n                            <v-spacer></v-spacer>\n                            <v-file-input style=\"width: 165px;\" label=\"UPLOAD AUDIO\" filled v-model=\"mobilemedia.object\" accept=\"audio/*\" prepend-icon=\"mdi-file-music\"></v-file-input>\n                            <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                                <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\">mdi-minus-box</v-icon>\n                            </v-btn>\n                            <v-spacer></v-spacer>\n                        </v-row>\n                        <v-row v-if=\"mobilemedia.type === 5\" class=\"mb-2\">\n                            <v-spacer></v-spacer>\n                            <v-text-field v-model=\"mobilemedia.object\" :rules=\"linkUrlRules\" label=\"Url\" required></v-text-field>\n                            <v-btn icon=\"icon\" class=\"mt-2 ml-3\">\n                                <v-icon x-large color=\"red\" @click=\"deleteMobileMedia(i)\">mdi-minus-box</v-icon>\n                            </v-btn>\n                            <v-spacer></v-spacer>\n                        </v-row>\n                    </div>\n                </div>\n                <v-app-bar color=\"#D2A64D\" dense dark height=\"45px\">\n                    <v-toolbar-title style=\"font-size:1.2em;\">\n                        <strong>Lista de fases do procedimento</strong>\n                    </v-toolbar-title>\n                </v-app-bar>\n                <v-container>\n                    <v-row style=\"height:50px;\">\n                        <v-col cols=\"3\">\n                            <strong>\n                  <p style=\"font-size:1.2em;\">Ordem da fase</p>\n                </strong>\n                        </v-col>\n                        <v-col cols=\"8\">\n                            <strong>\n                  <p style=\"font-size:1.2em;\">Descrição da fase</p>\n                </strong>\n                        </v-col>\n                        <v-col cols=\"1\">\n                            <v-btn icon=\"icon\">\n                                <v-icon large class=\"mb-3\" color=\"primary\" @click=\"addPhase()\">mdi-plus-box</v-icon>\n                            </v-btn>\n                        </v-col>\n                    </v-row>\n\n                    <v-row v-for=\"(item, i) in phasesControl\" :key=\"i\">\n                        <v-col cols=\"3\" style=\"text-align:center; font-size: 1.8em; margin-top:10px;\">{{ i + 1 }}º</v-col>\n                        <v-col cols=\"8\">\n                            <v-textarea style=\"margin-top: -10px;\" v-model=\"phasesControl[i].description\" background-color=\"#F2F3F3\" :rules=\"phasesControlRules\" rows=\"2\" clearable clear-icon=\"mdi-close-circle\" filled auto-grow required></v-textarea>\n                        </v-col>\n                        <v-col cols=\"1\">\n                            <v-btn icon=\"icon\">\n                                <v-icon large color=\"red\" @click=\"deletaPhase(i)\">mdi-minus-box</v-icon>\n                            </v-btn>\n                        </v-col>\n                    </v-row>\n                </v-container>\n            </v-form>\n        </v-card-text>\n        <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"red\" height=\"49\" dark large @click=\"reset()\">\n                Close\n                <v-icon dark right>mdi-close</v-icon>\n            </v-btn>\n            <v-btn color=\"success\" height=\"49\" dark large @click=\"validate()\">\n                Save\n                <v-icon dark right>mdi-content-save</v-icon>\n            </v-btn>\n        </v-card-actions>\n    </v-card>\n    <div class=\"text-center\">\n        <v-dialog v-model=\"dialog_alert\" width=\"500\">\n            <v-card>\n                <v-card-title class=\"headline red\" primary-title style=\"color:white;\">ALERTA!</v-card-title>\n                <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\">Para criar um procedimento, é necessário criar pelo menos uma etapa.\n                </v-card-text>\n                <v-divider></v-divider>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"primary\" text @click=\"dialog_alert = false\">Ok</v-btn>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n    </div>\n</v-container>\n\n</template>\n\n<script>\n\nimport axios from \"axios\";\nimport * as firebase from \"firebase\";\n\nexport default {\n    name: \"ProcedureDialog\",\n    props: [\"dialog\", \"procedure\", \"concept\", \"module\", \"domain\"],\n    data: () => ({\n        valid: true,\n        dialog_alert: false,\n        auxItemInfo: \"\",\n        phasesControl: [],\n        linkUrlRules: [(v) => !!v || \"É necessário inserir a url do seu link\"],\n        phasesControlRules: [\n            (v) =>\n            !!v ||\n            \"É necessário inserir algum conteúdo nessa etapa do procedimento\",\n        ],\n        procedureName: \"\",\n        procedureNameRules: [\n            (v) => !!v || \"É necessário descrever o nome do procedimento\", (v) =>\n            (v && v.length <= 100) ||\n            \"Nome do procedimento deve ter no máximo 25 caracteres\",\n        ],\n        procedureDescription: \"\",\n        procedureDescriptionRules: [\n            (v) =>\n            !!v ||\n            \"É necessário inserir uma descrição do procedimento a ser inserido\",\n        ],\n        mobileMediasControl: [],\n        itemsMobileMedia: [{\n            icon: \"mdi-file-image\",\n            name: \"Imagem\",\n        }, {\n            icon: \"mdi-file-video\",\n            name: \"Video\",\n        }, {\n            icon: \"mdi-file-music\",\n            name: \"Audio\",\n        }, {\n            icon: \"mdi-link-variant\",\n            name: \"Link\",\n        }, ],\n    }),\n    watch: {\n        dialog: function() {\n            this.getProcedure();\n        },\n        procedure: function() {\n            this.getProcedure();\n        },\n    },\n    mounted: function() {\n        this.getProcedure();\n        this.$refs.form.resetValidation();\n    },\n    methods: {\n        async getProcedure() {\n                var vm = this;\n                this.$nextTick(function() {\n                    vm.procedureName = vm.procedure.nameinformationitem;\n                    vm.procedureDescription = vm.procedure.descriptioninformationitem;\n                });\n                this.phasesControl = [];\n                this.mobileMediasControl = [];\n                if (this.procedure !== \"\") {\n                    this.procedure.phaseprocedures.forEach((element) => {\n                        this.phasesControl.push({\n                            description: element.description,\n                            url: element.url,\n                        });\n                    });\n\n                    await this.procedure.mobilemedias.forEach(async function(\n                        elementMobile,\n                        indexMobile\n                    ) {\n                        if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"1\") {\n                            vm.getSrcImage(\n                                indexMobile,\n                                elementMobile.path,\n                                elementMobile.namefile\n                            );\n                            await vm.mobileMediasControl.push({\n                                type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                                object: null,\n                                resolution: elementMobile.resolution,\n                                path: elementMobile.path,\n                                namefile: elementMobile.namefile,\n                                url: elementMobile.url,\n                            });\n                        } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"2\") {\n                            vm.getSrcVideo(\n                                indexMobile,\n                                elementMobile.path,\n                                elementMobile.namefile\n                            );\n                            await vm.mobileMediasControl.push({\n                                type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                                object: null,\n                                resolution: elementMobile.resolution,\n                                time: elementMobile.time,\n                                path: elementMobile.path,\n                                namefile: elementMobile.namefile,\n                                url: elementMobile.url,\n                            });\n                        } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"3\") {\n                            vm.getSrcAudio(\n                                indexMobile,\n                                elementMobile.path,\n                                elementMobile.namefile\n                            );\n                            await vm.mobileMediasControl.push({\n                                type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                                object: null,\n                                path: elementMobile.path,\n                                namefile: elementMobile.namefile,\n                                url: elementMobile.url,\n                            });\n                        } else if (elementMobile.fk_idmediatype.split(\"/\")[4] === \"5\") {\n                            await vm.mobileMediasControl.push({\n                                type: parseInt(elementMobile.fk_idmediatype.split(\"/\")[4]),\n                                object: elementMobile.urllink,\n                                url: elementMobile.url,\n                            });\n                        }\n                    });\n                }\n            },\n            async altera_Cria_Procedimento() {\n                var vm = this;\n                if (this.procedure === \"\") {\n                    var header = await this.$store.dispatch(\"getHeader\");\n                    console.log(\"esposta.data.url\");\n                    await axios\n                        .post(\n                            `http://localhost:8000/informationitem/`, {\n                                nameinformationitem: this.procedureName,\n                                descriptioninformationitem: this.procedureDescription,\n                                fk_informationitemtype: `http://localhost:8000/informationitemtype/4/`,\n                                fk_idconcept: this.concept.url,\n                                visible: true,\n                            },\n                            header\n                        )\n                        .then(async function(resposta) {\n                            vm.auxItemInfo = resposta.data.url;\n                            var auxPath = \"\";\n                            if (vm.mobileMediasControl) {\n                                await vm.mobileMediasControl.forEach(async(mobilemedia) => {\n                                    if (mobilemedia.url) {\n                                        if (mobilemedia.type !== 5) {\n                                            firebase\n                                                .storage()\n                                                .ref()\n                                                .child(mobilemedia.path)\n                                                .put(mobilemedia.object);\n                                        }\n                                    } else {\n                                        auxPath =\n                                            vm.domain.idknowledgedomain.toString() +\n                                            \"/\" +\n                                            (await setTimeout(async function() {\n                                                await Date.now().toString();\n                                            }, 1));\n                                        if (mobilemedia.type !== 5) {\n                                            firebase\n                                                .storage()\n                                                .ref()\n                                                .child(auxPath)\n                                                .put(mobilemedia.object);\n\n                                            mobilemedia.path = auxPath;\n                                        }\n                                    }\n                                });\n                            }\n                            if (vm.mobileMediasControl) {\n                                var i = 0;\n                                await vm.mobileMediasControl.forEach(async function(\n                                    mobilemedia,\n                                    indexmobile\n                                ) {\n                                    /* DANDO PUT NOS MOBILEMEDIAS QUE POSSUEM URL*/\n                                    if (mobilemedia.url) {\n                                        if (mobilemedia.type === 1) {\n                                            await axios.put(\n                                                mobilemedia.url, {\n                                                    label: \"Imagem \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: mobilemedia.path,\n                                                    resolution: mobilemedia.resolution,\n                                                    namefile: mobilemedia.namefile,\n                                                    description: \"Imagem \" +\n                                                        (indexmobile + 1) +\n                                                        \" \" +\n                                                        resposta.data.label,\n                                                    time: null,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: null,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_informationitem: resposta.data.url,\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\",\n                                                    },\n                                                }\n                                            );\n                                        } else if (mobilemedia.type === 2) {\n                                            await axios.put(\n                                                mobilemedia.url, {\n                                                    label: \"Video \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: mobilemedia.path,\n                                                    resolution: mobilemedia.resolution,\n                                                    namefile: mobilemedia.namefile,\n                                                    description: null,\n                                                    time: mobilemedia.time,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: null,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_informationitem: resposta.data.url,\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\",\n                                                    },\n                                                }\n                                            );\n                                        } else if (mobilemedia.type === 3) {\n                                            await axios.put(\n                                                mobilemedia.url, {\n                                                    label: \"Audio \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: mobilemedia.path,\n                                                    resolution: null,\n                                                    namefile: mobilemedia.namefile,\n                                                    description: null,\n                                                    time: null,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: null,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_informationitem: resposta.data.url,\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\",\n                                                    },\n                                                }\n                                            );\n                                        } else if (mobilemedia.type === 5) {\n                                            await axios.put(\n                                                mobilemedia.url, {\n                                                    label: \"Link \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: null,\n                                                    resolution: null,\n                                                    namefile: null,\n                                                    description: null,\n                                                    time: null,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: mobilemedia.object,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_informationitem: resposta.data.url,\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\",\n                                                    },\n                                                }\n                                            );\n                                        }\n                                    } else {\n                                        /* DANDO POST NOS MOBILEMEDIAS QUE NÃO POSSUEM URL*/\n                                        console.log(mobilemedia);\n                                        if (mobilemedia.type === 1) {\n                                            console.log(\"asdfsdfsd\");\n                                            await axios.post(\n                                                `http://localhost:8000/mobilemedia/`, {\n                                                    label: \"Imagem \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: mobilemedia.path,\n                                                    resolution: mobilemedia.resolution,\n                                                    namefile: mobilemedia.path.split(\"/\")[1],\n                                                    description: \"Imagem \" +\n                                                        (indexmobile + 1) +\n                                                        \" \" +\n                                                        resposta.data.label,\n                                                    time: null,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: null,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_informationitem: resposta.data.url,\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\",\n                                                    },\n                                                }\n                                            );\n                                        } else if (mobilemedia.type === 2) {\n                                            console.log(\"i\", i);\n                                            await axios.post(\n                                                `http://localhost:8000/mobilemedia/`, {\n                                                    label: \"Video \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: mobilemedia.path,\n                                                    resolution: mobilemedia.resolution,\n                                                    namefile: mobilemedia.path.split(\"/\")[1],\n                                                    description: null,\n                                                    time: mobilemedia.time,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: null,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_informationitem: resposta.data.url,\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\",\n                                                    },\n                                                }\n                                            );\n                                        } else if (mobilemedia.type === 3) {\n                                            await axios.post(\n                                                `http://localhost:8000/mobilemedia/`, {\n                                                    label: \"Audio \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: mobilemedia.path,\n                                                    resolution: null,\n                                                    namefile: mobilemedia.path.split(\"/\")[1],\n                                                    description: null,\n                                                    time: null,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: null,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_informationitem: resposta.data.url,\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\",\n                                                    },\n                                                }\n                                            );\n                                        } else if (mobilemedia.type === 5) {\n                                            await axios.post(\n                                                `http://localhost:8000/mobilemedia/`, {\n                                                    label: \"Link \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: null,\n                                                    resolution: null,\n                                                    namefile: null,\n                                                    description: null,\n                                                    time: null,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: mobilemedia.object,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_informationitem: resposta.data.url,\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\",\n                                                    },\n                                                }\n                                            );\n                                        }\n                                    }\n                                });\n                            }\n                        });\n                } else {\n                    await axios\n                        .put(\n                            `http://localhost:8000/informationitem/` +\n                            this.procedure.idinformationitem +\n                            `/`, {\n                                nameinformationitem: this.procedureName,\n                                descriptioninformationitem: this.procedureDescription,\n                                fk_informationitemtype: `http://localhost:8000/informationitemtype/4/`,\n                                fk_idconcept: this.concept.url,\n                            }, {\n                                auth: {\n                                    username: \"admin\",\n                                    password: \"admin\",\n                                },\n                            }\n                        )\n                        .then(async function(resposta) {\n                            vm.auxItemInfo = resposta.data.url;\n                            var auxPath = \"\";\n                            if (vm.mobileMediasControl) {\n                                await vm.mobileMediasControl.forEach(async(mobilemedia) => {\n                                    if (mobilemedia.url) {\n                                        if (mobilemedia.type !== 5) {\n                                            firebase\n                                                .storage()\n                                                .ref()\n                                                .child(mobilemedia.path)\n                                                .put(mobilemedia.object);\n                                        }\n                                    } else {\n                                        auxPath =\n                                            vm.domain.idknowledgedomain.toString() +\n                                            \"/\" +\n                                            (await setTimeout(async function() {\n                                                await Date.now().toString();\n                                            }, 1));\n                                        if (mobilemedia.type !== 5) {\n                                            firebase\n                                                .storage()\n                                                .ref()\n                                                .child(auxPath)\n                                                .put(mobilemedia.object);\n\n                                            mobilemedia.path = auxPath;\n                                        }\n                                    }\n                                });\n                            }\n                            if (vm.mobileMediasControl) {\n                                var i = 0;\n                                await vm.mobileMediasControl.forEach(async function(\n                                    mobilemedia,\n                                    indexmobile\n                                ) {\n                                    /* DANDO PUT NOS MOBILEMEDIAS QUE POSSUEM URL*/\n                                    console.log(mobilemedia);\n                                    if (mobilemedia.url) {\n                                        if (mobilemedia.type === 1) {\n                                            await axios.put(\n                                                mobilemedia.url, {\n                                                    label: \"Imagem \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: mobilemedia.path,\n                                                    resolution: mobilemedia.resolution,\n                                                    namefile: mobilemedia.namefile,\n                                                    description: \"Imagem \" +\n                                                        (indexmobile + 1) +\n                                                        \" \" +\n                                                        resposta.data.label,\n                                                    time: null,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: null,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_informationitem: resposta.data.url,\n                                                    visible: true,\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\"\n                                                    }\n                                                }\n                                            );\n                                        } else if (mobilemedia.type === 2) {\n                                            await axios.put(\n                                                mobilemedia.url, {\n                                                    label: \"Video \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: mobilemedia.path,\n                                                    resolution: mobilemedia.resolution,\n                                                    namefile: mobilemedia.namefile,\n                                                    description: null,\n                                                    time: mobilemedia.time,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: null,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_idinstructionalelement: resposta.data.url\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\"\n                                                    }\n                                                }\n                                            );\n                                        } else if (mobilemedia.type === 3) {\n                                            await axios.put(\n                                                mobilemedia.url, {\n                                                    label: \"Audio \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: mobilemedia.path,\n                                                    resolution: null,\n                                                    namefile: mobilemedia.namefile,\n                                                    description: null,\n                                                    time: null,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: null,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_idinstructionalelement: resposta.data.url\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\"\n                                                    }\n                                                }\n                                            );\n                                        } else if (mobilemedia.type === 5) {\n                                            await axios.put(\n                                                mobilemedia.url, {\n                                                    label: \"Link \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: null,\n                                                    resolution: null,\n                                                    namefile: null,\n                                                    description: null,\n                                                    time: null,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: mobilemedia.object,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_idinstructionalelement: resposta.data.url\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\"\n                                                    }\n                                                }\n                                            );\n                                        }\n                                    } else {\n                                        /* DANDO POST NOS MOBILEMEDIAS QUE NÃO POSSUEM URL*/\n                                        if (mobilemedia.type === 1) {\n                                            await axios.post(\n                                                `http://localhost:8000/mobilemedia/`, {\n                                                    label: \"Imagem \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: mobilemedia.path,\n                                                    resolution: mobilemedia.resolution,\n                                                    namefile: mobilemedia.path.split(\"/\")[1],\n                                                    description: \"Imagem \" +\n                                                        (indexmobile + 1) +\n                                                        \" \" +\n                                                        resposta.data.label,\n                                                    time: null,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: null,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_idinstructionalelement: resposta.data.url\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\"\n                                                    }\n                                                }\n                                            );\n                                        } else if (mobilemedia.type === 2) {\n                                            console.log(\"i\", i);\n                                            await axios.post(\n                                                `http://localhost:8000/mobilemedia/`, {\n                                                    label: \"Video \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: mobilemedia.path,\n                                                    resolution: mobilemedia.resolution,\n                                                    namefile: mobilemedia.path.split(\"/\")[1],\n                                                    description: null,\n                                                    time: mobilemedia.time,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: null,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_idinstructionalelement: resposta.data.url\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\"\n                                                    }\n                                                }\n                                            );\n                                        } else if (mobilemedia.type === 3) {\n                                            await axios.post(\n                                                `http://localhost:8000/mobilemedia/`, {\n                                                    label: \"Audio \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: mobilemedia.path,\n                                                    resolution: null,\n                                                    namefile: mobilemedia.path.split(\"/\")[1],\n                                                    description: null,\n                                                    time: null,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: null,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_idinstructionalelement: resposta.data.url\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\"\n                                                    }\n                                                }\n                                            );\n                                        } else if (mobilemedia.type === 5) {\n                                            await axios.post(\n                                                `http://localhost:8000/mobilemedia/`, {\n                                                    label: \"Link \" + (indexmobile + 1),\n                                                    fk_idmediatype: \"http://localhost:8000/mediatype/\" +\n                                                        mobilemedia.type +\n                                                        \"/\",\n                                                    path: null,\n                                                    resolution: null,\n                                                    namefile: null,\n                                                    description: null,\n                                                    time: null,\n                                                    textfull: null,\n                                                    textshort: null,\n                                                    urllink: mobilemedia.object,\n                                                    difficultyLevel: null,\n                                                    learningStyle: null,\n                                                    fk_idinstructionalelement: resposta.data.url\n                                                }, {\n                                                    auth: {\n                                                        username: \"admin\",\n                                                        password: \"admin\"\n                                                    }\n                                                }\n                                            );\n                                        }\n                                    }\n                                });\n                            }\n\n                        });\n                }\n            },\n            async altera_Cria_Fases() {\n                var vm = this;\n                this.phasesControl.forEach(async function(element, index) {\n                    if (element.url === null) {\n                        await axios.post(\n                            `http://localhost:8000/phaseprocedure/`, {\n                                order: index + 1,\n                                description: element.description,\n                                fk_informationitem: vm.auxItemInfo,\n                            }, {\n                                auth: {\n                                    username: \"admin\",\n                                    password: \"admin\",\n                                },\n                            }\n                        );\n                    } else {\n                        await axios.put(\n                            element.url, {\n                                order: index + 1,\n                                description: element.description,\n                                fk_informationitem: vm.auxItemInfo,\n                            }, {\n                                auth: {\n                                    username: \"admin\",\n                                    password: \"admin\",\n                                },\n                            }\n                        );\n                    }\n                });\n            },\n\n            async validate() {\n                if (this.$refs.form.validate()) {\n                    if (this.phasesControl.length > 0) {\n                        var i = this.phasesControl.length;\n                        await this.altera_Cria_Procedimento();\n                        await this.altera_Cria_Fases();\n                        this.phasesControl = [];\n                        await this.$emit(\"close\", i);\n                    } else {\n                        this.dialog_alert = true;\n                    }\n                }\n            },\n            reset() {\n                this.$refs.form.reset();\n                this.phasesControl = [];\n                this.$emit(\"close\");\n            },\n            addPhase() {\n                this.phasesControl.push({\n                    description: null,\n                    url: null,\n                });\n            },\n            async deletaPhase(idPhase) {\n                if (this.phasesControl[idPhase].url !== null) {\n                    await axios.delete(this.phasesControl[idPhase].url, {\n                        auth: {\n                            username: \"admin\",\n                            password: \"admin\",\n                        },\n                    });\n                    await this.altera_Cria_Fases();\n                }\n                if (idPhase == 0) {\n                    this.phasesControl.shift();\n                } else {\n                    this.phasesControl.splice(idPhase, 1);\n                }\n            },\n            addMobileMedia(mobileMediaType) {\n                if (mobileMediaType === 1) {\n                    this.mobileMediasControl.push({\n                        type: mobileMediaType,\n                        object: null,\n                        resolution: null,\n                        path: null,\n                        namefile: null,\n                        url: null,\n                    });\n                } else if (mobileMediaType === 2) {\n                    this.mobileMediasControl.push({\n                        type: mobileMediaType,\n                        object: null,\n                        resolution: null,\n                        time: null,\n                        path: null,\n                        namefile: null,\n                        url: null,\n                    });\n                } else if (mobileMediaType === 3) {\n                    this.mobileMediasControl.push({\n                        type: mobileMediaType,\n                        object: null,\n                        path: null,\n                        namefile: null,\n                        url: null,\n                    });\n                } else if (mobileMediaType === 4) {\n                    this.mobileMediasControl.push({\n                        type: mobileMediaType + 1,\n                        object: null,\n                        url: null,\n                    });\n                }\n            },\n            async deleteMobileMedia(idMobileMedia) {\n                if (this.mobileMediasControl[idMobileMedia].url) {\n                    if (this.mobileMediasControl[idMobileMedia].type !== 5) {\n                        await firebase\n                            .storage()\n                            .ref()\n                            .child(this.mobileMediasControl[idMobileMedia].path)\n                            .delete();\n                    }\n                    await axios.delete(this.mobileMediasControl[idMobileMedia].url, {\n                        auth: {\n                            username: \"admin\",\n                            password: \"admin\",\n                        },\n                    });\n                }\n                if (idMobileMedia == 0) {\n                    this.mobileMediasControl.shift();\n                } else {\n                    this.mobileMediasControl.splice(idMobileMedia, 1);\n                }\n            },\n            atualizaMeta() {\n                if (this.mobileMediasControl.length > 0) {\n                    this.mobileMediasControl.forEach((mobilemedia) => {\n                        if (mobilemedia.object && !mobilemedia.url) {\n                            if (mobilemedia.type === 1) {\n                                var img = new Image();\n                                img.src = URL.createObjectURL(mobilemedia.object);\n                                img.onload = function() {\n                                    mobilemedia.resolution = img.width + \"X\" + img.height;\n                                };\n                            } else if (mobilemedia.type === 2) {\n                                var video = document.createElement(\"video\");\n                                var source = document.createElement(\"source\");\n                                source.setAttribute(\n                                    \"src\",\n                                    URL.createObjectURL(mobilemedia.object)\n                                );\n                                video.appendChild(source);\n                                video.oncanplay = function() {\n                                    mobilemedia.resolution =\n                                        video.videoWidth + \"X\" + video.videoHeight;\n                                    mobilemedia.time = video.duration;\n                                };\n                            }\n                        }\n                    });\n                }\n            },\n            async getSrcImage(indexMobile, path, namefile) {\n                /*var obj = {};*/\n                if (path) {\n                    var vm = this;\n                    await firebase\n                        .storage()\n                        .ref(path)\n                        .getDownloadURL()\n                        .then(function(url) {\n                            /*vm.viewImageSrc = url;*/\n                            var xhr = new XMLHttpRequest();\n                            xhr.responseType = \"blob\";\n                            xhr.onload = function() {\n                                var blob = xhr.response;\n                                var file = new File([blob], namefile, {\n                                    type: blob.type\n                                });\n                                // vm.auxGetSrc.push(file);\n                                vm.atualizaObj(file, indexMobile);\n                            };\n                            xhr.open(\"GET\", url);\n                            xhr.send();\n                        });\n                }\n            },\n            async getSrcVideo(indexMobile, path, namefile) {\n                /*var obj = {};*/\n                if (path) {\n                    var vm = this;\n                    await firebase\n                        .storage()\n                        .ref(path)\n                        .getDownloadURL()\n                        .then(function(url) {\n                            /*vm.viewVideoSrc = url;*/\n                            var xhr = new XMLHttpRequest();\n                            xhr.responseType = \"blob\";\n                            xhr.onload = function() {\n                                var blob = xhr.response;\n                                var file = new File([blob], namefile, {\n                                    type: blob.type\n                                });\n                                // vm.auxGetSrc.push(file);\n                                vm.atualizaObj(file, indexMobile);\n                            };\n                            xhr.open(\"GET\", url);\n                            xhr.send();\n                        });\n                }\n            },\n            async getSrcAudio(indexMobile, path, namefile) {\n                /*var obj = {};*/\n                if (path) {\n                    var vm = this;\n                    await firebase\n                        .storage()\n                        .ref(path)\n                        .getDownloadURL()\n                        .then(function(url) {\n                            /*vm.viewAudioSrc = url;*/\n                            var xhr = new XMLHttpRequest();\n                            xhr.responseType = \"blob\";\n                            xhr.onload = function() {\n                                var blob = xhr.response;\n                                var file = new File([blob], namefile, {\n                                    type: blob.type\n                                });\n                                // vm.auxGetSrc.push(file);\n                                vm.atualizaObj(file, indexMobile);\n                            };\n                            xhr.open(\"GET\", url);\n                            xhr.send();\n                        });\n                }\n            },\n            atualizaObj(file, indexMobile) {\n                this.mobileMediasControl[indexMobile].object = file;\n            },\n    },\n};\n\n</script>\n"]}]}