{"remainingRequest":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\www\\EducomML\\EducomML_Front\\src\\components\\didatic_model\\VisibleDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\www\\EducomML\\EducomML_Front\\src\\components\\didatic_model\\VisibleDialog.vue","mtime":1593820841207},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593634551412},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\babel-loader\\lib\\index.js","mtime":1593634550126},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1593634595918},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593634551412},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js","mtime":1593634595223}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IENvb2tpZSBmcm9tICJqcy1jb29raWUiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiVmlzaWJsZURpYWxvZyIsDQogIHByb3BzOiBbImRvbWFpbiIsICJkaWFsb2ciXSwNCiAgZGF0YTogKCkgPT4gKHsNCiAgICB2YWxpZDogdHJ1ZSwNCiAgICB0cmVlRGF0YTogW10sDQogICAgZWxlbWVudERhdGE6IFtdLA0KICAgIHNlbGVjdGlvbjogW10sDQogICAgc2NvcG9UeXBlczogWw0KICAgICAgew0KICAgICAgICB0ZXh0OiAiQXZhbGlhw6fDo28iLA0KICAgICAgICB2YWx1ZTogMQ0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGV4dDogIkRvbcOtbmlvIiwNCiAgICAgICAgdmFsdWU6IDINCiAgICAgIH0NCiAgICBdLA0KICAgIHR5cGVzVGhyZXNob2xkOiBbDQogICAgICB7DQogICAgICAgIHRleHQ6ICJQb3JjZW50YWdlbSIsDQogICAgICAgIHZhbHVlOiAxDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0ZXh0OiAiTGl0ZXJhbCIsDQogICAgICAgIHZhbHVlOiAyDQogICAgICB9DQogICAgXSwNCiAgICB2YWx1ZVR5cGVzOiBbIlNpbmdsZSIsICJSYW5nZSJdLA0KICAgIGFzc2Vzc21lbnRDb250cm9sOiBbXSwNCiAgICBuZXdJdGVtczogW10sDQogICAgY2hlY2tib3g6IHRydWUNCiAgfSksDQogIHdhdGNoOiB7DQogICAgZG9tYWluOiBhc3luYyBmdW5jdGlvbigpIHsNCiAgICAgIGlmICh0aGlzLmRvbWFpbikgew0KICAgICAgICB0aGlzLnRyZWVEYXRhID0gW107DQogICAgICAgIHRoaXMuc2VsZWN0aW9uID0gW107DQogICAgICAgIGF3YWl0IHRoaXMuc2V0RG9tYWluVmFyaWFibGVzKCk7DQogICAgICB9DQogICAgfSwNCiAgICBhc3Nlc3NtZW50Q29udHJvbDogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLmZvckVhY2goYXNzZXNzID0+IHsNCiAgICAgICAgaWYgKGFzc2Vzcy52YWx1ZVR5cGUgPT09ICJTaW5nbGUiKSB7DQogICAgICAgICAgYXNzZXNzLnJhbmdlcyA9IFtdOw0KICAgICAgICB9IGVsc2UgaWYgKGFzc2Vzcy52YWx1ZVR5cGUgPT09ICJSYW5nZSIpIHsNCiAgICAgICAgICBhc3Nlc3Muc2luZ2xlLnRocmVzaG9sZCA9ICIiOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB0ZXN0KHZhbHVlKSB7DQogICAgICBpZiAodmFsdWUubGVuZ3RoKSB7DQogICAgICAgIGlmICh2YWx1ZVswXS5zcGxpdCgiLyIpWzVdID09PSAic3ViIikgew0KICAgICAgICAgIHRoaXMuJGVtaXQoInR5cGUiLCB7IHR5cGU6ICJzdWJtb2R1bG8iLCB1cmw6IHZhbHVlWzBdIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJGVtaXQoInR5cGUiLCB7IHR5cGU6IHZhbHVlWzBdLnNwbGl0KCIvIilbM10sIHVybDogdmFsdWVbMF0gfSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIHNldERvbWFpblZhcmlhYmxlcygpIHsNCiAgICAgIHRoaXMudHJlZURhdGEgPSBbXTsNCiAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7DQogICAgICAgIHRleHQ6ICJbRE9NSU5JT10gIiArIHRoaXMuZG9tYWluLm5hbWVrbm93bGVkZ2Vkb21haW4sDQogICAgICAgIHZhbHVlOiB0aGlzLmRvbWFpbi51cmwNCiAgICAgIH0pOw0KICAgICAgdmFyIGluZGV4bW9kdWxvID0gMDsNCiAgICAgIGlmICh0aGlzLmRvbWFpbi5tb2JpbGVtZWRpYXMubGVuZ3RoKSB7DQogICAgICAgIHRoaXMuZG9tYWluLm1vYmlsZW1lZGlhcy5mb3JFYWNoKG1vYmlsZW1lZGlhID0+IHsNCiAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgaWQ6IG1vYmlsZW1lZGlhLnVybCwNCiAgICAgICAgICAgIG5hbWU6ICJbTU9CSUxFTUVESUFdICIgKyBtb2JpbGVtZWRpYS5sYWJlbCwNCiAgICAgICAgICAgIHZpc2libGU6IG1vYmlsZW1lZGlhLnZpc2libGUNCiAgICAgICAgICB9Ow0KICAgICAgICAgIHRoaXMudHJlZURhdGEucHVzaChvYmplY3QpOw0KICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpbmRleG1vZHVsbysrOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmRvbWFpbi5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7DQogICAgICAgIHRoaXMuZG9tYWluLmluc3RydWN0aW9uYWxlbGVtZW50cy5mb3JFYWNoKGluc3RydWN0aW9uYWxlbGVtZW50ID0+IHsNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudC5ma19pbnN0cnVjdGlvbmFsZWxlbWVudHR5cGUuc3BsaXQoIi8iKVs0XSAhPT0gNA0KICAgICAgICAgICkgew0KICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgaWQ6IGluc3RydWN0aW9uYWxlbGVtZW50LnVybCwNCiAgICAgICAgICAgICAgbmFtZTogIltJTlNUUlVDVElPTkFMIEVMRU1FTlRdICIgKyBpbnN0cnVjdGlvbmFsZWxlbWVudC5sYWJlbCwNCiAgICAgICAgICAgICAgdmlzaWJsZTogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudmlzaWJsZQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHRoaXMudHJlZURhdGEucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGluZGV4bW9kdWxvKys7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuZG9tYWluLm1vZHVsZXMpICYmIHRoaXMuZG9tYWluLm1vZHVsZXMubGVuZ3RoKSB7DQogICAgICAgIHRoaXMuZG9tYWluLm1vZHVsZXMuZm9yRWFjaChtb2R1bG8gPT4gew0KICAgICAgICAgIGlmIChtb2R1bG8uZmtfaWRtb2R1bGUgPT09IG51bGwpIHsNCiAgICAgICAgICAgIHZhciBpbmRleHN1Ym1vZHVsbyA9IDA7DQogICAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgICBpZDogbW9kdWxvLnVybCwNCiAgICAgICAgICAgICAgbmFtZTogIltNT0RVTE9dICIgKyBtb2R1bG8ubmFtZW1vZHVsZSwNCiAgICAgICAgICAgICAgdmlzaWJsZTogbW9kdWxvLnZpc2libGUsDQogICAgICAgICAgICAgIGNoaWxkcmVuOiBbXQ0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHRoaXMudHJlZURhdGEucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgdGhpcy5lbGVtZW50RGF0YS5wdXNoKHsNCiAgICAgICAgICAgICAgdGV4dDogb2JqZWN0Lm5hbWUsDQogICAgICAgICAgICAgIHZhbHVlOiBvYmplY3QuaWQNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChtb2R1bG8ubW9iaWxlbWVkaWFzLmxlbmd0aCkgew0KICAgICAgICAgICAgICBtb2R1bG8ubW9iaWxlbWVkaWFzLmZvckVhY2gobW9iaWxlbWVkaWEgPT4gew0KICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICBpZDogbW9iaWxlbWVkaWEudXJsLA0KICAgICAgICAgICAgICAgICAgbmFtZTogIltNT0JJTEVNRURJQV0gIiArIG1vYmlsZW1lZGlhLmxhYmVsLA0KICAgICAgICAgICAgICAgICAgdmlzaWJsZTogbW9iaWxlbWVkaWEudmlzaWJsZQ0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpbmRleHN1Ym1vZHVsbysrOw0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKG1vZHVsby5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7DQogICAgICAgICAgICAgIG1vZHVsby5pbnN0cnVjdGlvbmFsZWxlbWVudHMuZm9yRWFjaChpbnN0cnVjdGlvbmFsZWxlbWVudCA9PiB7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQuZmtfaW5zdHJ1Y3Rpb25hbGVsZW1lbnR0eXBlLnNwbGl0KA0KICAgICAgICAgICAgICAgICAgICAiLyINCiAgICAgICAgICAgICAgICAgIClbNF0gIT09IDQNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICAgIGlkOiBpbnN0cnVjdGlvbmFsZWxlbWVudC51cmwsDQogICAgICAgICAgICAgICAgICAgIG5hbWU6DQogICAgICAgICAgICAgICAgICAgICAgIltJTlNUUlVDVElPTkFMIEVMRU1FTlRdICIgKyBpbnN0cnVjdGlvbmFsZWxlbWVudC5sYWJlbCwNCiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudmlzaWJsZQ0KICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICBpbmRleHN1Ym1vZHVsbysrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChtb2R1bG8uc3VibW9kdWxlcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgdmFyIGluZGV4Y29uY2VpdG8gPSAwOw0KICAgICAgICAgICAgICBtb2R1bG8uc3VibW9kdWxlcy5mb3JFYWNoKHN1Ym1vZHVsbyA9PiB7DQogICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgICAgIGlkOiBzdWJtb2R1bG8udXJsLA0KICAgICAgICAgICAgICAgICAgbmFtZTogIltTVUJNT0RVTE9dICIgKyBzdWJtb2R1bG8ubmFtZW1vZHVsZSwNCiAgICAgICAgICAgICAgICAgIHZpc2libGU6IHN1Ym1vZHVsby52aXNpYmxlLA0KICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50RGF0YS5wdXNoKHsNCiAgICAgICAgICAgICAgICAgIHRleHQ6IG9iamVjdC5uYW1lLA0KICAgICAgICAgICAgICAgICAgdmFsdWU6IG9iamVjdC5pZA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChzdWJtb2R1bG8ubW9iaWxlbWVkaWFzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgc3VibW9kdWxvLm1vYmlsZW1lZGlhcy5mb3JFYWNoKG1vYmlsZW1lZGlhID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgICAgICAgICBpZDogbW9iaWxlbWVkaWEudXJsLA0KICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJbTU9CSUxFTUVESUFdICIgKyBtb2JpbGVtZWRpYS5sYWJlbCwNCiAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBtb2JpbGVtZWRpYS52aXNpYmxlDQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWw0KICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvDQogICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bysrOw0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKHN1Ym1vZHVsby5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICBzdWJtb2R1bG8uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmZvckVhY2goDQogICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uYWxlbGVtZW50ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGluc3RydWN0aW9uYWxlbGVtZW50LnVybCwNCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6DQogICAgICAgICAgICAgICAgICAgICAgICAgICJbSU5TVFJVQ1RJT05BTCBFTEVNRU5UXSAiICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubGFiZWwsDQogICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBpbnN0cnVjdGlvbmFsZWxlbWVudC52aXNpYmxlDQogICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsNCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvDQogICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8rKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoc3VibW9kdWxvLmNvbmNlcHRzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgc3VibW9kdWxvLmNvbmNlcHRzLmZvckVhY2goY29uY2VpdG8gPT4gew0KICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb25jZWl0by51cmwsDQogICAgICAgICAgICAgICAgICAgICAgbmFtZTogIltDT05DRUlUT10gIiArIGNvbmNlaXRvLm5hbWVjb25jZXB0LA0KICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGNvbmNlaXRvLnZpc2libGUsDQogICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdDQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWw0KICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvDQogICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgdGV4dDogb2JqZWN0Lm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9iamVjdC5pZA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmNlaXRvLm1vYmlsZW1lZGlhcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICBjb25jZWl0by5tb2JpbGVtZWRpYXMuZm9yRWFjaChtb2JpbGVtZWRpYSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbW9iaWxlbWVkaWEudXJsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiW01PQklMRU1FRElBXSAiICsgbW9iaWxlbWVkaWEubGFiZWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IG1vYmlsZW1lZGlhLnZpc2libGUNCiAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8NCiAgICAgICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW5baW5kZXhjb25jZWl0b10uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmIChjb25jZWl0by5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgY29uY2VpdG8uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmZvckVhY2goDQogICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGluc3RydWN0aW9uYWxlbGVtZW50LnVybCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIltJTlNUUlVDVElPTkFMIEVMRU1FTlRdICIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubGFiZWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudmlzaWJsZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleHN1Ym1vZHVsbw0KICAgICAgICAgICAgICAgICAgICAgICAgICBdLmNoaWxkcmVuW2luZGV4Y29uY2VpdG9dLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmIChjb25jZWl0by5pbmZvcm1hdGlvbml0ZW1zLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgIGNvbmNlaXRvLmluZm9ybWF0aW9uaXRlbXMuZm9yRWFjaChwcm9jZWR1cmUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZWR1cmUuZmtfaW5mb3JtYXRpb25pdGVtdHlwZSA9PT0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9pbmZvcm1hdGlvbml0ZW10eXBlLzQvIg0KICAgICAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHByb2NlZHVyZS51cmwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJbUFJPQ0VESU1FTlRPXSAiICsgcHJvY2VkdXJlLm5hbWVpbmZvcm1hdGlvbml0ZW0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogcHJvY2VkdXJlLnZpc2libGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbltpbmRleGNvbmNlaXRvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bysrOw0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvKys7DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKG1vZHVsby5jb25jZXB0cy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgaWYgKGluZGV4c3VibW9kdWxvID4gMCkgew0KICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8gPSBpbmRleHN1Ym1vZHVsbzsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvID0gMDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBtb2R1bG8uY29uY2VwdHMuZm9yRWFjaChjb25jZWl0byA9PiB7DQogICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgICAgIGlkOiBjb25jZWl0by51cmwsDQogICAgICAgICAgICAgICAgICBuYW1lOiAiW0NPTkNFSVRPXSAiICsgY29uY2VpdG8ubmFtZWNvbmNlcHQsDQogICAgICAgICAgICAgICAgICB2aXNpYmxlOiBjb25jZWl0by52aXNpYmxlLA0KICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQoNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnREYXRhLnB1c2goew0KICAgICAgICAgICAgICAgICAgdGV4dDogb2JqZWN0Lm5hbWUsDQogICAgICAgICAgICAgICAgICB2YWx1ZTogb2JqZWN0LmlkDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKGNvbmNlaXRvLm1vYmlsZW1lZGlhcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgIGNvbmNlaXRvLm1vYmlsZW1lZGlhcy5mb3JFYWNoKG1vYmlsZW1lZGlhID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgICAgICAgICBpZDogbW9iaWxlbWVkaWEudXJsLA0KICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJbTU9CSUxFTUVESUFdICIgKyBtb2JpbGVtZWRpYS5sYWJlbCwNCiAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBtb2JpbGVtZWRpYS52aXNpYmxlDQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWw0KICAgICAgICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8NCiAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKGNvbmNlaXRvLmluc3RydWN0aW9uYWxlbGVtZW50cy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgIGNvbmNlaXRvLmluc3RydWN0aW9uYWxlbGVtZW50cy5mb3JFYWNoKA0KICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpbnN0cnVjdGlvbmFsZWxlbWVudC51cmwsDQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAiW0lOU1RSVUNUSU9OQUwgRUxFTUVOVF0gIiArDQogICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uYWxlbGVtZW50LmxhYmVsLA0KICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudmlzaWJsZQ0KICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvDQogICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChjb25jZWl0by5pbmZvcm1hdGlvbml0ZW1zLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgY29uY2VpdG8uaW5mb3JtYXRpb25pdGVtcy5mb3JFYWNoKHByb2NlZHVyZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICBwcm9jZWR1cmUuZmtfaW5mb3JtYXRpb25pdGVtdHlwZSA9PT0NCiAgICAgICAgICAgICAgICAgICAgICAiaHR0cDovLzEyNy4wLjAuMTo4MDAwL2luZm9ybWF0aW9uaXRlbXR5cGUvNC8iDQogICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZDogcHJvY2VkdXJlLnVybCwNCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJbUFJPQ0VESU1FTlRPXSAiICsgcHJvY2VkdXJlLm5hbWVpbmZvcm1hdGlvbml0ZW0sDQogICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBwcm9jZWR1cmUudmlzaWJsZQ0KICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvDQogICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bysrOw0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGluZGV4bW9kdWxvKys7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIHBvc3RBc3Nlc3NtZW50KCkgew0KICAgICAgdmFyIHZtID0gdGhpczsNCiAgICAgIHZhciBoZWFkZXIgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0SGVhZGVyIik7DQogICAgICBhd2FpdCB0aGlzLmFzc2Vzc21lbnRDb250cm9sLmZvckVhY2goYXN5bmMgYXNzZXNzbWVudCA9PiB7DQogICAgICAgIHZhciBhdXhBc3Nlc3NtZW50ID0gew0KICAgICAgICAgIHR5cGV0aHJlc2hvbGQ6DQogICAgICAgICAgICBgaHR0cDovLzEyNy4wLjAuMTo4MDAwL3R5cGV0aHJlc2hvbGQvYCArDQogICAgICAgICAgICBhc3Nlc3NtZW50LnR5cGVUaHJlc2hvbGQgKw0KICAgICAgICAgICAgYC9gLA0KICAgICAgICAgIHNjb3BvOiBgaHR0cDovLzEyNy4wLjAuMTo4MDAwL3Njb3BvL2AgKyBhc3Nlc3NtZW50LnNjb3BvICsgYC9gLA0KICAgICAgICAgIGZrX2lka25vd2xlZGdlZG9tYWluOiBudWxsLA0KICAgICAgICAgIGZrX2lkbW9kdWxlOiBudWxsLA0KICAgICAgICAgIGZrX2lkY29uY2VwdDogbnVsbA0KICAgICAgICB9Ow0KICAgICAgICBpZiAoYXNzZXNzbWVudC5zY29wbyA9PT0gMikgew0KICAgICAgICAgIGF1eEFzc2Vzc21lbnQudHlwZXRocmVzaG9sZCA9IGBodHRwOi8vMTI3LjAuMC4xOjgwMDAvdHlwZXRocmVzaG9sZC8xL2A7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGFzc2Vzc21lbnQuZmtfZWxlbWVudC5zcGxpdCgiLyIpWzNdID09PSAia25vd2xlZGdlZG9tYWluIikgew0KICAgICAgICAgIGF1eEFzc2Vzc21lbnQuZmtfaWRrbm93bGVkZ2Vkb21haW4gPSBhc3Nlc3NtZW50LmZrX2VsZW1lbnQ7DQogICAgICAgIH0gZWxzZSBpZiAoYXNzZXNzbWVudC5ma19lbGVtZW50LnNwbGl0KCIvIilbM10gPT09ICJtb2R1bGUiKSB7DQogICAgICAgICAgYXV4QXNzZXNzbWVudC5ma19pZG1vZHVsZSA9IGFzc2Vzc21lbnQuZmtfZWxlbWVudDsNCiAgICAgICAgfSBlbHNlIGlmIChhc3Nlc3NtZW50LmZrX2VsZW1lbnQuc3BsaXQoIi8iKVszXSA9PT0gImNvbmNlcHQiKSB7DQogICAgICAgICAgYXV4QXNzZXNzbWVudC5ma19pZGNvbmNlcHQgPSBhc3Nlc3NtZW50LmZrX2VsZW1lbnQ7DQogICAgICAgIH0NCiAgICAgICAgYXdhaXQgdGhpcy5heGlvcw0KICAgICAgICAgIC5wb3N0KA0KICAgICAgICAgICAgImh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9hc3Nlc3NtZW50cGFyYW1ldGVyLyIsDQogICAgICAgICAgICBhdXhBc3Nlc3NtZW50LA0KICAgICAgICAgICAgaGVhZGVyDQogICAgICAgICAgKQ0KICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uKHJlc3Bvc3RhKSB7DQogICAgICAgICAgICBpZiAocmVzcG9zdGEuZGF0YS5zY29wbyA9PT0gYGh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9zY29wby8xL2ApIHsNCiAgICAgICAgICAgICAgaWYgKGFzc2Vzc21lbnQudmFsdWVUeXBlID09PSAiU2luZ2xlIikgew0KICAgICAgICAgICAgICAgIGF3YWl0IHZtLmF4aW9zLnBvc3QoDQogICAgICAgICAgICAgICAgICAiaHR0cDovLzEyNy4wLjAuMTo4MDAwL3NpbmdsZS8iLA0KICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBma19pZGFzc2Vzc21lbnRwYXJhbWV0ZXI6IHJlc3Bvc3RhLmRhdGEudXJsLA0KICAgICAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IGFzc2Vzc21lbnQuc2luZ2xlLnRocmVzaG9sZA0KICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgIGhlYWRlcg0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNzZXNzbWVudC52YWx1ZVR5cGUgPT09ICJSYW5nZSIpIHsNCiAgICAgICAgICAgICAgICBhc3Nlc3NtZW50LnJhbmdlcy5mb3JFYWNoKGFzeW5jIHJhbmdlID0+IHsNCiAgICAgICAgICAgICAgICAgIGF3YWl0IHZtLmF4aW9zLnBvc3QoDQogICAgICAgICAgICAgICAgICAgICJodHRwOi8vMTI3LjAuMC4xOjgwMDAvcmFuZ2UvIiwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgIG5hbWVyYW5nZTogcmFuZ2UubmFtZXJhbmdlLA0KICAgICAgICAgICAgICAgICAgICAgIGZrX2lkYXNzZXNzbWVudHBhcmFtZXRlcjogcmVzcG9zdGEuZGF0YS51cmwsDQogICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbHZhbHVlOiByYW5nZS5pbml0aWFsdmFsdWUsDQogICAgICAgICAgICAgICAgICAgICAgbGltaXR2YWx1ZTogcmFuZ2UubGltaXR2YWx1ZQ0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXINCiAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgIHJlc3Bvc3RhLmRhdGEuc2NvcG8gPT09IGBodHRwOi8vMTI3LjAuMC4xOjgwMDAvc2NvcG8vMi9gDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgYXdhaXQgdm0uYXhpb3MucG9zdCgNCiAgICAgICAgICAgICAgICAiaHR0cDovLzEyNy4wLjAuMTo4MDAwL3NpbmdsZS8iLA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgIGZrX2lkYXNzZXNzbWVudHBhcmFtZXRlcjogcmVzcG9zdGEuZGF0YS51cmwsDQogICAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IGFzc2Vzc21lbnQuc2luZ2xlLnRocmVzaG9sZA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgaGVhZGVyDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGFzeW5jIHB1dFZpc2libGUoKSB7DQogICAgICB2YXIgdm0gPSB0aGlzOw0KICAgICAgdmFyIGNzcmZ0b2tlbiA9IENvb2tpZS5nZXQoImNzcmZ0b2tlbiIpOw0KICAgICAgdmFyIGhlYWRlcnMgPSB7DQogICAgICAgICJYLUNTUkZUT0tFTiI6IGNzcmZ0b2tlbg0KICAgICAgfTsNCiAgICAgIHRoaXMudHJlZURhdGEuZm9yRWFjaChlbGVtZW50ID0+IHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIGVsZW1lbnQudmlzaWJsZSA9PT0gdHJ1ZSAmJg0KICAgICAgICAgICF0aGlzLnNlbGVjdGlvbi5maW5kKGZpbmRFbGVtZW50ID0+IGZpbmRFbGVtZW50LmlkID09PSBlbGVtZW50LmlkKQ0KICAgICAgICApIHsNCiAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgLnBhdGNoKA0KICAgICAgICAgICAgICBlbGVtZW50LmlkLA0KICAgICAgICAgICAgICB7IGhlYWRlcnM6IGhlYWRlcnMgfSwNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGF1dGg6IHsNCiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLA0KICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uKHJlc3Bvc3RhKSB7DQogICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOw0KICAgICAgICAgICAgICBhd2FpdCBPYmplY3Qua2V5cyhhdXgpLmZvckVhY2goYXRyaWJ1dG8gPT4gew0KICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7DQogICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgew0KICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7DQogICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsNCiAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KGVsZW1lbnQuaWQsIGF1eCwgew0KICAgICAgICAgICAgICAgIGF1dGg6IHsNCiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLA0KICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiINCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgZWxlbWVudC52aXNpYmxlID09PSBmYWxzZSAmJg0KICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLmZpbmQoZmluZEVsZW1lbnQgPT4gZmluZEVsZW1lbnQuaWQgPT09IGVsZW1lbnQuaWQpDQogICAgICAgICkgew0KICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAucGF0Y2goDQogICAgICAgICAgICAgIGVsZW1lbnQuaWQsDQogICAgICAgICAgICAgIHsgaGVhZGVyczogaGVhZGVycyB9LA0KICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgYXV0aDogew0KICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsDQogICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24ocmVzcG9zdGEpIHsNCiAgICAgICAgICAgICAgdmFyIGF1eCA9IHJlc3Bvc3RhLmRhdGE7DQogICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaChhdHJpYnV0byA9PiB7DQogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsNCiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ1cmwiKSB7DQogICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsNCiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgew0KICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dChlbGVtZW50LmlkLCBhdXgsIHsNCiAgICAgICAgICAgICAgICBhdXRoOiB7DQogICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwNCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVsZW1lbnQuY2hpbGRyZW4pICYmIGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoKSB7DQogICAgICAgICAgZWxlbWVudC5jaGlsZHJlbi5mb3JFYWNoKGVsZW1lbnQyID0+IHsNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgZWxlbWVudDIudmlzaWJsZSA9PT0gdHJ1ZSAmJg0KICAgICAgICAgICAgICAhdGhpcy5zZWxlY3Rpb24uZmluZCgNCiAgICAgICAgICAgICAgICBmaW5kRWxlbWVudDIgPT4gZmluZEVsZW1lbnQyLmlkID09PSBlbGVtZW50Mi5pZA0KICAgICAgICAgICAgICApDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgICAgICAucGF0Y2goDQogICAgICAgICAgICAgICAgICBlbGVtZW50Mi5pZCwNCiAgICAgICAgICAgICAgICAgIHsgaGVhZGVyczogaGVhZGVycyB9LA0KICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBhdXRoOiB7DQogICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsDQogICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiINCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgew0KICAgICAgICAgICAgICAgICAgdmFyIGF1eCA9IHJlc3Bvc3RhLmRhdGE7DQogICAgICAgICAgICAgICAgICBhd2FpdCBPYmplY3Qua2V5cyhhdXgpLmZvckVhY2goYXRyaWJ1dG8gPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdXhbYXRyaWJ1dG9dKSkgew0KICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgew0KICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInZpc2libGUiKSB7DQogICAgICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dChlbGVtZW50Mi5pZCwgYXV4LCB7DQogICAgICAgICAgICAgICAgICAgIGF1dGg6IHsNCiAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwNCiAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIg0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgIGVsZW1lbnQyLnZpc2libGUgPT09IGZhbHNlICYmDQogICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLmZpbmQoDQogICAgICAgICAgICAgICAgZmluZEVsZW1lbnQyID0+IGZpbmRFbGVtZW50Mi5pZCA9PT0gZWxlbWVudDIuaWQNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAgICAgLnBhdGNoKA0KICAgICAgICAgICAgICAgICAgZWxlbWVudDIuaWQsDQogICAgICAgICAgICAgICAgICB7IGhlYWRlcnM6IGhlYWRlcnMgfSwNCiAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgYXV0aDogew0KICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLA0KICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24ocmVzcG9zdGEpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKGF0cmlidXRvID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7DQogICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgew0KICAgICAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dChlbGVtZW50Mi5pZCwgYXV4LCB7DQogICAgICAgICAgICAgICAgICAgIGF1dGg6IHsNCiAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwNCiAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIg0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZWxlbWVudDIuY2hpbGRyZW4pICYmIGVsZW1lbnQyLmNoaWxkcmVuLmxlbmd0aCkgew0KICAgICAgICAgICAgICBlbGVtZW50Mi5jaGlsZHJlbi5mb3JFYWNoKGVsZW1lbnQzID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICBlbGVtZW50My52aXNpYmxlID09PSB0cnVlICYmDQogICAgICAgICAgICAgICAgICAhdGhpcy5zZWxlY3Rpb24uZmluZCgNCiAgICAgICAgICAgICAgICAgICAgZmluZEVsZW1lbnQzID0+IGZpbmRFbGVtZW50My5pZCA9PT0gZWxlbWVudDMuaWQNCiAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAgICAgICAgIC5wYXRjaCgNCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50My5pZCwNCiAgICAgICAgICAgICAgICAgICAgICB7IGhlYWRlcnM6IGhlYWRlcnMgfSwNCiAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIg0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgew0KICAgICAgICAgICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaChhdHJpYnV0byA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdXhbYXRyaWJ1dG9dKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ1cmwiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInZpc2libGUiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KGVsZW1lbnQzLmlkLCBhdXgsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgICAgICBlbGVtZW50My52aXNpYmxlID09PSBmYWxzZSAmJg0KICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZmluZCgNCiAgICAgICAgICAgICAgICAgICAgZmluZEVsZW1lbnQzID0+IGZpbmRFbGVtZW50My5pZCA9PT0gZWxlbWVudDMuaWQNCiAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAgICAgICAgIC5wYXRjaCgNCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50My5pZCwNCiAgICAgICAgICAgICAgICAgICAgICB7IGhlYWRlcnM6IGhlYWRlcnMgfSwNCiAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIg0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgew0KICAgICAgICAgICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaChhdHJpYnV0byA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdXhbYXRyaWJ1dG9dKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ1cmwiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInZpc2libGUiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wdXQoZWxlbWVudDMuaWQsIGF1eCwgew0KICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiINCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShlbGVtZW50My5jaGlsZHJlbikgJiYNCiAgICAgICAgICAgICAgICAgIGVsZW1lbnQzLmNoaWxkcmVuLmxlbmd0aA0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgZWxlbWVudDMuY2hpbGRyZW4uZm9yRWFjaChlbGVtZW50NCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50NC52aXNpYmxlID09PSB0cnVlICYmDQogICAgICAgICAgICAgICAgICAgICAgIXRoaXMuc2VsZWN0aW9uLmZpbmQoDQogICAgICAgICAgICAgICAgICAgICAgICBmaW5kRWxlbWVudDQgPT4gZmluZEVsZW1lbnQ0LmlkID09PSBlbGVtZW50NC5pZA0KICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgICAgICAgICAgICAgIC5wYXRjaCgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDQuaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgIHsgaGVhZGVyczogaGVhZGVycyB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24ocmVzcG9zdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF1eCA9IHJlc3Bvc3RhLmRhdGE7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaChhdHJpYnV0byA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ1cmwiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBheGlvcy5wdXQoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDQuaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV4DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogImFkbWluIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ0LnZpc2libGUgPT09IGZhbHNlICYmDQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZmluZCgNCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmRFbGVtZW50NCA9PiBmaW5kRWxlbWVudDQuaWQgPT09IGVsZW1lbnQ0LmlkDQogICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgICAgICAgICAgICAgLnBhdGNoKA0KICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50NC5pZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgeyBoZWFkZXJzOiBoZWFkZXJzIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAiYWRtaW4iDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXV4ID0gcmVzcG9zdGEuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKGF0cmlidXRvID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdXhbYXRyaWJ1dG9dKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG9bMF0gKyBhdHJpYnV0b1sxXSA9PT0gImlkIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInZpc2libGUiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXgudmlzaWJsZSA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXhpb3MucHV0KA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ0LmlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1eA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogImFkbWluIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbiINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICBhd2FpdCBzZXRUaW1lb3V0KGFzeW5jIGZ1bmN0aW9uKCkgew0KICAgICAgICB2bS4kZW1pdCgiY2xvc2Vfb3Jfc2F2ZSIsICJjbG9zZSIpOw0KICAgICAgfSwgMzAwKTsNCiAgICB9LA0KICAgIGRlc2VsZWN0QWxsKCkgew0KICAgICAgdGhpcy5zZWxlY3Rpb24gPSBbXTsNCiAgICB9LA0KICAgIHNlbGVjdEFsbCgpIHsNCiAgICAgIHZhciB2bSA9IHRoaXM7DQogICAgICB0aGlzLnNlbGVjdGlvbiA9IFtdOw0KICAgICAgdGhpcy50cmVlRGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4gew0KICAgICAgICB2bS5zZWxlY3Rpb24ucHVzaChlbGVtZW50KTsNCiAgICAgICAgaWYgKGVsZW1lbnQuY2hpbGRyZW4pIHsNCiAgICAgICAgICBlbGVtZW50LmNoaWxkcmVuLmZvckVhY2goZWxlbWVudDIgPT4gew0KICAgICAgICAgICAgdm0uc2VsZWN0aW9uLnB1c2goZWxlbWVudDIpOw0KICAgICAgICAgICAgaWYgKGVsZW1lbnQyLmNoaWxkcmVuKSB7DQogICAgICAgICAgICAgIGVsZW1lbnQyLmNoaWxkcmVuLmZvckVhY2goZWxlbWVudDMgPT4gew0KICAgICAgICAgICAgICAgIHZtLnNlbGVjdGlvbi5wdXNoKGVsZW1lbnQzKTsNCiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudDMuY2hpbGRyZW4pIHsNCiAgICAgICAgICAgICAgICAgIGVsZW1lbnQzLmNoaWxkcmVuLmZvckVhY2goZWxlbWVudDQgPT4gew0KICAgICAgICAgICAgICAgICAgICB2bS5zZWxlY3Rpb24ucHVzaChlbGVtZW50NCk7DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGFkZFJhbmdlKGlkQXNzZXNzbWVudCkgew0KICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbFtpZEFzc2Vzc21lbnRdLnJhbmdlcy5wdXNoKHsNCiAgICAgICAgbmFtZXJhbmdlOiAiIiwNCiAgICAgICAgaW5pdGlhbHZhbHVlOiAiIiwNCiAgICAgICAgbGltaXR2YWx1ZTogIiIsDQogICAgICAgIHVybDogIiINCiAgICAgIH0pOw0KICAgIH0sDQogICAgYXN5bmMgZGVsZXRhUmFuZ2UoaWRBc3Nlc3NtZW50LCBpZFJhbmdlKSB7DQogICAgICAvLyBpZiAodGhpcy5hc3Nlc3NtZW50Q29udHJvbFtpZEFzc2Vzc21lbnRdLnJhbmdlc1tpZFJhbmdlXS51cmwgIT09IG51bGwpIHsNCiAgICAgIC8vICAgdmFyIGhlYWRlciA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRIZWFkZXIiKTsNCiAgICAgIC8vICAgdGhpcy5heGlvcy5kZWxldGUoDQogICAgICAvLyAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbFtpZEFzc2Vzc21lbnRdLnJhbmdlc1tpZFJhbmdlXS51cmwsDQogICAgICAvLyAgICAgaGVhZGVyDQogICAgICAvLyAgICk7DQogICAgICAvLyB9DQogICAgICBpZiAoaWRSYW5nZSA9PSAwKSB7DQogICAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2xbaWRBc3Nlc3NtZW50XS5yYW5nZXMuc2hpZnQoKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2xbaWRBc3Nlc3NtZW50XS5yYW5nZXMuc3BsaWNlKGlkUmFuZ2UsIDEpOw0KICAgICAgfQ0KICAgIH0sDQogICAgYWRkQXNzZXNzbWVudCgpIHsNCiAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2wucHVzaCh7DQogICAgICAgIHR5cGVUaHJlc2hvbGQ6ICIiLA0KICAgICAgICBzY29wbzogIiIsDQogICAgICAgIGZrX2VsZW1lbnQ6ICIiLA0KICAgICAgICB2YWx1ZVR5cGU6ICIiLA0KICAgICAgICBzaW5nbGU6IHsNCiAgICAgICAgICB0aHJlc2hvbGQ6ICIiLA0KICAgICAgICAgIHVybDogIiINCiAgICAgICAgfSwNCiAgICAgICAgcmFuZ2VzOiBbXSwNCiAgICAgICAgdXJsOiAiIg0KICAgICAgfSk7DQogICAgfSwNCiAgICBhc3luYyBkZWxldGFBc3Nlc3NtZW50KGlkQXNzZXNzbWVudCkgew0KICAgICAgLy8gaWYgKHRoaXMuYXNzZXNzbWVudENvbnRyb2xbaWRBc3Nlc3NtZW50XS51cmwgIT09IG51bGwpIHsNCiAgICAgIC8vICAgdmFyIGhlYWRlciA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRIZWFkZXIiKTsNCiAgICAgIC8vICAgdGhpcy5heGlvcy5kZWxldGUodGhpcy5hc3Nlc3NtZW50Q29udHJvbFtpZEFzc2Vzc21lbnRdLnVybCwgaGVhZGVyKTsNCiAgICAgIC8vIH0NCiAgICAgIGlmIChpZEFzc2Vzc21lbnQgPT0gMCkgew0KICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnNoaWZ0KCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnNwbGljZShpZEFzc2Vzc21lbnQsIDEpOw0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgdmFsaWRhdGUoKSB7DQogICAgICBhd2FpdCB0aGlzLnB1dFZpc2libGUoKTsNCiAgICAgIGF3YWl0IHRoaXMucG9zdEFzc2Vzc21lbnQoKTsNCiAgICB9LA0KICAgIHJlc2V0KCkgew0KICAgICAgdGhpcy4kZW1pdCgiY2xvc2Vfb3Jfc2F2ZSIsICJjbG9zZSIpOw0KICAgIH0sDQogICAgcmVzZXRWYWxpZGF0aW9uKCkgew0KICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0VmFsaWRhdGlvbigpOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["VisibleDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VisibleDialog.vue","sourceRoot":"src/components/didatic_model","sourcesContent":["<template>\r\n  <v-card>\r\n    <v-card-title style=\"background-color:purple; color:white;\">\r\n      <span class=\"headline\">\r\n        <p>Defina as informações equivalentes ao modelo didático.</p>\r\n      </span>\r\n    </v-card-title>\r\n    <v-row style=\"width : 100%\">\r\n      <v-col cols=\"4\">\r\n        <v-card-text>\r\n          <v-row class=\"ml-2\">\r\n            <v-btn\r\n              color=\"warning\"\r\n              height=\"40px\"\r\n              dark\r\n              x-small\r\n              small\r\n              @click=\"deselectAll()\"\r\n            >Deselecionar tudo</v-btn>\r\n            <v-btn\r\n              class=\"ml-1\"\r\n              color=\"primary\"\r\n              height=\"40\"\r\n              dark\r\n              small\r\n              @click=\"selectAll()\"\r\n            >Selecionar tudo</v-btn>\r\n          </v-row>\r\n\r\n          <v-treeview\r\n            @update:active=\"test\"\r\n            v-model=\"selection\"\r\n            :selection-type=\"'independent'\"\r\n            :items=\"treeData\"\r\n            return-object\r\n            selectable\r\n            selected-color=\"success\"\r\n          ></v-treeview>\r\n        </v-card-text>\r\n      </v-col>\r\n      <v-col cols=\"8\">\r\n        <v-row>\r\n          <h3 class=\"mt-5\">Parâmetros de avaliação</h3>\r\n          <v-btn icon=\"icon\" class=\"mb-1\">\r\n            <v-icon large class=\"mt-9 ml-2\" color=\"primary\" @click=\"addAssessment()\">mdi-plus-box</v-icon>\r\n          </v-btn>\r\n        </v-row>\r\n        <v-row v-for=\"(assessment, i) in assessmentControl\" :key=\"i\" style=\"margin-bottom: -20px;\">\r\n          <v-col cols=\"2\">\r\n            <v-select\r\n              v-model=\"assessmentControl[i].scopo\"\r\n              :items=\"scopoTypes\"\r\n              :rules=\"[v => !!v || 'Conceito é requerido']\"\r\n              label=\"Scopo\"\r\n              style=\"margin:0px;\"\r\n              required\r\n            ></v-select>\r\n          </v-col>\r\n          <v-col cols=\"3\">\r\n            <v-select\r\n              v-model=\"assessmentControl[i].fk_element\"\r\n              :items=\"elementData\"\r\n              :rules=\"[v => !!v || 'O tipo do conceito é requerido']\"\r\n              label=\"Elemento\"\r\n              style=\"margin:0px;\"\r\n              required\r\n            ></v-select>\r\n          </v-col>\r\n          <v-col cols=\"3\" v-if=\"assessmentControl[i].scopo===1\">\r\n            <v-select\r\n              v-model=\"assessmentControl[i].typeThreshold\"\r\n              :items=\"typesThreshold\"\r\n              :rules=\"[v => !!v || 'O tipo do conceito é requerido']\"\r\n              label=\"Tipo de Threshold\"\r\n              style=\"margin:0px;\"\r\n              required\r\n            ></v-select>\r\n          </v-col>\r\n          <v-col cols=\"2\" v-if=\"assessmentControl[i].scopo\">\r\n            <v-select\r\n              style=\"margin-top: -1px;\"\r\n              v-if=\"assessmentControl[i].scopo===1\"\r\n              v-model=\"assessmentControl[i].valueType\"\r\n              :items=\"valueTypes\"\r\n              :rules=\"[v => !!v || 'O tipo de dado é requerido']\"\r\n              label=\"Tipo de Dado\"\r\n              required\r\n            ></v-select>\r\n            <v-text-field\r\n              style=\"margin-top: -1px; margin-bottom: -10px;\"\r\n              v-if=\"assessmentControl[i].scopo===2 || assessmentControl[i].valueType==='Single'\"\r\n              v-model=\"assessmentControl[i].single.threshold\"\r\n              label=\"Valor\"\r\n            ></v-text-field>\r\n          </v-col>\r\n\r\n          <v-col cols=\"2\" class=\"mt-2\">\r\n            <v-btn icon=\"icon\" class=\"mb-1\" v-if=\"assessmentControl[i].valueType==='Range'\">\r\n              <v-icon large class=\"mb-1\" color=\"primary\" @click=\"addRange(i)\">mdi-plus-box</v-icon>\r\n            </v-btn>\r\n            <v-btn icon=\"icon\" class=\"mb-1\">\r\n              <v-icon large class=\"mb-1\" color=\"red\" @click=\"deletaAssessment(i)\">mdi-minus-box</v-icon>\r\n            </v-btn>\r\n          </v-col>\r\n          <v-row v-if=\"assessmentControl[i].valueType === 'Single'\" style=\"margin-top: -40px;\">\r\n            <v-col cols=\"7\"></v-col>\r\n            <v-col cols=\"2\" class=\"ml-10\"></v-col>\r\n          </v-row>\r\n          <div v-else>\r\n            <v-row\r\n              v-for=\"(range, idRange) in assessment.ranges\"\r\n              :key=\"idRange\"\r\n              style=\"margin-top: -30px;\"\r\n            >\r\n              <v-col cols=\"3\"></v-col>\r\n              <v-col cols=\"3\">\r\n                <v-text-field\r\n                  v-model=\"assessmentControl[i].ranges[idRange].namerange\"\r\n                  counter=\"15\"\r\n                  label=\"Nome do range\"\r\n                  style=\"margin:0px;\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"2\">\r\n                <v-text-field\r\n                  v-model=\"assessmentControl[i].ranges[idRange].initialvalue\"\r\n                  label=\"Valor inicial\"\r\n                  style=\"margin:0px;\"\r\n                  type=\"number\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"2\">\r\n                <v-text-field\r\n                  v-model=\"assessmentControl[i].ranges[idRange].limitvalue\"\r\n                  label=\"Valor Limite\"\r\n                  style=\"margin:0px;\"\r\n                  type=\"number\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"1\">\r\n                <v-btn icon=\"icon\" class=\"mt-4\">\r\n                  <v-icon\r\n                    large\r\n                    class=\"mb-1\"\r\n                    color=\"red\"\r\n                    @click=\"deletaRange(i, idRange)\"\r\n                  >mdi-minus-box</v-icon>\r\n                </v-btn>\r\n              </v-col>\r\n            </v-row>\r\n          </div>\r\n        </v-row>\r\n      </v-col>\r\n    </v-row>\r\n    <v-card-actions>\r\n      <v-spacer></v-spacer>\r\n      <v-btn color=\"red\" height=\"49\" dark large @click=\"reset\">\r\n        Close\r\n        <v-icon dark right>mdi-close</v-icon>\r\n      </v-btn>\r\n      <v-btn color=\"success\" height=\"49\" dark large @click=\"validate\">\r\n        Save\r\n        <v-icon dark right>mdi-content-save</v-icon>\r\n      </v-btn>\r\n    </v-card-actions>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport Cookie from \"js-cookie\";\r\nexport default {\r\n  name: \"VisibleDialog\",\r\n  props: [\"domain\", \"dialog\"],\r\n  data: () => ({\r\n    valid: true,\r\n    treeData: [],\r\n    elementData: [],\r\n    selection: [],\r\n    scopoTypes: [\r\n      {\r\n        text: \"Avaliação\",\r\n        value: 1\r\n      },\r\n      {\r\n        text: \"Domínio\",\r\n        value: 2\r\n      }\r\n    ],\r\n    typesThreshold: [\r\n      {\r\n        text: \"Porcentagem\",\r\n        value: 1\r\n      },\r\n      {\r\n        text: \"Literal\",\r\n        value: 2\r\n      }\r\n    ],\r\n    valueTypes: [\"Single\", \"Range\"],\r\n    assessmentControl: [],\r\n    newItems: [],\r\n    checkbox: true\r\n  }),\r\n  watch: {\r\n    domain: async function() {\r\n      if (this.domain) {\r\n        this.treeData = [];\r\n        this.selection = [];\r\n        await this.setDomainVariables();\r\n      }\r\n    },\r\n    assessmentControl: function() {\r\n      this.assessmentControl.forEach(assess => {\r\n        if (assess.valueType === \"Single\") {\r\n          assess.ranges = [];\r\n        } else if (assess.valueType === \"Range\") {\r\n          assess.single.threshold = \"\";\r\n        }\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    test(value) {\r\n      if (value.length) {\r\n        if (value[0].split(\"/\")[5] === \"sub\") {\r\n          this.$emit(\"type\", { type: \"submodulo\", url: value[0] });\r\n        } else {\r\n          this.$emit(\"type\", { type: value[0].split(\"/\")[3], url: value[0] });\r\n        }\r\n      }\r\n    },\r\n    setDomainVariables() {\r\n      this.treeData = [];\r\n      this.elementData.push({\r\n        text: \"[DOMINIO] \" + this.domain.nameknowledgedomain,\r\n        value: this.domain.url\r\n      });\r\n      var indexmodulo = 0;\r\n      if (this.domain.mobilemedias.length) {\r\n        this.domain.mobilemedias.forEach(mobilemedia => {\r\n          var object = {\r\n            id: mobilemedia.url,\r\n            name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n            visible: mobilemedia.visible\r\n          };\r\n          this.treeData.push(object);\r\n          if (object.visible) {\r\n            this.selection.push(object);\r\n          }\r\n          indexmodulo++;\r\n        });\r\n      }\r\n      if (this.domain.instructionalelements.length) {\r\n        this.domain.instructionalelements.forEach(instructionalelement => {\r\n          if (\r\n            instructionalelement.fk_instructionalelementtype.split(\"/\")[4] !== 4\r\n          ) {\r\n            var object = {\r\n              id: instructionalelement.url,\r\n              name: \"[INSTRUCTIONAL ELEMENT] \" + instructionalelement.label,\r\n              visible: instructionalelement.visible\r\n            };\r\n            this.treeData.push(object);\r\n            if (object.visible) {\r\n              this.selection.push(object);\r\n            }\r\n            indexmodulo++;\r\n          }\r\n        });\r\n      }\r\n      if (Array.isArray(this.domain.modules) && this.domain.modules.length) {\r\n        this.domain.modules.forEach(modulo => {\r\n          if (modulo.fk_idmodule === null) {\r\n            var indexsubmodulo = 0;\r\n            var object = {\r\n              id: modulo.url,\r\n              name: \"[MODULO] \" + modulo.namemodule,\r\n              visible: modulo.visible,\r\n              children: []\r\n            };\r\n            this.treeData.push(object);\r\n            this.elementData.push({\r\n              text: object.name,\r\n              value: object.id\r\n            });\r\n            if (object.visible) {\r\n              this.selection.push(object);\r\n            }\r\n            if (modulo.mobilemedias.length) {\r\n              modulo.mobilemedias.forEach(mobilemedia => {\r\n                var object = {\r\n                  id: mobilemedia.url,\r\n                  name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n                  visible: mobilemedia.visible\r\n                };\r\n                this.treeData[indexmodulo].children.push(object);\r\n                if (object.visible) {\r\n                  this.selection.push(object);\r\n                }\r\n                indexsubmodulo++;\r\n              });\r\n            }\r\n\r\n            if (modulo.instructionalelements.length) {\r\n              modulo.instructionalelements.forEach(instructionalelement => {\r\n                if (\r\n                  instructionalelement.fk_instructionalelementtype.split(\r\n                    \"/\"\r\n                  )[4] !== 4\r\n                ) {\r\n                  var object = {\r\n                    id: instructionalelement.url,\r\n                    name:\r\n                      \"[INSTRUCTIONAL ELEMENT] \" + instructionalelement.label,\r\n                    visible: instructionalelement.visible\r\n                  };\r\n                  this.treeData[indexmodulo].children.push(object);\r\n                  if (object.visible) {\r\n                    this.selection.push(object);\r\n                  }\r\n                  indexsubmodulo++;\r\n                }\r\n              });\r\n            }\r\n\r\n            if (modulo.submodules.length) {\r\n              var indexconceito = 0;\r\n              modulo.submodules.forEach(submodulo => {\r\n                var object = {\r\n                  id: submodulo.url,\r\n                  name: \"[SUBMODULO] \" + submodulo.namemodule,\r\n                  visible: submodulo.visible,\r\n                  children: []\r\n                };\r\n                this.treeData[indexmodulo].children.push(object);\r\n                this.elementData.push({\r\n                  text: object.name,\r\n                  value: object.id\r\n                });\r\n                if (object.visible) {\r\n                  this.selection.push(object);\r\n                }\r\n\r\n                if (submodulo.mobilemedias.length) {\r\n                  submodulo.mobilemedias.forEach(mobilemedia => {\r\n                    var object = {\r\n                      id: mobilemedia.url,\r\n                      name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n                      visible: mobilemedia.visible\r\n                    };\r\n                    this.treeData[indexmodulo].children[\r\n                      indexsubmodulo\r\n                    ].children.push(object);\r\n                    if (object.visible) {\r\n                      this.selection.push(object);\r\n                    }\r\n                    indexconceito++;\r\n                  });\r\n                }\r\n\r\n                if (submodulo.instructionalelements.length) {\r\n                  submodulo.instructionalelements.forEach(\r\n                    instructionalelement => {\r\n                      var object = {\r\n                        id: instructionalelement.url,\r\n                        name:\r\n                          \"[INSTRUCTIONAL ELEMENT] \" +\r\n                          instructionalelement.label,\r\n                        visible: instructionalelement.visible\r\n                      };\r\n                      this.treeData[indexmodulo].children[\r\n                        indexsubmodulo\r\n                      ].children.push(object);\r\n                      if (object.visible) {\r\n                        this.selection.push(object);\r\n                      }\r\n                      indexconceito++;\r\n                    }\r\n                  );\r\n                }\r\n\r\n                if (submodulo.concepts.length) {\r\n                  submodulo.concepts.forEach(conceito => {\r\n                    var object = {\r\n                      id: conceito.url,\r\n                      name: \"[CONCEITO] \" + conceito.nameconcept,\r\n                      visible: conceito.visible,\r\n                      children: []\r\n                    };\r\n                    this.treeData[indexmodulo].children[\r\n                      indexsubmodulo\r\n                    ].children.push(object);\r\n\r\n                    this.elementData.push({\r\n                      text: object.name,\r\n                      value: object.id\r\n                    });\r\n                    if (object.visible) {\r\n                      this.selection.push(object);\r\n                    }\r\n\r\n                    if (conceito.mobilemedias.length) {\r\n                      conceito.mobilemedias.forEach(mobilemedia => {\r\n                        var object = {\r\n                          id: mobilemedia.url,\r\n                          name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n                          visible: mobilemedia.visible\r\n                        };\r\n                        this.treeData[indexmodulo].children[\r\n                          indexsubmodulo\r\n                        ].children[indexconceito].children.push(object);\r\n                        if (object.visible) {\r\n                          this.selection.push(object);\r\n                        }\r\n                      });\r\n                    }\r\n\r\n                    if (conceito.instructionalelements.length) {\r\n                      conceito.instructionalelements.forEach(\r\n                        instructionalelement => {\r\n                          var object = {\r\n                            id: instructionalelement.url,\r\n                            name:\r\n                              \"[INSTRUCTIONAL ELEMENT] \" +\r\n                              instructionalelement.label,\r\n                            visible: instructionalelement.visible\r\n                          };\r\n                          this.treeData[indexmodulo].children[\r\n                            indexsubmodulo\r\n                          ].children[indexconceito].children.push(object);\r\n                          if (object.visible) {\r\n                            this.selection.push(object);\r\n                          }\r\n                        }\r\n                      );\r\n                    }\r\n\r\n                    if (conceito.informationitems.length) {\r\n                      conceito.informationitems.forEach(procedure => {\r\n                        if (\r\n                          procedure.fk_informationitemtype ===\r\n                          \"http://127.0.0.1:8000/informationitemtype/4/\"\r\n                        ) {\r\n                          var object = {\r\n                            id: procedure.url,\r\n                            name:\r\n                              \"[PROCEDIMENTO] \" + procedure.nameinformationitem,\r\n                            visible: procedure.visible\r\n                          };\r\n                          this.treeData[indexmodulo].children[\r\n                            indexsubmodulo\r\n                          ].children[indexconceito].children.push(object);\r\n                          if (object.visible) {\r\n                            this.selection.push(object);\r\n                          }\r\n                        }\r\n                      });\r\n                    }\r\n\r\n                    indexconceito++;\r\n                  });\r\n                }\r\n                indexsubmodulo++;\r\n              });\r\n            }\r\n            if (modulo.concepts.length) {\r\n              if (indexsubmodulo > 0) {\r\n                indexconceito = indexsubmodulo;\r\n              } else {\r\n                indexconceito = 0;\r\n              }\r\n              modulo.concepts.forEach(conceito => {\r\n                var object = {\r\n                  id: conceito.url,\r\n                  name: \"[CONCEITO] \" + conceito.nameconcept,\r\n                  visible: conceito.visible,\r\n                  children: []\r\n                };\r\n                this.treeData[indexmodulo].children.push(object);\r\n\r\n                this.elementData.push({\r\n                  text: object.name,\r\n                  value: object.id\r\n                });\r\n                if (object.visible) {\r\n                  this.selection.push(object);\r\n                }\r\n\r\n                if (conceito.mobilemedias.length) {\r\n                  conceito.mobilemedias.forEach(mobilemedia => {\r\n                    var object = {\r\n                      id: mobilemedia.url,\r\n                      name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n                      visible: mobilemedia.visible\r\n                    };\r\n                    this.treeData[indexmodulo].children[\r\n                      indexconceito\r\n                    ].children.push(object);\r\n                    if (object.visible) {\r\n                      this.selection.push(object);\r\n                    }\r\n                  });\r\n                }\r\n\r\n                if (conceito.instructionalelements.length) {\r\n                  conceito.instructionalelements.forEach(\r\n                    instructionalelement => {\r\n                      var object = {\r\n                        id: instructionalelement.url,\r\n                        name:\r\n                          \"[INSTRUCTIONAL ELEMENT] \" +\r\n                          instructionalelement.label,\r\n                        visible: instructionalelement.visible\r\n                      };\r\n                      this.treeData[indexmodulo].children[\r\n                        indexconceito\r\n                      ].children.push(object);\r\n                      if (object.visible) {\r\n                        this.selection.push(object);\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n\r\n                if (conceito.informationitems.length) {\r\n                  conceito.informationitems.forEach(procedure => {\r\n                    if (\r\n                      procedure.fk_informationitemtype ===\r\n                      \"http://127.0.0.1:8000/informationitemtype/4/\"\r\n                    ) {\r\n                      var object = {\r\n                        id: procedure.url,\r\n                        name: \"[PROCEDIMENTO] \" + procedure.nameinformationitem,\r\n                        visible: procedure.visible\r\n                      };\r\n                      this.treeData[indexmodulo].children[\r\n                        indexconceito\r\n                      ].children.push(object);\r\n                      if (object.visible) {\r\n                        this.selection.push(object);\r\n                      }\r\n                    }\r\n                  });\r\n                }\r\n                indexconceito++;\r\n              });\r\n            }\r\n            indexmodulo++;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    async postAssessment() {\r\n      var vm = this;\r\n      var header = await this.$store.dispatch(\"getHeader\");\r\n      await this.assessmentControl.forEach(async assessment => {\r\n        var auxAssessment = {\r\n          typethreshold:\r\n            `http://127.0.0.1:8000/typethreshold/` +\r\n            assessment.typeThreshold +\r\n            `/`,\r\n          scopo: `http://127.0.0.1:8000/scopo/` + assessment.scopo + `/`,\r\n          fk_idknowledgedomain: null,\r\n          fk_idmodule: null,\r\n          fk_idconcept: null\r\n        };\r\n        if (assessment.scopo === 2) {\r\n          auxAssessment.typethreshold = `http://127.0.0.1:8000/typethreshold/1/`;\r\n        }\r\n        if (assessment.fk_element.split(\"/\")[3] === \"knowledgedomain\") {\r\n          auxAssessment.fk_idknowledgedomain = assessment.fk_element;\r\n        } else if (assessment.fk_element.split(\"/\")[3] === \"module\") {\r\n          auxAssessment.fk_idmodule = assessment.fk_element;\r\n        } else if (assessment.fk_element.split(\"/\")[3] === \"concept\") {\r\n          auxAssessment.fk_idconcept = assessment.fk_element;\r\n        }\r\n        await this.axios\r\n          .post(\r\n            \"http://127.0.0.1:8000/assessmentparameter/\",\r\n            auxAssessment,\r\n            header\r\n          )\r\n          .then(async function(resposta) {\r\n            if (resposta.data.scopo === `http://127.0.0.1:8000/scopo/1/`) {\r\n              if (assessment.valueType === \"Single\") {\r\n                await vm.axios.post(\r\n                  \"http://127.0.0.1:8000/single/\",\r\n                  {\r\n                    fk_idassessmentparameter: resposta.data.url,\r\n                    threshold: assessment.single.threshold\r\n                  },\r\n                  header\r\n                );\r\n              } else if (assessment.valueType === \"Range\") {\r\n                assessment.ranges.forEach(async range => {\r\n                  await vm.axios.post(\r\n                    \"http://127.0.0.1:8000/range/\",\r\n                    {\r\n                      namerange: range.namerange,\r\n                      fk_idassessmentparameter: resposta.data.url,\r\n                      initialvalue: range.initialvalue,\r\n                      limitvalue: range.limitvalue\r\n                    },\r\n                    header\r\n                  );\r\n                });\r\n              }\r\n            } else if (\r\n              resposta.data.scopo === `http://127.0.0.1:8000/scopo/2/`\r\n            ) {\r\n              await vm.axios.post(\r\n                \"http://127.0.0.1:8000/single/\",\r\n                {\r\n                  fk_idassessmentparameter: resposta.data.url,\r\n                  threshold: assessment.single.threshold\r\n                },\r\n                header\r\n              );\r\n            }\r\n          });\r\n      });\r\n    },\r\n    async putVisible() {\r\n      var vm = this;\r\n      var csrftoken = Cookie.get(\"csrftoken\");\r\n      var headers = {\r\n        \"X-CSRFTOKEN\": csrftoken\r\n      };\r\n      this.treeData.forEach(element => {\r\n        if (\r\n          element.visible === true &&\r\n          !this.selection.find(findElement => findElement.id === element.id)\r\n        ) {\r\n          axios\r\n            .patch(\r\n              element.id,\r\n              { headers: headers },\r\n              {\r\n                auth: {\r\n                  username: \"admin\",\r\n                  password: \"admin\"\r\n                }\r\n              }\r\n            )\r\n            .then(async function(resposta) {\r\n              var aux = resposta.data;\r\n              await Object.keys(aux).forEach(atributo => {\r\n                if (Array.isArray(aux[atributo])) {\r\n                  delete aux[atributo];\r\n                } else if (atributo === \"url\") {\r\n                  delete aux[atributo];\r\n                } else if (atributo[0] + atributo[1] === \"id\") {\r\n                  delete aux[atributo];\r\n                } else if (atributo === \"visible\") {\r\n                  aux.visible = false;\r\n                }\r\n              });\r\n              await axios.put(element.id, aux, {\r\n                auth: {\r\n                  username: \"admin\",\r\n                  password: \"admin\"\r\n                }\r\n              });\r\n            });\r\n        } else if (\r\n          element.visible === false &&\r\n          this.selection.find(findElement => findElement.id === element.id)\r\n        ) {\r\n          axios\r\n            .patch(\r\n              element.id,\r\n              { headers: headers },\r\n              {\r\n                auth: {\r\n                  username: \"admin\",\r\n                  password: \"admin\"\r\n                }\r\n              }\r\n            )\r\n            .then(async function(resposta) {\r\n              var aux = resposta.data;\r\n              await Object.keys(aux).forEach(atributo => {\r\n                if (Array.isArray(aux[atributo])) {\r\n                  delete aux[atributo];\r\n                } else if (atributo === \"url\") {\r\n                  delete aux[atributo];\r\n                } else if (atributo[0] + atributo[1] === \"id\") {\r\n                  delete aux[atributo];\r\n                } else if (atributo === \"visible\") {\r\n                  aux.visible = true;\r\n                }\r\n              });\r\n              await axios.put(element.id, aux, {\r\n                auth: {\r\n                  username: \"admin\",\r\n                  password: \"admin\"\r\n                }\r\n              });\r\n            });\r\n        }\r\n        if (Array.isArray(element.children) && element.children.length) {\r\n          element.children.forEach(element2 => {\r\n            if (\r\n              element2.visible === true &&\r\n              !this.selection.find(\r\n                findElement2 => findElement2.id === element2.id\r\n              )\r\n            ) {\r\n              axios\r\n                .patch(\r\n                  element2.id,\r\n                  { headers: headers },\r\n                  {\r\n                    auth: {\r\n                      username: \"admin\",\r\n                      password: \"admin\"\r\n                    }\r\n                  }\r\n                )\r\n                .then(async function(resposta) {\r\n                  var aux = resposta.data;\r\n                  await Object.keys(aux).forEach(atributo => {\r\n                    if (Array.isArray(aux[atributo])) {\r\n                      delete aux[atributo];\r\n                    } else if (atributo === \"url\") {\r\n                      delete aux[atributo];\r\n                    } else if (atributo[0] + atributo[1] === \"id\") {\r\n                      delete aux[atributo];\r\n                    } else if (atributo === \"visible\") {\r\n                      aux.visible = false;\r\n                    }\r\n                  });\r\n\r\n                  await axios.put(element2.id, aux, {\r\n                    auth: {\r\n                      username: \"admin\",\r\n                      password: \"admin\"\r\n                    }\r\n                  });\r\n                });\r\n            } else if (\r\n              element2.visible === false &&\r\n              this.selection.find(\r\n                findElement2 => findElement2.id === element2.id\r\n              )\r\n            ) {\r\n              axios\r\n                .patch(\r\n                  element2.id,\r\n                  { headers: headers },\r\n                  {\r\n                    auth: {\r\n                      username: \"admin\",\r\n                      password: \"admin\"\r\n                    }\r\n                  }\r\n                )\r\n                .then(async function(resposta) {\r\n                  var aux = resposta.data;\r\n                  await Object.keys(aux).forEach(atributo => {\r\n                    if (Array.isArray(aux[atributo])) {\r\n                      delete aux[atributo];\r\n                    } else if (atributo === \"url\") {\r\n                      delete aux[atributo];\r\n                    } else if (atributo[0] + atributo[1] === \"id\") {\r\n                      delete aux[atributo];\r\n                    } else if (atributo === \"visible\") {\r\n                      aux.visible = true;\r\n                    }\r\n                  });\r\n\r\n                  await axios.put(element2.id, aux, {\r\n                    auth: {\r\n                      username: \"admin\",\r\n                      password: \"admin\"\r\n                    }\r\n                  });\r\n                });\r\n            }\r\n\r\n            if (Array.isArray(element2.children) && element2.children.length) {\r\n              element2.children.forEach(element3 => {\r\n                if (\r\n                  element3.visible === true &&\r\n                  !this.selection.find(\r\n                    findElement3 => findElement3.id === element3.id\r\n                  )\r\n                ) {\r\n                  axios\r\n                    .patch(\r\n                      element3.id,\r\n                      { headers: headers },\r\n                      {\r\n                        auth: {\r\n                          username: \"admin\",\r\n                          password: \"admin\"\r\n                        }\r\n                      }\r\n                    )\r\n                    .then(async function(resposta) {\r\n                      var aux = resposta.data;\r\n                      await Object.keys(aux).forEach(atributo => {\r\n                        if (Array.isArray(aux[atributo])) {\r\n                          delete aux[atributo];\r\n                        } else if (atributo === \"url\") {\r\n                          delete aux[atributo];\r\n                        } else if (atributo[0] + atributo[1] === \"id\") {\r\n                          delete aux[atributo];\r\n                        } else if (atributo === \"visible\") {\r\n                          aux.visible = false;\r\n                        }\r\n                      });\r\n                      await axios.put(element3.id, aux, {\r\n                        auth: {\r\n                          username: \"admin\",\r\n                          password: \"admin\"\r\n                        }\r\n                      });\r\n                    });\r\n                } else if (\r\n                  element3.visible === false &&\r\n                  this.selection.find(\r\n                    findElement3 => findElement3.id === element3.id\r\n                  )\r\n                ) {\r\n                  axios\r\n                    .patch(\r\n                      element3.id,\r\n                      { headers: headers },\r\n                      {\r\n                        auth: {\r\n                          username: \"admin\",\r\n                          password: \"admin\"\r\n                        }\r\n                      }\r\n                    )\r\n                    .then(async function(resposta) {\r\n                      var aux = resposta.data;\r\n                      await Object.keys(aux).forEach(atributo => {\r\n                        if (Array.isArray(aux[atributo])) {\r\n                          delete aux[atributo];\r\n                        } else if (atributo === \"url\") {\r\n                          delete aux[atributo];\r\n                        } else if (atributo[0] + atributo[1] === \"id\") {\r\n                          delete aux[atributo];\r\n                        } else if (atributo === \"visible\") {\r\n                          aux.visible = true;\r\n                        }\r\n                      });\r\n                      await axios.put(element3.id, aux, {\r\n                        auth: {\r\n                          username: \"admin\",\r\n                          password: \"admin\"\r\n                        }\r\n                      });\r\n                    });\r\n                }\r\n\r\n                if (\r\n                  Array.isArray(element3.children) &&\r\n                  element3.children.length\r\n                ) {\r\n                  element3.children.forEach(element4 => {\r\n                    if (\r\n                      element4.visible === true &&\r\n                      !this.selection.find(\r\n                        findElement4 => findElement4.id === element4.id\r\n                      )\r\n                    ) {\r\n                      axios\r\n                        .patch(\r\n                          element4.id,\r\n                          { headers: headers },\r\n                          {\r\n                            auth: {\r\n                              username: \"admin\",\r\n                              password: \"admin\"\r\n                            }\r\n                          }\r\n                        )\r\n                        .then(async function(resposta) {\r\n                          var aux = resposta.data;\r\n                          await Object.keys(aux).forEach(atributo => {\r\n                            if (Array.isArray(aux[atributo])) {\r\n                              delete aux[atributo];\r\n                            } else if (atributo === \"url\") {\r\n                              delete aux[atributo];\r\n                            } else if (atributo[0] + atributo[1] === \"id\") {\r\n                              delete aux[atributo];\r\n                            } else if (atributo === \"visible\") {\r\n                              aux.visible = false;\r\n                            }\r\n                          });\r\n                          await axios.put(\r\n                            element4.id,\r\n                            {\r\n                              aux\r\n                            },\r\n                            {\r\n                              auth: {\r\n                                username: \"admin\",\r\n                                password: \"admin\"\r\n                              }\r\n                            }\r\n                          );\r\n                        });\r\n                    } else if (\r\n                      element4.visible === false &&\r\n                      this.selection.find(\r\n                        findElement4 => findElement4.id === element4.id\r\n                      )\r\n                    ) {\r\n                      axios\r\n                        .patch(\r\n                          element4.id,\r\n                          { headers: headers },\r\n                          {\r\n                            auth: {\r\n                              username: \"admin\",\r\n                              password: \"admin\"\r\n                            }\r\n                          }\r\n                        )\r\n                        .then(async function(resposta) {\r\n                          var aux = resposta.data;\r\n                          await Object.keys(aux).forEach(atributo => {\r\n                            if (Array.isArray(aux[atributo])) {\r\n                              delete aux[atributo];\r\n                            } else if (atributo === \"url\") {\r\n                              delete aux[atributo];\r\n                            } else if (atributo[0] + atributo[1] === \"id\") {\r\n                              delete aux[atributo];\r\n                            } else if (atributo === \"visible\") {\r\n                              aux.visible = true;\r\n                            }\r\n                          });\r\n                          await axios.put(\r\n                            element4.id,\r\n                            {\r\n                              aux\r\n                            },\r\n                            {\r\n                              auth: {\r\n                                username: \"admin\",\r\n                                password: \"admin\"\r\n                              }\r\n                            }\r\n                          );\r\n                        });\r\n                    }\r\n                  });\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n      await setTimeout(async function() {\r\n        vm.$emit(\"close_or_save\", \"close\");\r\n      }, 300);\r\n    },\r\n    deselectAll() {\r\n      this.selection = [];\r\n    },\r\n    selectAll() {\r\n      var vm = this;\r\n      this.selection = [];\r\n      this.treeData.forEach(element => {\r\n        vm.selection.push(element);\r\n        if (element.children) {\r\n          element.children.forEach(element2 => {\r\n            vm.selection.push(element2);\r\n            if (element2.children) {\r\n              element2.children.forEach(element3 => {\r\n                vm.selection.push(element3);\r\n                if (element3.children) {\r\n                  element3.children.forEach(element4 => {\r\n                    vm.selection.push(element4);\r\n                  });\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    addRange(idAssessment) {\r\n      this.assessmentControl[idAssessment].ranges.push({\r\n        namerange: \"\",\r\n        initialvalue: \"\",\r\n        limitvalue: \"\",\r\n        url: \"\"\r\n      });\r\n    },\r\n    async deletaRange(idAssessment, idRange) {\r\n      // if (this.assessmentControl[idAssessment].ranges[idRange].url !== null) {\r\n      //   var header = await this.$store.dispatch(\"getHeader\");\r\n      //   this.axios.delete(\r\n      //     this.assessmentControl[idAssessment].ranges[idRange].url,\r\n      //     header\r\n      //   );\r\n      // }\r\n      if (idRange == 0) {\r\n        this.assessmentControl[idAssessment].ranges.shift();\r\n      } else {\r\n        this.assessmentControl[idAssessment].ranges.splice(idRange, 1);\r\n      }\r\n    },\r\n    addAssessment() {\r\n      this.assessmentControl.push({\r\n        typeThreshold: \"\",\r\n        scopo: \"\",\r\n        fk_element: \"\",\r\n        valueType: \"\",\r\n        single: {\r\n          threshold: \"\",\r\n          url: \"\"\r\n        },\r\n        ranges: [],\r\n        url: \"\"\r\n      });\r\n    },\r\n    async deletaAssessment(idAssessment) {\r\n      // if (this.assessmentControl[idAssessment].url !== null) {\r\n      //   var header = await this.$store.dispatch(\"getHeader\");\r\n      //   this.axios.delete(this.assessmentControl[idAssessment].url, header);\r\n      // }\r\n      if (idAssessment == 0) {\r\n        this.assessmentControl.shift();\r\n      } else {\r\n        this.assessmentControl.splice(idAssessment, 1);\r\n      }\r\n    },\r\n    async validate() {\r\n      await this.putVisible();\r\n      await this.postAssessment();\r\n    },\r\n    reset() {\r\n      this.$emit(\"close_or_save\", \"close\");\r\n    },\r\n    resetValidation() {\r\n      this.$refs.form.resetValidation();\r\n    }\r\n  }\r\n};\r\n</script>"]}]}