{"remainingRequest":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\www\\EducomML\\EducomML_Front\\src\\components\\didatic_model\\VisibleDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\www\\EducomML\\EducomML_Front\\src\\components\\didatic_model\\VisibleDialog.vue","mtime":1596743861328},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593634551412},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\babel-loader\\lib\\index.js","mtime":1593634550126},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1593634595918},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593634551412},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js","mtime":1593634595223}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBcGkgZnJvbSAiQC9zZXJ2aWNlcy9BcGkiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJWaXNpYmxlRGlhbG9nIiwKICBwcm9wczogWyJkb21haW4iLCAiZGlhbG9nIl0sCiAgZGF0YTogKCkgPT4gKHsKICAgIHZhbGlkOiB0cnVlLAogICAgdHJlZURhdGE6IFtdLAogICAgc2VsZWN0aW9uOiBbXSwKICAgIGVsZW1lbnREYXRhOiBbXSwKICAgIHNjb3BvVHlwZXM6IFsKICAgICAgewogICAgICAgIHRleHQ6ICJBdmFsaWHDp8OjbyIsCiAgICAgICAgdmFsdWU6IDEsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0ZXh0OiAiRG9tw61uaW8iLAogICAgICAgIHZhbHVlOiAyLAogICAgICB9LAogICAgXSwKICAgIHR5cGVzVGhyZXNob2xkOiBbCiAgICAgIHsKICAgICAgICB0ZXh0OiAiUG9yY2VudGFnZW0iLAogICAgICAgIHZhbHVlOiAxLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGV4dDogIkxpdGVyYWwiLAogICAgICAgIHZhbHVlOiAyLAogICAgICB9LAogICAgXSwKICAgIHZhbHVlVHlwZXM6IFsiU2luZ2xlIiwgIlJhbmdlIl0sCiAgICBhc3Nlc3NtZW50Q29udHJvbDogW10sCiAgICBjb25jZXB0c1ByaW9yOiBbXSwKICAgIHByaW9yQ29udHJvbDogW10sCiAgICBwcmlvckxldmVsczogWwogICAgICB7CiAgICAgICAgdGV4dDogIk9icmlnYXTDs3JpbyIsCiAgICAgICAgdmFsdWU6IDEsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0ZXh0OiAiRGVzZWrDoXZlbCIsCiAgICAgICAgdmFsdWU6IDIsCiAgICAgIH0sCiAgICBdLAogICAgZGlhbG9nRXJyb3I6IGZhbHNlLAogICAgbWVzc2FnZUVycm9yOiAiIiwKICAgIG5ld0l0ZW1zOiBbXSwKICAgIGNoZWNrYm94OiB0cnVlLAogIH0pLAogIHdhdGNoOiB7CiAgICBkb21haW46IGFzeW5jIGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sID0gW107CiAgICAgIHRoaXMucHJpb3JDb250cm9sID0gW107CiAgICAgIGlmICh0aGlzLmRvbWFpbikgewogICAgICAgIHRoaXMudHJlZURhdGEgPSBbXTsKICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IFtdOwogICAgICAgIGF3YWl0IHRoaXMuZ2V0QXNzZXNzbWVudHMoKTsKICAgICAgICBhd2FpdCB0aGlzLnNldERvbWFpblZhcmlhYmxlcygpOwogICAgICB9CiAgICB9LAogICAgYXNzZXNzbWVudENvbnRyb2w6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLmZvckVhY2goKGFzc2VzcykgPT4gewogICAgICAgIGlmIChhc3Nlc3MudmFsdWVUeXBlID09PSAiU2luZ2xlIikgewogICAgICAgICAgYXNzZXNzLnJhbmdlcy5mb3JFYWNoKChyYW5nZSkgPT4gewogICAgICAgICAgICBpZiAocmFuZ2UudXJsKSB7CiAgICAgICAgICAgICAgdGhpcy5kZWxldGFTaW5nbGUocmFuZ2UudXJsKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBhc3Nlc3MucmFuZ2VzID0gW107CiAgICAgICAgfSBlbHNlIGlmIChhc3Nlc3MudmFsdWVUeXBlID09PSAiUmFuZ2UiKSB7CiAgICAgICAgICBpZiAoYXNzZXNzLnNpbmdsZS51cmwpIHsKICAgICAgICAgICAgdGhpcy5kZWxldGFTaW5nbGUoYXNzZXNzLnNpbmdsZS51cmwpOwogICAgICAgICAgICBhc3Nlc3Muc2luZ2xlLnVybCA9ICIiOwogICAgICAgICAgfQogICAgICAgICAgYXNzZXNzLnNpbmdsZS50aHJlc2hvbGQgPSAiIjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICB9LAogIG1vdW50ZWQ6IGFzeW5jIGZ1bmN0aW9uKCkgewogICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbCA9IFtdOwogICAgdGhpcy5wcmlvckNvbnRyb2wgPSBbXTsKICAgIGlmICh0aGlzLmRvbWFpbikgewogICAgICB0aGlzLnRyZWVEYXRhID0gW107CiAgICAgIHRoaXMuc2VsZWN0aW9uID0gW107CiAgICAgIGF3YWl0IHRoaXMuZ2V0QXNzZXNzbWVudHMoKTsKICAgICAgYXdhaXQgdGhpcy5zZXREb21haW5WYXJpYWJsZXMoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEFzc2Vzc21lbnRzKCkgewogICAgICAvLyB2YXIgdm0gPSB0aGlzOwogICAgICBpZiAodGhpcy5kb21haW4pIHsKICAgICAgICBpZiAodGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlci5sZW5ndGggPiAwKSB7CiAgICAgICAgICB2YXIgYXNzZXNzID0gewogICAgICAgICAgICB0eXBlVGhyZXNob2xkOiBwYXJzZUludCgKICAgICAgICAgICAgICB0aGlzLmRvbWFpbi5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnR5cGV0aHJlc2hvbGQuc3BsaXQoIi8iKVs0XQogICAgICAgICAgICApLAogICAgICAgICAgICBzY29wbzogcGFyc2VJbnQoCiAgICAgICAgICAgICAgdGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlclswXS5zY29wby5zcGxpdCgiLyIpWzRdCiAgICAgICAgICAgICksCiAgICAgICAgICAgIGZrX2VsZW1lbnQ6IHRoaXMuZG9tYWluLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0KICAgICAgICAgICAgICAuZmtfaWRrbm93bGVkZ2Vkb21haW4sCiAgICAgICAgICAgIHZhbHVlVHlwZTogIiIsCiAgICAgICAgICAgIHNpbmdsZTogewogICAgICAgICAgICAgIHRocmVzaG9sZDogIiIsCiAgICAgICAgICAgICAgdXJsOiAiIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmFuZ2VzOiBbXSwKICAgICAgICAgICAgdXJsOiB0aGlzLmRvbWFpbi5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnVybCwKICAgICAgICAgIH07CiAgICAgICAgICBpZiAodGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICBhc3Nlc3MudmFsdWVUeXBlID0gIlNpbmdsZSI7CiAgICAgICAgICAgIGFzc2Vzcy5zaW5nbGUudGhyZXNob2xkID0gdGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGVbMF0udGhyZXNob2xkOwogICAgICAgICAgICBhc3Nlc3Muc2luZ2xlLnVybCA9IHRoaXMuZG9tYWluLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlWzBdLnVybDsKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlclswXS5yYW5nZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBhc3Nlc3MudmFsdWVUeXBlID0gIlJhbmdlIjsKICAgICAgICAgICAgdGhpcy5kb21haW4uYXNzZXNzbWVudHBhcmFtZXRlclswXS5yYW5nZXMuZm9yRWFjaCgocmFuZ2UpID0+IHsKICAgICAgICAgICAgICBhc3Nlc3MucmFuZ2VzLnB1c2goewogICAgICAgICAgICAgICAgbmFtZXJhbmdlOiByYW5nZS5uYW1lcmFuZ2UsCiAgICAgICAgICAgICAgICBpbml0aWFsdmFsdWU6IHJhbmdlLmluaXRpYWx2YWx1ZSwKICAgICAgICAgICAgICAgIGxpbWl0dmFsdWU6IHJhbmdlLmxpbWl0dmFsdWUsCiAgICAgICAgICAgICAgICB1cmw6IHJhbmdlLnVybCwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnB1c2goYXNzZXNzKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuZG9tYWluLm1vZHVsZXMpIHsKICAgICAgICAgIHRoaXMuZG9tYWluLm1vZHVsZXMuZm9yRWFjaCgobW9kdWxlKSA9PiB7CiAgICAgICAgICAgIGlmIChtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgdmFyIGFzc2VzcyA9IHsKICAgICAgICAgICAgICAgIHR5cGVUaHJlc2hvbGQ6IHBhcnNlSW50KAogICAgICAgICAgICAgICAgICBtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS50eXBldGhyZXNob2xkLnNwbGl0KCIvIilbNF0KICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBzY29wbzogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgIG1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNjb3BvLnNwbGl0KCIvIilbNF0KICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBma19lbGVtZW50OiBtb2R1bGUudXJsLAogICAgICAgICAgICAgICAgdmFsdWVUeXBlOiAiIiwKICAgICAgICAgICAgICAgIHNpbmdsZTogewogICAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6ICIiLAogICAgICAgICAgICAgICAgICB1cmw6ICIiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJhbmdlczogW10sCiAgICAgICAgICAgICAgICB1cmw6IG1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnVybCwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGlmIChtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgYXNzZXNzLnZhbHVlVHlwZSA9ICJTaW5nbGUiOwogICAgICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS50aHJlc2hvbGQgPQogICAgICAgICAgICAgICAgICBtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGVbMF0udGhyZXNob2xkOwogICAgICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS51cmwgPQogICAgICAgICAgICAgICAgICBtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGVbMF0udXJsOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAobW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0ucmFuZ2VzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGFzc2Vzcy52YWx1ZVR5cGUgPSAiUmFuZ2UiOwogICAgICAgICAgICAgICAgbW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0ucmFuZ2VzLmZvckVhY2goKHJhbmdlKSA9PiB7CiAgICAgICAgICAgICAgICAgIGFzc2Vzcy5yYW5nZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZXJhbmdlOiByYW5nZS5uYW1lcmFuZ2UsCiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbHZhbHVlOiByYW5nZS5pbml0aWFsdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgbGltaXR2YWx1ZTogcmFuZ2UubGltaXR2YWx1ZSwKICAgICAgICAgICAgICAgICAgICB1cmw6IHJhbmdlLnVybCwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbC5wdXNoKGFzc2Vzcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1vZHVsZS5jb25jZXB0cykgewogICAgICAgICAgICAgIG1vZHVsZS5jb25jZXB0cy5mb3JFYWNoKChtb2R1bGVDb25jZXB0KSA9PiB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgdmFyIGFzc2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICB0eXBlVGhyZXNob2xkOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS50eXBldGhyZXNob2xkLnNwbGl0KAogICAgICAgICAgICAgICAgICAgICAgICAiLyIKICAgICAgICAgICAgICAgICAgICAgIClbNF0KICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHNjb3BvOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zY29wby5zcGxpdCgiLyIpWzRdCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBma19lbGVtZW50OiBtb2R1bGVDb25jZXB0LnVybCwKICAgICAgICAgICAgICAgICAgICB2YWx1ZVR5cGU6ICIiLAogICAgICAgICAgICAgICAgICAgIHNpbmdsZTogewogICAgICAgICAgICAgICAgICAgICAgdGhyZXNob2xkOiAiIiwKICAgICAgICAgICAgICAgICAgICAgIHVybDogIiIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByYW5nZXM6IFtdLAogICAgICAgICAgICAgICAgICAgIHVybDogbW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnVybCwKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgIG1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGUubGVuZ3RoID4gMAogICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICBhc3Nlc3MudmFsdWVUeXBlID0gIlNpbmdsZSI7CiAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS50aHJlc2hvbGQgPQogICAgICAgICAgICAgICAgICAgICAgbW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNpbmdsZVswXS50aHJlc2hvbGQ7CiAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS51cmwgPQogICAgICAgICAgICAgICAgICAgICAgbW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNpbmdsZVswXS51cmw7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgICAgICAgbW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnJhbmdlcy5sZW5ndGggPiAwCiAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIGFzc2Vzcy52YWx1ZVR5cGUgPSAiUmFuZ2UiOwogICAgICAgICAgICAgICAgICAgIG1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS5yYW5nZXMuZm9yRWFjaCgKICAgICAgICAgICAgICAgICAgICAgIChyYW5nZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBhc3Nlc3MucmFuZ2VzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVyYW5nZTogcmFuZ2UubmFtZXJhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWx2YWx1ZTogcmFuZ2UuaW5pdGlhbHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0dmFsdWU6IHJhbmdlLmxpbWl0dmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiByYW5nZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbC5wdXNoKGFzc2Vzcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlQ29uY2VwdC5wcmlvcmtub3dsZWRnZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMucHJpb3JDb250cm9sLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWVwcmlvcmtub3dsZWRnZToKICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZUNvbmNlcHQucHJpb3Jrbm93bGVkZ2VbMF0ubmFtZXByaW9ya25vd2xlZGdlLAogICAgICAgICAgICAgICAgICAgIHByaW9ybGV2ZWw6IHBhcnNlSW50KAogICAgICAgICAgICAgICAgICAgICAgbW9kdWxlQ29uY2VwdC5wcmlvcmtub3dsZWRnZVswXS5wcmlvcmxldmVsLnNwbGl0KCIvIilbNF0KICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIGZrX2lkY29uY2VwdDoKICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZUNvbmNlcHQucHJpb3Jrbm93bGVkZ2VbMF0uZmtfaWRjb25jZXB0LAogICAgICAgICAgICAgICAgICAgIHVybDogbW9kdWxlQ29uY2VwdC5wcmlvcmtub3dsZWRnZVswXS51cmwsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtb2R1bGUuc3VibW9kdWxlcykgewogICAgICAgICAgICAgIG1vZHVsZS5zdWJtb2R1bGVzLmZvckVhY2goKHN1Ym1vZHVsZSkgPT4gewogICAgICAgICAgICAgICAgaWYgKHN1Ym1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgdmFyIGFzc2VzcyA9IHsKICAgICAgICAgICAgICAgICAgICB0eXBlVGhyZXNob2xkOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnR5cGV0aHJlc2hvbGQuc3BsaXQoCiAgICAgICAgICAgICAgICAgICAgICAgICIvIgogICAgICAgICAgICAgICAgICAgICAgKVs0XQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgc2NvcG86IHBhcnNlSW50KAogICAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2NvcG8uc3BsaXQoIi8iKVs0XQogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgZmtfZWxlbWVudDogc3VibW9kdWxlLnVybCwKICAgICAgICAgICAgICAgICAgICB2YWx1ZVR5cGU6ICIiLAogICAgICAgICAgICAgICAgICAgIHNpbmdsZTogewogICAgICAgICAgICAgICAgICAgICAgdGhyZXNob2xkOiAiIiwKICAgICAgICAgICAgICAgICAgICAgIHVybDogIiIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICByYW5nZXM6IFtdLAogICAgICAgICAgICAgICAgICAgIHVybDogc3VibW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0udXJsLAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBpZiAoc3VibW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBhc3Nlc3MudmFsdWVUeXBlID0gIlNpbmdsZSI7CiAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS50aHJlc2hvbGQgPQogICAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlLmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlWzBdLnRocmVzaG9sZDsKICAgICAgICAgICAgICAgICAgICBhc3Nlc3Muc2luZ2xlLnVybCA9CiAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGUuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGVbMF0udXJsOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnJhbmdlcy5sZW5ndGggPiAwCiAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIGFzc2Vzcy52YWx1ZVR5cGUgPSAiUmFuZ2UiOwogICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZS5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnJhbmdlcy5mb3JFYWNoKAogICAgICAgICAgICAgICAgICAgICAgKHJhbmdlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2Vzcy5yYW5nZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXJhbmdlOiByYW5nZS5uYW1lcmFuZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbHZhbHVlOiByYW5nZS5pbml0aWFsdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXR2YWx1ZTogcmFuZ2UubGltaXR2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHJhbmdlLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnB1c2goYXNzZXNzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzdWJtb2R1bGUuY29uY2VwdHMpIHsKICAgICAgICAgICAgICAgICAgc3VibW9kdWxlLmNvbmNlcHRzLmZvckVhY2goKHN1Ym1vZHVsZUNvbmNlcHQpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoc3VibW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBhc3Nlc3MgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVUaHJlc2hvbGQ6IHBhcnNlSW50KAogICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS50eXBldGhyZXNob2xkLnNwbGl0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iCiAgICAgICAgICAgICAgICAgICAgICAgICAgKVs0XQogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICBzY29wbzogcGFyc2VJbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnNjb3BvLnNwbGl0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iCiAgICAgICAgICAgICAgICAgICAgICAgICAgKVs0XQogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICBma19lbGVtZW50OiBzdWJtb2R1bGVDb25jZXB0LnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUeXBlOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyZXNob2xkOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICByYW5nZXM6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHN1Ym1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS51cmwsCiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlCiAgICAgICAgICAgICAgICAgICAgICAgICAgLmxlbmd0aCA+IDAKICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICBhc3Nlc3MudmFsdWVUeXBlID0gIlNpbmdsZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2Vzcy5zaW5nbGUudGhyZXNob2xkID0KICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGVDb25jZXB0LmFzc2Vzc21lbnRwYXJhbWV0ZXJbMF0uc2luZ2xlWzBdLnRocmVzaG9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnNpbmdsZS51cmwgPQogICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS5zaW5nbGVbMF0udXJsOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgc3VibW9kdWxlQ29uY2VwdC5hc3Nlc3NtZW50cGFyYW1ldGVyWzBdLnJhbmdlcwogICAgICAgICAgICAgICAgICAgICAgICAgIC5sZW5ndGggPiAwCiAgICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXNzLnZhbHVlVHlwZSA9ICJSYW5nZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsZUNvbmNlcHQuYXNzZXNzbWVudHBhcmFtZXRlclswXS5yYW5nZXMuZm9yRWFjaCgKICAgICAgICAgICAgICAgICAgICAgICAgICAocmFuZ2UpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2Vzcy5yYW5nZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVyYW5nZTogcmFuZ2UubmFtZXJhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsdmFsdWU6IHJhbmdlLmluaXRpYWx2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXR2YWx1ZTogcmFuZ2UubGltaXR2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiByYW5nZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnB1c2goYXNzZXNzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Ym1vZHVsZUNvbmNlcHQucHJpb3Jrbm93bGVkZ2UubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmlvckNvbnRyb2wucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVwcmlvcmtub3dsZWRnZToKICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGVDb25jZXB0LnByaW9ya25vd2xlZGdlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmFtZXByaW9ya25vd2xlZGdlLAogICAgICAgICAgICAgICAgICAgICAgICBwcmlvcmxldmVsOiBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGVDb25jZXB0LnByaW9ya25vd2xlZGdlWzBdLnByaW9ybGV2ZWwuc3BsaXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyIKICAgICAgICAgICAgICAgICAgICAgICAgICApWzRdCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgIGZrX2lkY29uY2VwdDoKICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtb2R1bGVDb25jZXB0LnByaW9ya25vd2xlZGdlWzBdLmZrX2lkY29uY2VwdCwKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBzdWJtb2R1bGVDb25jZXB0LnByaW9ya25vd2xlZGdlWzBdLnVybCwKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHRlc3QodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlLmxlbmd0aCkgewogICAgICAgIGlmICh2YWx1ZVswXS5zcGxpdCgiLyIpWzVdID09PSAic3ViIikgewogICAgICAgICAgdGhpcy4kZW1pdCgidHlwZSIsIHsgdHlwZTogInN1Ym1vZHVsbyIsIHVybDogdmFsdWVbMF0gfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJGVtaXQoInR5cGUiLCB7IHR5cGU6IHZhbHVlWzBdLnNwbGl0KCIvIilbM10sIHVybDogdmFsdWVbMF0gfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2V0RG9tYWluVmFyaWFibGVzKCkgewogICAgICB0aGlzLnRyZWVEYXRhID0gW107CiAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7CiAgICAgICAgdGV4dDogIltET01JTklPXSAiICsgdGhpcy5kb21haW4ubmFtZWtub3dsZWRnZWRvbWFpbiwKICAgICAgICB2YWx1ZTogdGhpcy5kb21haW4udXJsLAogICAgICB9KTsKICAgICAgdmFyIGluZGV4bW9kdWxvID0gMDsKICAgICAgaWYgKHRoaXMuZG9tYWluLm1vYmlsZW1lZGlhcy5sZW5ndGgpIHsKICAgICAgICB0aGlzLmRvbWFpbi5tb2JpbGVtZWRpYXMuZm9yRWFjaCgobW9iaWxlbWVkaWEpID0+IHsKICAgICAgICAgIHZhciBvYmplY3QgPSB7CiAgICAgICAgICAgIGlkOiBtb2JpbGVtZWRpYS51cmwsCiAgICAgICAgICAgIG5hbWU6ICJbTU9CSUxFTUVESUFdICIgKyBtb2JpbGVtZWRpYS5sYWJlbCwKICAgICAgICAgICAgdmlzaWJsZTogbW9iaWxlbWVkaWEudmlzaWJsZSwKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLnRyZWVEYXRhLnB1c2gob2JqZWN0KTsKICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgewogICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICB9CiAgICAgICAgICBpbmRleG1vZHVsbysrOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICh0aGlzLmRvbWFpbi5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5kb21haW4uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmZvckVhY2goKGluc3RydWN0aW9uYWxlbGVtZW50KSA9PiB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIGluc3RydWN0aW9uYWxlbGVtZW50LmZrX2luc3RydWN0aW9uYWxlbGVtZW50dHlwZS5zcGxpdCgiLyIpWzRdICE9PQogICAgICAgICAgICA0CiAgICAgICAgICApIHsKICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsKICAgICAgICAgICAgICBpZDogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudXJsLAogICAgICAgICAgICAgIG5hbWU6ICJbSU5TVFJVQ1RJT05BTCBFTEVNRU5UXSAiICsgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubGFiZWwsCiAgICAgICAgICAgICAgdmlzaWJsZTogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudmlzaWJsZSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy50cmVlRGF0YS5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgewogICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpbmRleG1vZHVsbysrOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuZG9tYWluLm1vZHVsZXMpICYmIHRoaXMuZG9tYWluLm1vZHVsZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5kb21haW4ubW9kdWxlcy5mb3JFYWNoKChtb2R1bG8pID0+IHsKICAgICAgICAgIGlmIChtb2R1bG8uZmtfaWRtb2R1bGUgPT09IG51bGwpIHsKICAgICAgICAgICAgdmFyIGluZGV4c3VibW9kdWxvID0gMDsKICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsKICAgICAgICAgICAgICBpZDogbW9kdWxvLnVybCwKICAgICAgICAgICAgICBuYW1lOiAiW01PRFVMT10gIiArIG1vZHVsby5uYW1lbW9kdWxlLAogICAgICAgICAgICAgIHZpc2libGU6IG1vZHVsby52aXNpYmxlLAogICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy50cmVlRGF0YS5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7CiAgICAgICAgICAgICAgdGV4dDogb2JqZWN0Lm5hbWUsCiAgICAgICAgICAgICAgdmFsdWU6IG9iamVjdC5pZCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgewogICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobW9kdWxvLm1vYmlsZW1lZGlhcy5sZW5ndGgpIHsKICAgICAgICAgICAgICBtb2R1bG8ubW9iaWxlbWVkaWFzLmZvckVhY2goKG1vYmlsZW1lZGlhKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICBpZDogbW9iaWxlbWVkaWEudXJsLAogICAgICAgICAgICAgICAgICBuYW1lOiAiW01PQklMRU1FRElBXSAiICsgbW9iaWxlbWVkaWEubGFiZWwsCiAgICAgICAgICAgICAgICAgIHZpc2libGU6IG1vYmlsZW1lZGlhLnZpc2libGUsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW4ucHVzaChvYmplY3QpOwogICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvKys7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChtb2R1bG8uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgIG1vZHVsby5pbnN0cnVjdGlvbmFsZWxlbWVudHMuZm9yRWFjaCgoaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpID0+IHsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQuZmtfaW5zdHJ1Y3Rpb25hbGVsZW1lbnR0eXBlLnNwbGl0KAogICAgICAgICAgICAgICAgICAgICIvIgogICAgICAgICAgICAgICAgICApWzRdICE9PSA0CiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsKICAgICAgICAgICAgICAgICAgICBpZDogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudXJsLAogICAgICAgICAgICAgICAgICAgIG5hbWU6CiAgICAgICAgICAgICAgICAgICAgICAiW0lOU1RSVUNUSU9OQUwgRUxFTUVOVF0gIiArIGluc3RydWN0aW9uYWxlbGVtZW50LmxhYmVsLAogICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGluc3RydWN0aW9uYWxlbGVtZW50LnZpc2libGUsCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvKys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChtb2R1bG8uc3VibW9kdWxlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICB2YXIgaW5kZXhjb25jZWl0byA9IDA7CiAgICAgICAgICAgICAgbW9kdWxvLnN1Ym1vZHVsZXMuZm9yRWFjaCgoc3VibW9kdWxvKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICBpZDogc3VibW9kdWxvLnVybCwKICAgICAgICAgICAgICAgICAgbmFtZTogIltTVUJNT0RVTE9dICIgKyBzdWJtb2R1bG8ubmFtZW1vZHVsZSwKICAgICAgICAgICAgICAgICAgdmlzaWJsZTogc3VibW9kdWxvLnZpc2libGUsCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnREYXRhLnB1c2goewogICAgICAgICAgICAgICAgICB0ZXh0OiBvYmplY3QubmFtZSwKICAgICAgICAgICAgICAgICAgdmFsdWU6IG9iamVjdC5pZCwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoc3VibW9kdWxvLm1vYmlsZW1lZGlhcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgc3VibW9kdWxvLm1vYmlsZW1lZGlhcy5mb3JFYWNoKChtb2JpbGVtZWRpYSkgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICBpZDogbW9iaWxlbWVkaWEudXJsLAogICAgICAgICAgICAgICAgICAgICAgbmFtZTogIltNT0JJTEVNRURJQV0gIiArIG1vYmlsZW1lZGlhLmxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogbW9iaWxlbWVkaWEudmlzaWJsZSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWwogICAgICAgICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8KICAgICAgICAgICAgICAgICAgICBdLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bysrOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoc3VibW9kdWxvLmluc3RydWN0aW9uYWxlbGVtZW50cy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgc3VibW9kdWxvLmluc3RydWN0aW9uYWxlbGVtZW50cy5mb3JFYWNoKAogICAgICAgICAgICAgICAgICAgIChpbnN0cnVjdGlvbmFsZWxlbWVudCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGluc3RydWN0aW9uYWxlbGVtZW50LnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAiW0lOU1RSVUNUSU9OQUwgRUxFTUVOVF0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGluc3RydWN0aW9uYWxlbGVtZW50LnZpc2libGUsCiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvCiAgICAgICAgICAgICAgICAgICAgICBdLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvKys7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChzdWJtb2R1bG8uY29uY2VwdHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsby5jb25jZXB0cy5mb3JFYWNoKChjb25jZWl0bykgPT4gewogICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICBpZDogY29uY2VpdG8udXJsLAogICAgICAgICAgICAgICAgICAgICAgbmFtZTogIltDT05DRUlUT10gIiArIGNvbmNlaXRvLm5hbWVjb25jZXB0LAogICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogY29uY2VpdG8udmlzaWJsZSwKICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWwogICAgICAgICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8KICAgICAgICAgICAgICAgICAgICBdLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50RGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG9iamVjdC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9iamVjdC5pZCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25jZXB0c1ByaW9yLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgdGV4dDogb2JqZWN0Lm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb2JqZWN0LmlkLAogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAoY29uY2VpdG8ubW9iaWxlbWVkaWFzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgY29uY2VpdG8ubW9iaWxlbWVkaWFzLmZvckVhY2goKG1vYmlsZW1lZGlhKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1vYmlsZW1lZGlhLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiW01PQklMRU1FRElBXSAiICsgbW9iaWxlbWVkaWEubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogbW9iaWxlbWVkaWEudmlzaWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8KICAgICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbltpbmRleGNvbmNlaXRvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoY29uY2VpdG8uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgY29uY2VpdG8uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmZvckVhY2goCiAgICAgICAgICAgICAgICAgICAgICAgIChpbnN0cnVjdGlvbmFsZWxlbWVudCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIltJTlNUUlVDVElPTkFMIEVMRU1FTlRdICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudC5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGluc3RydWN0aW9uYWxlbGVtZW50LnZpc2libGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvCiAgICAgICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbltpbmRleGNvbmNlaXRvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmNlaXRvLmluZm9ybWF0aW9uaXRlbXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25jZWl0by5pbmZvcm1hdGlvbml0ZW1zLmZvckVhY2goKHByb2NlZHVyZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlLmZrX2luZm9ybWF0aW9uaXRlbXR5cGUgPT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgIi9pbmZvcm1hdGlvbml0ZW10eXBlLzQvIgogICAgICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHByb2NlZHVyZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiW1BST0NFRElNRU5UT10gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2NlZHVyZS5uYW1laW5mb3JtYXRpb25pdGVtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogcHJvY2VkdXJlLnZpc2libGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvCiAgICAgICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbltpbmRleGNvbmNlaXRvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8rKzsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpbmRleHN1Ym1vZHVsbysrOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChtb2R1bG8uY29uY2VwdHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgaWYgKGluZGV4c3VibW9kdWxvID4gMCkgewogICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0byA9IGluZGV4c3VibW9kdWxvOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvID0gMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbW9kdWxvLmNvbmNlcHRzLmZvckVhY2goKGNvbmNlaXRvKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICBpZDogY29uY2VpdG8udXJsLAogICAgICAgICAgICAgICAgICBuYW1lOiAiW0NPTkNFSVRPXSAiICsgY29uY2VpdG8ubmFtZWNvbmNlcHQsCiAgICAgICAgICAgICAgICAgIHZpc2libGU6IGNvbmNlaXRvLnZpc2libGUsCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CgogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50RGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgdGV4dDogb2JqZWN0Lm5hbWUsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBvYmplY3QuaWQsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgewogICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmNvbmNlcHRzUHJpb3IucHVzaCh7CiAgICAgICAgICAgICAgICAgIHRleHQ6IG9iamVjdC5uYW1lLAogICAgICAgICAgICAgICAgICB2YWx1ZTogb2JqZWN0LmlkLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAoY29uY2VpdG8ubW9iaWxlbWVkaWFzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBjb25jZWl0by5tb2JpbGVtZWRpYXMuZm9yRWFjaCgobW9iaWxlbWVkaWEpID0+IHsKICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICAgICAgaWQ6IG1vYmlsZW1lZGlhLnVybCwKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJbTU9CSUxFTUVESUFdICIgKyBtb2JpbGVtZWRpYS5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IG1vYmlsZW1lZGlhLnZpc2libGUsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsKICAgICAgICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8KICAgICAgICAgICAgICAgICAgICBdLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChjb25jZWl0by5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGNvbmNlaXRvLmluc3RydWN0aW9uYWxlbGVtZW50cy5mb3JFYWNoKAogICAgICAgICAgICAgICAgICAgIChpbnN0cnVjdGlvbmFsZWxlbWVudCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGluc3RydWN0aW9uYWxlbGVtZW50LnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAiW0lOU1RSVUNUSU9OQUwgRUxFTUVOVF0gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGluc3RydWN0aW9uYWxlbGVtZW50LnZpc2libGUsCiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8KICAgICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW4ucHVzaChvYmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGNvbmNlaXRvLmluZm9ybWF0aW9uaXRlbXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGNvbmNlaXRvLmluZm9ybWF0aW9uaXRlbXMuZm9yRWFjaCgocHJvY2VkdXJlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlLmZrX2luZm9ybWF0aW9uaXRlbXR5cGUgPT09CiAgICAgICAgICAgICAgICAgICAgICAiL2luZm9ybWF0aW9uaXRlbXR5cGUvNC8iCiAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gewogICAgICAgICAgICAgICAgICAgICAgICBpZDogcHJvY2VkdXJlLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZToKICAgICAgICAgICAgICAgICAgICAgICAgICAiW1BST0NFRElNRU5UT10gIiArIHByb2NlZHVyZS5uYW1laW5mb3JtYXRpb25pdGVtLAogICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBwcm9jZWR1cmUudmlzaWJsZSwKICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsKICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bwogICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvKys7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaW5kZXhtb2R1bG8rKzsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHBvc3RBc3Nlc3NtZW50KCkgewogICAgICBhd2FpdCB0aGlzLmFzc2Vzc21lbnRDb250cm9sLmZvckVhY2goYXN5bmMgKGFzc2Vzc21lbnQpID0+IHsKICAgICAgICB2YXIgYXV4QXNzZXNzbWVudCA9IHsKICAgICAgICAgIHR5cGV0aHJlc2hvbGQ6IGAvdHlwZXRocmVzaG9sZC9gICsgYXNzZXNzbWVudC50eXBlVGhyZXNob2xkICsgYC9gLAogICAgICAgICAgc2NvcG86IGAvc2NvcG8vYCArIGFzc2Vzc21lbnQuc2NvcG8gKyBgL2AsCiAgICAgICAgICBma19pZGtub3dsZWRnZWRvbWFpbjogbnVsbCwKICAgICAgICAgIGZrX2lkbW9kdWxlOiBudWxsLAogICAgICAgICAgZmtfaWRjb25jZXB0OiBudWxsLAogICAgICAgIH07CiAgICAgICAgaWYgKGFzc2Vzc21lbnQuZmtfZWxlbWVudC5zcGxpdCgiLyIpWzNdID09PSAia25vd2xlZGdlZG9tYWluIikgewogICAgICAgICAgYXV4QXNzZXNzbWVudC5ma19pZGtub3dsZWRnZWRvbWFpbiA9IGFzc2Vzc21lbnQuZmtfZWxlbWVudDsKICAgICAgICB9IGVsc2UgaWYgKGFzc2Vzc21lbnQuZmtfZWxlbWVudC5zcGxpdCgiLyIpWzNdID09PSAibW9kdWxlIikgewogICAgICAgICAgYXV4QXNzZXNzbWVudC5ma19pZG1vZHVsZSA9IGFzc2Vzc21lbnQuZmtfZWxlbWVudDsKICAgICAgICB9IGVsc2UgaWYgKGFzc2Vzc21lbnQuZmtfZWxlbWVudC5zcGxpdCgiLyIpWzNdID09PSAiY29uY2VwdCIpIHsKICAgICAgICAgIGF1eEFzc2Vzc21lbnQuZmtfaWRjb25jZXB0ID0gYXNzZXNzbWVudC5ma19lbGVtZW50OwogICAgICAgIH0KCiAgICAgICAgaWYgKGFzc2Vzc21lbnQudXJsKSB7CiAgICAgICAgICBhd2FpdCBBcGkoKQogICAgICAgICAgICAucHV0KGFzc2Vzc21lbnQudXJsLCBhdXhBc3Nlc3NtZW50KQogICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgewogICAgICAgICAgICAgIGlmIChhc3Nlc3NtZW50LnZhbHVlVHlwZSA9PT0gIlNpbmdsZSIpIHsKICAgICAgICAgICAgICAgIGlmIChhc3Nlc3NtZW50LnJhbmdlcykgewogICAgICAgICAgICAgICAgICBhc3Nlc3NtZW50LnJhbmdlcy5mb3JFYWNoKChyYW5nZSkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZS51cmwpIHsKICAgICAgICAgICAgICAgICAgICAgIEFwaSgpLmRlbGV0ZShyYW5nZS51cmwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wdXQoYXNzZXNzbWVudC5zaW5nbGUudXJsLCB7CiAgICAgICAgICAgICAgICAgIGZrX2lkYXNzZXNzbWVudHBhcmFtZXRlcjogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogYXNzZXNzbWVudC5zaW5nbGUudGhyZXNob2xkLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhc3Nlc3NtZW50LnZhbHVlVHlwZSA9PT0gIlJhbmdlIikgewogICAgICAgICAgICAgICAgaWYgKGFzc2Vzc21lbnQuc2luZ2xlLnVybCkgewogICAgICAgICAgICAgICAgICBBcGkoKS5kZWxldGUoYXNzZXNzbWVudC5zaW5nbGUudXJsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGFzc2Vzc21lbnQucmFuZ2VzLmZvckVhY2goYXN5bmMgKHJhbmdlKSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmIChyYW5nZS51cmwpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wdXQocmFuZ2UudXJsLCB7CiAgICAgICAgICAgICAgICAgICAgICBuYW1lcmFuZ2U6IHJhbmdlLm5hbWVyYW5nZSwKICAgICAgICAgICAgICAgICAgICAgIGZrX2lkYXNzZXNzbWVudHBhcmFtZXRlcjogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsdmFsdWU6IHJhbmdlLmluaXRpYWx2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIGxpbWl0dmFsdWU6IHJhbmdlLmxpbWl0dmFsdWUsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdCgiL3JhbmdlLyIsIHsKICAgICAgICAgICAgICAgICAgICAgIG5hbWVyYW5nZTogcmFuZ2UubmFtZXJhbmdlLAogICAgICAgICAgICAgICAgICAgICAgZmtfaWRhc3Nlc3NtZW50cGFyYW1ldGVyOiByZXNwb3N0YS5kYXRhLnVybCwKICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWx2YWx1ZTogcmFuZ2UuaW5pdGlhbHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgbGltaXR2YWx1ZTogcmFuZ2UubGltaXR2YWx1ZSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXdhaXQgQXBpKCkKICAgICAgICAgICAgLnBvc3QoIi9hc3Nlc3NtZW50cGFyYW1ldGVyLyIsIGF1eEFzc2Vzc21lbnQpCiAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uKHJlc3Bvc3RhKSB7CiAgICAgICAgICAgICAgaWYgKGFzc2Vzc21lbnQudmFsdWVUeXBlID09PSAiU2luZ2xlIikgewogICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdCgiL3NpbmdsZS8iLCB7CiAgICAgICAgICAgICAgICAgIGZrX2lkYXNzZXNzbWVudHBhcmFtZXRlcjogcmVzcG9zdGEuZGF0YS51cmwsCiAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogYXNzZXNzbWVudC5zaW5nbGUudGhyZXNob2xkLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhc3Nlc3NtZW50LnZhbHVlVHlwZSA9PT0gIlJhbmdlIikgewogICAgICAgICAgICAgICAgYXNzZXNzbWVudC5yYW5nZXMuZm9yRWFjaChhc3luYyAocmFuZ2UpID0+IHsKICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucG9zdCgiL3JhbmdlLyIsIHsKICAgICAgICAgICAgICAgICAgICBuYW1lcmFuZ2U6IHJhbmdlLm5hbWVyYW5nZSwKICAgICAgICAgICAgICAgICAgICBma19pZGFzc2Vzc21lbnRwYXJhbWV0ZXI6IHJlc3Bvc3RhLmRhdGEudXJsLAogICAgICAgICAgICAgICAgICAgIGluaXRpYWx2YWx1ZTogcmFuZ2UuaW5pdGlhbHZhbHVlLAogICAgICAgICAgICAgICAgICAgIGxpbWl0dmFsdWU6IHJhbmdlLmxpbWl0dmFsdWUsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIHBvc3RQcmlvcktub3dsZWRnZXMoKSB7CiAgICAgIGF3YWl0IHRoaXMucHJpb3JDb250cm9sLmZvckVhY2goYXN5bmMgKHByaW9yKSA9PiB7CiAgICAgICAgaWYgKHByaW9yLnVybCkgewogICAgICAgICAgYXdhaXQgQXBpKCkucHV0KHByaW9yLnVybCwgewogICAgICAgICAgICBuYW1lcHJpb3Jrbm93bGVkZ2U6IHByaW9yLm5hbWVwcmlvcmtub3dsZWRnZSwKICAgICAgICAgICAgcHJpb3JsZXZlbDogYC9wcmlvcmxldmVsL2AgKyBwcmlvci5wcmlvcmxldmVsICsgYC9gLAogICAgICAgICAgICBma19pZGNvbmNlcHQ6IHByaW9yLmZrX2lkY29uY2VwdCwKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhd2FpdCBBcGkoKS5wb3N0KGAvcHJpb3Jrbm93bGVkZ2UvYCwgewogICAgICAgICAgICBuYW1lcHJpb3Jrbm93bGVkZ2U6IHByaW9yLm5hbWVwcmlvcmtub3dsZWRnZSwKICAgICAgICAgICAgcHJpb3JsZXZlbDogYC9wcmlvcmxldmVsL2AgKyBwcmlvci5wcmlvcmxldmVsICsgYC9gLAogICAgICAgICAgICBma19pZGNvbmNlcHQ6IHByaW9yLmZrX2lkY29uY2VwdCwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgcHV0VmlzaWJsZSgpIHsKICAgICAgdmFyIHZtID0gdGhpczsKCiAgICAgIHRoaXMudHJlZURhdGEuZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgICAgIGlmICgKICAgICAgICAgIGVsZW1lbnQudmlzaWJsZSA9PT0gdHJ1ZSAmJgogICAgICAgICAgIXRoaXMuc2VsZWN0aW9uLmZpbmQoKGZpbmRFbGVtZW50KSA9PiBmaW5kRWxlbWVudC5pZCA9PT0gZWxlbWVudC5pZCkKICAgICAgICApIHsKICAgICAgICAgIEFwaSgpCiAgICAgICAgICAgIC5wYXRjaChlbGVtZW50LmlkKQogICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgewogICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOwogICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsKICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wdXQoZWxlbWVudC5pZCwgYXV4KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgIGVsZW1lbnQudmlzaWJsZSA9PT0gZmFsc2UgJiYKICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLmZpbmQoKGZpbmRFbGVtZW50KSA9PiBmaW5kRWxlbWVudC5pZCA9PT0gZWxlbWVudC5pZCkKICAgICAgICApIHsKICAgICAgICAgIEFwaSgpCiAgICAgICAgICAgIC5wYXRjaChlbGVtZW50LmlkKQogICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgewogICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOwogICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsKICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsKICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50LmlkLCBhdXgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZWxlbWVudC5jaGlsZHJlbikgJiYgZWxlbWVudC5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgIGVsZW1lbnQuY2hpbGRyZW4uZm9yRWFjaCgoZWxlbWVudDIpID0+IHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGVsZW1lbnQyLnZpc2libGUgPT09IHRydWUgJiYKICAgICAgICAgICAgICAhdGhpcy5zZWxlY3Rpb24uZmluZCgKICAgICAgICAgICAgICAgIChmaW5kRWxlbWVudDIpID0+IGZpbmRFbGVtZW50Mi5pZCA9PT0gZWxlbWVudDIuaWQKICAgICAgICAgICAgICApCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIEFwaSgpCiAgICAgICAgICAgICAgICAucGF0Y2goZWxlbWVudDIuaWQpCiAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgewogICAgICAgICAgICAgICAgICB2YXIgYXV4ID0gcmVzcG9zdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKChhdHJpYnV0bykgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7CiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgewogICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7CiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsKICAgICAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50Mi5pZCwgYXV4KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICAgIGVsZW1lbnQyLnZpc2libGUgPT09IGZhbHNlICYmCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZmluZCgKICAgICAgICAgICAgICAgIChmaW5kRWxlbWVudDIpID0+IGZpbmRFbGVtZW50Mi5pZCA9PT0gZWxlbWVudDIuaWQKICAgICAgICAgICAgICApCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIEFwaSgpCiAgICAgICAgICAgICAgICAucGF0Y2goZWxlbWVudDIuaWQpCiAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgewogICAgICAgICAgICAgICAgICB2YXIgYXV4ID0gcmVzcG9zdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKChhdHJpYnV0bykgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7CiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgewogICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7CiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsKICAgICAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KGVsZW1lbnQyLmlkLCBhdXgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KGVsZW1lbnQyLmNoaWxkcmVuKSAmJgogICAgICAgICAgICAgIGVsZW1lbnQyLmNoaWxkcmVuLmxlbmd0aAogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBlbGVtZW50Mi5jaGlsZHJlbi5mb3JFYWNoKChlbGVtZW50MykgPT4gewogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICBlbGVtZW50My52aXNpYmxlID09PSB0cnVlICYmCiAgICAgICAgICAgICAgICAgICF0aGlzLnNlbGVjdGlvbi5maW5kKAogICAgICAgICAgICAgICAgICAgIChmaW5kRWxlbWVudDMpID0+IGZpbmRFbGVtZW50My5pZCA9PT0gZWxlbWVudDMuaWQKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIEFwaSgpCiAgICAgICAgICAgICAgICAgICAgLnBhdGNoKGVsZW1lbnQzLmlkKQogICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uKHJlc3Bvc3RhKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgYXV4ID0gcmVzcG9zdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KGVsZW1lbnQzLmlkLCBhdXgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICAgICAgZWxlbWVudDMudmlzaWJsZSA9PT0gZmFsc2UgJiYKICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZmluZCgKICAgICAgICAgICAgICAgICAgICAoZmluZEVsZW1lbnQzKSA9PiBmaW5kRWxlbWVudDMuaWQgPT09IGVsZW1lbnQzLmlkCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICBBcGkoKQogICAgICAgICAgICAgICAgICAgIC5wYXRjaChlbGVtZW50My5pZCkKICAgICAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGF1eCA9IHJlc3Bvc3RhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBPYmplY3Qua2V5cyhhdXgpLmZvckVhY2goKGF0cmlidXRvKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ1cmwiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG9bMF0gKyBhdHJpYnV0b1sxXSA9PT0gImlkIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhdXgudmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KGVsZW1lbnQzLmlkLCBhdXgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShlbGVtZW50My5jaGlsZHJlbikgJiYKICAgICAgICAgICAgICAgICAgZWxlbWVudDMuY2hpbGRyZW4ubGVuZ3RoCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgZWxlbWVudDMuY2hpbGRyZW4uZm9yRWFjaCgoZWxlbWVudDQpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50NC52aXNpYmxlID09PSB0cnVlICYmCiAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5zZWxlY3Rpb24uZmluZCgKICAgICAgICAgICAgICAgICAgICAgICAgKGZpbmRFbGVtZW50NCkgPT4gZmluZEVsZW1lbnQ0LmlkID09PSBlbGVtZW50NC5pZAogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgQXBpKCkKICAgICAgICAgICAgICAgICAgICAgICAgLnBhdGNoKGVsZW1lbnQ0LmlkKQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbihyZXNwb3N0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wdXQoZWxlbWVudDQuaWQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1eCwKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ0LnZpc2libGUgPT09IGZhbHNlICYmCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5maW5kKAogICAgICAgICAgICAgICAgICAgICAgICAoZmluZEVsZW1lbnQ0KSA9PiBmaW5kRWxlbWVudDQuaWQgPT09IGVsZW1lbnQ0LmlkCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICBBcGkoKQogICAgICAgICAgICAgICAgICAgICAgICAucGF0Y2goZWxlbWVudDQuaWQpCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uKHJlc3Bvc3RhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF1eCA9IHJlc3Bvc3RhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKChhdHJpYnV0bykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG9bMF0gKyBhdHJpYnV0b1sxXSA9PT0gImlkIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXgudmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KGVsZW1lbnQ0LmlkLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGF3YWl0IHNldFRpbWVvdXQoYXN5bmMgZnVuY3Rpb24oKSB7CiAgICAgICAgdm0uJGVtaXQoImNsb3NlX29yX3NhdmUiLCAiY2xvc2UiKTsKICAgICAgfSwgMzAwKTsKICAgIH0sCgogICAgZGVzZWxlY3RBbGwoKSB7CiAgICAgIHRoaXMuc2VsZWN0aW9uID0gW107CiAgICB9LAogICAgc2VsZWN0QWxsKCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB0aGlzLnNlbGVjdGlvbiA9IFtdOwogICAgICB0aGlzLnRyZWVEYXRhLmZvckVhY2goKGVsZW1lbnQpID0+IHsKICAgICAgICB2bS5zZWxlY3Rpb24ucHVzaChlbGVtZW50KTsKICAgICAgICBpZiAoZWxlbWVudC5jaGlsZHJlbikgewogICAgICAgICAgZWxlbWVudC5jaGlsZHJlbi5mb3JFYWNoKChlbGVtZW50MikgPT4gewogICAgICAgICAgICB2bS5zZWxlY3Rpb24ucHVzaChlbGVtZW50Mik7CiAgICAgICAgICAgIGlmIChlbGVtZW50Mi5jaGlsZHJlbikgewogICAgICAgICAgICAgIGVsZW1lbnQyLmNoaWxkcmVuLmZvckVhY2goKGVsZW1lbnQzKSA9PiB7CiAgICAgICAgICAgICAgICB2bS5zZWxlY3Rpb24ucHVzaChlbGVtZW50Myk7CiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudDMuY2hpbGRyZW4pIHsKICAgICAgICAgICAgICAgICAgZWxlbWVudDMuY2hpbGRyZW4uZm9yRWFjaCgoZWxlbWVudDQpID0+IHsKICAgICAgICAgICAgICAgICAgICB2bS5zZWxlY3Rpb24ucHVzaChlbGVtZW50NCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFkZFJhbmdlKGlkQXNzZXNzbWVudCkgewogICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sW2lkQXNzZXNzbWVudF0ucmFuZ2VzLnB1c2goewogICAgICAgIG5hbWVyYW5nZTogIiIsCiAgICAgICAgaW5pdGlhbHZhbHVlOiAiIiwKICAgICAgICBsaW1pdHZhbHVlOiAiIiwKICAgICAgICB1cmw6ICIiLAogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBkZWxldGFSYW5nZShpZEFzc2Vzc21lbnQsIGlkUmFuZ2UpIHsKICAgICAgaWYgKHRoaXMuYXNzZXNzbWVudENvbnRyb2xbaWRBc3Nlc3NtZW50XS5yYW5nZXNbaWRSYW5nZV0udXJsKSB7CiAgICAgICAgQXBpKCkuZGVsZXRlKAogICAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbFtpZEFzc2Vzc21lbnRdLnJhbmdlc1tpZFJhbmdlXS51cmwKICAgICAgICApOwogICAgICB9CiAgICAgIGlmIChpZFJhbmdlID09IDApIHsKICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sW2lkQXNzZXNzbWVudF0ucmFuZ2VzLnNoaWZ0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbFtpZEFzc2Vzc21lbnRdLnJhbmdlcy5zcGxpY2UoaWRSYW5nZSwgMSk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRBc3Nlc3NtZW50KCkgewogICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnB1c2goewogICAgICAgIHR5cGVUaHJlc2hvbGQ6ICIiLAogICAgICAgIHNjb3BvOiAiIiwKICAgICAgICBma19lbGVtZW50OiAiIiwKICAgICAgICB2YWx1ZVR5cGU6ICIiLAogICAgICAgIHNpbmdsZTogewogICAgICAgICAgdGhyZXNob2xkOiAiIiwKICAgICAgICAgIHVybDogIiIsCiAgICAgICAgfSwKICAgICAgICByYW5nZXM6IFtdLAogICAgICAgIHVybDogIiIsCiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGRlbGV0YUFzc2Vzc21lbnQoaWRBc3Nlc3NtZW50KSB7CiAgICAgIGlmICh0aGlzLmFzc2Vzc21lbnRDb250cm9sW2lkQXNzZXNzbWVudF0udXJsICE9PSBudWxsKSB7CiAgICAgICAgYXdhaXQgQXBpKCkuZGVsZXRlKHRoaXMuYXNzZXNzbWVudENvbnRyb2xbaWRBc3Nlc3NtZW50XS51cmwpOwogICAgICB9CiAgICAgIGlmIChpZEFzc2Vzc21lbnQgPT0gMCkgewogICAgICAgIHRoaXMuYXNzZXNzbWVudENvbnRyb2wuc2hpZnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sLnNwbGljZShpZEFzc2Vzc21lbnQsIDEpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZGVsZXRhU2luZ2xlKHVybFNpbmdsZSkgewogICAgICBhd2FpdCBBcGkoKS5kZWxldGUodXJsU2luZ2xlKTsKICAgIH0sCiAgICBhZGRQcmlvcktub3dsZWRnZSgpIHsKICAgICAgdGhpcy5wcmlvckNvbnRyb2wucHVzaCh7CiAgICAgICAgbmFtZXByaW9ya25vd2xlZGdlOiAiIiwKICAgICAgICBwcmlvcmxldmVsOiAiIiwKICAgICAgICBma19pZGNvbmNlcHQ6ICIiLAogICAgICAgIHVybDogIiIsCiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGRlbGV0YVByaW9yS25vd2xlZGdlKGlkUHJpb3IpIHsKICAgICAgaWYgKHRoaXMucHJpb3JDb250cm9sW2lkUHJpb3JdLnVybCkgewogICAgICAgIGF3YWl0IEFwaSgpLmRlbGV0ZSh0aGlzLnByaW9yQ29udHJvbFtpZFByaW9yXS51cmwpOwogICAgICB9CiAgICAgIGlmIChpZFByaW9yID09IDApIHsKICAgICAgICB0aGlzLnByaW9yQ29udHJvbC5zaGlmdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucHJpb3JDb250cm9sLnNwbGljZShpZFByaW9yLCAxKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHZhbGlkYXRlKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICB2YXIgYXV4TG9vcFZhbGlkYXRpb24gPSAxOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hc3Nlc3NtZW50Q29udHJvbC5sZW5ndGg7IGkrKykgewogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLmFzc2Vzc21lbnRDb250cm9sLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sW2ldLmZrX2VsZW1lbnQgPT09CiAgICAgICAgICAgICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sW2pdLmZrX2VsZW1lbnQgJiYKICAgICAgICAgICAgICBpICE9PSBqCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGF1eExvb3BWYWxpZGF0aW9uID0gMDsKICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VFcnJvciA9CiAgICAgICAgICAgICAgICAiTsOjbyBwb2RlIGV4aXN0aXIgbWFpcyBkZSB1bSBwYXLDom1ldHJvIGRlIGF2YWxpYcOnw6NvIHBhcmEgbyBtZXNtbyBlbGVtZW50by4gVmVyaWZpcXVlIG9zIHBhcsOibWV0cm9zIGRlIGF2YWxpYcOnw6NvICIgKwogICAgICAgICAgICAgICAgKGogKyAxKSArCiAgICAgICAgICAgICAgICAiIGUgIiArCiAgICAgICAgICAgICAgICAoaSArIDEpICsKICAgICAgICAgICAgICAgICIuIjsKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Vycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoYXV4TG9vcFZhbGlkYXRpb24gPT09IDEpIHsKICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgdGhpcy5wcmlvckNvbnRyb2wubGVuZ3RoOyBtKyspIHsKICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCB0aGlzLnByaW9yQ29udHJvbC5sZW5ndGg7IG4rKykgewogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIHRoaXMucHJpb3JDb250cm9sW21dLmZrX2lkY29uY2VwdCA9PT0KICAgICAgICAgICAgICAgICAgdGhpcy5wcmlvckNvbnRyb2xbbl0uZmtfaWRjb25jZXB0ICYmCiAgICAgICAgICAgICAgICBtICE9PSBuCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBhdXhMb29wVmFsaWRhdGlvbiA9IDA7CiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VFcnJvciA9CiAgICAgICAgICAgICAgICAgICJOw6NvIMOpIHBvc3PDrXZlbCBkZWZpbmlyIHVtIGNvbmhlY2ltZW50byBwcmlvcml0w6FyaW8gbWFpcyBkZSB1bWEgdmV6LiBWZXJpZmlxdWUgb3MgY29uaGVjaW1lbnRvcyBwcmlvcml0w6FyaW9zICIgKwogICAgICAgICAgICAgICAgICAobiArIDEpICsKICAgICAgICAgICAgICAgICAgIiBlICIgKwogICAgICAgICAgICAgICAgICAobSArIDEpICsKICAgICAgICAgICAgICAgICAgIi4iOwogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dFcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGF1eExvb3BWYWxpZGF0aW9uID09PSAxKSB7CiAgICAgICAgICBhd2FpdCB0aGlzLnBvc3RBc3Nlc3NtZW50KCk7CiAgICAgICAgICBhd2FpdCB0aGlzLnBvc3RQcmlvcktub3dsZWRnZXMoKTsKICAgICAgICAgIGF3YWl0IHRoaXMucHV0VmlzaWJsZSgpOwogICAgICAgICAgYXdhaXQgdGhpcy5yZXNldFZhcmlhYmxlcygpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG9wZW5EaWRhdGljRGlhbG9nKGRpYWxvZykgewogICAgICB0aGlzLiRlbWl0KCJvcGVuRGlkYXRpY0RpYWxvZyIsIGRpYWxvZyk7CiAgICB9LAogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNsb3NlX29yX3NhdmUiLCAiY2xvc2UiKTsKICAgICAgdGhpcy5hc3Nlc3NtZW50Q29udHJvbCA9IFtdOwogICAgICB0aGlzLnByaW9yQ29udHJvbCA9IFtdOwogICAgfSwKICAgIHJlc2V0VmFyaWFibGVzKCkgewogICAgICB0aGlzLmFzc2Vzc21lbnRDb250cm9sID0gW107CiAgICAgIHRoaXMucHJpb3JDb250cm9sID0gW107CiAgICB9LAogICAgcmVzZXRWYWxpZGF0aW9uKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRWYWxpZGF0aW9uKCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["VisibleDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VisibleDialog.vue","sourceRoot":"src/components/didatic_model","sourcesContent":["<template>\r\n  <v-card>\r\n    <v-card-title style=\"background-color:purple; color:white;\">\r\n      <span class=\"headline\">\r\n        <p>Defina as informações equivalentes ao modelo didático.</p>\r\n      </span>\r\n    </v-card-title>\r\n    <v-row style=\"width : 100%\">\r\n      <v-col cols=\"12\">\r\n        <v-card-text>\r\n          <v-row class=\"ml-2\">\r\n            <v-btn\r\n              color=\"warning\"\r\n              height=\"40px\"\r\n              dark\r\n              x-small\r\n              small\r\n              @click=\"deselectAll()\"\r\n              >Deselecionar tudo</v-btn\r\n            >\r\n            <v-btn\r\n              class=\"ml-1\"\r\n              color=\"primary\"\r\n              height=\"40\"\r\n              dark\r\n              small\r\n              @click=\"selectAll()\"\r\n              >Selecionar tudo</v-btn\r\n            >\r\n            <v-btn\r\n              class=\"ml-1\"\r\n              color=\"#A5A5A5\"\r\n              height=\"40px\"\r\n              dark\r\n              small\r\n              @click=\"openDidaticDialog('assessment')\"\r\n              >Parâmetros de avaliação</v-btn\r\n            >\r\n            <v-btn\r\n              class=\"ml-1\"\r\n              color=\"green\"\r\n              height=\"40\"\r\n              dark\r\n              small\r\n              @click=\"openDidaticDialog('prior')\"\r\n              >Conhecimentos Prévios</v-btn\r\n            >\r\n          </v-row>\r\n\r\n          <v-treeview\r\n            @update:active=\"test\"\r\n            v-model=\"selection\"\r\n            :selection-type=\"'independent'\"\r\n            :items=\"treeData\"\r\n            return-object\r\n            selectable\r\n            selected-color=\"success\"\r\n            open-all\r\n          ></v-treeview>\r\n        </v-card-text>\r\n      </v-col>\r\n    </v-row>\r\n    <v-card-actions>\r\n      <v-spacer></v-spacer>\r\n      <v-btn color=\"red\" height=\"49\" dark large @click=\"reset\">\r\n        Cancelar\r\n        <v-icon dark right>mdi-close</v-icon>\r\n      </v-btn>\r\n      <v-btn color=\"success\" height=\"49\" dark large @click=\"validate\">\r\n        Salvar\r\n        <v-icon dark right>mdi-content-save</v-icon>\r\n      </v-btn>\r\n    </v-card-actions>\r\n    <div class=\"text-center\">\r\n      <v-dialog v-model=\"dialogError\" width=\"500\">\r\n        <v-card>\r\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\"\r\n            >ALERTA!</v-card-title\r\n          >\r\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\">{{\r\n            messageError\r\n          }}</v-card-text>\r\n          <v-divider></v-divider>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"primary\" text @click=\"dialogError = false\">Ok</v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n    </div>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\n  import Api from \"@/services/Api\";\r\n\r\n  export default {\r\n    name: \"VisibleDialog\",\r\n    props: [\"domain\", \"dialog\"],\r\n    data: () => ({\r\n      valid: true,\r\n      treeData: [],\r\n      selection: [],\r\n      elementData: [],\r\n      scopoTypes: [\r\n        {\r\n          text: \"Avaliação\",\r\n          value: 1,\r\n        },\r\n        {\r\n          text: \"Domínio\",\r\n          value: 2,\r\n        },\r\n      ],\r\n      typesThreshold: [\r\n        {\r\n          text: \"Porcentagem\",\r\n          value: 1,\r\n        },\r\n        {\r\n          text: \"Literal\",\r\n          value: 2,\r\n        },\r\n      ],\r\n      valueTypes: [\"Single\", \"Range\"],\r\n      assessmentControl: [],\r\n      conceptsPrior: [],\r\n      priorControl: [],\r\n      priorLevels: [\r\n        {\r\n          text: \"Obrigatório\",\r\n          value: 1,\r\n        },\r\n        {\r\n          text: \"Desejável\",\r\n          value: 2,\r\n        },\r\n      ],\r\n      dialogError: false,\r\n      messageError: \"\",\r\n      newItems: [],\r\n      checkbox: true,\r\n    }),\r\n    watch: {\r\n      domain: async function() {\r\n        this.assessmentControl = [];\r\n        this.priorControl = [];\r\n        if (this.domain) {\r\n          this.treeData = [];\r\n          this.selection = [];\r\n          await this.getAssessments();\r\n          await this.setDomainVariables();\r\n        }\r\n      },\r\n      assessmentControl: function() {\r\n        this.assessmentControl.forEach((assess) => {\r\n          if (assess.valueType === \"Single\") {\r\n            assess.ranges.forEach((range) => {\r\n              if (range.url) {\r\n                this.deletaSingle(range.url);\r\n              }\r\n            });\r\n            assess.ranges = [];\r\n          } else if (assess.valueType === \"Range\") {\r\n            if (assess.single.url) {\r\n              this.deletaSingle(assess.single.url);\r\n              assess.single.url = \"\";\r\n            }\r\n            assess.single.threshold = \"\";\r\n          }\r\n        });\r\n      },\r\n    },\r\n    mounted: async function() {\r\n      this.assessmentControl = [];\r\n      this.priorControl = [];\r\n      if (this.domain) {\r\n        this.treeData = [];\r\n        this.selection = [];\r\n        await this.getAssessments();\r\n        await this.setDomainVariables();\r\n      }\r\n    },\r\n    methods: {\r\n      getAssessments() {\r\n        // var vm = this;\r\n        if (this.domain) {\r\n          if (this.domain.assessmentparameter.length > 0) {\r\n            var assess = {\r\n              typeThreshold: parseInt(\r\n                this.domain.assessmentparameter[0].typethreshold.split(\"/\")[4]\r\n              ),\r\n              scopo: parseInt(\r\n                this.domain.assessmentparameter[0].scopo.split(\"/\")[4]\r\n              ),\r\n              fk_element: this.domain.assessmentparameter[0]\r\n                .fk_idknowledgedomain,\r\n              valueType: \"\",\r\n              single: {\r\n                threshold: \"\",\r\n                url: \"\",\r\n              },\r\n              ranges: [],\r\n              url: this.domain.assessmentparameter[0].url,\r\n            };\r\n            if (this.domain.assessmentparameter[0].single.length > 0) {\r\n              assess.valueType = \"Single\";\r\n              assess.single.threshold = this.domain.assessmentparameter[0].single[0].threshold;\r\n              assess.single.url = this.domain.assessmentparameter[0].single[0].url;\r\n            } else if (this.domain.assessmentparameter[0].ranges.length > 0) {\r\n              assess.valueType = \"Range\";\r\n              this.domain.assessmentparameter[0].ranges.forEach((range) => {\r\n                assess.ranges.push({\r\n                  namerange: range.namerange,\r\n                  initialvalue: range.initialvalue,\r\n                  limitvalue: range.limitvalue,\r\n                  url: range.url,\r\n                });\r\n              });\r\n            }\r\n            this.assessmentControl.push(assess);\r\n          }\r\n          if (this.domain.modules) {\r\n            this.domain.modules.forEach((module) => {\r\n              if (module.assessmentparameter.length > 0) {\r\n                var assess = {\r\n                  typeThreshold: parseInt(\r\n                    module.assessmentparameter[0].typethreshold.split(\"/\")[4]\r\n                  ),\r\n                  scopo: parseInt(\r\n                    module.assessmentparameter[0].scopo.split(\"/\")[4]\r\n                  ),\r\n                  fk_element: module.url,\r\n                  valueType: \"\",\r\n                  single: {\r\n                    threshold: \"\",\r\n                    url: \"\",\r\n                  },\r\n                  ranges: [],\r\n                  url: module.assessmentparameter[0].url,\r\n                };\r\n                if (module.assessmentparameter[0].single.length > 0) {\r\n                  assess.valueType = \"Single\";\r\n                  assess.single.threshold =\r\n                    module.assessmentparameter[0].single[0].threshold;\r\n                  assess.single.url =\r\n                    module.assessmentparameter[0].single[0].url;\r\n                } else if (module.assessmentparameter[0].ranges.length > 0) {\r\n                  assess.valueType = \"Range\";\r\n                  module.assessmentparameter[0].ranges.forEach((range) => {\r\n                    assess.ranges.push({\r\n                      namerange: range.namerange,\r\n                      initialvalue: range.initialvalue,\r\n                      limitvalue: range.limitvalue,\r\n                      url: range.url,\r\n                    });\r\n                  });\r\n                }\r\n                this.assessmentControl.push(assess);\r\n              }\r\n              if (module.concepts) {\r\n                module.concepts.forEach((moduleConcept) => {\r\n                  if (moduleConcept.assessmentparameter.length > 0) {\r\n                    var assess = {\r\n                      typeThreshold: parseInt(\r\n                        moduleConcept.assessmentparameter[0].typethreshold.split(\r\n                          \"/\"\r\n                        )[4]\r\n                      ),\r\n                      scopo: parseInt(\r\n                        moduleConcept.assessmentparameter[0].scopo.split(\"/\")[4]\r\n                      ),\r\n                      fk_element: moduleConcept.url,\r\n                      valueType: \"\",\r\n                      single: {\r\n                        threshold: \"\",\r\n                        url: \"\",\r\n                      },\r\n                      ranges: [],\r\n                      url: moduleConcept.assessmentparameter[0].url,\r\n                    };\r\n                    if (\r\n                      moduleConcept.assessmentparameter[0].single.length > 0\r\n                    ) {\r\n                      assess.valueType = \"Single\";\r\n                      assess.single.threshold =\r\n                        moduleConcept.assessmentparameter[0].single[0].threshold;\r\n                      assess.single.url =\r\n                        moduleConcept.assessmentparameter[0].single[0].url;\r\n                    } else if (\r\n                      moduleConcept.assessmentparameter[0].ranges.length > 0\r\n                    ) {\r\n                      assess.valueType = \"Range\";\r\n                      moduleConcept.assessmentparameter[0].ranges.forEach(\r\n                        (range) => {\r\n                          assess.ranges.push({\r\n                            namerange: range.namerange,\r\n                            initialvalue: range.initialvalue,\r\n                            limitvalue: range.limitvalue,\r\n                            url: range.url,\r\n                          });\r\n                        }\r\n                      );\r\n                    }\r\n                    this.assessmentControl.push(assess);\r\n                  }\r\n                  if (moduleConcept.priorknowledge.length > 0) {\r\n                    this.priorControl.push({\r\n                      namepriorknowledge:\r\n                        moduleConcept.priorknowledge[0].namepriorknowledge,\r\n                      priorlevel: parseInt(\r\n                        moduleConcept.priorknowledge[0].priorlevel.split(\"/\")[4]\r\n                      ),\r\n                      fk_idconcept:\r\n                        moduleConcept.priorknowledge[0].fk_idconcept,\r\n                      url: moduleConcept.priorknowledge[0].url,\r\n                    });\r\n                  }\r\n                });\r\n              }\r\n              if (module.submodules) {\r\n                module.submodules.forEach((submodule) => {\r\n                  if (submodule.assessmentparameter.length > 0) {\r\n                    var assess = {\r\n                      typeThreshold: parseInt(\r\n                        submodule.assessmentparameter[0].typethreshold.split(\r\n                          \"/\"\r\n                        )[4]\r\n                      ),\r\n                      scopo: parseInt(\r\n                        submodule.assessmentparameter[0].scopo.split(\"/\")[4]\r\n                      ),\r\n                      fk_element: submodule.url,\r\n                      valueType: \"\",\r\n                      single: {\r\n                        threshold: \"\",\r\n                        url: \"\",\r\n                      },\r\n                      ranges: [],\r\n                      url: submodule.assessmentparameter[0].url,\r\n                    };\r\n                    if (submodule.assessmentparameter[0].single.length > 0) {\r\n                      assess.valueType = \"Single\";\r\n                      assess.single.threshold =\r\n                        submodule.assessmentparameter[0].single[0].threshold;\r\n                      assess.single.url =\r\n                        submodule.assessmentparameter[0].single[0].url;\r\n                    } else if (\r\n                      submodule.assessmentparameter[0].ranges.length > 0\r\n                    ) {\r\n                      assess.valueType = \"Range\";\r\n                      submodule.assessmentparameter[0].ranges.forEach(\r\n                        (range) => {\r\n                          assess.ranges.push({\r\n                            namerange: range.namerange,\r\n                            initialvalue: range.initialvalue,\r\n                            limitvalue: range.limitvalue,\r\n                            url: range.url,\r\n                          });\r\n                        }\r\n                      );\r\n                    }\r\n                    this.assessmentControl.push(assess);\r\n                  }\r\n                  if (submodule.concepts) {\r\n                    submodule.concepts.forEach((submoduleConcept) => {\r\n                      if (submoduleConcept.assessmentparameter.length > 0) {\r\n                        var assess = {\r\n                          typeThreshold: parseInt(\r\n                            submoduleConcept.assessmentparameter[0].typethreshold.split(\r\n                              \"/\"\r\n                            )[4]\r\n                          ),\r\n                          scopo: parseInt(\r\n                            submoduleConcept.assessmentparameter[0].scopo.split(\r\n                              \"/\"\r\n                            )[4]\r\n                          ),\r\n                          fk_element: submoduleConcept.url,\r\n                          valueType: \"\",\r\n                          single: {\r\n                            threshold: \"\",\r\n                            url: \"\",\r\n                          },\r\n                          ranges: [],\r\n                          url: submoduleConcept.assessmentparameter[0].url,\r\n                        };\r\n                        if (\r\n                          submoduleConcept.assessmentparameter[0].single\r\n                            .length > 0\r\n                        ) {\r\n                          assess.valueType = \"Single\";\r\n                          assess.single.threshold =\r\n                            submoduleConcept.assessmentparameter[0].single[0].threshold;\r\n                          assess.single.url =\r\n                            submoduleConcept.assessmentparameter[0].single[0].url;\r\n                        } else if (\r\n                          submoduleConcept.assessmentparameter[0].ranges\r\n                            .length > 0\r\n                        ) {\r\n                          assess.valueType = \"Range\";\r\n                          submoduleConcept.assessmentparameter[0].ranges.forEach(\r\n                            (range) => {\r\n                              assess.ranges.push({\r\n                                namerange: range.namerange,\r\n                                initialvalue: range.initialvalue,\r\n                                limitvalue: range.limitvalue,\r\n                                url: range.url,\r\n                              });\r\n                            }\r\n                          );\r\n                        }\r\n                        this.assessmentControl.push(assess);\r\n                      }\r\n                      if (submoduleConcept.priorknowledge.length > 0) {\r\n                        this.priorControl.push({\r\n                          namepriorknowledge:\r\n                            submoduleConcept.priorknowledge[0]\r\n                              .namepriorknowledge,\r\n                          priorlevel: parseInt(\r\n                            submoduleConcept.priorknowledge[0].priorlevel.split(\r\n                              \"/\"\r\n                            )[4]\r\n                          ),\r\n                          fk_idconcept:\r\n                            submoduleConcept.priorknowledge[0].fk_idconcept,\r\n                          url: submoduleConcept.priorknowledge[0].url,\r\n                        });\r\n                      }\r\n                    });\r\n                  }\r\n                });\r\n              }\r\n            });\r\n          }\r\n        }\r\n      },\r\n      test(value) {\r\n        if (value.length) {\r\n          if (value[0].split(\"/\")[5] === \"sub\") {\r\n            this.$emit(\"type\", { type: \"submodulo\", url: value[0] });\r\n          } else {\r\n            this.$emit(\"type\", { type: value[0].split(\"/\")[3], url: value[0] });\r\n          }\r\n        }\r\n      },\r\n      setDomainVariables() {\r\n        this.treeData = [];\r\n        this.elementData.push({\r\n          text: \"[DOMINIO] \" + this.domain.nameknowledgedomain,\r\n          value: this.domain.url,\r\n        });\r\n        var indexmodulo = 0;\r\n        if (this.domain.mobilemedias.length) {\r\n          this.domain.mobilemedias.forEach((mobilemedia) => {\r\n            var object = {\r\n              id: mobilemedia.url,\r\n              name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n              visible: mobilemedia.visible,\r\n            };\r\n            this.treeData.push(object);\r\n            if (object.visible) {\r\n              this.selection.push(object);\r\n            }\r\n            indexmodulo++;\r\n          });\r\n        }\r\n        if (this.domain.instructionalelements.length) {\r\n          this.domain.instructionalelements.forEach((instructionalelement) => {\r\n            if (\r\n              instructionalelement.fk_instructionalelementtype.split(\"/\")[4] !==\r\n              4\r\n            ) {\r\n              var object = {\r\n                id: instructionalelement.url,\r\n                name: \"[INSTRUCTIONAL ELEMENT] \" + instructionalelement.label,\r\n                visible: instructionalelement.visible,\r\n              };\r\n              this.treeData.push(object);\r\n              if (object.visible) {\r\n                this.selection.push(object);\r\n              }\r\n              indexmodulo++;\r\n            }\r\n          });\r\n        }\r\n        if (Array.isArray(this.domain.modules) && this.domain.modules.length) {\r\n          this.domain.modules.forEach((modulo) => {\r\n            if (modulo.fk_idmodule === null) {\r\n              var indexsubmodulo = 0;\r\n              var object = {\r\n                id: modulo.url,\r\n                name: \"[MODULO] \" + modulo.namemodule,\r\n                visible: modulo.visible,\r\n                children: [],\r\n              };\r\n              this.treeData.push(object);\r\n              this.elementData.push({\r\n                text: object.name,\r\n                value: object.id,\r\n              });\r\n              if (object.visible) {\r\n                this.selection.push(object);\r\n              }\r\n              if (modulo.mobilemedias.length) {\r\n                modulo.mobilemedias.forEach((mobilemedia) => {\r\n                  var object = {\r\n                    id: mobilemedia.url,\r\n                    name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n                    visible: mobilemedia.visible,\r\n                  };\r\n                  this.treeData[indexmodulo].children.push(object);\r\n                  if (object.visible) {\r\n                    this.selection.push(object);\r\n                  }\r\n                  indexsubmodulo++;\r\n                });\r\n              }\r\n\r\n              if (modulo.instructionalelements.length) {\r\n                modulo.instructionalelements.forEach((instructionalelement) => {\r\n                  if (\r\n                    instructionalelement.fk_instructionalelementtype.split(\r\n                      \"/\"\r\n                    )[4] !== 4\r\n                  ) {\r\n                    var object = {\r\n                      id: instructionalelement.url,\r\n                      name:\r\n                        \"[INSTRUCTIONAL ELEMENT] \" + instructionalelement.label,\r\n                      visible: instructionalelement.visible,\r\n                    };\r\n                    this.treeData[indexmodulo].children.push(object);\r\n                    if (object.visible) {\r\n                      this.selection.push(object);\r\n                    }\r\n                    indexsubmodulo++;\r\n                  }\r\n                });\r\n              }\r\n\r\n              if (modulo.submodules.length) {\r\n                var indexconceito = 0;\r\n                modulo.submodules.forEach((submodulo) => {\r\n                  var object = {\r\n                    id: submodulo.url,\r\n                    name: \"[SUBMODULO] \" + submodulo.namemodule,\r\n                    visible: submodulo.visible,\r\n                    children: [],\r\n                  };\r\n                  this.treeData[indexmodulo].children.push(object);\r\n                  this.elementData.push({\r\n                    text: object.name,\r\n                    value: object.id,\r\n                  });\r\n                  if (object.visible) {\r\n                    this.selection.push(object);\r\n                  }\r\n\r\n                  if (submodulo.mobilemedias.length) {\r\n                    submodulo.mobilemedias.forEach((mobilemedia) => {\r\n                      var object = {\r\n                        id: mobilemedia.url,\r\n                        name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n                        visible: mobilemedia.visible,\r\n                      };\r\n                      this.treeData[indexmodulo].children[\r\n                        indexsubmodulo\r\n                      ].children.push(object);\r\n                      if (object.visible) {\r\n                        this.selection.push(object);\r\n                      }\r\n                      indexconceito++;\r\n                    });\r\n                  }\r\n\r\n                  if (submodulo.instructionalelements.length) {\r\n                    submodulo.instructionalelements.forEach(\r\n                      (instructionalelement) => {\r\n                        var object = {\r\n                          id: instructionalelement.url,\r\n                          name:\r\n                            \"[INSTRUCTIONAL ELEMENT] \" +\r\n                            instructionalelement.label,\r\n                          visible: instructionalelement.visible,\r\n                        };\r\n                        this.treeData[indexmodulo].children[\r\n                          indexsubmodulo\r\n                        ].children.push(object);\r\n                        if (object.visible) {\r\n                          this.selection.push(object);\r\n                        }\r\n                        indexconceito++;\r\n                      }\r\n                    );\r\n                  }\r\n\r\n                  if (submodulo.concepts.length) {\r\n                    submodulo.concepts.forEach((conceito) => {\r\n                      var object = {\r\n                        id: conceito.url,\r\n                        name: \"[CONCEITO] \" + conceito.nameconcept,\r\n                        visible: conceito.visible,\r\n                        children: [],\r\n                      };\r\n                      this.treeData[indexmodulo].children[\r\n                        indexsubmodulo\r\n                      ].children.push(object);\r\n\r\n                      this.elementData.push({\r\n                        text: object.name,\r\n                        value: object.id,\r\n                      });\r\n                      if (object.visible) {\r\n                        this.selection.push(object);\r\n                      }\r\n                      this.conceptsPrior.push({\r\n                        text: object.name,\r\n                        value: object.id,\r\n                      });\r\n\r\n                      if (conceito.mobilemedias.length) {\r\n                        conceito.mobilemedias.forEach((mobilemedia) => {\r\n                          var object = {\r\n                            id: mobilemedia.url,\r\n                            name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n                            visible: mobilemedia.visible,\r\n                          };\r\n                          this.treeData[indexmodulo].children[\r\n                            indexsubmodulo\r\n                          ].children[indexconceito].children.push(object);\r\n                          if (object.visible) {\r\n                            this.selection.push(object);\r\n                          }\r\n                        });\r\n                      }\r\n\r\n                      if (conceito.instructionalelements.length) {\r\n                        conceito.instructionalelements.forEach(\r\n                          (instructionalelement) => {\r\n                            var object = {\r\n                              id: instructionalelement.url,\r\n                              name:\r\n                                \"[INSTRUCTIONAL ELEMENT] \" +\r\n                                instructionalelement.label,\r\n                              visible: instructionalelement.visible,\r\n                            };\r\n                            this.treeData[indexmodulo].children[\r\n                              indexsubmodulo\r\n                            ].children[indexconceito].children.push(object);\r\n                            if (object.visible) {\r\n                              this.selection.push(object);\r\n                            }\r\n                          }\r\n                        );\r\n                      }\r\n\r\n                      if (conceito.informationitems.length) {\r\n                        conceito.informationitems.forEach((procedure) => {\r\n                          if (\r\n                            procedure.fk_informationitemtype ===\r\n                            \"/informationitemtype/4/\"\r\n                          ) {\r\n                            var object = {\r\n                              id: procedure.url,\r\n                              name:\r\n                                \"[PROCEDIMENTO] \" +\r\n                                procedure.nameinformationitem,\r\n                              visible: procedure.visible,\r\n                            };\r\n                            this.treeData[indexmodulo].children[\r\n                              indexsubmodulo\r\n                            ].children[indexconceito].children.push(object);\r\n                            if (object.visible) {\r\n                              this.selection.push(object);\r\n                            }\r\n                          }\r\n                        });\r\n                      }\r\n\r\n                      indexconceito++;\r\n                    });\r\n                  }\r\n                  indexsubmodulo++;\r\n                });\r\n              }\r\n              if (modulo.concepts.length) {\r\n                if (indexsubmodulo > 0) {\r\n                  indexconceito = indexsubmodulo;\r\n                } else {\r\n                  indexconceito = 0;\r\n                }\r\n                modulo.concepts.forEach((conceito) => {\r\n                  var object = {\r\n                    id: conceito.url,\r\n                    name: \"[CONCEITO] \" + conceito.nameconcept,\r\n                    visible: conceito.visible,\r\n                    children: [],\r\n                  };\r\n                  this.treeData[indexmodulo].children.push(object);\r\n\r\n                  this.elementData.push({\r\n                    text: object.name,\r\n                    value: object.id,\r\n                  });\r\n                  if (object.visible) {\r\n                    this.selection.push(object);\r\n                  }\r\n                  this.conceptsPrior.push({\r\n                    text: object.name,\r\n                    value: object.id,\r\n                  });\r\n                  if (conceito.mobilemedias.length) {\r\n                    conceito.mobilemedias.forEach((mobilemedia) => {\r\n                      var object = {\r\n                        id: mobilemedia.url,\r\n                        name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n                        visible: mobilemedia.visible,\r\n                      };\r\n                      this.treeData[indexmodulo].children[\r\n                        indexconceito\r\n                      ].children.push(object);\r\n                      if (object.visible) {\r\n                        this.selection.push(object);\r\n                      }\r\n                    });\r\n                  }\r\n\r\n                  if (conceito.instructionalelements.length) {\r\n                    conceito.instructionalelements.forEach(\r\n                      (instructionalelement) => {\r\n                        var object = {\r\n                          id: instructionalelement.url,\r\n                          name:\r\n                            \"[INSTRUCTIONAL ELEMENT] \" +\r\n                            instructionalelement.label,\r\n                          visible: instructionalelement.visible,\r\n                        };\r\n                        this.treeData[indexmodulo].children[\r\n                          indexconceito\r\n                        ].children.push(object);\r\n                        if (object.visible) {\r\n                          this.selection.push(object);\r\n                        }\r\n                      }\r\n                    );\r\n                  }\r\n\r\n                  if (conceito.informationitems.length) {\r\n                    conceito.informationitems.forEach((procedure) => {\r\n                      if (\r\n                        procedure.fk_informationitemtype ===\r\n                        \"/informationitemtype/4/\"\r\n                      ) {\r\n                        var object = {\r\n                          id: procedure.url,\r\n                          name:\r\n                            \"[PROCEDIMENTO] \" + procedure.nameinformationitem,\r\n                          visible: procedure.visible,\r\n                        };\r\n                        this.treeData[indexmodulo].children[\r\n                          indexconceito\r\n                        ].children.push(object);\r\n                        if (object.visible) {\r\n                          this.selection.push(object);\r\n                        }\r\n                      }\r\n                    });\r\n                  }\r\n                  indexconceito++;\r\n                });\r\n              }\r\n              indexmodulo++;\r\n            }\r\n          });\r\n        }\r\n      },\r\n      async postAssessment() {\r\n        await this.assessmentControl.forEach(async (assessment) => {\r\n          var auxAssessment = {\r\n            typethreshold: `/typethreshold/` + assessment.typeThreshold + `/`,\r\n            scopo: `/scopo/` + assessment.scopo + `/`,\r\n            fk_idknowledgedomain: null,\r\n            fk_idmodule: null,\r\n            fk_idconcept: null,\r\n          };\r\n          if (assessment.fk_element.split(\"/\")[3] === \"knowledgedomain\") {\r\n            auxAssessment.fk_idknowledgedomain = assessment.fk_element;\r\n          } else if (assessment.fk_element.split(\"/\")[3] === \"module\") {\r\n            auxAssessment.fk_idmodule = assessment.fk_element;\r\n          } else if (assessment.fk_element.split(\"/\")[3] === \"concept\") {\r\n            auxAssessment.fk_idconcept = assessment.fk_element;\r\n          }\r\n\r\n          if (assessment.url) {\r\n            await Api()\r\n              .put(assessment.url, auxAssessment)\r\n              .then(async function(resposta) {\r\n                if (assessment.valueType === \"Single\") {\r\n                  if (assessment.ranges) {\r\n                    assessment.ranges.forEach((range) => {\r\n                      if (range.url) {\r\n                        Api().delete(range.url);\r\n                      }\r\n                    });\r\n                  }\r\n                  await Api().put(assessment.single.url, {\r\n                    fk_idassessmentparameter: resposta.data.url,\r\n                    threshold: assessment.single.threshold,\r\n                  });\r\n                } else if (assessment.valueType === \"Range\") {\r\n                  if (assessment.single.url) {\r\n                    Api().delete(assessment.single.url);\r\n                  }\r\n                  assessment.ranges.forEach(async (range) => {\r\n                    if (range.url) {\r\n                      await Api().put(range.url, {\r\n                        namerange: range.namerange,\r\n                        fk_idassessmentparameter: resposta.data.url,\r\n                        initialvalue: range.initialvalue,\r\n                        limitvalue: range.limitvalue,\r\n                      });\r\n                    } else {\r\n                      await Api().post(\"/range/\", {\r\n                        namerange: range.namerange,\r\n                        fk_idassessmentparameter: resposta.data.url,\r\n                        initialvalue: range.initialvalue,\r\n                        limitvalue: range.limitvalue,\r\n                      });\r\n                    }\r\n                  });\r\n                }\r\n              });\r\n          } else {\r\n            await Api()\r\n              .post(\"/assessmentparameter/\", auxAssessment)\r\n              .then(async function(resposta) {\r\n                if (assessment.valueType === \"Single\") {\r\n                  await Api().post(\"/single/\", {\r\n                    fk_idassessmentparameter: resposta.data.url,\r\n                    threshold: assessment.single.threshold,\r\n                  });\r\n                } else if (assessment.valueType === \"Range\") {\r\n                  assessment.ranges.forEach(async (range) => {\r\n                    await Api().post(\"/range/\", {\r\n                      namerange: range.namerange,\r\n                      fk_idassessmentparameter: resposta.data.url,\r\n                      initialvalue: range.initialvalue,\r\n                      limitvalue: range.limitvalue,\r\n                    });\r\n                  });\r\n                }\r\n              });\r\n          }\r\n        });\r\n      },\r\n      async postPriorKnowledges() {\r\n        await this.priorControl.forEach(async (prior) => {\r\n          if (prior.url) {\r\n            await Api().put(prior.url, {\r\n              namepriorknowledge: prior.namepriorknowledge,\r\n              priorlevel: `/priorlevel/` + prior.priorlevel + `/`,\r\n              fk_idconcept: prior.fk_idconcept,\r\n            });\r\n          } else {\r\n            await Api().post(`/priorknowledge/`, {\r\n              namepriorknowledge: prior.namepriorknowledge,\r\n              priorlevel: `/priorlevel/` + prior.priorlevel + `/`,\r\n              fk_idconcept: prior.fk_idconcept,\r\n            });\r\n          }\r\n        });\r\n      },\r\n      async putVisible() {\r\n        var vm = this;\r\n\r\n        this.treeData.forEach((element) => {\r\n          if (\r\n            element.visible === true &&\r\n            !this.selection.find((findElement) => findElement.id === element.id)\r\n          ) {\r\n            Api()\r\n              .patch(element.id)\r\n              .then(async function(resposta) {\r\n                var aux = resposta.data;\r\n                await Object.keys(aux).forEach((atributo) => {\r\n                  if (Array.isArray(aux[atributo])) {\r\n                    delete aux[atributo];\r\n                  } else if (atributo === \"url\") {\r\n                    delete aux[atributo];\r\n                  } else if (atributo[0] + atributo[1] === \"id\") {\r\n                    delete aux[atributo];\r\n                  } else if (atributo === \"visible\") {\r\n                    aux.visible = false;\r\n                  }\r\n                });\r\n                await Api().put(element.id, aux);\r\n              });\r\n          } else if (\r\n            element.visible === false &&\r\n            this.selection.find((findElement) => findElement.id === element.id)\r\n          ) {\r\n            Api()\r\n              .patch(element.id)\r\n              .then(async function(resposta) {\r\n                var aux = resposta.data;\r\n                await Object.keys(aux).forEach((atributo) => {\r\n                  if (Array.isArray(aux[atributo])) {\r\n                    delete aux[atributo];\r\n                  } else if (atributo === \"url\") {\r\n                    delete aux[atributo];\r\n                  } else if (atributo[0] + atributo[1] === \"id\") {\r\n                    delete aux[atributo];\r\n                  } else if (atributo === \"visible\") {\r\n                    aux.visible = true;\r\n                  }\r\n                });\r\n                await Api().put(element.id, aux);\r\n              });\r\n          }\r\n          if (Array.isArray(element.children) && element.children.length) {\r\n            element.children.forEach((element2) => {\r\n              if (\r\n                element2.visible === true &&\r\n                !this.selection.find(\r\n                  (findElement2) => findElement2.id === element2.id\r\n                )\r\n              ) {\r\n                Api()\r\n                  .patch(element2.id)\r\n                  .then(async function(resposta) {\r\n                    var aux = resposta.data;\r\n                    await Object.keys(aux).forEach((atributo) => {\r\n                      if (Array.isArray(aux[atributo])) {\r\n                        delete aux[atributo];\r\n                      } else if (atributo === \"url\") {\r\n                        delete aux[atributo];\r\n                      } else if (atributo[0] + atributo[1] === \"id\") {\r\n                        delete aux[atributo];\r\n                      } else if (atributo === \"visible\") {\r\n                        aux.visible = false;\r\n                      }\r\n                    });\r\n\r\n                    await Api().put(element2.id, aux);\r\n                  });\r\n              } else if (\r\n                element2.visible === false &&\r\n                this.selection.find(\r\n                  (findElement2) => findElement2.id === element2.id\r\n                )\r\n              ) {\r\n                Api()\r\n                  .patch(element2.id)\r\n                  .then(async function(resposta) {\r\n                    var aux = resposta.data;\r\n                    await Object.keys(aux).forEach((atributo) => {\r\n                      if (Array.isArray(aux[atributo])) {\r\n                        delete aux[atributo];\r\n                      } else if (atributo === \"url\") {\r\n                        delete aux[atributo];\r\n                      } else if (atributo[0] + atributo[1] === \"id\") {\r\n                        delete aux[atributo];\r\n                      } else if (atributo === \"visible\") {\r\n                        aux.visible = true;\r\n                      }\r\n                    });\r\n\r\n                    await Api().put(element2.id, aux);\r\n                  });\r\n              }\r\n\r\n              if (\r\n                Array.isArray(element2.children) &&\r\n                element2.children.length\r\n              ) {\r\n                element2.children.forEach((element3) => {\r\n                  if (\r\n                    element3.visible === true &&\r\n                    !this.selection.find(\r\n                      (findElement3) => findElement3.id === element3.id\r\n                    )\r\n                  ) {\r\n                    Api()\r\n                      .patch(element3.id)\r\n                      .then(async function(resposta) {\r\n                        var aux = resposta.data;\r\n                        await Object.keys(aux).forEach((atributo) => {\r\n                          if (Array.isArray(aux[atributo])) {\r\n                            delete aux[atributo];\r\n                          } else if (atributo === \"url\") {\r\n                            delete aux[atributo];\r\n                          } else if (atributo[0] + atributo[1] === \"id\") {\r\n                            delete aux[atributo];\r\n                          } else if (atributo === \"visible\") {\r\n                            aux.visible = false;\r\n                          }\r\n                        });\r\n                        await Api().put(element3.id, aux);\r\n                      });\r\n                  } else if (\r\n                    element3.visible === false &&\r\n                    this.selection.find(\r\n                      (findElement3) => findElement3.id === element3.id\r\n                    )\r\n                  ) {\r\n                    Api()\r\n                      .patch(element3.id)\r\n                      .then(async function(resposta) {\r\n                        var aux = resposta.data;\r\n                        await Object.keys(aux).forEach((atributo) => {\r\n                          if (Array.isArray(aux[atributo])) {\r\n                            delete aux[atributo];\r\n                          } else if (atributo === \"url\") {\r\n                            delete aux[atributo];\r\n                          } else if (atributo[0] + atributo[1] === \"id\") {\r\n                            delete aux[atributo];\r\n                          } else if (atributo === \"visible\") {\r\n                            aux.visible = true;\r\n                          }\r\n                        });\r\n                        await Api().put(element3.id, aux);\r\n                      });\r\n                  }\r\n\r\n                  if (\r\n                    Array.isArray(element3.children) &&\r\n                    element3.children.length\r\n                  ) {\r\n                    element3.children.forEach((element4) => {\r\n                      if (\r\n                        element4.visible === true &&\r\n                        !this.selection.find(\r\n                          (findElement4) => findElement4.id === element4.id\r\n                        )\r\n                      ) {\r\n                        Api()\r\n                          .patch(element4.id)\r\n                          .then(async function(resposta) {\r\n                            var aux = resposta.data;\r\n                            await Object.keys(aux).forEach((atributo) => {\r\n                              if (Array.isArray(aux[atributo])) {\r\n                                delete aux[atributo];\r\n                              } else if (atributo === \"url\") {\r\n                                delete aux[atributo];\r\n                              } else if (atributo[0] + atributo[1] === \"id\") {\r\n                                delete aux[atributo];\r\n                              } else if (atributo === \"visible\") {\r\n                                aux.visible = false;\r\n                              }\r\n                            });\r\n                            await Api().put(element4.id, {\r\n                              aux,\r\n                            });\r\n                          });\r\n                      } else if (\r\n                        element4.visible === false &&\r\n                        this.selection.find(\r\n                          (findElement4) => findElement4.id === element4.id\r\n                        )\r\n                      ) {\r\n                        Api()\r\n                          .patch(element4.id)\r\n                          .then(async function(resposta) {\r\n                            var aux = resposta.data;\r\n                            await Object.keys(aux).forEach((atributo) => {\r\n                              if (Array.isArray(aux[atributo])) {\r\n                                delete aux[atributo];\r\n                              } else if (atributo === \"url\") {\r\n                                delete aux[atributo];\r\n                              } else if (atributo[0] + atributo[1] === \"id\") {\r\n                                delete aux[atributo];\r\n                              } else if (atributo === \"visible\") {\r\n                                aux.visible = true;\r\n                              }\r\n                            });\r\n                            await Api().put(element4.id, {\r\n                              aux,\r\n                            });\r\n                          });\r\n                      }\r\n                    });\r\n                  }\r\n                });\r\n              }\r\n            });\r\n          }\r\n        });\r\n        await setTimeout(async function() {\r\n          vm.$emit(\"close_or_save\", \"close\");\r\n        }, 300);\r\n      },\r\n\r\n      deselectAll() {\r\n        this.selection = [];\r\n      },\r\n      selectAll() {\r\n        var vm = this;\r\n        this.selection = [];\r\n        this.treeData.forEach((element) => {\r\n          vm.selection.push(element);\r\n          if (element.children) {\r\n            element.children.forEach((element2) => {\r\n              vm.selection.push(element2);\r\n              if (element2.children) {\r\n                element2.children.forEach((element3) => {\r\n                  vm.selection.push(element3);\r\n                  if (element3.children) {\r\n                    element3.children.forEach((element4) => {\r\n                      vm.selection.push(element4);\r\n                    });\r\n                  }\r\n                });\r\n              }\r\n            });\r\n          }\r\n        });\r\n      },\r\n      addRange(idAssessment) {\r\n        this.assessmentControl[idAssessment].ranges.push({\r\n          namerange: \"\",\r\n          initialvalue: \"\",\r\n          limitvalue: \"\",\r\n          url: \"\",\r\n        });\r\n      },\r\n      async deletaRange(idAssessment, idRange) {\r\n        if (this.assessmentControl[idAssessment].ranges[idRange].url) {\r\n          Api().delete(\r\n            this.assessmentControl[idAssessment].ranges[idRange].url\r\n          );\r\n        }\r\n        if (idRange == 0) {\r\n          this.assessmentControl[idAssessment].ranges.shift();\r\n        } else {\r\n          this.assessmentControl[idAssessment].ranges.splice(idRange, 1);\r\n        }\r\n      },\r\n      addAssessment() {\r\n        this.assessmentControl.push({\r\n          typeThreshold: \"\",\r\n          scopo: \"\",\r\n          fk_element: \"\",\r\n          valueType: \"\",\r\n          single: {\r\n            threshold: \"\",\r\n            url: \"\",\r\n          },\r\n          ranges: [],\r\n          url: \"\",\r\n        });\r\n      },\r\n      async deletaAssessment(idAssessment) {\r\n        if (this.assessmentControl[idAssessment].url !== null) {\r\n          await Api().delete(this.assessmentControl[idAssessment].url);\r\n        }\r\n        if (idAssessment == 0) {\r\n          this.assessmentControl.shift();\r\n        } else {\r\n          this.assessmentControl.splice(idAssessment, 1);\r\n        }\r\n      },\r\n      async deletaSingle(urlSingle) {\r\n        await Api().delete(urlSingle);\r\n      },\r\n      addPriorKnowledge() {\r\n        this.priorControl.push({\r\n          namepriorknowledge: \"\",\r\n          priorlevel: \"\",\r\n          fk_idconcept: \"\",\r\n          url: \"\",\r\n        });\r\n      },\r\n      async deletaPriorKnowledge(idPrior) {\r\n        if (this.priorControl[idPrior].url) {\r\n          await Api().delete(this.priorControl[idPrior].url);\r\n        }\r\n        if (idPrior == 0) {\r\n          this.priorControl.shift();\r\n        } else {\r\n          this.priorControl.splice(idPrior, 1);\r\n        }\r\n      },\r\n      async validate() {\r\n        if (this.$refs.form.validate()) {\r\n          var auxLoopValidation = 1;\r\n          for (var i = 0; i < this.assessmentControl.length; i++) {\r\n            for (var j = 0; j < this.assessmentControl.length; j++) {\r\n              if (\r\n                this.assessmentControl[i].fk_element ===\r\n                  this.assessmentControl[j].fk_element &&\r\n                i !== j\r\n              ) {\r\n                auxLoopValidation = 0;\r\n                this.messageError =\r\n                  \"Não pode existir mais de um parâmetro de avaliação para o mesmo elemento. Verifique os parâmetros de avaliação \" +\r\n                  (j + 1) +\r\n                  \" e \" +\r\n                  (i + 1) +\r\n                  \".\";\r\n                this.dialogError = true;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n          if (auxLoopValidation === 1) {\r\n            for (var m = 0; m < this.priorControl.length; m++) {\r\n              for (var n = 0; n < this.priorControl.length; n++) {\r\n                if (\r\n                  this.priorControl[m].fk_idconcept ===\r\n                    this.priorControl[n].fk_idconcept &&\r\n                  m !== n\r\n                ) {\r\n                  auxLoopValidation = 0;\r\n                  this.messageError =\r\n                    \"Não é possível definir um conhecimento prioritário mais de uma vez. Verifique os conhecimentos prioritários \" +\r\n                    (n + 1) +\r\n                    \" e \" +\r\n                    (m + 1) +\r\n                    \".\";\r\n                  this.dialogError = true;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (auxLoopValidation === 1) {\r\n            await this.postAssessment();\r\n            await this.postPriorKnowledges();\r\n            await this.putVisible();\r\n            await this.resetVariables();\r\n          }\r\n        }\r\n      },\r\n      openDidaticDialog(dialog) {\r\n        this.$emit(\"openDidaticDialog\", dialog);\r\n      },\r\n      reset() {\r\n        this.$emit(\"close_or_save\", \"close\");\r\n        this.assessmentControl = [];\r\n        this.priorControl = [];\r\n      },\r\n      resetVariables() {\r\n        this.assessmentControl = [];\r\n        this.priorControl = [];\r\n      },\r\n      resetValidation() {\r\n        this.$refs.form.resetValidation();\r\n      },\r\n    },\r\n  };\r\n</script>\r\n"]}]}