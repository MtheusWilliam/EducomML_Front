{"remainingRequest":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\www\\EducomML\\EducomML_Front\\src\\components\\didatic_model\\VisibleDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\www\\EducomML\\EducomML_Front\\src\\components\\didatic_model\\VisibleDialog.vue","mtime":1597215442453},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593634551412},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\babel-loader\\lib\\index.js","mtime":1593634550126},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1593634595918},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1593634551412},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js","mtime":1593634595223}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQXBpIGZyb20gIkAvc2VydmljZXMvQXBpIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiVmlzaWJsZURpYWxvZyIsDQogIHByb3BzOiBbImRvbWFpbiIsICJkaWFsb2ciXSwNCiAgZGF0YTogKCkgPT4gKHsNCiAgICB2YWxpZDogdHJ1ZSwNCiAgICB0cmVlRGF0YTogW10sDQogICAgc2VsZWN0aW9uOiBbXSwNCiAgICBlbGVtZW50RGF0YTogW10sDQogICAgZGlhbG9nRXJyb3I6IGZhbHNlLA0KICAgIG1lc3NhZ2VFcnJvcjogIiIsDQogICAgbmV3SXRlbXM6IFtdLA0KICAgIGNoZWNrYm94OiB0cnVlLA0KICAgIGZpbGVUeXBlc0ljb246IFsNCiAgICAgICJtZGktZmlsZS1pbWFnZSIsDQogICAgICAibWRpLWZpbGUtdmlkZW8iLA0KICAgICAgIm1kaS1maWxlLW11c2ljIiwNCiAgICAgICJtZGktZmlsZS1kb2N1bWVudCIsDQogICAgICAibWRpLWxpbmstdmFyaWFudCIsDQogICAgXSwNCiAgICBpbnN0cnVjVHlwZXNJY29uOiBbDQogICAgICAibWRpLWNsaXBib2FyZC10ZXh0IiwNCiAgICAgICJtZGktY2xpcGJvYXJkLWNoZWNrIiwNCiAgICAgICJtZGktYWNjb3VudC1zd2l0Y2giLA0KICAgICAgIm1kaS1saWdodGJ1bGItb3V0bGluZSIsDQogICAgXSwNCiAgICBtb2JpbGVtZWRpYVR5cGVMYWJlbDogWyJJbWFnZW0iLCAiVsOtZGVvIiwgIsOBdWRpbyIsICJUZXh0byIsICJMaW5rIl0sDQogIH0pLA0KICB3YXRjaDogew0KICAgIGRvbWFpbjogYXN5bmMgZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKHRoaXMuZG9tYWluKSB7DQogICAgICAgIHRoaXMudHJlZURhdGEgPSBbXTsNCiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBbXTsNCiAgICAgICAgYXdhaXQgdGhpcy5zZXREb21haW5WYXJpYWJsZXMoKTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBtb3VudGVkOiBhc3luYyBmdW5jdGlvbiAoKSB7DQogICAgaWYgKHRoaXMuZG9tYWluKSB7DQogICAgICB0aGlzLnRyZWVEYXRhID0gW107DQogICAgICB0aGlzLnNlbGVjdGlvbiA9IFtdOw0KICAgICAgYXdhaXQgdGhpcy5zZXREb21haW5WYXJpYWJsZXMoKTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB0ZXN0KHZhbHVlKSB7DQogICAgICBpZiAodmFsdWUubGVuZ3RoKSB7DQogICAgICAgIGlmICh2YWx1ZVswXS5zcGxpdCgiLyIpWzVdID09PSAic3ViIikgew0KICAgICAgICAgIHRoaXMuJGVtaXQoInR5cGUiLCB7IHR5cGU6ICJzdWJtb2R1bG8iLCB1cmw6IHZhbHVlWzBdIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJGVtaXQoInR5cGUiLCB7IHR5cGU6IHZhbHVlWzBdLnNwbGl0KCIvIilbM10sIHVybDogdmFsdWVbMF0gfSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIHNldERvbWFpblZhcmlhYmxlcygpIHsNCiAgICAgIHRoaXMudHJlZURhdGEgPSBbXTsNCiAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7DQogICAgICAgIHRleHQ6ICJbRE9NSU5JT10gIiArIHRoaXMuZG9tYWluLm5hbWVrbm93bGVkZ2Vkb21haW4sDQogICAgICAgIHZhbHVlOiB0aGlzLmRvbWFpbi51cmwsDQogICAgICB9KTsNCiAgICAgIHZhciBpbmRleG1vZHVsbyA9IDA7DQogICAgICBpZiAodGhpcy5kb21haW4ubW9iaWxlbWVkaWFzLmxlbmd0aCkgew0KICAgICAgICB0aGlzLmRvbWFpbi5tb2JpbGVtZWRpYXMuZm9yRWFjaCgobW9iaWxlbWVkaWEpID0+IHsNCiAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgaWQ6IG1vYmlsZW1lZGlhLnVybCwNCiAgICAgICAgICAgIG5hbWU6ICJbTU9CSUxFTUVESUFdICIgKyBtb2JpbGVtZWRpYS5sYWJlbCwNCiAgICAgICAgICAgIHZpc2libGU6IG1vYmlsZW1lZGlhLnZpc2libGUsDQogICAgICAgICAgICBpY29uOiB0aGlzLmZpbGVUeXBlc0ljb25bDQogICAgICAgICAgICAgIG1vYmlsZW1lZGlhLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0gLSAxDQogICAgICAgICAgICBdLA0KICAgICAgICAgIH07DQogICAgICAgICAgdGhpcy50cmVlRGF0YS5wdXNoKG9iamVjdCk7DQogICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGluZGV4bW9kdWxvKys7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuZG9tYWluLmluc3RydWN0aW9uYWxlbGVtZW50cy5sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5kb21haW4uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmZvckVhY2goKGluc3RydWN0aW9uYWxlbGVtZW50KSA9PiB7DQogICAgICAgICAgaWYgKA0KICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQuZmtfaW5zdHJ1Y3Rpb25hbGVsZW1lbnR0eXBlLnNwbGl0KCIvIilbNF0gIT09IDQNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgIGlkOiBpbnN0cnVjdGlvbmFsZWxlbWVudC51cmwsDQogICAgICAgICAgICAgIG5hbWU6ICJbSU5TVFJVQ1RJT05BTCBFTEVNRU5UXSAiICsgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubGFiZWwsDQogICAgICAgICAgICAgIHZpc2libGU6IGluc3RydWN0aW9uYWxlbGVtZW50LnZpc2libGUsDQogICAgICAgICAgICAgIGljb246IHRoaXMuaW5zdHJ1Y1R5cGVzSWNvblsNCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudC5ma19pbnN0cnVjdGlvbmFsZWxlbWVudHR5cGUuc3BsaXQoIi8iKVs0XSAtDQogICAgICAgICAgICAgICAgICAxDQogICAgICAgICAgICAgIF0sDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdGhpcy50cmVlRGF0YS5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaW5kZXhtb2R1bG8rKzsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5kb21haW4ubW9kdWxlcykgJiYgdGhpcy5kb21haW4ubW9kdWxlcy5sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5kb21haW4ubW9kdWxlcy5mb3JFYWNoKChtb2R1bG8pID0+IHsNCiAgICAgICAgICBpZiAobW9kdWxvLmZrX2lkbW9kdWxlID09PSBudWxsKSB7DQogICAgICAgICAgICB2YXIgaW5kZXhzdWJtb2R1bG8gPSAwOw0KICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgaWQ6IG1vZHVsby51cmwsDQogICAgICAgICAgICAgIG5hbWU6ICJbTU9EVUxPXSAiICsgbW9kdWxvLm5hbWVtb2R1bGUsDQogICAgICAgICAgICAgIHZpc2libGU6IG1vZHVsby52aXNpYmxlLA0KICAgICAgICAgICAgICBhdmF0YXI6ICJNRCIsDQogICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICB0aGlzLnRyZWVEYXRhLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7DQogICAgICAgICAgICAgIHRleHQ6IG9iamVjdC5uYW1lLA0KICAgICAgICAgICAgICB2YWx1ZTogb2JqZWN0LmlkLA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKG1vZHVsby5tb2JpbGVtZWRpYXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgIG1vZHVsby5tb2JpbGVtZWRpYXMuZm9yRWFjaCgobW9iaWxlbWVkaWEpID0+IHsNCiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgICAgICAgaWQ6IG1vYmlsZW1lZGlhLnVybCwNCiAgICAgICAgICAgICAgICAgIG5hbWU6ICJbTU9CSUxFTUVESUFdICIgKyBtb2JpbGVtZWRpYS5sYWJlbCwNCiAgICAgICAgICAgICAgICAgIHZpc2libGU6IG1vYmlsZW1lZGlhLnZpc2libGUsDQogICAgICAgICAgICAgICAgICBpY29uOiB0aGlzLmZpbGVUeXBlc0ljb25bDQogICAgICAgICAgICAgICAgICAgIG1vYmlsZW1lZGlhLmZrX2lkbWVkaWF0eXBlLnNwbGl0KCIvIilbNF0gLSAxDQogICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpbmRleHN1Ym1vZHVsbysrOw0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKG1vZHVsby5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7DQogICAgICAgICAgICAgIG1vZHVsby5pbnN0cnVjdGlvbmFsZWxlbWVudHMuZm9yRWFjaCgoaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudC5ma19pbnN0cnVjdGlvbmFsZWxlbWVudHR5cGUuc3BsaXQoDQogICAgICAgICAgICAgICAgICAgICIvIg0KICAgICAgICAgICAgICAgICAgKVs0XSAhPT0gNA0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgICAgICAgaWQ6IGluc3RydWN0aW9uYWxlbGVtZW50LnVybCwNCiAgICAgICAgICAgICAgICAgICAgbmFtZToNCiAgICAgICAgICAgICAgICAgICAgICAiW0lOU1RSVUNUSU9OQUwgRUxFTUVOVF0gIiArIGluc3RydWN0aW9uYWxlbGVtZW50LmxhYmVsLA0KICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBpbnN0cnVjdGlvbmFsZWxlbWVudC52aXNpYmxlLA0KICAgICAgICAgICAgICAgICAgICBpY29uOiB0aGlzLmluc3RydWNUeXBlc0ljb25bDQogICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQuZmtfaW5zdHJ1Y3Rpb25hbGVsZW1lbnR0eXBlLnNwbGl0KA0KICAgICAgICAgICAgICAgICAgICAgICAgIi8iDQogICAgICAgICAgICAgICAgICAgICAgKVs0XSAtIDENCiAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8rKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAobW9kdWxvLnN1Ym1vZHVsZXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgIHZhciBpbmRleGNvbmNlaXRvID0gMDsNCiAgICAgICAgICAgICAgbW9kdWxvLnN1Ym1vZHVsZXMuZm9yRWFjaCgoc3VibW9kdWxvKSA9PiB7DQogICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgICAgIGlkOiBzdWJtb2R1bG8udXJsLA0KICAgICAgICAgICAgICAgICAgbmFtZTogIltTVUJNT0RVTE9dICIgKyBzdWJtb2R1bG8ubmFtZW1vZHVsZSwNCiAgICAgICAgICAgICAgICAgIHZpc2libGU6IHN1Ym1vZHVsby52aXNpYmxlLA0KICAgICAgICAgICAgICAgICAgYXZhdGFyOiAiU00iLA0KICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLA0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7DQogICAgICAgICAgICAgICAgICB0ZXh0OiBvYmplY3QubmFtZSwNCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBvYmplY3QuaWQsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKHN1Ym1vZHVsby5tb2JpbGVtZWRpYXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICBzdWJtb2R1bG8ubW9iaWxlbWVkaWFzLmZvckVhY2goKG1vYmlsZW1lZGlhKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICAgICAgaWQ6IG1vYmlsZW1lZGlhLnVybCwNCiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiW01PQklMRU1FRElBXSAiICsgbW9iaWxlbWVkaWEubGFiZWwsDQogICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogbW9iaWxlbWVkaWEudmlzaWJsZSwNCiAgICAgICAgICAgICAgICAgICAgICBpY29uOiB0aGlzLmZpbGVUeXBlc0ljb25bDQogICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdIC0gMQ0KICAgICAgICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWw0KICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvDQogICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bysrOw0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKHN1Ym1vZHVsby5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICBzdWJtb2R1bG8uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmZvckVhY2goDQogICAgICAgICAgICAgICAgICAgIChpbnN0cnVjdGlvbmFsZWxlbWVudCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZDogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudXJsLA0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIltJTlNUUlVDVElPTkFMIEVMRU1FTlRdICIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudC5sYWJlbCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGluc3RydWN0aW9uYWxlbGVtZW50LnZpc2libGUsDQogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB0aGlzLmluc3RydWNUeXBlc0ljb25bDQogICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uYWxlbGVtZW50LmZrX2luc3RydWN0aW9uYWxlbGVtZW50dHlwZS5zcGxpdCgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgKVs0XSAtIDENCiAgICAgICAgICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsNCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvDQogICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8rKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoc3VibW9kdWxvLmNvbmNlcHRzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgc3VibW9kdWxvLmNvbmNlcHRzLmZvckVhY2goKGNvbmNlaXRvKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbmNlaXRvLnVybCwNCiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiW0NPTkNFSVRPXSAiICsgY29uY2VpdG8ubmFtZWNvbmNlcHQsDQogICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogY29uY2VpdG8udmlzaWJsZSwNCiAgICAgICAgICAgICAgICAgICAgICBhdmF0YXI6ICJDQyIsDQogICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLA0KICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsNCiAgICAgICAgICAgICAgICAgICAgICBpbmRleHN1Ym1vZHVsbw0KICAgICAgICAgICAgICAgICAgICBdLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsNCg0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnREYXRhLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG9iamVjdC5uYW1lLA0KICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvYmplY3QuaWQsDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAoY29uY2VpdG8uaW5mb3JtYXRpb25pdGVtcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICBjb25jZWl0by5pbmZvcm1hdGlvbml0ZW1zLmZvckVhY2goKGluZm9pdGVtKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9pdGVtLmZrX2luZm9ybWF0aW9uaXRlbXR5cGUgIT09DQogICAgICAgICAgICAgICAgICAgICAgICAgIEFwaSgpLmRlZmF1bHRzLmJhc2VVUkwgKyAiL2luZm9ybWF0aW9uaXRlbXR5cGUvNC8iDQogICAgICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb2l0ZW0ubW9iaWxlbWVkaWFzLmZvckVhY2goKG1vYmlsZW1lZGlhKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtb2JpbGVtZWRpYS51cmwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiW01PQklMRU1FRElBXSAiICsgbW9iaWxlbWVkaWEubGFiZWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBtb2JpbGVtZWRpYS52aXNpYmxlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdGhpcy5maWxlVHlwZXNJY29uWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdIC0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmNoaWxkcmVuW2luZGV4Y29uY2VpdG9dLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmNlaXRvLmluZm9ybWF0aW9uaXRlbXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgY29uY2VpdG8uaW5mb3JtYXRpb25pdGVtcy5mb3JFYWNoKChwcm9jZWR1cmUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlLmZrX2luZm9ybWF0aW9uaXRlbXR5cGUgPT09DQogICAgICAgICAgICAgICAgICAgICAgICAgIEFwaSgpLmRlZmF1bHRzLmJhc2VVUkwgKyAiL2luZm9ybWF0aW9uaXRlbXR5cGUvNC8iDQogICAgICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogcHJvY2VkdXJlLnVybCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIltQUk9DRURJTUVOVE9dICIgKyBwcm9jZWR1cmUubmFtZWluZm9ybWF0aW9uaXRlbSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBwcm9jZWR1cmUudmlzaWJsZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbltpbmRleGNvbmNlaXRvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmNlaXRvLmluc3RydWN0aW9uYWxlbGVtZW50cy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICBjb25jZWl0by5pbnN0cnVjdGlvbmFsZWxlbWVudHMuZm9yRWFjaCgNCiAgICAgICAgICAgICAgICAgICAgICAgIChpbnN0cnVjdGlvbmFsZWxlbWVudCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpbnN0cnVjdGlvbmFsZWxlbWVudC51cmwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJbSU5TVFJVQ1RJT05BTCBFTEVNRU5UXSAiICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uYWxlbGVtZW50LmxhYmVsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGluc3RydWN0aW9uYWxlbGVtZW50LnZpc2libGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdGhpcy5pbnN0cnVjVHlwZXNJY29uWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQuZmtfaW5zdHJ1Y3Rpb25hbGVsZW1lbnR0eXBlLnNwbGl0KA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClbNF0gLSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbltpbmRleGNvbmNlaXRvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvKys7DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8rKzsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAobW9kdWxvLmNvbmNlcHRzLmxlbmd0aCkgew0KICAgICAgICAgICAgICBpZiAoaW5kZXhzdWJtb2R1bG8gPiAwKSB7DQogICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0byA9IGluZGV4c3VibW9kdWxvOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8gPSAwOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIG1vZHVsby5jb25jZXB0cy5mb3JFYWNoKChjb25jZWl0bykgPT4gew0KICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICBpZDogY29uY2VpdG8udXJsLA0KICAgICAgICAgICAgICAgICAgbmFtZTogIltDT05DRUlUT10gIiArIGNvbmNlaXRvLm5hbWVjb25jZXB0LA0KICAgICAgICAgICAgICAgICAgdmlzaWJsZTogY29uY2VpdG8udmlzaWJsZSwNCiAgICAgICAgICAgICAgICAgIGF2YXRhcjogIkNDIiwNCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsNCg0KICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7DQogICAgICAgICAgICAgICAgICB0ZXh0OiBvYmplY3QubmFtZSwNCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBvYmplY3QuaWQsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKGNvbmNlaXRvLmluZm9ybWF0aW9uaXRlbXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICBjb25jZWl0by5pbmZvcm1hdGlvbml0ZW1zLmZvckVhY2goKGluZm9pdGVtKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICBpbmZvaXRlbS5ma19pbmZvcm1hdGlvbml0ZW10eXBlICE9PQ0KICAgICAgICAgICAgICAgICAgICAgIEFwaSgpLmRlZmF1bHRzLmJhc2VVUkwgKyAiL2luZm9ybWF0aW9uaXRlbXR5cGUvNC8iDQogICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJtYiIpOw0KICAgICAgICAgICAgICAgICAgICAgIGluZm9pdGVtLm1vYmlsZW1lZGlhcy5mb3JFYWNoKChtb2JpbGVtZWRpYSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1vYmlsZW1lZGlhLnVybCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogIltNT0JJTEVNRURJQV0gIiArIG1vYmlsZW1lZGlhLmxhYmVsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBtb2JpbGVtZWRpYS52aXNpYmxlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB0aGlzLmZpbGVUeXBlc0ljb25bDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSAtIDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bw0KICAgICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoY29uY2VpdG8uaW5mb3JtYXRpb25pdGVtcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJwcm9jIiwgY29uY2VpdG8pOw0KICAgICAgICAgICAgICAgICAgY29uY2VpdG8uaW5mb3JtYXRpb25pdGVtcy5mb3JFYWNoKChwcm9jZWR1cmUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coDQogICAgICAgICAgICAgICAgICAgICAgIndoeSBubyBpZiIsDQogICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlLmZrX2luZm9ybWF0aW9uaXRlbXR5cGUgPT09DQogICAgICAgICAgICAgICAgICAgICAgICBBcGkoKS5kZWZhdWx0cy5iYXNlVVJMICsgIi9pbmZvcm1hdGlvbml0ZW10eXBlLzQvIg0KICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygNCiAgICAgICAgICAgICAgICAgICAgICAid2h5IG5vIGlmMiIsDQogICAgICAgICAgICAgICAgICAgICAgQXBpKCkuZGVmYXVsdHMuYmFzZVVSTCArICIvaW5mb3JtYXRpb25pdGVtdHlwZS80LyINCiAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIndoeSBubyBpZjMiLCBwcm9jZWR1cmUuZmtfaW5mb3JtYXRpb25pdGVtdHlwZSk7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICBwcm9jZWR1cmUuZmtfaW5mb3JtYXRpb25pdGVtdHlwZSA9PT0NCiAgICAgICAgICAgICAgICAgICAgICBBcGkoKS5kZWZhdWx0cy5iYXNlVVJMICsgIi9pbmZvcm1hdGlvbml0ZW10eXBlLzQvIg0KICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHByb2NlZHVyZS51cmwsDQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiW1BST0NFRElNRU5UT10gIiArIHByb2NlZHVyZS5uYW1laW5mb3JtYXRpb25pdGVtLA0KICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogcHJvY2VkdXJlLnZpc2libGUsDQogICAgICAgICAgICAgICAgICAgICAgICBhdmF0YXI6ICJQRCIsDQogICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsNCiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8NCiAgICAgICAgICAgICAgICAgICAgICBdLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChjb25jZWl0by5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICBjb25jZWl0by5pbnN0cnVjdGlvbmFsZWxlbWVudHMuZm9yRWFjaCgNCiAgICAgICAgICAgICAgICAgICAgKGluc3RydWN0aW9uYWxlbGVtZW50KSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpbnN0cnVjdGlvbmFsZWxlbWVudC51cmwsDQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAiW0lOU1RSVUNUSU9OQUwgRUxFTUVOVF0gIiArDQogICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uYWxlbGVtZW50LmxhYmVsLA0KICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudmlzaWJsZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHRoaXMuaW5zdHJ1Y1R5cGVzSWNvblsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQuZmtfaW5zdHJ1Y3Rpb25hbGVsZW1lbnR0eXBlLnNwbGl0KA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvIg0KICAgICAgICAgICAgICAgICAgICAgICAgICApWzRdIC0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWw0KICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bw0KICAgICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bysrOw0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGluZGV4bW9kdWxvKys7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIHB1dFZpc2libGUoKSB7DQogICAgICB2YXIgdm0gPSB0aGlzOw0KDQogICAgICB0aGlzLnRyZWVEYXRhLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIGVsZW1lbnQudmlzaWJsZSA9PT0gdHJ1ZSAmJg0KICAgICAgICAgICF0aGlzLnNlbGVjdGlvbi5maW5kKChmaW5kRWxlbWVudCkgPT4gZmluZEVsZW1lbnQuaWQgPT09IGVsZW1lbnQuaWQpDQogICAgICAgICkgew0KICAgICAgICAgIEFwaSgpDQogICAgICAgICAgICAucGF0Y2goZWxlbWVudC5pZCkNCiAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgew0KICAgICAgICAgICAgICB2YXIgYXV4ID0gcmVzcG9zdGEuZGF0YTsNCiAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKChhdHJpYnV0bykgPT4gew0KICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7DQogICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgew0KICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7DQogICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsNCiAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KGVsZW1lbnQuaWQsIGF1eCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICBlbGVtZW50LnZpc2libGUgPT09IGZhbHNlICYmDQogICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZmluZCgoZmluZEVsZW1lbnQpID0+IGZpbmRFbGVtZW50LmlkID09PSBlbGVtZW50LmlkKQ0KICAgICAgICApIHsNCiAgICAgICAgICBBcGkoKQ0KICAgICAgICAgICAgLnBhdGNoKGVsZW1lbnQuaWQpDQogICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbiAocmVzcG9zdGEpIHsNCiAgICAgICAgICAgICAgdmFyIGF1eCA9IHJlc3Bvc3RhLmRhdGE7DQogICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdXhbYXRyaWJ1dG9dKSkgew0KICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsNCiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG9bMF0gKyBhdHJpYnV0b1sxXSA9PT0gImlkIikgew0KICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInZpc2libGUiKSB7DQogICAgICAgICAgICAgICAgICBhdXgudmlzaWJsZSA9IHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KGVsZW1lbnQuaWQsIGF1eCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlbGVtZW50LmNoaWxkcmVuKSAmJiBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aCkgew0KICAgICAgICAgIGVsZW1lbnQuY2hpbGRyZW4uZm9yRWFjaCgoZWxlbWVudDIpID0+IHsNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgZWxlbWVudDIudmlzaWJsZSA9PT0gdHJ1ZSAmJg0KICAgICAgICAgICAgICAhdGhpcy5zZWxlY3Rpb24uZmluZCgNCiAgICAgICAgICAgICAgICAoZmluZEVsZW1lbnQyKSA9PiBmaW5kRWxlbWVudDIuaWQgPT09IGVsZW1lbnQyLmlkDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICBBcGkoKQ0KICAgICAgICAgICAgICAgIC5wYXRjaChlbGVtZW50Mi5pZCkNCiAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbiAocmVzcG9zdGEpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKChhdHJpYnV0bykgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdXhbYXRyaWJ1dG9dKSkgew0KICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgew0KICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInZpc2libGUiKSB7DQogICAgICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50Mi5pZCwgYXV4KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgIGVsZW1lbnQyLnZpc2libGUgPT09IGZhbHNlICYmDQogICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLmZpbmQoDQogICAgICAgICAgICAgICAgKGZpbmRFbGVtZW50MikgPT4gZmluZEVsZW1lbnQyLmlkID09PSBlbGVtZW50Mi5pZA0KICAgICAgICAgICAgICApDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgQXBpKCkNCiAgICAgICAgICAgICAgICAucGF0Y2goZWxlbWVudDIuaWQpDQogICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24gKHJlc3Bvc3RhKSB7DQogICAgICAgICAgICAgICAgICB2YXIgYXV4ID0gcmVzcG9zdGEuZGF0YTsNCiAgICAgICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7DQogICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgew0KICAgICAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50Mi5pZCwgYXV4KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZWxlbWVudDIuY2hpbGRyZW4pICYmIGVsZW1lbnQyLmNoaWxkcmVuLmxlbmd0aCkgew0KICAgICAgICAgICAgICBlbGVtZW50Mi5jaGlsZHJlbi5mb3JFYWNoKChlbGVtZW50MykgPT4gew0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIGVsZW1lbnQzLnZpc2libGUgPT09IHRydWUgJiYNCiAgICAgICAgICAgICAgICAgICF0aGlzLnNlbGVjdGlvbi5maW5kKA0KICAgICAgICAgICAgICAgICAgICAoZmluZEVsZW1lbnQzKSA9PiBmaW5kRWxlbWVudDMuaWQgPT09IGVsZW1lbnQzLmlkDQogICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICBBcGkoKQ0KICAgICAgICAgICAgICAgICAgICAucGF0Y2goZWxlbWVudDMuaWQpDQogICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgew0KICAgICAgICAgICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wdXQoZWxlbWVudDMuaWQsIGF1eCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgICAgICBlbGVtZW50My52aXNpYmxlID09PSBmYWxzZSAmJg0KICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZmluZCgNCiAgICAgICAgICAgICAgICAgICAgKGZpbmRFbGVtZW50MykgPT4gZmluZEVsZW1lbnQzLmlkID09PSBlbGVtZW50My5pZA0KICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgQXBpKCkNCiAgICAgICAgICAgICAgICAgICAgLnBhdGNoKGVsZW1lbnQzLmlkKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbiAocmVzcG9zdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgYXV4ID0gcmVzcG9zdGEuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBPYmplY3Qua2V5cyhhdXgpLmZvckVhY2goKGF0cmlidXRvKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdXhbYXRyaWJ1dG9dKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ1cmwiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInZpc2libGUiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wdXQoZWxlbWVudDMuaWQsIGF1eCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoZWxlbWVudDMuY2hpbGRyZW4pICYmDQogICAgICAgICAgICAgICAgICBlbGVtZW50My5jaGlsZHJlbi5sZW5ndGgNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIGVsZW1lbnQzLmNoaWxkcmVuLmZvckVhY2goKGVsZW1lbnQ0KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50NC52aXNpYmxlID09PSB0cnVlICYmDQogICAgICAgICAgICAgICAgICAgICAgIXRoaXMuc2VsZWN0aW9uLmZpbmQoDQogICAgICAgICAgICAgICAgICAgICAgICAoZmluZEVsZW1lbnQ0KSA9PiBmaW5kRWxlbWVudDQuaWQgPT09IGVsZW1lbnQ0LmlkDQogICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICBBcGkoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnBhdGNoKGVsZW1lbnQ0LmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24gKHJlc3Bvc3RhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBPYmplY3Qua2V5cyhhdXgpLmZvckVhY2goKGF0cmlidXRvKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ1cmwiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wdXQoZWxlbWVudDQuaWQsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXgsDQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDQudmlzaWJsZSA9PT0gZmFsc2UgJiYNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5maW5kKA0KICAgICAgICAgICAgICAgICAgICAgICAgKGZpbmRFbGVtZW50NCkgPT4gZmluZEVsZW1lbnQ0LmlkID09PSBlbGVtZW50NC5pZA0KICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgQXBpKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5wYXRjaChlbGVtZW50NC5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXV4ID0gcmVzcG9zdGEuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKChhdHJpYnV0bykgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wdXQoZWxlbWVudDQuaWQsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXgsDQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgYXdhaXQgc2V0VGltZW91dChhc3luYyBmdW5jdGlvbiAoKSB7DQogICAgICAgIHZtLiRlbWl0KCJjbG9zZV9vcl9zYXZlIiwgImNsb3NlIik7DQogICAgICB9LCAzMDApOw0KICAgIH0sDQoNCiAgICBkZXNlbGVjdEFsbCgpIHsNCiAgICAgIHRoaXMuc2VsZWN0aW9uID0gW107DQogICAgfSwNCiAgICBzZWxlY3RBbGwoKSB7DQogICAgICB2YXIgdm0gPSB0aGlzOw0KICAgICAgdGhpcy5zZWxlY3Rpb24gPSBbXTsNCiAgICAgIHRoaXMudHJlZURhdGEuZm9yRWFjaCgoZWxlbWVudCkgPT4gew0KICAgICAgICB2bS5zZWxlY3Rpb24ucHVzaChlbGVtZW50KTsNCiAgICAgICAgaWYgKGVsZW1lbnQuY2hpbGRyZW4pIHsNCiAgICAgICAgICBlbGVtZW50LmNoaWxkcmVuLmZvckVhY2goKGVsZW1lbnQyKSA9PiB7DQogICAgICAgICAgICB2bS5zZWxlY3Rpb24ucHVzaChlbGVtZW50Mik7DQogICAgICAgICAgICBpZiAoZWxlbWVudDIuY2hpbGRyZW4pIHsNCiAgICAgICAgICAgICAgZWxlbWVudDIuY2hpbGRyZW4uZm9yRWFjaCgoZWxlbWVudDMpID0+IHsNCiAgICAgICAgICAgICAgICB2bS5zZWxlY3Rpb24ucHVzaChlbGVtZW50Myk7DQogICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQzLmNoaWxkcmVuKSB7DQogICAgICAgICAgICAgICAgICBlbGVtZW50My5jaGlsZHJlbi5mb3JFYWNoKChlbGVtZW50NCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB2bS5zZWxlY3Rpb24ucHVzaChlbGVtZW50NCk7DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGFzeW5jIHZhbGlkYXRlKCkgew0KICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7DQogICAgICAgIGF3YWl0IHRoaXMucHV0VmlzaWJsZSgpOw0KICAgICAgICBhd2FpdCB0aGlzLnJlc2V0VmFyaWFibGVzKCk7DQogICAgICB9DQogICAgfSwNCiAgICBvcGVuRGlkYXRpY0RpYWxvZyhkaWFsb2cpIHsNCiAgICAgIHRoaXMuJGVtaXQoIm9wZW5EaWRhdGljRGlhbG9nIiwgZGlhbG9nKTsNCiAgICB9LA0KICAgIHJlc2V0KCkgew0KICAgICAgdGhpcy4kZW1pdCgiY2xvc2Vfb3Jfc2F2ZSIsICJjbG9zZSIpOw0KICAgIH0sDQogICAgcmVzZXRWYWxpZGF0aW9uKCkgew0KICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0VmFsaWRhdGlvbigpOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["VisibleDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VisibleDialog.vue","sourceRoot":"src/components/didatic_model","sourcesContent":["<template>\r\n  <v-card>\r\n    <v-card-title style=\"background-color:purple; color:white;\">\r\n      <span class=\"headline\">\r\n        <p>Defina as informações equivalentes ao modelo didático.</p>\r\n      </span>\r\n    </v-card-title>\r\n    <v-row style=\"width : 100%\">\r\n      <v-col cols=\"12\">\r\n        <v-card-text>\r\n          <v-row class=\"ml-2\">\r\n            <v-btn\r\n              color=\"warning\"\r\n              height=\"40px\"\r\n              dark\r\n              x-small\r\n              small\r\n              @click=\"deselectAll()\"\r\n            >Deselecionar tudo</v-btn>\r\n            <v-btn\r\n              class=\"ml-1\"\r\n              color=\"primary\"\r\n              height=\"40\"\r\n              dark\r\n              small\r\n              @click=\"selectAll()\"\r\n            >Selecionar tudo</v-btn>\r\n            <v-btn\r\n              class=\"ml-1\"\r\n              color=\"#A5A5A5\"\r\n              height=\"40px\"\r\n              dark\r\n              small\r\n              @click=\"openDidaticDialog('assessment')\"\r\n            >Parâmetros de avaliação</v-btn>\r\n            <v-btn\r\n              class=\"ml-1\"\r\n              color=\"green\"\r\n              height=\"40\"\r\n              dark\r\n              small\r\n              @click=\"openDidaticDialog('prior')\"\r\n            >Conhecimentos Prévios</v-btn>\r\n          </v-row>\r\n\r\n          <v-treeview\r\n            @update:active=\"test\"\r\n            v-model=\"selection\"\r\n            :selection-type=\"'independent'\"\r\n            :items=\"treeData\"\r\n            return-object\r\n            selectable\r\n            selected-color=\"success\"\r\n            open-all\r\n          >\r\n            <template v-slot:prepend=\"{ item }\">\r\n              <v-icon v-if=\"item.icon\">{{ item.icon }}</v-icon>\r\n              <v-avatar v-else color=\"black\" size=\"25\" class=\"mr-2\">\r\n                <span class=\"white--text\" style=\"font-size:0.7em;\">\r\n                  {{\r\n                  item.avatar\r\n                  }}\r\n                </span>\r\n              </v-avatar>\r\n            </template>\r\n          </v-treeview>\r\n        </v-card-text>\r\n      </v-col>\r\n    </v-row>\r\n    <v-card-actions>\r\n      <v-spacer></v-spacer>\r\n      <v-btn color=\"red\" height=\"49\" dark large @click=\"reset\">\r\n        Cancelar\r\n        <v-icon dark right>mdi-close</v-icon>\r\n      </v-btn>\r\n      <v-btn color=\"success\" height=\"49\" dark large @click=\"validate\">\r\n        Salvar\r\n        <v-icon dark right>mdi-content-save</v-icon>\r\n      </v-btn>\r\n    </v-card-actions>\r\n    <div class=\"text-center\">\r\n      <v-dialog v-model=\"dialogError\" width=\"500\">\r\n        <v-card>\r\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\">ALERTA!</v-card-title>\r\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\">\r\n            {{\r\n            messageError\r\n            }}\r\n          </v-card-text>\r\n          <v-divider></v-divider>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"primary\" text @click=\"dialogError = false\">Ok</v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n    </div>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport Api from \"@/services/Api\";\r\n\r\nexport default {\r\n  name: \"VisibleDialog\",\r\n  props: [\"domain\", \"dialog\"],\r\n  data: () => ({\r\n    valid: true,\r\n    treeData: [],\r\n    selection: [],\r\n    elementData: [],\r\n    dialogError: false,\r\n    messageError: \"\",\r\n    newItems: [],\r\n    checkbox: true,\r\n    fileTypesIcon: [\r\n      \"mdi-file-image\",\r\n      \"mdi-file-video\",\r\n      \"mdi-file-music\",\r\n      \"mdi-file-document\",\r\n      \"mdi-link-variant\",\r\n    ],\r\n    instrucTypesIcon: [\r\n      \"mdi-clipboard-text\",\r\n      \"mdi-clipboard-check\",\r\n      \"mdi-account-switch\",\r\n      \"mdi-lightbulb-outline\",\r\n    ],\r\n    mobilemediaTypeLabel: [\"Imagem\", \"Vídeo\", \"Áudio\", \"Texto\", \"Link\"],\r\n  }),\r\n  watch: {\r\n    domain: async function () {\r\n      if (this.domain) {\r\n        this.treeData = [];\r\n        this.selection = [];\r\n        await this.setDomainVariables();\r\n      }\r\n    },\r\n  },\r\n  mounted: async function () {\r\n    if (this.domain) {\r\n      this.treeData = [];\r\n      this.selection = [];\r\n      await this.setDomainVariables();\r\n    }\r\n  },\r\n  methods: {\r\n    test(value) {\r\n      if (value.length) {\r\n        if (value[0].split(\"/\")[5] === \"sub\") {\r\n          this.$emit(\"type\", { type: \"submodulo\", url: value[0] });\r\n        } else {\r\n          this.$emit(\"type\", { type: value[0].split(\"/\")[3], url: value[0] });\r\n        }\r\n      }\r\n    },\r\n    setDomainVariables() {\r\n      this.treeData = [];\r\n      this.elementData.push({\r\n        text: \"[DOMINIO] \" + this.domain.nameknowledgedomain,\r\n        value: this.domain.url,\r\n      });\r\n      var indexmodulo = 0;\r\n      if (this.domain.mobilemedias.length) {\r\n        this.domain.mobilemedias.forEach((mobilemedia) => {\r\n          var object = {\r\n            id: mobilemedia.url,\r\n            name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n            visible: mobilemedia.visible,\r\n            icon: this.fileTypesIcon[\r\n              mobilemedia.fk_idmediatype.split(\"/\")[4] - 1\r\n            ],\r\n          };\r\n          this.treeData.push(object);\r\n          if (object.visible) {\r\n            this.selection.push(object);\r\n          }\r\n          indexmodulo++;\r\n        });\r\n      }\r\n      if (this.domain.instructionalelements.length) {\r\n        this.domain.instructionalelements.forEach((instructionalelement) => {\r\n          if (\r\n            instructionalelement.fk_instructionalelementtype.split(\"/\")[4] !== 4\r\n          ) {\r\n            var object = {\r\n              id: instructionalelement.url,\r\n              name: \"[INSTRUCTIONAL ELEMENT] \" + instructionalelement.label,\r\n              visible: instructionalelement.visible,\r\n              icon: this.instrucTypesIcon[\r\n                instructionalelement.fk_instructionalelementtype.split(\"/\")[4] -\r\n                  1\r\n              ],\r\n            };\r\n            this.treeData.push(object);\r\n            if (object.visible) {\r\n              this.selection.push(object);\r\n            }\r\n            indexmodulo++;\r\n          }\r\n        });\r\n      }\r\n      if (Array.isArray(this.domain.modules) && this.domain.modules.length) {\r\n        this.domain.modules.forEach((modulo) => {\r\n          if (modulo.fk_idmodule === null) {\r\n            var indexsubmodulo = 0;\r\n            var object = {\r\n              id: modulo.url,\r\n              name: \"[MODULO] \" + modulo.namemodule,\r\n              visible: modulo.visible,\r\n              avatar: \"MD\",\r\n              children: [],\r\n            };\r\n            this.treeData.push(object);\r\n            this.elementData.push({\r\n              text: object.name,\r\n              value: object.id,\r\n            });\r\n            if (object.visible) {\r\n              this.selection.push(object);\r\n            }\r\n            if (modulo.mobilemedias.length) {\r\n              modulo.mobilemedias.forEach((mobilemedia) => {\r\n                var object = {\r\n                  id: mobilemedia.url,\r\n                  name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n                  visible: mobilemedia.visible,\r\n                  icon: this.fileTypesIcon[\r\n                    mobilemedia.fk_idmediatype.split(\"/\")[4] - 1\r\n                  ],\r\n                };\r\n                this.treeData[indexmodulo].children.push(object);\r\n                if (object.visible) {\r\n                  this.selection.push(object);\r\n                }\r\n                indexsubmodulo++;\r\n              });\r\n            }\r\n\r\n            if (modulo.instructionalelements.length) {\r\n              modulo.instructionalelements.forEach((instructionalelement) => {\r\n                if (\r\n                  instructionalelement.fk_instructionalelementtype.split(\r\n                    \"/\"\r\n                  )[4] !== 4\r\n                ) {\r\n                  var object = {\r\n                    id: instructionalelement.url,\r\n                    name:\r\n                      \"[INSTRUCTIONAL ELEMENT] \" + instructionalelement.label,\r\n                    visible: instructionalelement.visible,\r\n                    icon: this.instrucTypesIcon[\r\n                      instructionalelement.fk_instructionalelementtype.split(\r\n                        \"/\"\r\n                      )[4] - 1\r\n                    ],\r\n                  };\r\n                  this.treeData[indexmodulo].children.push(object);\r\n                  if (object.visible) {\r\n                    this.selection.push(object);\r\n                  }\r\n                  indexsubmodulo++;\r\n                }\r\n              });\r\n            }\r\n\r\n            if (modulo.submodules.length) {\r\n              var indexconceito = 0;\r\n              modulo.submodules.forEach((submodulo) => {\r\n                var object = {\r\n                  id: submodulo.url,\r\n                  name: \"[SUBMODULO] \" + submodulo.namemodule,\r\n                  visible: submodulo.visible,\r\n                  avatar: \"SM\",\r\n                  children: [],\r\n                };\r\n                this.treeData[indexmodulo].children.push(object);\r\n                this.elementData.push({\r\n                  text: object.name,\r\n                  value: object.id,\r\n                });\r\n                if (object.visible) {\r\n                  this.selection.push(object);\r\n                }\r\n\r\n                if (submodulo.mobilemedias.length) {\r\n                  submodulo.mobilemedias.forEach((mobilemedia) => {\r\n                    var object = {\r\n                      id: mobilemedia.url,\r\n                      name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n                      visible: mobilemedia.visible,\r\n                      icon: this.fileTypesIcon[\r\n                        mobilemedia.fk_idmediatype.split(\"/\")[4] - 1\r\n                      ],\r\n                    };\r\n                    this.treeData[indexmodulo].children[\r\n                      indexsubmodulo\r\n                    ].children.push(object);\r\n                    if (object.visible) {\r\n                      this.selection.push(object);\r\n                    }\r\n                    indexconceito++;\r\n                  });\r\n                }\r\n\r\n                if (submodulo.instructionalelements.length) {\r\n                  submodulo.instructionalelements.forEach(\r\n                    (instructionalelement) => {\r\n                      var object = {\r\n                        id: instructionalelement.url,\r\n                        name:\r\n                          \"[INSTRUCTIONAL ELEMENT] \" +\r\n                          instructionalelement.label,\r\n                        visible: instructionalelement.visible,\r\n                        icon: this.instrucTypesIcon[\r\n                          instructionalelement.fk_instructionalelementtype.split(\r\n                            \"/\"\r\n                          )[4] - 1\r\n                        ],\r\n                      };\r\n                      this.treeData[indexmodulo].children[\r\n                        indexsubmodulo\r\n                      ].children.push(object);\r\n                      if (object.visible) {\r\n                        this.selection.push(object);\r\n                      }\r\n                      indexconceito++;\r\n                    }\r\n                  );\r\n                }\r\n\r\n                if (submodulo.concepts.length) {\r\n                  submodulo.concepts.forEach((conceito) => {\r\n                    var object = {\r\n                      id: conceito.url,\r\n                      name: \"[CONCEITO] \" + conceito.nameconcept,\r\n                      visible: conceito.visible,\r\n                      avatar: \"CC\",\r\n                      children: [],\r\n                    };\r\n                    this.treeData[indexmodulo].children[\r\n                      indexsubmodulo\r\n                    ].children.push(object);\r\n\r\n                    this.elementData.push({\r\n                      text: object.name,\r\n                      value: object.id,\r\n                    });\r\n                    if (object.visible) {\r\n                      this.selection.push(object);\r\n                    }\r\n\r\n                    if (conceito.informationitems.length) {\r\n                      conceito.informationitems.forEach((infoitem) => {\r\n                        if (\r\n                          infoitem.fk_informationitemtype !==\r\n                          Api().defaults.baseURL + \"/informationitemtype/4/\"\r\n                        ) {\r\n                          infoitem.mobilemedias.forEach((mobilemedia) => {\r\n                            var object = {\r\n                              id: mobilemedia.url,\r\n                              name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n                              visible: mobilemedia.visible,\r\n                              icon: this.fileTypesIcon[\r\n                                mobilemedia.fk_idmediatype.split(\"/\")[4] - 1\r\n                              ],\r\n                            };\r\n                            this.treeData[indexmodulo].children[\r\n                              indexsubmodulo\r\n                            ].children[indexconceito].children.push(object);\r\n                            if (object.visible) {\r\n                              this.selection.push(object);\r\n                            }\r\n                          });\r\n                        }\r\n                      });\r\n                    }\r\n\r\n                    if (conceito.informationitems.length) {\r\n                      conceito.informationitems.forEach((procedure) => {\r\n                        if (\r\n                          procedure.fk_informationitemtype ===\r\n                          Api().defaults.baseURL + \"/informationitemtype/4/\"\r\n                        ) {\r\n                          var object = {\r\n                            id: procedure.url,\r\n                            name:\r\n                              \"[PROCEDIMENTO] \" + procedure.nameinformationitem,\r\n                            visible: procedure.visible,\r\n                          };\r\n                          this.treeData[indexmodulo].children[\r\n                            indexsubmodulo\r\n                          ].children[indexconceito].children.push(object);\r\n                          if (object.visible) {\r\n                            this.selection.push(object);\r\n                          }\r\n                        }\r\n                      });\r\n                    }\r\n\r\n                    if (conceito.instructionalelements.length) {\r\n                      conceito.instructionalelements.forEach(\r\n                        (instructionalelement) => {\r\n                          var object = {\r\n                            id: instructionalelement.url,\r\n                            name:\r\n                              \"[INSTRUCTIONAL ELEMENT] \" +\r\n                              instructionalelement.label,\r\n                            visible: instructionalelement.visible,\r\n                            icon: this.instrucTypesIcon[\r\n                              instructionalelement.fk_instructionalelementtype.split(\r\n                                \"/\"\r\n                              )[4] - 1\r\n                            ],\r\n                          };\r\n                          this.treeData[indexmodulo].children[\r\n                            indexsubmodulo\r\n                          ].children[indexconceito].children.push(object);\r\n                          if (object.visible) {\r\n                            this.selection.push(object);\r\n                          }\r\n                        }\r\n                      );\r\n                    }\r\n\r\n                    indexconceito++;\r\n                  });\r\n                }\r\n                indexsubmodulo++;\r\n              });\r\n            }\r\n            if (modulo.concepts.length) {\r\n              if (indexsubmodulo > 0) {\r\n                indexconceito = indexsubmodulo;\r\n              } else {\r\n                indexconceito = 0;\r\n              }\r\n              modulo.concepts.forEach((conceito) => {\r\n                var object = {\r\n                  id: conceito.url,\r\n                  name: \"[CONCEITO] \" + conceito.nameconcept,\r\n                  visible: conceito.visible,\r\n                  avatar: \"CC\",\r\n                  children: [],\r\n                };\r\n                this.treeData[indexmodulo].children.push(object);\r\n\r\n                this.elementData.push({\r\n                  text: object.name,\r\n                  value: object.id,\r\n                });\r\n                if (object.visible) {\r\n                  this.selection.push(object);\r\n                }\r\n\r\n                if (conceito.informationitems.length) {\r\n                  conceito.informationitems.forEach((infoitem) => {\r\n                    if (\r\n                      infoitem.fk_informationitemtype !==\r\n                      Api().defaults.baseURL + \"/informationitemtype/4/\"\r\n                    ) {\r\n                      console.log(\"mb\");\r\n                      infoitem.mobilemedias.forEach((mobilemedia) => {\r\n                        var object = {\r\n                          id: mobilemedia.url,\r\n                          name: \"[MOBILEMEDIA] \" + mobilemedia.label,\r\n                          visible: mobilemedia.visible,\r\n                          icon: this.fileTypesIcon[\r\n                            mobilemedia.fk_idmediatype.split(\"/\")[4] - 1\r\n                          ],\r\n                        };\r\n                        this.treeData[indexmodulo].children[\r\n                          indexconceito\r\n                        ].children.push(object);\r\n                        if (object.visible) {\r\n                          this.selection.push(object);\r\n                        }\r\n                      });\r\n                    }\r\n                  });\r\n                }\r\n\r\n                if (conceito.informationitems.length) {\r\n                  console.log(\"proc\", conceito);\r\n                  conceito.informationitems.forEach((procedure) => {\r\n                    console.log(\r\n                      \"why no if\",\r\n                      procedure.fk_informationitemtype ===\r\n                        Api().defaults.baseURL + \"/informationitemtype/4/\"\r\n                    );\r\n                    console.log(\r\n                      \"why no if2\",\r\n                      Api().defaults.baseURL + \"/informationitemtype/4/\"\r\n                    );\r\n                    console.log(\"why no if3\", procedure.fk_informationitemtype);\r\n                    if (\r\n                      procedure.fk_informationitemtype ===\r\n                      Api().defaults.baseURL + \"/informationitemtype/4/\"\r\n                    ) {\r\n                      var object = {\r\n                        id: procedure.url,\r\n                        name: \"[PROCEDIMENTO] \" + procedure.nameinformationitem,\r\n                        visible: procedure.visible,\r\n                        avatar: \"PD\",\r\n                      };\r\n                      this.treeData[indexmodulo].children[\r\n                        indexconceito\r\n                      ].children.push(object);\r\n                      if (object.visible) {\r\n                        this.selection.push(object);\r\n                      }\r\n                    }\r\n                  });\r\n                }\r\n\r\n                if (conceito.instructionalelements.length) {\r\n                  conceito.instructionalelements.forEach(\r\n                    (instructionalelement) => {\r\n                      var object = {\r\n                        id: instructionalelement.url,\r\n                        name:\r\n                          \"[INSTRUCTIONAL ELEMENT] \" +\r\n                          instructionalelement.label,\r\n                        visible: instructionalelement.visible,\r\n                        icon: this.instrucTypesIcon[\r\n                          instructionalelement.fk_instructionalelementtype.split(\r\n                            \"/\"\r\n                          )[4] - 1\r\n                        ],\r\n                      };\r\n                      this.treeData[indexmodulo].children[\r\n                        indexconceito\r\n                      ].children.push(object);\r\n                      if (object.visible) {\r\n                        this.selection.push(object);\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                indexconceito++;\r\n              });\r\n            }\r\n            indexmodulo++;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    async putVisible() {\r\n      var vm = this;\r\n\r\n      this.treeData.forEach((element) => {\r\n        if (\r\n          element.visible === true &&\r\n          !this.selection.find((findElement) => findElement.id === element.id)\r\n        ) {\r\n          Api()\r\n            .patch(element.id)\r\n            .then(async function (resposta) {\r\n              var aux = resposta.data;\r\n              await Object.keys(aux).forEach((atributo) => {\r\n                if (Array.isArray(aux[atributo])) {\r\n                  delete aux[atributo];\r\n                } else if (atributo === \"url\") {\r\n                  delete aux[atributo];\r\n                } else if (atributo[0] + atributo[1] === \"id\") {\r\n                  delete aux[atributo];\r\n                } else if (atributo === \"visible\") {\r\n                  aux.visible = false;\r\n                }\r\n              });\r\n              await Api().put(element.id, aux);\r\n            });\r\n        } else if (\r\n          element.visible === false &&\r\n          this.selection.find((findElement) => findElement.id === element.id)\r\n        ) {\r\n          Api()\r\n            .patch(element.id)\r\n            .then(async function (resposta) {\r\n              var aux = resposta.data;\r\n              await Object.keys(aux).forEach((atributo) => {\r\n                if (Array.isArray(aux[atributo])) {\r\n                  delete aux[atributo];\r\n                } else if (atributo === \"url\") {\r\n                  delete aux[atributo];\r\n                } else if (atributo[0] + atributo[1] === \"id\") {\r\n                  delete aux[atributo];\r\n                } else if (atributo === \"visible\") {\r\n                  aux.visible = true;\r\n                }\r\n              });\r\n              await Api().put(element.id, aux);\r\n            });\r\n        }\r\n        if (Array.isArray(element.children) && element.children.length) {\r\n          element.children.forEach((element2) => {\r\n            if (\r\n              element2.visible === true &&\r\n              !this.selection.find(\r\n                (findElement2) => findElement2.id === element2.id\r\n              )\r\n            ) {\r\n              Api()\r\n                .patch(element2.id)\r\n                .then(async function (resposta) {\r\n                  var aux = resposta.data;\r\n                  await Object.keys(aux).forEach((atributo) => {\r\n                    if (Array.isArray(aux[atributo])) {\r\n                      delete aux[atributo];\r\n                    } else if (atributo === \"url\") {\r\n                      delete aux[atributo];\r\n                    } else if (atributo[0] + atributo[1] === \"id\") {\r\n                      delete aux[atributo];\r\n                    } else if (atributo === \"visible\") {\r\n                      aux.visible = false;\r\n                    }\r\n                  });\r\n\r\n                  await Api().put(element2.id, aux);\r\n                });\r\n            } else if (\r\n              element2.visible === false &&\r\n              this.selection.find(\r\n                (findElement2) => findElement2.id === element2.id\r\n              )\r\n            ) {\r\n              Api()\r\n                .patch(element2.id)\r\n                .then(async function (resposta) {\r\n                  var aux = resposta.data;\r\n                  await Object.keys(aux).forEach((atributo) => {\r\n                    if (Array.isArray(aux[atributo])) {\r\n                      delete aux[atributo];\r\n                    } else if (atributo === \"url\") {\r\n                      delete aux[atributo];\r\n                    } else if (atributo[0] + atributo[1] === \"id\") {\r\n                      delete aux[atributo];\r\n                    } else if (atributo === \"visible\") {\r\n                      aux.visible = true;\r\n                    }\r\n                  });\r\n\r\n                  await Api().put(element2.id, aux);\r\n                });\r\n            }\r\n\r\n            if (Array.isArray(element2.children) && element2.children.length) {\r\n              element2.children.forEach((element3) => {\r\n                if (\r\n                  element3.visible === true &&\r\n                  !this.selection.find(\r\n                    (findElement3) => findElement3.id === element3.id\r\n                  )\r\n                ) {\r\n                  Api()\r\n                    .patch(element3.id)\r\n                    .then(async function (resposta) {\r\n                      var aux = resposta.data;\r\n                      await Object.keys(aux).forEach((atributo) => {\r\n                        if (Array.isArray(aux[atributo])) {\r\n                          delete aux[atributo];\r\n                        } else if (atributo === \"url\") {\r\n                          delete aux[atributo];\r\n                        } else if (atributo[0] + atributo[1] === \"id\") {\r\n                          delete aux[atributo];\r\n                        } else if (atributo === \"visible\") {\r\n                          aux.visible = false;\r\n                        }\r\n                      });\r\n                      await Api().put(element3.id, aux);\r\n                    });\r\n                } else if (\r\n                  element3.visible === false &&\r\n                  this.selection.find(\r\n                    (findElement3) => findElement3.id === element3.id\r\n                  )\r\n                ) {\r\n                  Api()\r\n                    .patch(element3.id)\r\n                    .then(async function (resposta) {\r\n                      var aux = resposta.data;\r\n                      await Object.keys(aux).forEach((atributo) => {\r\n                        if (Array.isArray(aux[atributo])) {\r\n                          delete aux[atributo];\r\n                        } else if (atributo === \"url\") {\r\n                          delete aux[atributo];\r\n                        } else if (atributo[0] + atributo[1] === \"id\") {\r\n                          delete aux[atributo];\r\n                        } else if (atributo === \"visible\") {\r\n                          aux.visible = true;\r\n                        }\r\n                      });\r\n                      await Api().put(element3.id, aux);\r\n                    });\r\n                }\r\n\r\n                if (\r\n                  Array.isArray(element3.children) &&\r\n                  element3.children.length\r\n                ) {\r\n                  element3.children.forEach((element4) => {\r\n                    if (\r\n                      element4.visible === true &&\r\n                      !this.selection.find(\r\n                        (findElement4) => findElement4.id === element4.id\r\n                      )\r\n                    ) {\r\n                      Api()\r\n                        .patch(element4.id)\r\n                        .then(async function (resposta) {\r\n                          var aux = resposta.data;\r\n                          await Object.keys(aux).forEach((atributo) => {\r\n                            if (Array.isArray(aux[atributo])) {\r\n                              delete aux[atributo];\r\n                            } else if (atributo === \"url\") {\r\n                              delete aux[atributo];\r\n                            } else if (atributo[0] + atributo[1] === \"id\") {\r\n                              delete aux[atributo];\r\n                            } else if (atributo === \"visible\") {\r\n                              aux.visible = false;\r\n                            }\r\n                          });\r\n                          await Api().put(element4.id, {\r\n                            aux,\r\n                          });\r\n                        });\r\n                    } else if (\r\n                      element4.visible === false &&\r\n                      this.selection.find(\r\n                        (findElement4) => findElement4.id === element4.id\r\n                      )\r\n                    ) {\r\n                      Api()\r\n                        .patch(element4.id)\r\n                        .then(async function (resposta) {\r\n                          var aux = resposta.data;\r\n                          await Object.keys(aux).forEach((atributo) => {\r\n                            if (Array.isArray(aux[atributo])) {\r\n                              delete aux[atributo];\r\n                            } else if (atributo === \"url\") {\r\n                              delete aux[atributo];\r\n                            } else if (atributo[0] + atributo[1] === \"id\") {\r\n                              delete aux[atributo];\r\n                            } else if (atributo === \"visible\") {\r\n                              aux.visible = true;\r\n                            }\r\n                          });\r\n                          await Api().put(element4.id, {\r\n                            aux,\r\n                          });\r\n                        });\r\n                    }\r\n                  });\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n      await setTimeout(async function () {\r\n        vm.$emit(\"close_or_save\", \"close\");\r\n      }, 300);\r\n    },\r\n\r\n    deselectAll() {\r\n      this.selection = [];\r\n    },\r\n    selectAll() {\r\n      var vm = this;\r\n      this.selection = [];\r\n      this.treeData.forEach((element) => {\r\n        vm.selection.push(element);\r\n        if (element.children) {\r\n          element.children.forEach((element2) => {\r\n            vm.selection.push(element2);\r\n            if (element2.children) {\r\n              element2.children.forEach((element3) => {\r\n                vm.selection.push(element3);\r\n                if (element3.children) {\r\n                  element3.children.forEach((element4) => {\r\n                    vm.selection.push(element4);\r\n                  });\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    async validate() {\r\n      if (this.$refs.form.validate()) {\r\n        await this.putVisible();\r\n        await this.resetVariables();\r\n      }\r\n    },\r\n    openDidaticDialog(dialog) {\r\n      this.$emit(\"openDidaticDialog\", dialog);\r\n    },\r\n    reset() {\r\n      this.$emit(\"close_or_save\", \"close\");\r\n    },\r\n    resetValidation() {\r\n      this.$refs.form.resetValidation();\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}