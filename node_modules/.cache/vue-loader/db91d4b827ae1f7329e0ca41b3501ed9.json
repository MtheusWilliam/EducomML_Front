{"remainingRequest":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\www\\EducomML\\EducomML_Front\\src\\components\\didatic_model\\VisibleDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\www\\EducomML\\EducomML_Front\\src\\components\\didatic_model\\VisibleDialog.vue","mtime":1598473081106},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\babel-loader\\lib\\index.js","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1597353521000},{"path":"C:\\www\\EducomML\\EducomML_Front\\node_modules\\vue-loader\\lib\\index.js","mtime":1597353521000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQXBpIGZyb20gIkAvc2VydmljZXMvQXBpIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiVmlzaWJsZURpYWxvZyIsDQogIHByb3BzOiBbImRvbWFpbiIsICJkaWFsb2ciXSwNCiAgZGF0YTogKCkgPT4gKHsNCiAgICB2YWxpZDogdHJ1ZSwNCiAgICB0cmVlRGF0YTogW10sDQogICAgc2VsZWN0aW9uOiBbXSwNCiAgICBlbGVtZW50RGF0YTogW10sDQogICAgZGlhbG9nRXJyb3I6IGZhbHNlLA0KICAgIG1lc3NhZ2VFcnJvcjogIiIsDQogICAgbmV3SXRlbXM6IFtdLA0KICAgIGNoZWNrYm94OiB0cnVlLA0KICAgIGluZm9ybWF0aW9uSXRlbXNJY29uOiBbIm1kaS1mb3JtYXQtbGlzdC1idWxsZXRlZCJdLA0KICAgIGZpbGVUeXBlc0ljb246IFsNCiAgICAgICJtZGktZmlsZS1pbWFnZSIsDQogICAgICAibWRpLWZpbGUtdmlkZW8iLA0KICAgICAgIm1kaS1maWxlLW11c2ljIiwNCiAgICAgICJtZGktZmlsZS1kb2N1bWVudCIsDQogICAgICAibWRpLWxpbmstdmFyaWFudCIsDQogICAgXSwNCiAgICBpbnN0cnVjVHlwZXNJY29uOiBbDQogICAgICAibWRpLWNsaXBib2FyZC10ZXh0IiwNCiAgICAgICJtZGktY2xpcGJvYXJkLWNoZWNrIiwNCiAgICAgICJtZGktYWNjb3VudC1zd2l0Y2giLA0KICAgICAgIm1kaS1saWdodGJ1bGItb3V0bGluZSIsDQogICAgXSwNCiAgICBtb2JpbGVtZWRpYVR5cGVMYWJlbDogWyJJbWFnZW0iLCAiVsOtZGVvIiwgIsOBdWRpbyIsICJUZXh0byIsICJMaW5rIl0sDQogIH0pLA0KICB3YXRjaDogew0KICAgIGRvbWFpbjogYXN5bmMgZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKHRoaXMuZG9tYWluKSB7DQogICAgICAgIHRoaXMudHJlZURhdGEgPSBbXTsNCiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBbXTsNCiAgICAgICAgYXdhaXQgdGhpcy5zZXREb21haW5WYXJpYWJsZXMoKTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBtb3VudGVkOiBhc3luYyBmdW5jdGlvbiAoKSB7DQogICAgaWYgKHRoaXMuZG9tYWluKSB7DQogICAgICB0aGlzLnRyZWVEYXRhID0gW107DQogICAgICB0aGlzLnNlbGVjdGlvbiA9IFtdOw0KICAgICAgYXdhaXQgdGhpcy5zZXREb21haW5WYXJpYWJsZXMoKTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB0ZXN0KHZhbHVlKSB7DQogICAgICBpZiAodmFsdWUubGVuZ3RoKSB7DQogICAgICAgIGlmICh2YWx1ZVswXS5zcGxpdCgiLyIpWzVdID09PSAic3ViIikgew0KICAgICAgICAgIHRoaXMuJGVtaXQoInR5cGUiLCB7IHR5cGU6ICJzdWJtb2R1bG8iLCB1cmw6IHZhbHVlWzBdIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJGVtaXQoInR5cGUiLCB7IHR5cGU6IHZhbHVlWzBdLnNwbGl0KCIvIilbM10sIHVybDogdmFsdWVbMF0gfSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIHNldERvbWFpblZhcmlhYmxlcygpIHsNCiAgICAgIHRoaXMudHJlZURhdGEgPSBbXTsNCiAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7DQogICAgICAgIHRleHQ6IHRoaXMuZG9tYWluLm5hbWVrbm93bGVkZ2Vkb21haW4sDQogICAgICAgIHZhbHVlOiB0aGlzLmRvbWFpbi51cmwsDQogICAgICB9KTsNCiAgICAgIHZhciBpbmRleG1vZHVsbyA9IDA7DQogICAgICBpZiAodGhpcy5kb21haW4ubW9iaWxlbWVkaWFzLmxlbmd0aCkgew0KICAgICAgICB0aGlzLmRvbWFpbi5tb2JpbGVtZWRpYXMuZm9yRWFjaCgobW9iaWxlbWVkaWEpID0+IHsNCiAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgaWQ6IG1vYmlsZW1lZGlhLnVybCwNCiAgICAgICAgICAgIG5hbWU6IG1vYmlsZW1lZGlhLmxhYmVsLA0KICAgICAgICAgICAgdmlzaWJsZTogbW9iaWxlbWVkaWEudmlzaWJsZSwNCiAgICAgICAgICAgIGljb246IHRoaXMuZmlsZVR5cGVzSWNvblsNCiAgICAgICAgICAgICAgbW9iaWxlbWVkaWEuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSAtIDENCiAgICAgICAgICAgIF0sDQogICAgICAgICAgfTsNCiAgICAgICAgICB0aGlzLnRyZWVEYXRhLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICB9DQogICAgICAgICAgaW5kZXhtb2R1bG8rKzsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgICBpZiAodGhpcy5kb21haW4uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmxlbmd0aCkgew0KICAgICAgICB0aGlzLmRvbWFpbi5pbnN0cnVjdGlvbmFsZWxlbWVudHMuZm9yRWFjaCgoaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpID0+IHsNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudC5ma19pbnN0cnVjdGlvbmFsZWxlbWVudHR5cGUuc3BsaXQoIi8iKVs0XSAhPT0gNA0KICAgICAgICAgICkgew0KICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgaWQ6IGluc3RydWN0aW9uYWxlbGVtZW50LnVybCwNCiAgICAgICAgICAgICAgbmFtZTogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubGFiZWwsDQogICAgICAgICAgICAgIHZpc2libGU6IGluc3RydWN0aW9uYWxlbGVtZW50LnZpc2libGUsDQogICAgICAgICAgICAgIGljb246IHRoaXMuaW5zdHJ1Y1R5cGVzSWNvblsNCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudC5ma19pbnN0cnVjdGlvbmFsZWxlbWVudHR5cGUuc3BsaXQoIi8iKVs0XSAtDQogICAgICAgICAgICAgICAgICAxDQogICAgICAgICAgICAgIF0sDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdGhpcy50cmVlRGF0YS5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaW5kZXhtb2R1bG8rKzsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5kb21haW4ubW9kdWxlcykgJiYgdGhpcy5kb21haW4ubW9kdWxlcy5sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5kb21haW4ubW9kdWxlcy5mb3JFYWNoKChtb2R1bG8pID0+IHsNCiAgICAgICAgICBpZiAobW9kdWxvLmZrX2lkbW9kdWxlID09PSBudWxsKSB7DQogICAgICAgICAgICB2YXIgaW5kZXhzdWJtb2R1bG8gPSAwOw0KICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgaWQ6IG1vZHVsby51cmwsDQogICAgICAgICAgICAgIG5hbWU6IG1vZHVsby5uYW1lbW9kdWxlLA0KICAgICAgICAgICAgICB2aXNpYmxlOiBtb2R1bG8udmlzaWJsZSwNCiAgICAgICAgICAgICAgYXZhdGFyOiAiTSIsDQogICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICB0aGlzLnRyZWVEYXRhLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7DQogICAgICAgICAgICAgIHRleHQ6IG9iamVjdC5uYW1lLA0KICAgICAgICAgICAgICB2YWx1ZTogb2JqZWN0LmlkLA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKG1vZHVsby5tb2JpbGVtZWRpYXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgIG1vZHVsby5tb2JpbGVtZWRpYXMuZm9yRWFjaCgobW9iaWxlbWVkaWEpID0+IHsNCiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgICAgICAgaWQ6IG1vYmlsZW1lZGlhLnVybCwNCiAgICAgICAgICAgICAgICAgIG5hbWU6IG1vYmlsZW1lZGlhLmxhYmVsLA0KICAgICAgICAgICAgICAgICAgdmlzaWJsZTogbW9iaWxlbWVkaWEudmlzaWJsZSwNCiAgICAgICAgICAgICAgICAgIGljb246IHRoaXMuZmlsZVR5cGVzSWNvblsNCiAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSAtIDENCiAgICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvKys7DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAobW9kdWxvLmluc3RydWN0aW9uYWxlbGVtZW50cy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgbW9kdWxvLmluc3RydWN0aW9uYWxlbGVtZW50cy5mb3JFYWNoKChpbnN0cnVjdGlvbmFsZWxlbWVudCkgPT4gew0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uYWxlbGVtZW50LmZrX2luc3RydWN0aW9uYWxlbGVtZW50dHlwZS5zcGxpdCgNCiAgICAgICAgICAgICAgICAgICAgIi8iDQogICAgICAgICAgICAgICAgICApWzRdICE9PSA0DQogICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgICAgICAgICBpZDogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudXJsLA0KICAgICAgICAgICAgICAgICAgICBuYW1lOiBpbnN0cnVjdGlvbmFsZWxlbWVudC5sYWJlbCwNCiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudmlzaWJsZSwNCiAgICAgICAgICAgICAgICAgICAgaWNvbjogdGhpcy5pbnN0cnVjVHlwZXNJY29uWw0KICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uYWxlbGVtZW50LmZrX2luc3RydWN0aW9uYWxlbGVtZW50dHlwZS5zcGxpdCgNCiAgICAgICAgICAgICAgICAgICAgICAgICIvIg0KICAgICAgICAgICAgICAgICAgICAgIClbNF0gLSAxDQogICAgICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvKys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKG1vZHVsby5zdWJtb2R1bGVzLmxlbmd0aCkgew0KICAgICAgICAgICAgICB2YXIgaW5kZXhjb25jZWl0byA9IDA7DQogICAgICAgICAgICAgIG1vZHVsby5zdWJtb2R1bGVzLmZvckVhY2goKHN1Ym1vZHVsbykgPT4gew0KICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICBpZDogc3VibW9kdWxvLnVybCwNCiAgICAgICAgICAgICAgICAgIG5hbWU6IHN1Ym1vZHVsby5uYW1lbW9kdWxlLA0KICAgICAgICAgICAgICAgICAgdmlzaWJsZTogc3VibW9kdWxvLnZpc2libGUsDQogICAgICAgICAgICAgICAgICBhdmF0YXI6ICJTIiwNCiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnREYXRhLnB1c2goew0KICAgICAgICAgICAgICAgICAgdGV4dDogb2JqZWN0Lm5hbWUsDQogICAgICAgICAgICAgICAgICB2YWx1ZTogb2JqZWN0LmlkLA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChzdWJtb2R1bG8ubW9iaWxlbWVkaWFzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgc3VibW9kdWxvLm1vYmlsZW1lZGlhcy5mb3JFYWNoKChtb2JpbGVtZWRpYSkgPT4gew0KICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgICAgICAgICAgIGlkOiBtb2JpbGVtZWRpYS51cmwsDQogICAgICAgICAgICAgICAgICAgICAgbmFtZTogbW9iaWxlbWVkaWEubGFiZWwsDQogICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogbW9iaWxlbWVkaWEudmlzaWJsZSwNCiAgICAgICAgICAgICAgICAgICAgICBpY29uOiB0aGlzLmZpbGVUeXBlc0ljb25bDQogICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdIC0gMQ0KICAgICAgICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWw0KICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvDQogICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bysrOw0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKHN1Ym1vZHVsby5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICBzdWJtb2R1bG8uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmZvckVhY2goDQogICAgICAgICAgICAgICAgICAgIChpbnN0cnVjdGlvbmFsZWxlbWVudCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZDogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudXJsLA0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubGFiZWwsDQogICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBpbnN0cnVjdGlvbmFsZWxlbWVudC52aXNpYmxlLA0KICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdGhpcy5pbnN0cnVjVHlwZXNJY29uWw0KICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudC5ma19pbnN0cnVjdGlvbmFsZWxlbWVudHR5cGUuc3BsaXQoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iDQogICAgICAgICAgICAgICAgICAgICAgICAgIClbNF0gLSAxDQogICAgICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleHN1Ym1vZHVsbw0KICAgICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvKys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKHN1Ym1vZHVsby5jb25jZXB0cy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgIHN1Ym1vZHVsby5jb25jZXB0cy5mb3JFYWNoKChjb25jZWl0bykgPT4gew0KICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb25jZWl0by51cmwsDQogICAgICAgICAgICAgICAgICAgICAgbmFtZTogY29uY2VpdG8ubmFtZWNvbmNlcHQsDQogICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogY29uY2VpdG8udmlzaWJsZSwNCiAgICAgICAgICAgICAgICAgICAgICBhdmF0YXI6ICJDIiwNCiAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sDQogICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWw0KICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvDQogICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudERhdGEucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgdGV4dDogb2JqZWN0Lm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9iamVjdC5pZCwNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmIChjb25jZWl0by5pbmZvcm1hdGlvbml0ZW1zLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgIGNvbmNlaXRvLmluZm9ybWF0aW9uaXRlbXMuZm9yRWFjaCgoaW5mb2l0ZW0pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb2l0ZW0uZmtfaW5mb3JtYXRpb25pdGVtdHlwZSAhPT0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgQXBpKCkuZGVmYXVsdHMuYmFzZVVSTCArICJpbmZvcm1hdGlvbml0ZW10eXBlLzQvIg0KICAgICAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9pdGVtLm1vYmlsZW1lZGlhcy5mb3JFYWNoKChtb2JpbGVtZWRpYSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbW9iaWxlbWVkaWEudXJsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbW9iaWxlbWVkaWEubGFiZWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBtb2JpbGVtZWRpYS52aXNpYmxlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdGhpcy5maWxlVHlwZXNJY29uWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVtZWRpYS5ma19pZG1lZGlhdHlwZS5zcGxpdCgiLyIpWzRdIC0gMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmNoaWxkcmVuW2luZGV4Y29uY2VpdG9dLmNoaWxkcmVuLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmNlaXRvLmluZm9ybWF0aW9uaXRlbXMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgY29uY2VpdG8uaW5mb3JtYXRpb25pdGVtcy5mb3JFYWNoKChwcm9jZWR1cmUpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlLmZrX2luZm9ybWF0aW9uaXRlbXR5cGUgPT09DQogICAgICAgICAgICAgICAgICAgICAgICAgIEFwaSgpLmRlZmF1bHRzLmJhc2VVUkwgKyAiaW5mb3JtYXRpb25pdGVtdHlwZS80LyINCiAgICAgICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwcm9jZWR1cmUudXJsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb2NlZHVyZS5uYW1laW5mb3JtYXRpb25pdGVtLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IHByb2NlZHVyZS52aXNpYmxlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IHRoaXMuaW5mb3JtYXRpb25JdGVtc0ljb25bMF0sDQogICAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZURhdGFbaW5kZXhtb2R1bG9dLmNoaWxkcmVuWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4c3VibW9kdWxvDQogICAgICAgICAgICAgICAgICAgICAgICAgIF0uY2hpbGRyZW5baW5kZXhjb25jZWl0b10uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmIChjb25jZWl0by5pbnN0cnVjdGlvbmFsZWxlbWVudHMubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgICAgICAgY29uY2VpdG8uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmZvckVhY2goDQogICAgICAgICAgICAgICAgICAgICAgICAoaW5zdHJ1Y3Rpb25hbGVsZW1lbnQpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudXJsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGluc3RydWN0aW9uYWxlbGVtZW50LmxhYmVsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGluc3RydWN0aW9uYWxlbGVtZW50LnZpc2libGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdGhpcy5pbnN0cnVjVHlwZXNJY29uWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25hbGVsZW1lbnQuZmtfaW5zdHJ1Y3Rpb25hbGVsZW1lbnR0eXBlLnNwbGl0KA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLyINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClbNF0gLSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbltpbmRleGNvbmNlaXRvXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QudmlzaWJsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvKys7DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaW5kZXhzdWJtb2R1bG8rKzsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAobW9kdWxvLmNvbmNlcHRzLmxlbmd0aCkgew0KICAgICAgICAgICAgICBpZiAoaW5kZXhzdWJtb2R1bG8gPiAwKSB7DQogICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0byA9IGluZGV4c3VibW9kdWxvOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGluZGV4Y29uY2VpdG8gPSAwOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIG1vZHVsby5jb25jZXB0cy5mb3JFYWNoKChjb25jZWl0bykgPT4gew0KICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICBpZDogY29uY2VpdG8udXJsLA0KICAgICAgICAgICAgICAgICAgbmFtZTogY29uY2VpdG8ubmFtZWNvbmNlcHQsDQogICAgICAgICAgICAgICAgICB2aXNpYmxlOiBjb25jZWl0by52aXNpYmxlLA0KICAgICAgICAgICAgICAgICAgYXZhdGFyOiAiQ0MiLA0KICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLA0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW4ucHVzaChvYmplY3QpOw0KDQogICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50RGF0YS5wdXNoKHsNCiAgICAgICAgICAgICAgICAgIHRleHQ6IG9iamVjdC5uYW1lLA0KICAgICAgICAgICAgICAgICAgdmFsdWU6IG9iamVjdC5pZCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnB1c2gob2JqZWN0KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoY29uY2VpdG8uaW5mb3JtYXRpb25pdGVtcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgIGNvbmNlaXRvLmluZm9ybWF0aW9uaXRlbXMuZm9yRWFjaCgoaW5mb2l0ZW0pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgIGluZm9pdGVtLmZrX2luZm9ybWF0aW9uaXRlbXR5cGUgIT09DQogICAgICAgICAgICAgICAgICAgICAgQXBpKCkuZGVmYXVsdHMuYmFzZVVSTCArICJpbmZvcm1hdGlvbml0ZW10eXBlLzQvIg0KICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICBpbmZvaXRlbS5tb2JpbGVtZWRpYXMuZm9yRWFjaCgobW9iaWxlbWVkaWEpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtb2JpbGVtZWRpYS51cmwsDQogICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG1vYmlsZW1lZGlhLmxhYmVsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBtb2JpbGVtZWRpYS52aXNpYmxlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB0aGlzLmZpbGVUeXBlc0ljb25bDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlbWVkaWEuZmtfaWRtZWRpYXR5cGUuc3BsaXQoIi8iKVs0XSAtIDENCiAgICAgICAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVEYXRhW2luZGV4bW9kdWxvXS5jaGlsZHJlblsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhjb25jZWl0bw0KICAgICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnZpc2libGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ucHVzaChvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoY29uY2VpdG8uaW5mb3JtYXRpb25pdGVtcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgIGNvbmNlaXRvLmluZm9ybWF0aW9uaXRlbXMuZm9yRWFjaCgocHJvY2VkdXJlKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICBwcm9jZWR1cmUuZmtfaW5mb3JtYXRpb25pdGVtdHlwZSA9PT0NCiAgICAgICAgICAgICAgICAgICAgICBBcGkoKS5kZWZhdWx0cy5iYXNlVVJMICsgImluZm9ybWF0aW9uaXRlbXR5cGUvNC8iDQogICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZDogcHJvY2VkdXJlLnVybCwNCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb2NlZHVyZS5uYW1laW5mb3JtYXRpb25pdGVtLA0KICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogcHJvY2VkdXJlLnZpc2libGUsDQogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB0aGlzLmluZm9ybWF0aW9uSXRlbXNJY29uWzBdLA0KICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvDQogICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoY29uY2VpdG8uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgY29uY2VpdG8uaW5zdHJ1Y3Rpb25hbGVsZW1lbnRzLmZvckVhY2goDQogICAgICAgICAgICAgICAgICAgIChpbnN0cnVjdGlvbmFsZWxlbWVudCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZDogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQudXJsLA0KICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogaW5zdHJ1Y3Rpb25hbGVsZW1lbnQubGFiZWwsDQogICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBpbnN0cnVjdGlvbmFsZWxlbWVudC52aXNpYmxlLA0KICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdGhpcy5pbnN0cnVjVHlwZXNJY29uWw0KICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbmFsZWxlbWVudC5ma19pbnN0cnVjdGlvbmFsZWxlbWVudHR5cGUuc3BsaXQoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIi8iDQogICAgICAgICAgICAgICAgICAgICAgICAgIClbNF0gLSAxDQogICAgICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlRGF0YVtpbmRleG1vZHVsb10uY2hpbGRyZW5bDQogICAgICAgICAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvDQogICAgICAgICAgICAgICAgICAgICAgXS5jaGlsZHJlbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC52aXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpbmRleGNvbmNlaXRvKys7DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaW5kZXhtb2R1bG8rKzsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgcHV0VmlzaWJsZSgpIHsNCiAgICAgIHZhciB2bSA9IHRoaXM7DQoNCiAgICAgIHRoaXMudHJlZURhdGEuZm9yRWFjaCgoZWxlbWVudCkgPT4gew0KICAgICAgICBpZiAoDQogICAgICAgICAgZWxlbWVudC52aXNpYmxlID09PSB0cnVlICYmDQogICAgICAgICAgIXRoaXMuc2VsZWN0aW9uLmZpbmQoKGZpbmRFbGVtZW50KSA9PiBmaW5kRWxlbWVudC5pZCA9PT0gZWxlbWVudC5pZCkNCiAgICAgICAgKSB7DQogICAgICAgICAgQXBpKCkNCiAgICAgICAgICAgIC5wYXRjaChlbGVtZW50LmlkKQ0KICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24gKHJlc3Bvc3RhKSB7DQogICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOw0KICAgICAgICAgICAgICBhd2FpdCBPYmplY3Qua2V5cyhhdXgpLmZvckVhY2goKGF0cmlidXRvKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsNCiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ1cmwiKSB7DQogICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsNCiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgew0KICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wdXQoZWxlbWVudC5pZCwgYXV4KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgIGVsZW1lbnQudmlzaWJsZSA9PT0gZmFsc2UgJiYNCiAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5maW5kKChmaW5kRWxlbWVudCkgPT4gZmluZEVsZW1lbnQuaWQgPT09IGVsZW1lbnQuaWQpDQogICAgICAgICkgew0KICAgICAgICAgIEFwaSgpDQogICAgICAgICAgICAucGF0Y2goZWxlbWVudC5pZCkNCiAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgew0KICAgICAgICAgICAgICB2YXIgYXV4ID0gcmVzcG9zdGEuZGF0YTsNCiAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKChhdHJpYnV0bykgPT4gew0KICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7DQogICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgew0KICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0b1swXSArIGF0cmlidXRvWzFdID09PSAiaWQiKSB7DQogICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsNCiAgICAgICAgICAgICAgICAgIGF1eC52aXNpYmxlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICBhd2FpdCBBcGkoKS5wdXQoZWxlbWVudC5pZCwgYXV4KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVsZW1lbnQuY2hpbGRyZW4pICYmIGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoKSB7DQogICAgICAgICAgZWxlbWVudC5jaGlsZHJlbi5mb3JFYWNoKChlbGVtZW50MikgPT4gew0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICBlbGVtZW50Mi52aXNpYmxlID09PSB0cnVlICYmDQogICAgICAgICAgICAgICF0aGlzLnNlbGVjdGlvbi5maW5kKA0KICAgICAgICAgICAgICAgIChmaW5kRWxlbWVudDIpID0+IGZpbmRFbGVtZW50Mi5pZCA9PT0gZWxlbWVudDIuaWQNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgIEFwaSgpDQogICAgICAgICAgICAgICAgLnBhdGNoKGVsZW1lbnQyLmlkKQ0KICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgew0KICAgICAgICAgICAgICAgICAgdmFyIGF1eCA9IHJlc3Bvc3RhLmRhdGE7DQogICAgICAgICAgICAgICAgICBhd2FpdCBPYmplY3Qua2V5cyhhdXgpLmZvckVhY2goKGF0cmlidXRvKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7DQogICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ1cmwiKSB7DQogICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG9bMF0gKyBhdHJpYnV0b1sxXSA9PT0gImlkIikgew0KICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICBhdXgudmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KGVsZW1lbnQyLmlkLCBhdXgpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgZWxlbWVudDIudmlzaWJsZSA9PT0gZmFsc2UgJiYNCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZmluZCgNCiAgICAgICAgICAgICAgICAoZmluZEVsZW1lbnQyKSA9PiBmaW5kRWxlbWVudDIuaWQgPT09IGVsZW1lbnQyLmlkDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICBBcGkoKQ0KICAgICAgICAgICAgICAgIC5wYXRjaChlbGVtZW50Mi5pZCkNCiAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbiAocmVzcG9zdGEpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKChhdHJpYnV0bykgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdXhbYXRyaWJ1dG9dKSkgew0KICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgew0KICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInZpc2libGUiKSB7DQogICAgICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgYXdhaXQgQXBpKCkucHV0KGVsZW1lbnQyLmlkLCBhdXgpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlbGVtZW50Mi5jaGlsZHJlbikgJiYgZWxlbWVudDIuY2hpbGRyZW4ubGVuZ3RoKSB7DQogICAgICAgICAgICAgIGVsZW1lbnQyLmNoaWxkcmVuLmZvckVhY2goKGVsZW1lbnQzKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgZWxlbWVudDMudmlzaWJsZSA9PT0gdHJ1ZSAmJg0KICAgICAgICAgICAgICAgICAgIXRoaXMuc2VsZWN0aW9uLmZpbmQoDQogICAgICAgICAgICAgICAgICAgIChmaW5kRWxlbWVudDMpID0+IGZpbmRFbGVtZW50My5pZCA9PT0gZWxlbWVudDMuaWQNCiAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIEFwaSgpDQogICAgICAgICAgICAgICAgICAgIC5wYXRjaChlbGVtZW50My5pZCkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24gKHJlc3Bvc3RhKSB7DQogICAgICAgICAgICAgICAgICAgICAgdmFyIGF1eCA9IHJlc3Bvc3RhLmRhdGE7DQogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgT2JqZWN0LmtleXMoYXV4KS5mb3JFYWNoKChhdHJpYnV0bykgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidXJsIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG9bMF0gKyBhdHJpYnV0b1sxXSA9PT0gImlkIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICBhdXgudmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50My5pZCwgYXV4KTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgIGVsZW1lbnQzLnZpc2libGUgPT09IGZhbHNlICYmDQogICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5maW5kKA0KICAgICAgICAgICAgICAgICAgICAoZmluZEVsZW1lbnQzKSA9PiBmaW5kRWxlbWVudDMuaWQgPT09IGVsZW1lbnQzLmlkDQogICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICBBcGkoKQ0KICAgICAgICAgICAgICAgICAgICAucGF0Y2goZWxlbWVudDMuaWQpDQogICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIChyZXNwb3N0YSkgew0KICAgICAgICAgICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF1eFthdHJpYnV0b10pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvID09PSAidmlzaWJsZSIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50My5pZCwgYXV4KTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShlbGVtZW50My5jaGlsZHJlbikgJiYNCiAgICAgICAgICAgICAgICAgIGVsZW1lbnQzLmNoaWxkcmVuLmxlbmd0aA0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgZWxlbWVudDMuY2hpbGRyZW4uZm9yRWFjaCgoZWxlbWVudDQpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ0LnZpc2libGUgPT09IHRydWUgJiYNCiAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5zZWxlY3Rpb24uZmluZCgNCiAgICAgICAgICAgICAgICAgICAgICAgIChmaW5kRWxlbWVudDQpID0+IGZpbmRFbGVtZW50NC5pZCA9PT0gZWxlbWVudDQuaWQNCiAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgIEFwaSgpDQogICAgICAgICAgICAgICAgICAgICAgICAucGF0Y2goZWxlbWVudDQuaWQpDQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihhc3luYyBmdW5jdGlvbiAocmVzcG9zdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF1eCA9IHJlc3Bvc3RhLmRhdGE7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE9iamVjdC5rZXlzKGF1eCkuZm9yRWFjaCgoYXRyaWJ1dG8pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdXhbYXRyaWJ1dG9dKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInVybCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG9bMF0gKyBhdHJpYnV0b1sxXSA9PT0gImlkIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF1eFthdHJpYnV0b107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHJpYnV0byA9PT0gInZpc2libGUiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXgudmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50NC5pZCwgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1eCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50NC52aXNpYmxlID09PSBmYWxzZSAmJg0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLmZpbmQoDQogICAgICAgICAgICAgICAgICAgICAgICAoZmluZEVsZW1lbnQ0KSA9PiBmaW5kRWxlbWVudDQuaWQgPT09IGVsZW1lbnQ0LmlkDQogICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICBBcGkoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnBhdGNoKGVsZW1lbnQ0LmlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgZnVuY3Rpb24gKHJlc3Bvc3RhKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdXggPSByZXNwb3N0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBPYmplY3Qua2V5cyhhdXgpLmZvckVhY2goKGF0cmlidXRvKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXV4W2F0cmlidXRvXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ1cmwiKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXV4W2F0cmlidXRvXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0cmlidXRvWzBdICsgYXRyaWJ1dG9bMV0gPT09ICJpZCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdXhbYXRyaWJ1dG9dOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXRyaWJ1dG8gPT09ICJ2aXNpYmxlIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV4LnZpc2libGUgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IEFwaSgpLnB1dChlbGVtZW50NC5pZCwgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1eCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICBhd2FpdCBzZXRUaW1lb3V0KGFzeW5jIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdm0uJGVtaXQoImNsb3NlX29yX3NhdmUiLCAic2F2ZSIpOw0KICAgICAgfSwgMzAwKTsNCiAgICB9LA0KDQogICAgZGVzZWxlY3RBbGwoKSB7DQogICAgICB0aGlzLnNlbGVjdGlvbiA9IFtdOw0KICAgIH0sDQogICAgc2VsZWN0QWxsKCkgew0KICAgICAgdmFyIHZtID0gdGhpczsNCiAgICAgIHRoaXMuc2VsZWN0aW9uID0gW107DQogICAgICB0aGlzLnRyZWVEYXRhLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgdm0uc2VsZWN0aW9uLnB1c2goZWxlbWVudCk7DQogICAgICAgIGlmIChlbGVtZW50LmNoaWxkcmVuKSB7DQogICAgICAgICAgZWxlbWVudC5jaGlsZHJlbi5mb3JFYWNoKChlbGVtZW50MikgPT4gew0KICAgICAgICAgICAgdm0uc2VsZWN0aW9uLnB1c2goZWxlbWVudDIpOw0KICAgICAgICAgICAgaWYgKGVsZW1lbnQyLmNoaWxkcmVuKSB7DQogICAgICAgICAgICAgIGVsZW1lbnQyLmNoaWxkcmVuLmZvckVhY2goKGVsZW1lbnQzKSA9PiB7DQogICAgICAgICAgICAgICAgdm0uc2VsZWN0aW9uLnB1c2goZWxlbWVudDMpOw0KICAgICAgICAgICAgICAgIGlmIChlbGVtZW50My5jaGlsZHJlbikgew0KICAgICAgICAgICAgICAgICAgZWxlbWVudDMuY2hpbGRyZW4uZm9yRWFjaCgoZWxlbWVudDQpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdm0uc2VsZWN0aW9uLnB1c2goZWxlbWVudDQpOw0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBhc3luYyB2YWxpZGF0ZSgpIHsNCiAgICAgIGF3YWl0IHRoaXMucHV0VmlzaWJsZSgpOw0KICAgICAgYXdhaXQgdGhpcy5yZXNldFZhcmlhYmxlcygpOw0KICAgIH0sDQogICAgcmVzZXQoKSB7DQogICAgICB0aGlzLiRlbWl0KCJjbG9zZV9vcl9zYXZlIiwgImNsb3NlIik7DQogICAgfSwNCiAgICByZXNldFZhbGlkYXRpb24oKSB7DQogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRWYWxpZGF0aW9uKCk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["VisibleDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VisibleDialog.vue","sourceRoot":"src/components/didatic_model","sourcesContent":["<template>\r\n  <v-card>\r\n    <v-card-title style=\"background-color:purple; color:white;\">\r\n      <span class=\"headline\">\r\n        <p>Defina as informações equivalentes ao modelo didático.</p>\r\n      </span>\r\n    </v-card-title>\r\n    <v-row style=\"width : 100%\">\r\n      <v-col cols=\"12\">\r\n        <v-card-text>\r\n          <v-row class=\"ml-2\">\r\n            <v-btn\r\n              color=\"warning\"\r\n              height=\"40px\"\r\n              dark\r\n              x-small\r\n              small\r\n              @click=\"deselectAll()\"\r\n            >Deselecionar tudo</v-btn>\r\n            <v-btn\r\n              class=\"ml-1\"\r\n              color=\"primary\"\r\n              height=\"40\"\r\n              dark\r\n              small\r\n              @click=\"selectAll()\"\r\n            >Selecionar tudo</v-btn>\r\n          </v-row>\r\n\r\n          <v-treeview\r\n            @update:active=\"test\"\r\n            v-model=\"selection\"\r\n            :selection-type=\"'independent'\"\r\n            :items=\"treeData\"\r\n            return-object\r\n            selectable\r\n            selected-color=\"success\"\r\n            open-all\r\n          >\r\n            <template v-slot:prepend=\"{ item }\">\r\n              <v-icon v-if=\"item.icon\">{{ item.icon }}</v-icon>\r\n              <v-avatar v-else color=\"black\" size=\"25\" class=\"mr-2\">\r\n                <span class=\"white--text\" style=\"font-size:0.7em;\">\r\n                  {{\r\n                  item.avatar\r\n                  }}\r\n                </span>\r\n              </v-avatar>\r\n            </template>\r\n          </v-treeview>\r\n        </v-card-text>\r\n      </v-col>\r\n    </v-row>\r\n    <v-card-actions>\r\n      <v-spacer></v-spacer>\r\n      <v-btn color=\"red\" height=\"49\" dark large @click=\"reset()\">\r\n        Cancelar\r\n        <v-icon dark right>mdi-close</v-icon>\r\n      </v-btn>\r\n      <v-btn color=\"success\" height=\"49\" dark large @click=\"validate()\">\r\n        Salvar\r\n        <v-icon dark right>mdi-content-save</v-icon>\r\n      </v-btn>\r\n    </v-card-actions>\r\n    <div class=\"text-center\">\r\n      <v-dialog v-model=\"dialogError\" width=\"500\">\r\n        <v-card>\r\n          <v-card-title class=\"headline red\" primary-title style=\"color:white;\">ALERTA!</v-card-title>\r\n          <v-card-text class=\"mt-3\" style=\"font-size: 1.3em;\">\r\n            {{\r\n            messageError\r\n            }}\r\n          </v-card-text>\r\n          <v-divider></v-divider>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"primary\" text @click=\"dialogError = false\">Ok</v-btn>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-dialog>\r\n    </div>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport Api from \"@/services/Api\";\r\n\r\nexport default {\r\n  name: \"VisibleDialog\",\r\n  props: [\"domain\", \"dialog\"],\r\n  data: () => ({\r\n    valid: true,\r\n    treeData: [],\r\n    selection: [],\r\n    elementData: [],\r\n    dialogError: false,\r\n    messageError: \"\",\r\n    newItems: [],\r\n    checkbox: true,\r\n    informationItemsIcon: [\"mdi-format-list-bulleted\"],\r\n    fileTypesIcon: [\r\n      \"mdi-file-image\",\r\n      \"mdi-file-video\",\r\n      \"mdi-file-music\",\r\n      \"mdi-file-document\",\r\n      \"mdi-link-variant\",\r\n    ],\r\n    instrucTypesIcon: [\r\n      \"mdi-clipboard-text\",\r\n      \"mdi-clipboard-check\",\r\n      \"mdi-account-switch\",\r\n      \"mdi-lightbulb-outline\",\r\n    ],\r\n    mobilemediaTypeLabel: [\"Imagem\", \"Vídeo\", \"Áudio\", \"Texto\", \"Link\"],\r\n  }),\r\n  watch: {\r\n    domain: async function () {\r\n      if (this.domain) {\r\n        this.treeData = [];\r\n        this.selection = [];\r\n        await this.setDomainVariables();\r\n      }\r\n    },\r\n  },\r\n  mounted: async function () {\r\n    if (this.domain) {\r\n      this.treeData = [];\r\n      this.selection = [];\r\n      await this.setDomainVariables();\r\n    }\r\n  },\r\n  methods: {\r\n    test(value) {\r\n      if (value.length) {\r\n        if (value[0].split(\"/\")[5] === \"sub\") {\r\n          this.$emit(\"type\", { type: \"submodulo\", url: value[0] });\r\n        } else {\r\n          this.$emit(\"type\", { type: value[0].split(\"/\")[3], url: value[0] });\r\n        }\r\n      }\r\n    },\r\n    setDomainVariables() {\r\n      this.treeData = [];\r\n      this.elementData.push({\r\n        text: this.domain.nameknowledgedomain,\r\n        value: this.domain.url,\r\n      });\r\n      var indexmodulo = 0;\r\n      if (this.domain.mobilemedias.length) {\r\n        this.domain.mobilemedias.forEach((mobilemedia) => {\r\n          var object = {\r\n            id: mobilemedia.url,\r\n            name: mobilemedia.label,\r\n            visible: mobilemedia.visible,\r\n            icon: this.fileTypesIcon[\r\n              mobilemedia.fk_idmediatype.split(\"/\")[4] - 1\r\n            ],\r\n          };\r\n          this.treeData.push(object);\r\n          if (object.visible) {\r\n            this.selection.push(object);\r\n          }\r\n          indexmodulo++;\r\n        });\r\n      }\r\n      if (this.domain.instructionalelements.length) {\r\n        this.domain.instructionalelements.forEach((instructionalelement) => {\r\n          if (\r\n            instructionalelement.fk_instructionalelementtype.split(\"/\")[4] !== 4\r\n          ) {\r\n            var object = {\r\n              id: instructionalelement.url,\r\n              name: instructionalelement.label,\r\n              visible: instructionalelement.visible,\r\n              icon: this.instrucTypesIcon[\r\n                instructionalelement.fk_instructionalelementtype.split(\"/\")[4] -\r\n                  1\r\n              ],\r\n            };\r\n            this.treeData.push(object);\r\n            if (object.visible) {\r\n              this.selection.push(object);\r\n            }\r\n            indexmodulo++;\r\n          }\r\n        });\r\n      }\r\n      if (Array.isArray(this.domain.modules) && this.domain.modules.length) {\r\n        this.domain.modules.forEach((modulo) => {\r\n          if (modulo.fk_idmodule === null) {\r\n            var indexsubmodulo = 0;\r\n            var object = {\r\n              id: modulo.url,\r\n              name: modulo.namemodule,\r\n              visible: modulo.visible,\r\n              avatar: \"M\",\r\n              children: [],\r\n            };\r\n            this.treeData.push(object);\r\n            this.elementData.push({\r\n              text: object.name,\r\n              value: object.id,\r\n            });\r\n            if (object.visible) {\r\n              this.selection.push(object);\r\n            }\r\n            if (modulo.mobilemedias.length) {\r\n              modulo.mobilemedias.forEach((mobilemedia) => {\r\n                var object = {\r\n                  id: mobilemedia.url,\r\n                  name: mobilemedia.label,\r\n                  visible: mobilemedia.visible,\r\n                  icon: this.fileTypesIcon[\r\n                    mobilemedia.fk_idmediatype.split(\"/\")[4] - 1\r\n                  ],\r\n                };\r\n                this.treeData[indexmodulo].children.push(object);\r\n                if (object.visible) {\r\n                  this.selection.push(object);\r\n                }\r\n                indexsubmodulo++;\r\n              });\r\n            }\r\n\r\n            if (modulo.instructionalelements.length) {\r\n              modulo.instructionalelements.forEach((instructionalelement) => {\r\n                if (\r\n                  instructionalelement.fk_instructionalelementtype.split(\r\n                    \"/\"\r\n                  )[4] !== 4\r\n                ) {\r\n                  var object = {\r\n                    id: instructionalelement.url,\r\n                    name: instructionalelement.label,\r\n                    visible: instructionalelement.visible,\r\n                    icon: this.instrucTypesIcon[\r\n                      instructionalelement.fk_instructionalelementtype.split(\r\n                        \"/\"\r\n                      )[4] - 1\r\n                    ],\r\n                  };\r\n                  this.treeData[indexmodulo].children.push(object);\r\n                  if (object.visible) {\r\n                    this.selection.push(object);\r\n                  }\r\n                  indexsubmodulo++;\r\n                }\r\n              });\r\n            }\r\n\r\n            if (modulo.submodules.length) {\r\n              var indexconceito = 0;\r\n              modulo.submodules.forEach((submodulo) => {\r\n                var object = {\r\n                  id: submodulo.url,\r\n                  name: submodulo.namemodule,\r\n                  visible: submodulo.visible,\r\n                  avatar: \"S\",\r\n                  children: [],\r\n                };\r\n                this.treeData[indexmodulo].children.push(object);\r\n                this.elementData.push({\r\n                  text: object.name,\r\n                  value: object.id,\r\n                });\r\n                if (object.visible) {\r\n                  this.selection.push(object);\r\n                }\r\n\r\n                if (submodulo.mobilemedias.length) {\r\n                  submodulo.mobilemedias.forEach((mobilemedia) => {\r\n                    var object = {\r\n                      id: mobilemedia.url,\r\n                      name: mobilemedia.label,\r\n                      visible: mobilemedia.visible,\r\n                      icon: this.fileTypesIcon[\r\n                        mobilemedia.fk_idmediatype.split(\"/\")[4] - 1\r\n                      ],\r\n                    };\r\n                    this.treeData[indexmodulo].children[\r\n                      indexsubmodulo\r\n                    ].children.push(object);\r\n                    if (object.visible) {\r\n                      this.selection.push(object);\r\n                    }\r\n                    indexconceito++;\r\n                  });\r\n                }\r\n\r\n                if (submodulo.instructionalelements.length) {\r\n                  submodulo.instructionalelements.forEach(\r\n                    (instructionalelement) => {\r\n                      var object = {\r\n                        id: instructionalelement.url,\r\n                        name: instructionalelement.label,\r\n                        visible: instructionalelement.visible,\r\n                        icon: this.instrucTypesIcon[\r\n                          instructionalelement.fk_instructionalelementtype.split(\r\n                            \"/\"\r\n                          )[4] - 1\r\n                        ],\r\n                      };\r\n                      this.treeData[indexmodulo].children[\r\n                        indexsubmodulo\r\n                      ].children.push(object);\r\n                      if (object.visible) {\r\n                        this.selection.push(object);\r\n                      }\r\n                      indexconceito++;\r\n                    }\r\n                  );\r\n                }\r\n\r\n                if (submodulo.concepts.length) {\r\n                  submodulo.concepts.forEach((conceito) => {\r\n                    var object = {\r\n                      id: conceito.url,\r\n                      name: conceito.nameconcept,\r\n                      visible: conceito.visible,\r\n                      avatar: \"C\",\r\n                      children: [],\r\n                    };\r\n                    this.treeData[indexmodulo].children[\r\n                      indexsubmodulo\r\n                    ].children.push(object);\r\n\r\n                    this.elementData.push({\r\n                      text: object.name,\r\n                      value: object.id,\r\n                    });\r\n                    if (object.visible) {\r\n                      this.selection.push(object);\r\n                    }\r\n\r\n                    if (conceito.informationitems.length) {\r\n                      conceito.informationitems.forEach((infoitem) => {\r\n                        if (\r\n                          infoitem.fk_informationitemtype !==\r\n                          Api().defaults.baseURL + \"informationitemtype/4/\"\r\n                        ) {\r\n                          infoitem.mobilemedias.forEach((mobilemedia) => {\r\n                            var object = {\r\n                              id: mobilemedia.url,\r\n                              name: mobilemedia.label,\r\n                              visible: mobilemedia.visible,\r\n                              icon: this.fileTypesIcon[\r\n                                mobilemedia.fk_idmediatype.split(\"/\")[4] - 1\r\n                              ],\r\n                            };\r\n                            this.treeData[indexmodulo].children[\r\n                              indexsubmodulo\r\n                            ].children[indexconceito].children.push(object);\r\n                            if (object.visible) {\r\n                              this.selection.push(object);\r\n                            }\r\n                          });\r\n                        }\r\n                      });\r\n                    }\r\n\r\n                    if (conceito.informationitems.length) {\r\n                      conceito.informationitems.forEach((procedure) => {\r\n                        if (\r\n                          procedure.fk_informationitemtype ===\r\n                          Api().defaults.baseURL + \"informationitemtype/4/\"\r\n                        ) {\r\n                          var object = {\r\n                            id: procedure.url,\r\n                            name: procedure.nameinformationitem,\r\n                            visible: procedure.visible,\r\n                            icon: this.informationItemsIcon[0],\r\n                          };\r\n                          this.treeData[indexmodulo].children[\r\n                            indexsubmodulo\r\n                          ].children[indexconceito].children.push(object);\r\n                          if (object.visible) {\r\n                            this.selection.push(object);\r\n                          }\r\n                        }\r\n                      });\r\n                    }\r\n\r\n                    if (conceito.instructionalelements.length) {\r\n                      conceito.instructionalelements.forEach(\r\n                        (instructionalelement) => {\r\n                          var object = {\r\n                            id: instructionalelement.url,\r\n                            name: instructionalelement.label,\r\n                            visible: instructionalelement.visible,\r\n                            icon: this.instrucTypesIcon[\r\n                              instructionalelement.fk_instructionalelementtype.split(\r\n                                \"/\"\r\n                              )[4] - 1\r\n                            ],\r\n                          };\r\n                          this.treeData[indexmodulo].children[\r\n                            indexsubmodulo\r\n                          ].children[indexconceito].children.push(object);\r\n                          if (object.visible) {\r\n                            this.selection.push(object);\r\n                          }\r\n                        }\r\n                      );\r\n                    }\r\n\r\n                    indexconceito++;\r\n                  });\r\n                }\r\n                indexsubmodulo++;\r\n              });\r\n            }\r\n            if (modulo.concepts.length) {\r\n              if (indexsubmodulo > 0) {\r\n                indexconceito = indexsubmodulo;\r\n              } else {\r\n                indexconceito = 0;\r\n              }\r\n              modulo.concepts.forEach((conceito) => {\r\n                var object = {\r\n                  id: conceito.url,\r\n                  name: conceito.nameconcept,\r\n                  visible: conceito.visible,\r\n                  avatar: \"CC\",\r\n                  children: [],\r\n                };\r\n                this.treeData[indexmodulo].children.push(object);\r\n\r\n                this.elementData.push({\r\n                  text: object.name,\r\n                  value: object.id,\r\n                });\r\n                if (object.visible) {\r\n                  this.selection.push(object);\r\n                }\r\n\r\n                if (conceito.informationitems.length) {\r\n                  conceito.informationitems.forEach((infoitem) => {\r\n                    if (\r\n                      infoitem.fk_informationitemtype !==\r\n                      Api().defaults.baseURL + \"informationitemtype/4/\"\r\n                    ) {\r\n                      infoitem.mobilemedias.forEach((mobilemedia) => {\r\n                        var object = {\r\n                          id: mobilemedia.url,\r\n                          name: mobilemedia.label,\r\n                          visible: mobilemedia.visible,\r\n                          icon: this.fileTypesIcon[\r\n                            mobilemedia.fk_idmediatype.split(\"/\")[4] - 1\r\n                          ],\r\n                        };\r\n                        this.treeData[indexmodulo].children[\r\n                          indexconceito\r\n                        ].children.push(object);\r\n                        if (object.visible) {\r\n                          this.selection.push(object);\r\n                        }\r\n                      });\r\n                    }\r\n                  });\r\n                }\r\n\r\n                if (conceito.informationitems.length) {\r\n                  conceito.informationitems.forEach((procedure) => {\r\n                    if (\r\n                      procedure.fk_informationitemtype ===\r\n                      Api().defaults.baseURL + \"informationitemtype/4/\"\r\n                    ) {\r\n                      var object = {\r\n                        id: procedure.url,\r\n                        name: procedure.nameinformationitem,\r\n                        visible: procedure.visible,\r\n                        icon: this.informationItemsIcon[0],\r\n                      };\r\n                      this.treeData[indexmodulo].children[\r\n                        indexconceito\r\n                      ].children.push(object);\r\n                      if (object.visible) {\r\n                        this.selection.push(object);\r\n                      }\r\n                    }\r\n                  });\r\n                }\r\n\r\n                if (conceito.instructionalelements.length) {\r\n                  conceito.instructionalelements.forEach(\r\n                    (instructionalelement) => {\r\n                      var object = {\r\n                        id: instructionalelement.url,\r\n                        name: instructionalelement.label,\r\n                        visible: instructionalelement.visible,\r\n                        icon: this.instrucTypesIcon[\r\n                          instructionalelement.fk_instructionalelementtype.split(\r\n                            \"/\"\r\n                          )[4] - 1\r\n                        ],\r\n                      };\r\n                      this.treeData[indexmodulo].children[\r\n                        indexconceito\r\n                      ].children.push(object);\r\n                      if (object.visible) {\r\n                        this.selection.push(object);\r\n                      }\r\n                    }\r\n                  );\r\n                }\r\n                indexconceito++;\r\n              });\r\n            }\r\n            indexmodulo++;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    async putVisible() {\r\n      var vm = this;\r\n\r\n      this.treeData.forEach((element) => {\r\n        if (\r\n          element.visible === true &&\r\n          !this.selection.find((findElement) => findElement.id === element.id)\r\n        ) {\r\n          Api()\r\n            .patch(element.id)\r\n            .then(async function (resposta) {\r\n              var aux = resposta.data;\r\n              await Object.keys(aux).forEach((atributo) => {\r\n                if (Array.isArray(aux[atributo])) {\r\n                  delete aux[atributo];\r\n                } else if (atributo === \"url\") {\r\n                  delete aux[atributo];\r\n                } else if (atributo[0] + atributo[1] === \"id\") {\r\n                  delete aux[atributo];\r\n                } else if (atributo === \"visible\") {\r\n                  aux.visible = false;\r\n                }\r\n              });\r\n              await Api().put(element.id, aux);\r\n            });\r\n        } else if (\r\n          element.visible === false &&\r\n          this.selection.find((findElement) => findElement.id === element.id)\r\n        ) {\r\n          Api()\r\n            .patch(element.id)\r\n            .then(async function (resposta) {\r\n              var aux = resposta.data;\r\n              await Object.keys(aux).forEach((atributo) => {\r\n                if (Array.isArray(aux[atributo])) {\r\n                  delete aux[atributo];\r\n                } else if (atributo === \"url\") {\r\n                  delete aux[atributo];\r\n                } else if (atributo[0] + atributo[1] === \"id\") {\r\n                  delete aux[atributo];\r\n                } else if (atributo === \"visible\") {\r\n                  aux.visible = true;\r\n                }\r\n              });\r\n              await Api().put(element.id, aux);\r\n            });\r\n        }\r\n        if (Array.isArray(element.children) && element.children.length) {\r\n          element.children.forEach((element2) => {\r\n            if (\r\n              element2.visible === true &&\r\n              !this.selection.find(\r\n                (findElement2) => findElement2.id === element2.id\r\n              )\r\n            ) {\r\n              Api()\r\n                .patch(element2.id)\r\n                .then(async function (resposta) {\r\n                  var aux = resposta.data;\r\n                  await Object.keys(aux).forEach((atributo) => {\r\n                    if (Array.isArray(aux[atributo])) {\r\n                      delete aux[atributo];\r\n                    } else if (atributo === \"url\") {\r\n                      delete aux[atributo];\r\n                    } else if (atributo[0] + atributo[1] === \"id\") {\r\n                      delete aux[atributo];\r\n                    } else if (atributo === \"visible\") {\r\n                      aux.visible = false;\r\n                    }\r\n                  });\r\n\r\n                  await Api().put(element2.id, aux);\r\n                });\r\n            } else if (\r\n              element2.visible === false &&\r\n              this.selection.find(\r\n                (findElement2) => findElement2.id === element2.id\r\n              )\r\n            ) {\r\n              Api()\r\n                .patch(element2.id)\r\n                .then(async function (resposta) {\r\n                  var aux = resposta.data;\r\n                  await Object.keys(aux).forEach((atributo) => {\r\n                    if (Array.isArray(aux[atributo])) {\r\n                      delete aux[atributo];\r\n                    } else if (atributo === \"url\") {\r\n                      delete aux[atributo];\r\n                    } else if (atributo[0] + atributo[1] === \"id\") {\r\n                      delete aux[atributo];\r\n                    } else if (atributo === \"visible\") {\r\n                      aux.visible = true;\r\n                    }\r\n                  });\r\n\r\n                  await Api().put(element2.id, aux);\r\n                });\r\n            }\r\n\r\n            if (Array.isArray(element2.children) && element2.children.length) {\r\n              element2.children.forEach((element3) => {\r\n                if (\r\n                  element3.visible === true &&\r\n                  !this.selection.find(\r\n                    (findElement3) => findElement3.id === element3.id\r\n                  )\r\n                ) {\r\n                  Api()\r\n                    .patch(element3.id)\r\n                    .then(async function (resposta) {\r\n                      var aux = resposta.data;\r\n                      await Object.keys(aux).forEach((atributo) => {\r\n                        if (Array.isArray(aux[atributo])) {\r\n                          delete aux[atributo];\r\n                        } else if (atributo === \"url\") {\r\n                          delete aux[atributo];\r\n                        } else if (atributo[0] + atributo[1] === \"id\") {\r\n                          delete aux[atributo];\r\n                        } else if (atributo === \"visible\") {\r\n                          aux.visible = false;\r\n                        }\r\n                      });\r\n                      await Api().put(element3.id, aux);\r\n                    });\r\n                } else if (\r\n                  element3.visible === false &&\r\n                  this.selection.find(\r\n                    (findElement3) => findElement3.id === element3.id\r\n                  )\r\n                ) {\r\n                  Api()\r\n                    .patch(element3.id)\r\n                    .then(async function (resposta) {\r\n                      var aux = resposta.data;\r\n                      await Object.keys(aux).forEach((atributo) => {\r\n                        if (Array.isArray(aux[atributo])) {\r\n                          delete aux[atributo];\r\n                        } else if (atributo === \"url\") {\r\n                          delete aux[atributo];\r\n                        } else if (atributo[0] + atributo[1] === \"id\") {\r\n                          delete aux[atributo];\r\n                        } else if (atributo === \"visible\") {\r\n                          aux.visible = true;\r\n                        }\r\n                      });\r\n                      await Api().put(element3.id, aux);\r\n                    });\r\n                }\r\n\r\n                if (\r\n                  Array.isArray(element3.children) &&\r\n                  element3.children.length\r\n                ) {\r\n                  element3.children.forEach((element4) => {\r\n                    if (\r\n                      element4.visible === true &&\r\n                      !this.selection.find(\r\n                        (findElement4) => findElement4.id === element4.id\r\n                      )\r\n                    ) {\r\n                      Api()\r\n                        .patch(element4.id)\r\n                        .then(async function (resposta) {\r\n                          var aux = resposta.data;\r\n                          await Object.keys(aux).forEach((atributo) => {\r\n                            if (Array.isArray(aux[atributo])) {\r\n                              delete aux[atributo];\r\n                            } else if (atributo === \"url\") {\r\n                              delete aux[atributo];\r\n                            } else if (atributo[0] + atributo[1] === \"id\") {\r\n                              delete aux[atributo];\r\n                            } else if (atributo === \"visible\") {\r\n                              aux.visible = false;\r\n                            }\r\n                          });\r\n                          await Api().put(element4.id, {\r\n                            aux,\r\n                          });\r\n                        });\r\n                    } else if (\r\n                      element4.visible === false &&\r\n                      this.selection.find(\r\n                        (findElement4) => findElement4.id === element4.id\r\n                      )\r\n                    ) {\r\n                      Api()\r\n                        .patch(element4.id)\r\n                        .then(async function (resposta) {\r\n                          var aux = resposta.data;\r\n                          await Object.keys(aux).forEach((atributo) => {\r\n                            if (Array.isArray(aux[atributo])) {\r\n                              delete aux[atributo];\r\n                            } else if (atributo === \"url\") {\r\n                              delete aux[atributo];\r\n                            } else if (atributo[0] + atributo[1] === \"id\") {\r\n                              delete aux[atributo];\r\n                            } else if (atributo === \"visible\") {\r\n                              aux.visible = true;\r\n                            }\r\n                          });\r\n                          await Api().put(element4.id, {\r\n                            aux,\r\n                          });\r\n                        });\r\n                    }\r\n                  });\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n      await setTimeout(async function () {\r\n        vm.$emit(\"close_or_save\", \"save\");\r\n      }, 300);\r\n    },\r\n\r\n    deselectAll() {\r\n      this.selection = [];\r\n    },\r\n    selectAll() {\r\n      var vm = this;\r\n      this.selection = [];\r\n      this.treeData.forEach((element) => {\r\n        vm.selection.push(element);\r\n        if (element.children) {\r\n          element.children.forEach((element2) => {\r\n            vm.selection.push(element2);\r\n            if (element2.children) {\r\n              element2.children.forEach((element3) => {\r\n                vm.selection.push(element3);\r\n                if (element3.children) {\r\n                  element3.children.forEach((element4) => {\r\n                    vm.selection.push(element4);\r\n                  });\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    async validate() {\r\n      await this.putVisible();\r\n      await this.resetVariables();\r\n    },\r\n    reset() {\r\n      this.$emit(\"close_or_save\", \"close\");\r\n    },\r\n    resetValidation() {\r\n      this.$refs.form.resetValidation();\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}